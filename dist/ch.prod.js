"use strict";var _payments,_fn_checkout;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RazorPay(){function o(r,i){if(1e4<r)return Materialize.toast("Maximum Limit to Load Money is Rs 10000",3e3),loader.removeFullLoader(),0;var e="UTI-"+(new Date).getTime().toString(36);i.notes={wallet_id:i.contact.substring(3),uti:e};var t=new Razorpay({amount:i.amount});t.createPayment(i),t.on("payment.success",function(e){var t,a,o,s,n;t=r,a=i,o=e.razorpay_payment_id,s=l.attr("data-url"),n={phoneNo:a.contact.substring(3),amount:t,paymentId:o,uti:a.notes.uti},services.ajaxService(n,"post",s).done(function(){LiciousWallet.liProfileWalletBalance().done(function(e){h(e,i)}).fail(function(){f()})}).fail(function(){f()})}),t.on("payment.error",function(e){Materialize.toast("Something Went wrong",3e3),loader.removeFullLoader()})}var e=$(".li-card-details"),t=$(".netbanking"),s=$("#licioius-wallet"),l=$(".payment-container"),n=l.attr("data-email"),r=l.attr("data-mobile"),i=e.find('input[type="submit"]'),d=t.find('input[type="submit"]'),a=($(".upload-money"),$(".lic-wallet-cash")),c=$(".lic-wallet-cash-plus"),p=$(".lic-wallet-container"),u=$(".upload-money-container"),m={creditCardNumber:e.find("#li-card-number"),creditCardName:e.find("#li-card-name"),cardValidity:{creditExpMon:e.find("#li-card-mon"),creditExpYear:e.find("#li-card-year")},creditCardCvv:e.find("#li-card-cvv")},h=function(e){a.text(e.wallet.transactional_balance),c.text(e.wallet.promotional_balance),u.addClass("hide"),p.removeClass("hide"),Materialize.toast("Money added to wallet",3e3),loader.removeFullLoader()},f=function(){Materialize.toast("Something Went wrong",3e3),loader.removeFullLoader()};this.init=function(){e.on("submit",function(e){if(e.preventDefault(),e.stopPropagation(),i.prop("disabled",!0),loader.applyFullLoader(),!s.val())return loader.removeFullLoader(),alert("please enter minimum 1 rupee"),i.prop("disabled",!1),!1;var t=s.val(),a={amount:100*t,currency:"INR",email:n,contact:r,method:"card","card[name]":m.creditCardName.val(),"card[number]":m.creditCardNumber.val(),"card[cvv]":m.creditCardCvv.val(),"card[expiry_month]":m.cardValidity.creditExpMon.val(),"card[expiry_year]":m.cardValidity.creditExpYear.val()};o(t,a),i.prop("disabled",!1)}),t.on("submit",function(e){if(e.preventDefault(),e.stopPropagation(),d.prop("disabled",!0),!s.val())return loader.removeFullLoader(),alert("please enter minimum 1 rupee"),d.prop("disabled",!1),!1;loader.applyFullLoader();var t=s.val(),a={amount:100*t,currency:"INR",email:n,contact:r,notes:{},method:"netbanking",bank:$("#netBankAvailableOptions").val()};o(t,a),d.prop("disabled",!1)})}}function Profile(){var e=$(".upload-money"),t=$(".lic-wallet-container"),a=$(".upload-money-container"),o=$(".payment-options").children(),s=($(".payment-container").children(),$('input[name="walletAmount"]')),n=($(".payment-container").attr("data-mobile"),$(".lic-wallet-cash")),r=$(".lic-wallet-cash-plus"),i=$(".prof-lic-wallet"),l=$("#licioius-wallet"),d={creditCardNumber:$("#li-card-number"),cvvNumber:$("#li-card-cvv"),monthValue:$("#li-card-mon"),yearValue:$("#li-card-year"),submitCard:$('.submit-card input[type="submit"]'),creditFormSubmit:$(".li-card-details")};$(".lic-card-cancel").on("click",function(){a.addClass("hide"),t.removeClass("hide")});var c=function(){resetWalletPaymentDetails.clearLiContainer(),LiciousWallet.liProfileWalletBalance().done(function(e){loader.removeFullLoader(),n.text(e.wallet.transactional_balance),r.text(e.wallet.promotional_balance)}).fail(function(e){loader.removeFullLoader(),Materialize.toast("Something Went wrong",3e3),fn_main.hideloader()})};this.uploadMoney=function(){e.on("click",function(e){e.stopPropagation(),resetWalletPaymentDetails.resetCreditCardForm(),resetWalletPaymentDetails.resestNetbankingForm(),t.addClass("hide"),a.removeClass("hide")})},window.location.href.includes("#lic-wallet")&&c(),this.bindPaymentOptions=function(){o.on("click",function(e){e.stopPropagation(),resetWalletPaymentDetails.resestNetbankingForm(),resetWalletPaymentDetails.resetCreditCardForm(),o.removeClass("selected-button"),$(this).addClass("selected-button"),resetWalletPaymentDetails.resestNetbankingForm(),resetWalletPaymentDetails.resetCreditCardForm(),$(this).hasClass("payment-option-1")?($(".li-card-details").removeClass("hide"),$(".netbanking").addClass("hide")):($(".li-card-details").addClass("hide"),$(".netbanking").removeClass("hide"))}),s.change(function(e){e.preventDefault(),l.val($(this).val())}),i.on("click",function(){loader.applyFullLoader(),c()}),l.keyup(function(){resetWalletPaymentDetails.resetRadioButton()})},this.creditCardValidations=function(){d.cvvNumber.blur(function(e){CCValdiation.validateCreditCardCvv($(this).val())||($(this).val(""),$(this).attr("placeholder","enter valid cvv"))}),d.creditCardNumber.blur(function(e){e.stopPropagation(),e.preventDefault(),CCValdiation.validateCreditCardNumber($(this).val())||($(this).val(""),$(this).attr("placeholder","enter a valid card number"))}),d.monthValue.blur(function(e){CCValdiation.validateCreditCardMon($(this).val())||($(this).val(""),$(this).attr("placeholder","enter valid month"))}),d.yearValue.blur(function(e){CCValdiation.validateCreditCardYear($(this).val())||($(this).val(""),$(this).attr("placeholder","enter valid year"))})},this.init=function(){this.uploadMoney(),this.bindPaymentOptions(),this.creditCardValidations()}}function codEligible(){var e=$(".set-finalPay").data("val");fn.checkout_oos.ajaxForm({orderTotal:e},"POST","/user/check-cod-eligibility").done(function(e){e=JSON.parse(e),e.card_on_delivery.status,e.cod.status,1==e.card_on_delivery.status&&$(".CODTAB").addClass("cursor-text"),fn.codEligible=e.card_on_delivery.status,fn.codEligibleMsg=e.card_on_delivery.message})}var _createClass=function(){function o(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},LiciousWallet=function(){var a=$(".payment-container").attr("data-mobile"),o=$(".prof-lic-wallet");return{liProfileWalletBalance:function(){var e={phone:a.substring(3)},t=o.attr("data-url");return services.ajaxService(e,"post",t)}}}(),loader=function(){var e=$(".li-main-container");return{applyFullLoader:function(){e.addClass("body-bg-loader2")},removeFullLoader:function(){e.removeClass("body-bg-loader2")}}}();$(document).ready(function(){razorPay=new RazorPay,razorPay.init()});var services=function(){var o={"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")};return{ajaxService:function(e,t,a){return $.ajax({url:a,type:t,data:e,timeout:2e4,headers:o})}}}(),SOURCE="website",subProgramId="",loyaltyPayableAmount=0,total_shipments=0,present_shipment=0,ship_slotId=0,slot_lock=[],slot_lock_dates=[],PAYMENTRAZORPAYOBJECT={},li=void 0,date=void 0,ship_id=void 0,time=void 0,apply_coupon_title="Have a coupon/referral code? Apply",is_cancel_button_pressed=!1,analyticsAttributes={source:"post_order",state:"",substate:"",shipment_id:"",shipment_type:"",split:"",city:"",hub:"",user_type:"",item_count:"",item_list:"",category_list:"",amount:"",discount:""},checkout_flow=function(){return null!==sessionStorage.getItem("checkout_flow")&&""!==sessionStorage.getItem("checkout_flow")?sessionStorage.getItem("checkout_flow"):"old_checkout"},branchEventData=[],renderCheckoutLoyaltyItem=function(e){document.querySelector(".co-ll-item-placeholder").innerHTML='\n    <input id="program_id" type="number" value="'+e.program_id+'" hidden>\n    <input id="subprogram_id" type="number" value="'+e.subprogram_id+'" hidden>\n    <div class="co-ll-item">\n      <img src="/img/loyalty_licious_logo.svg" class="co-ll-item-licious-logo">\n      <div class="co-ll-item-separator"></div>\n      <div class="right-section">\n        <div class="co-ll-info">\n          <div class="co-ll-sub-program">'+e.subprogram_name+'</div>\n          <div class="co-ll-price">\n            '+(e.discounted_price!==e.price?'\n              <span class="co-ll-selling-price" value="'+e.discounted_price+'">&#8377 '+e.discounted_price+'</span>\n              <span class="co-ll-marked-price" value="'+e.price+'">&#8377 '+e.price+"</span>":'<span class="co-ll-selling-price" value="'+e.discounted_price+'">&#8377 '+e.price+"</span>")+'\n          </div>\n        </div>\n        <div class="right">\n          <div class="remove-co-ll-item"></div>\n        </div>\n      </div>\n    </div>\n  ',document.querySelector(".remove-co-ll-item").addEventListener("click",function(){var t={name:"",city:"",hub_id:"",total_plans:"",list:"",member_status:"",selected_plan:"",recommended_plan:"",user_type:"",logged_in:"",total_orders:"",oldcart_value:"",total_items:"",olddelivery_charge:"",saved_amount:"",newcart_value:"",newdelivery_charge:"",Checkout_Flow:"old_checkout"},e=$(".co-ll-sub-program").html()+", "+$(".co-ll-selling-price").attr("value").toString()+", "+($(".co-ll-marked-price").length?$(".co-ll-marked-price").attr("value").toString():"0");t.name=fn_ll.loyalty_plan_name,t.city=fn_ll.getCityFromLS(),t.hub_id=fn_ll.getHubFromLS(),t.total_plans=fn_ll.getterLS("loyalty_total_plans"),t.list="slot",t.member_status=fn_ll.loyalty_banners_obj.member_status,t.selected_plan=e,t.recommended_plan=fn_ll.getterLS("loyalty_recommended"),t.user_type=fn_ll.getUserTypeFromLS(),t.logged_in=fn_ll.getLoginStatus(),t.total_orders=fn_ll.getTotalOrdersFromLS(),t.oldcart_value=fn_ll.loyalty_cart_value,t.total_items=fn_ll.getterLS("total_items"),t.olddelivery_charge=fn_ll.loyalty_delivery_charges,t.saved_amount=fn_ll.getterLS("saved_amount"),fn_home.ajaxForm({program_id:$("#program_id").val(),subprogram_id:$("#subprogram_id").val()},"POST","/loyalty/remove-loyalty").done(function(e){200===(e=JSON.parse(e)).statusCode&&(document.querySelector(".co-ll-item-placeholder").innerHTML="",document.querySelector(".mc-ll-item-placeholder").innerHTML="",fn_checkout.getShipments("remove").then(function(){t.newcart_value=fn_ll.loyalty_cart_value,t.newdelivery_charge=fn_ll.loyalty_delivery_charges,fn_ll.sendAnalyticsData("removeplan_loyaltyslot",_extends({},t,{source:"loyalty"})),localStorage.setItem("cartHasLoyalty",!1)}))}).fail(function(){console.log("res")}).always(function(){})})},renderCartLoyaltyItem=function(e){document.querySelector(".mc-ll-item-placeholder").innerHTML='\n    <input id="program_id" type="number" value="'+e.program_id+'" hidden>\n    <input id="subprogram_id" type="number" value="'+e.subprogram_id+'" hidden>\n    <div class="mc-ll-item">\n      <div class="mc-ll-item-top">\n        <img src="/img/loyalty_licious_logo.svg" class="mc-ll-item-licious-logo">\n        <div class="remove-mc-ll-item"></div>\n      </div>\n      <div class="mc-ll-item-bottom">\n        <div class="float-left">\n          <span class="mc-ll-sub-program">'+e.subprogram_name+"</span>\n          "+(e.discounted_price!==e.price?'\n            <span class="mc-ll-selling-price" value="'+e.discounted_price+'">&#8377 '+e.discounted_price+'</span>\n            <span class="mc-ll-marked-price" value="'+e.price+'">&#8377 '+e.price+"</span>":'<span class="mc-ll-selling-price" value="'+e.price+'">&#8377 '+e.price+" </span>")+' \n        </div>\n        <div class="float-right">\n          <span class="mc-ll-change-plan">CHANGE PLAN\n            <img src="/img/arrow.png" class="mc-ll-dropdown"></img>\n          </span> \n        </div>\n      </div>\n    </div>\n  ',document.querySelector(".mc-ll-change-plan").addEventListener("click",function(){$("#cart-ll").show(),document.querySelector("#loyalty-plans").className="show";var a=new HandleLoyaltyPlans,o=new LoyaltyBanners;document.body.addEventListener("change",function(e){a.handlePlanChange.call(a,e,!0)}),a.getLoyaltyPlans.call(a,!0),document.getElementById("loyalty-plans").className="show",$(".buy_plan").attr("id","modify-plan"),$(".buy_plan button").on("click",function(e){var t;document.getElementById("loyalty-plans").className="hide",a.addLoyalty.call(a),"modify-plan"===$(".buy_plan").attr("id")&&(t=a.getPlanDetailText.call(a,a.getCheckedPlan.call(a)),fn_ll.sendAnalyticsData("modifyplan_loyaltycart",_extends({},fn_ll.loyalty_banners_obj,fn_ll.loyalty_cart_obj,{source:"loyalty",old_plan:localStorage.getItem("loyalty_cartflow"),new_plan:t,list:"cart"})),localStorage.setItem("loyalty_cartflow",t)),$("#cart-ll").hide()}),document.body.addEventListener("change",function(e){a.handlePlanChange.call(a,e,!0)}),$(".close-loyalty-icon").on("click",function(e){document.getElementById("loyalty-plans").className="hide",$("#cart-ll").hide()}),$("#cart-ll").on("click",function(){document.getElementById("loyalty-plans").className="hide",$("#cart-ll").hide()}),o.getHomePageAPIData().done(function(e){var t=JSON.parse(e);t.data.is_subscribed||o.renderPopupBenefits(t.data,"mc")}),delete fn_ll.loyalty_banners_obj.banner_url,delete fn_ll.loyalty_banners_obj.position,fn_ll.sendAnalyticsData("changeplan_loyaltycart",_extends({},fn_ll.loyalty_banners_obj,fn_ll.loyalty_cart_obj,{source:"loyalty",selected_plan:localStorage.getItem("loyalty_cartflow"),list:"cart"}))}),document.querySelector(".remove-mc-ll-item").addEventListener("click",function(){fn_home.ajaxForm({program_id:$("#program_id").val(),subprogram_id:$("#subprogram_id").val()},"POST","/loyalty/remove-loyalty").done(function(e){var t,a;200===JSON.parse(e).statusCode&&(t=_defineProperty({name:"",city:"",hub_id:"",total_plans:"",list:"",member_status:"",selected_plan:"",recommended_plan:"",user_type:"",logged_in:"",total_orders:"",oldcart_value:"",total_items:"",olddelivery_charge:"",saved_amount:"",newcart_value:"",newdelivery_charge:"",pr_totalorders:""},"pr_totalorders",""),a=$(".mc-ll-sub-program").html()+", "+$(".mc-ll-selling-price").attr("value").toString()+", "+($(".mc-ll-marked-price").length?$(".mc-ll-marked-price").attr("value").toString():"0"),t.name=fn_ll.loyalty_plan_name,t.city=fn_ll.getCityFromLS(),t.hub_id=fn_ll.getHubFromLS(),t.total_plans=fn_ll.getterLS("loyalty_total_plans"),t.list="slot",t.member_status=fn_ll.loyalty_banners_obj.member_status,t.selected_plan=a,t.recommended_plan=fn_ll.getterLS("loyalty_recommended"),t.user_type=fn_ll.getUserTypeFromLS(),t.logged_in=fn_ll.getLoginStatus(),t.total_orders=fn_ll.getTotalOrdersFromLS(),t.oldcart_value=fn_ll.loyalty_cart_value,t.total_items=fn_ll.loyalty_total_items,t.olddelivery_charge=fn_ll.loyalty_delivery_charges,t.saved_amount=fn_ll.loyalty_saved_amount,t.pr_totalsavedvalue=fn_ll.loyalty_banners_obj.pr_totalsavedvalue,t.pr_totalorders=fn_ll.loyalty_banners_obj.pr_totalorders,document.querySelector(".mc-ll-item-placeholder").innerHTML="",$(".mc-ll-top-banner-placeholder").hide(),$(".li-crossell-wrapper").css("box-shadow","0 0 13px 0 rgba(0, 0, 0, 0.14)"),(window.location.href.includes("/favourite-items")||window.location.href.includes("/past-orders"))&&fn_home.quickCheckout(),fn_cart.miniCart().then(function(e){t.newcart_value=fn_ll.loyalty_cart_value,t.newdelivery_charge=fn_ll.loyalty_delivery_charges,fn_ll.sendAnalyticsData("removeplan_loyaltycart",_extends({},t,{source:"loyalty"})),localStorage.setItem("cartHasLoyalty",!1)}))}).fail(function(){console.log("res")}).always(function(){})})},sendAnalyticsData=function(e,t){var a=arguments.length<=1||void 0===t?{}:t,o={};switch(e){case"order_status_help":case"order_status_view_bill":case"order_status_view_banner":o=_extends({},analyticsAttributes,a);break;case"order_status_pay":o=_extends({},analyticsAttributes,a)}clevertap.event.push(e,o),ga("send",{hitType:"event",eventCategory:"post_order",eventAction:e,eventLabel:JSON.stringify(o)})},changeStateForAnalytics=function(e,t){5!=t?(analyticsAttributes.state=e[t-1].status_message,analyticsAttributes.substate=e[t-1].message):(analyticsAttributes.state="Rejected",analyticsAttributes.substate="Rejected")},mapAttributesForAnalytics=function(e,t){var a=e.shipment_stages,o=e.state_id,s=e.order_id,n=e.shipment_items;changeStateForAnalytics(a,o),"order-shipments"===t&&(analyticsAttributes.shipment_id=s,null!==e.express&&""!==e.express&&(analyticsAttributes.shipment_type="1"===e.express?"Express":"Scheduled"),analyticsAttributes.shipment_type="1"==e.express?"Express":"Scheduled",void 0!==n&&0<n.length&&(analyticsAttributes.split=n[0].is_split,analyticsAttributes.item_count=n.length.toString(),analyticsAttributes.item_list=n.reduce(function(e,t){return null!==t.product_name&&""!==t.product_name.trim()&&e.push(t.product_name),e},[]).join(),analyticsAttributes.category_list=n.reduce(function(e,t){var a;return null!=t.category_list&&""!==t.category_list.trim()&&(a=t.category_list.split(","),e.push(a)),e},[]).join(),null!==e.amount&&(null!==e.amount.total&&(analyticsAttributes.amount=e.amount.total.toString()),null!==e.amount.split&&"undefined"!==e.amount.split&&0<e.amount.split.length&&e.amount.split.map(function(e){"Discount"===e.attribute&&null!==e.value&&(analyticsAttributes.discount=e.value.toString())})),null!==localStorage.getItem("user_type")&&""!=localStorage.getItem("user_type")&&(analyticsAttributes.user_type=localStorage.getItem("user_type"))),null!==localStorage.getItem("city")&&null!==localStorage.getItem("hub")&&(analyticsAttributes.city=localStorage.getItem("city"),analyticsAttributes.hub=localStorage.getItem("hub")))},parseJSON=function(e){if(!e)return{};try{return JSON.parse(e)}catch(e){return{}}},stringifyJSON=function(e){if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}},redirectToOrderStatusPage=function(e){fn_main.showloader(),setTimeout(function(){fn_main.hideloader(),window.location.href=window.location.origin+"/order-status/"+e},3e3)},parsePushEEPurchaseEvent=function(e){var t=e.product_names,s=e.product_ids,n=e.prices,r=e.pr_qty,i=e.currency,l=e.order_id,d=e.transactionId,c=e.cart_value,p=e.delivery_type,u=e.delivery_slots,m=e.address_id,h=e.coupon_used;e.charged;try{var a=function(){var a=[],e={};try{e=JSON.parse(localStorage.getItem("allitem"))}catch(e){window.dataLayer&&window.dataLayer.push({event:"debug-charged","ga-category":"debug-charged-allitem-notpresent","ga-action":"Logging debug charged","ga-label":"allitem not present in cache, I will fail"})}var o=e.category_id?e.category_id.split(",").reduce(function(e,t){return""!==t.trim()&&e.push(t.trim()),e},[]):[];return $.map(t,function(e,t){a.push({order_id:l,item_name:e,item_id:s[t],id:s[t],name:e,price:Number(n[t])/Number(r[t]),quantity:Number(r[t]),currency:i,index:t,item_category:o[t]})}),{v:{products:a,actionField:{id:d,affiliation:"website",value:Number(c),revenue:Number(c),action:"purchase",ShipmentIDs:localStorage.getItem("shipmentCount"),ShipmentTypes:p,ShipmentTime:u,AddressID:m,currency:i,coupon:h}}}}();if("object"==_typeof(a))return a.v}catch(e){return{}}},paymentStatusApiCall=function(t,e){var o=arguments.length<=1||void 0===e?{}:e;return new Promise(function(a,e){fn_main.showloader(),fn_home.ajaxForm(t,"POST","/checkout/update-payment-status-v2").done(function(e){fn_main.hideloader();var t=parseJSON(e);"success"!==t.statusMessage||"captured"!==t.data.payment_status&&"created"!==t.data.payment_status||fn_home.addDeviceData(),a(_extends({},t,{orderDetailsRes:o}))}).fail(function(e){a(e),fn_main.hideloader()})})},loyaltyPaymentStatusApiCall=function(t,e){var o=arguments.length<=1||void 0===e?{}:e;return fn_main.showloader(),new Promise(function(a,e){fn_home.ajaxForm(t,"POST","/loyalty/update-payment-status").done(function(e){var t=parseJSON(e);a(_extends({},t,{orderDetailsRes:o}))}).fail(function(e){a(e)}).always(function(){fn_main.hideloader()})})},triggerPaymentStatusApi=function(e,t,a,o){var s=e.razorpay_payment_id,n={order_id:a.order_id,payment:{type:"razorpay",id:s,amount:parseInt(o,10)/100,status:"",failed_reason:""},secondry_action:""};return e.error?(n.payment.status="ERROR",n.payment.failed_reason=t.code,n.secondry_action="CANCELLED"):(n.payment.status="SUCCESS",n.payment.failed_reason="",n.secondry_action=""),(void 0!==a.loyalty_details?loyaltyPaymentStatusApiCall:paymentStatusApiCall)(n)},pushEEPurchases=function(e){try{window.dataLayer&&window.dataLayer.push({event:"charged",ecommerce:{purchase:{actionField:e.actionField,products:e.products}}})}catch(e){}},openRazorpayWithDetailsHelper=function(e,b,o,k){var s=$(".payment-cta").find(".init-pay");b.orderDetails&&b.orderDetails.shipment_order_ids?PAYMENTRAZORPAYOBJECT.notes={parent_order_id:b.order_id,shipment_order_ids:JSON.stringify(b.orderDetails.shipment_order_ids),receipt:b.receipt}:PAYMENTRAZORPAYOBJECT.notes={parent_order_id:b.order_id,receipt:b.receipt},s.addClass("disabled"),fn_checkout.razorPay.emit("payment.resume");var n=e.method;"upi"==n&&(fn_checkout.payments.upiTimer(300,$(".upi-timer")),$(".upi-loader-container").addClass("show"),$(".li-checkout-container").hide()),fn_checkout.razorPay.on("payment.success",function(v){var y;s.removeClass("disabled"),void 0===b.loyalty_details&&function(){var a=b.order_id,e=b.address_id,t=b.orderDetails||{},o=t.cart_value,s=t.discount_amount,n=t.currency,r=t.product_ids,i=t.product_names,l=t.prices,d=t.delivery_type,c=t.delivery_slots,p=t.hub_id,u=parseFloat(localStorage.getItem("wallet_used")),m=localStorage.getItem("coupon_used"),h=(localStorage.getItem("method"),localStorage.getItem("pay_source")),f=fn_ll.getterSS("customer_type"),_={Source:"Purchase","Total Amount":Number(o),"Coupon Name":m,"Coupon Type":localStorage.getItem("coupon_type"),"City Name":localStorage.getItem("city_name"),"Hub ID":p,Discount:s,"Licious wallet Amount":u,"Charged ID":a,Currency:n,"Payment Method":h,"Product ID":r?r.toString():"","Product Name":i?i.toString():"","Category ID":JSON.parse(localStorage.getItem("allitem")).category_id,Price:l?l.toString():"",Quantity:localStorage.getItem("product_quantity"),ShipmentIDs:localStorage.getItem("shipmentCount"),ShipmentTypes:d,ShipmentTime:c,AddressID:e,"Transaction ID":v.razorpay_payment_id,Checkout_Flow:checkout_flow(),user_type:f};fn_main.assignIncomingSource(_),fn_home.sendBranchChargedEvent(_,a),Number(o),localStorage.getItem("city_name"),ga("ecommerce:addTransaction",{id:a,revenue:Number(o)}),y=(y=localStorage.getItem("product_quantity")).split(","),$.map(i,function(e,t){ga("ecommerce:addItem",{id:a,name:e,sku:r[t],price:l[t],quantity:y[t]})});var g="false"===localStorage.getItem("pay-later-scenario");(!k||k&&g)&&(window.dataLayer&&window.dataLayer.push({event:"debug-charged","ga-category":"debug-charged","ga-action":"Logging debug charged","ga-label":b.orderDetails?JSON.stringify(b.orderDetails):"orderDetails not available"}),pushEEPurchases(parsePushEEPurchaseEvent({product_names:i,product_ids:r,prices:l,pr_qty:y,currency:n,order_id:a,transactionId:a,cart_value:o,delivery_type:d,delivery_slots:c,address_id:e,coupon_used:m,charged:_}))),fn_cart.gaAddRemoveEvent("Charged","Charged",JSON.stringify(_)),clevertap.event.push("Charged",_)}(),triggerPaymentStatusApi(v,v.error,b,o).then(function(e){void 0!==b.loyalty_details?window.location.href="/loyalty/success":redirectToOrderStatusPage(b.order_id)})}),fn_checkout.razorPay.on("payment.error",function(e){var t={Msg:e.error.description,Status:"Error",hub_id:fn_ll.getterLS("hub_id"),Method:localStorage.getItem("method"),"City Name":localStorage.getItem("city_name"),"Category ID":JSON.parse(localStorage.getItem("allitem")).category_id,Source:""};if(clevertap.event.push("Transaction Failed",t),s.removeClass("disabled"),"upi"==n&&($(".upi-loader-container").removeClass("show"),$(".li-checkout-container").show(),fn_checkout.payments.upiTimer(0,$(".upi-timer"))),e&&"Payment canceled"===e.error.description){if(void 0===b.loyalty_details)return void fn_checkout.payments.activityAfterRazorpaySuccessOrError("paymentFailed",{razorpayResponse:e,error:e.error,orderApiResponse:b,amount:o,isreinitiate:k});var a={order_id:b.order_id,payment:{type:"razorpay",id:"",amount:o,status:"FAILURE",failed_reason:e&&e.error?e.error.description:""},secondry_action:"CANCELLED"};loyaltyPaymentStatusApiCall(a).then(function(){localStorage.setItem("loyaltyPaymentState","retrypurchase_loyalty"),$(".ll-payment-failure-popup").addClass("show"),$(".loc-screen").addClass("show"),$(".ll-pf-retry-button").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId}),$(".ll-pf-alert-close").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId})}).catch(function(){localStorage.setItem("loyaltyPaymentState","retrypurchase_loyalty"),$(".ll-payment-failure-popup").addClass("show"),$(".loc-screen").addClass("show"),$(".ll-pf-retry-button").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId}),$(".ll-pf-alert-close").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId})})}else{e&&"Payment failed"===e.error.description?(a={order_id:b.order_id,payment:{type:"razorpay",id:e.razorpay_payment_id,amount:o,status:"FAILURE",failed_reason:e&&e.error?e.error.description:""},secondry_action:""},void 0!==b.loyalty_details?loyaltyPaymentStatusApiCall(a).then(function(){localStorage.setItem("loyaltyPaymentState","retrypurchase_loyalty"),$(".ll-payment-failure-popup").addClass("show"),$(".loc-screen").addClass("show"),$(".ll-pf-retry-button").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId}),$(".ll-pf-alert-close").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId})}).catch(function(){localStorage.setItem("loyaltyPaymentState","retrypurchase_loyalty"),$(".ll-payment-failure-popup").addClass("show"),$(".loc-screen").addClass("show"),$(".ll-pf-retry-button").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId}),$(".ll-pf-alert-close").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId})}):paymentStatusApiCall(a).then(function(){redirectToOrderStatusPage(b.order_id)}).catch(function(){redirectToOrderStatusPage(b.order_id)})):(a={order_id:b.order_id,payment:{type:"razorpay",id:e.razorpay_payment_id,amount:o,status:"FAILURE",failed_reason:e&&e.error?e.error.description:""},secondry_action:""},void 0!==b.loyalty_details?loyaltyPaymentStatusApiCall(a).then(function(){localStorage.setItem("loyaltyPaymentState","retrypurchase_loyalty"),$(".ll-payment-failure-popup").addClass("show"),$(".loc-screen").addClass("show"),$(".ll-pf-retry-button").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId}),$(".ll-pf-alert-close").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId})}).catch(function(){localStorage.setItem("loyaltyPaymentState","retrypurchase_loyalty"),$(".ll-payment-failure-popup").addClass("show"),$(".loc-screen").addClass("show"),$(".ll-pf-retry-button").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId}),$(".ll-pf-alert-close").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId})}):paymentStatusApiCall(a).then(function(){fn_checkout.payments.activityAfterRazorpaySuccessOrError("paymentFailed",{razorpayResponse:e,error:e.error,orderApiResponse:b,amount:o,isreinitiate:k})}).catch(function(){fn_checkout.payments.activityAfterRazorpaySuccessOrError("paymentFailed",{razorpayResponse:e,error:e.error,orderApiResponse:b,amount:o,isreinitiate:k})}))}})},openPaypalWithDetails=function(e,t,a){var o,s=e.payments,n=0,r=s.findIndex(function(e){return"paypal"===e.type});-1!==r&&(n=Number(s[r].amount_to_deduct_paise),localStorage.setItem("paypal_order",JSON.stringify(e)),localStorage.setItem("paypal_isreinitiate",JSON.stringify(a)),localStorage.setItem("paypal_amount",n),e.payments&&0<e.payments.length)&&(o=e.payments[0].approvalUrl,window.location.href=o)},openRazorpayWithDetails=function(e,t,a){var o=e.payments,s="",n=0,r=o.findIndex(function(e){return"razorpay"===e.type});if(-1!==r){s=o[r].pg_order_id,n=Number(o[r].amount_to_deduct_paise);var i=(localStorage.getItem("hub_id"),localStorage.getItem("coupon_used"),parseJSON(localStorage.getItem("profile_complete"))).email,l=localStorage.getItem("user_contact"),d=($(".li-addr-form-fields"),localStorage.getItem("saved_card"));switch(t){case"upi":var c={amount:n,email:i,order_id:s,method:"upi",contact:l,vpa:$("#user-vpa").val()};PAYMENTRAZORPAYOBJECT.amount=c.amount,PAYMENTRAZORPAYOBJECT.email=c.email,PAYMENTRAZORPAYOBJECT.order_id=c.order_id,PAYMENTRAZORPAYOBJECT.method=c.method,PAYMENTRAZORPAYOBJECT.contact=c.contact,PAYMENTRAZORPAYOBJECT.vpa=c.vpa,openRazorpayWithDetailsHelper(c,e,n,a);break;case"saved-payments":case"card":if(d||fn_checkout.payments.validateCard()){var p=fn_checkout.payments.card,c={amount:n,email:i,order_id:s,method:"card",contact:l};if(PAYMENTRAZORPAYOBJECT.amount=c.amount,PAYMENTRAZORPAYOBJECT.email=c.email,PAYMENTRAZORPAYOBJECT.order_id=c.order_id,PAYMENTRAZORPAYOBJECT.method=c.method,PAYMENTRAZORPAYOBJECT.contact=c.contact,1==d){var p=fn_checkout.payments.card,u=$(".pay-method.saved .cards").find("li.selected").find(".sc-cvv").val();if(""==u)return fn_checkout.alertBox("Provide CVV to continue","","alert"),void(flag=0);if(u.length<3)return fn_checkout.alertBox("CVV of a Card must be 3 digits","","alert"),void(flag=0);Object.assign(c,{token:p.token,"card[cvv]":u,customer_id:p.customer_id,save:p.save||0}),PAYMENTRAZORPAYOBJECT["card[cvv]"]=c["card[cvv]"],PAYMENTRAZORPAYOBJECT.token=c.token,PAYMENTRAZORPAYOBJECT.customer_id=c.customer_id,PAYMENTRAZORPAYOBJECT.save=c.save,flag=1}else c=Object.assign(c,{"card[name]":p.name,"card[number]":p.num,"card[cvv]":p.cvv,"card[expiry_month]":p.exm,"card[expiry_year]":p.exy,save:p.save||0,customer_id:p.customer_id}),PAYMENTRAZORPAYOBJECT["card[name]"]=c["card[name]"],PAYMENTRAZORPAYOBJECT["card[number]"]=c["card[number]"],PAYMENTRAZORPAYOBJECT["card[cvv]"]=c["card[cvv]"],PAYMENTRAZORPAYOBJECT["card[expiry_month]"]=c["card[expiry_month]"],PAYMENTRAZORPAYOBJECT["card[expiry_year]"]=c["card[expiry_year]"],PAYMENTRAZORPAYOBJECT.save=c.save,PAYMENTRAZORPAYOBJECT.customer_id=c.customer_id;openRazorpayWithDetailsHelper(c,e,n,a)}break;case"netbanking":c={amount:n,email:i,order_id:s,method:t,contact:l};PAYMENTRAZORPAYOBJECT.amount=c.amount,PAYMENTRAZORPAYOBJECT.email=c.email,PAYMENTRAZORPAYOBJECT.order_id=c.order_id,PAYMENTRAZORPAYOBJECT.method=c.method,PAYMENTRAZORPAYOBJECT.contact=c.contact;var m=localStorage.getItem("pay_mode");m&&(c=Object.assign(c,{bank:m}),PAYMENTRAZORPAYOBJECT.bank=c.bank,openRazorpayWithDetailsHelper(c,e,n,a));break;case"wallet":c={amount:n,email:i,order_id:s,method:t,contact:l};PAYMENTRAZORPAYOBJECT.amount=c.amount,PAYMENTRAZORPAYOBJECT.email=c.email,PAYMENTRAZORPAYOBJECT.order_id=c.order_id,PAYMENTRAZORPAYOBJECT.method=c.method,PAYMENTRAZORPAYOBJECT.contact=c.contact;var h=localStorage.getItem("pay_mode");h&&(c=Object.assign(c,{wallet:h}),PAYMENTRAZORPAYOBJECT.wallet=c.wallet,openRazorpayWithDetailsHelper(c,e,n,a))}}},processCreateOrderResponse=function(y,b,k){var e,t,a,o=y.statusCode,s=y.status,n=y.order_id;switch(y.statusMessage,void 0!==y.loyalty_details&&null!==y.loyalty_details||201!==o&&206!==o||null===localStorage.getItem("cartHasLoyalty")||"true"!=localStorage.getItem("cartHasLoyalty")||(e=Number(localStorage.getItem("loyalty_price"))-Number(localStorage.getItem("loyalty_discounted_price"))<=0?"0":""+localStorage.getItem("loyalty_price"),t=localStorage.getItem("loyalty_subprogram_name")+", "+e+", "+localStorage.getItem("loyalty_discounted_price"),a={name:fn_ll.loyalty_plan_name,city:fn_ll.getCityFromLS(),hub_id:fn_ll.getHubFromLS(),member_status:"initiated",selected_plan:t,user_type:fn_ll.getUserTypeFromLS(),total_orders:fn_ll.getTotalOrdersFromLS(),start_date:"",end_date:"",plan_price:localStorage.getItem("loyalty_discounted_price").toString(),plan_name:localStorage.getItem("loyalty_subprogram_name")},fn_ll.sendAnalyticsData("member_activatedcart",_extends({},a,{source:"loyalty"})),localStorage.setItem("cartHasLoyalty","false")),o){case 201:var C,r=function(){var e,t,a,o,s,n,r,i,l,d,c,p,u,m,h,f=y.order_id,_=y.address_id,g="false"===localStorage.getItem("pay-later-scenario");(("cod"===b||"pod"===b||"l_wallet"===b||"paytm"===b)&&!k||g&&k||!(("l_wallet"===b||"paytm"===b)&&!g&&k))&&(e=y.orderDetails||{},t=e.cart_value,a=e.discount_amount,o=e.currency,s=e.product_ids,n=e.product_names,r=e.prices,i=e.delivery_type,l=e.delivery_slots,d=e.hub_id,c=parseFloat(localStorage.getItem("wallet_used")),p=localStorage.getItem("coupon_used"),localStorage.getItem("method"),u=localStorage.getItem("pay_source"),m=fn_ll.getterSS("customer_type"),h={Source:"Purchase","Total Amount":Number(t),"Coupon Name":p,"Coupon Type":localStorage.getItem("coupon_type"),"City Name":localStorage.getItem("city_name"),"Hub ID":d,Discount:a,"Licious wallet Amount":c,"Charged ID":f,Currency:o,"Payment Method":u,"Product ID":s?s.toString():"","Product Name":n?n.toString():"","Category ID":JSON.parse(localStorage.getItem("allitem")).category_id,Price:r?r.toString():"",Quantity:localStorage.getItem("product_quantity"),ShipmentIDs:localStorage.getItem("shipmentCount"),ShipmentTypes:i,ShipmentTime:l,AddressID:_,"Transaction ID":"",Checkout_Flow:checkout_flow(),user_type:m},fn_main.assignIncomingSource(h),fn_home.sendBranchChargedEvent(h,f),ga("ecommerce:addTransaction",{id:f,revenue:Number(t)}),C=(C=localStorage.getItem("product_quantity")).split(","),$.map(n,function(e,t){ga("ecommerce:addItem",{id:f,name:e,sku:s[t],price:r[t],quantity:C[t]})}),window.dataLayer&&window.dataLayer.push({event:"debug-charged","ga-category":"debug-charged","ga-action":"Logging debug charged","ga-label":y.orderDetails?JSON.stringify(y.orderDetails):"orderDetails not available"}),pushEEPurchases(parsePushEEPurchaseEvent({product_names:n,product_ids:s,prices:r,pr_qty:C,currency:o,order_id:f,transactionId:f,cart_value:t,delivery_type:i,delivery_slots:l,address_id:_,coupon_used:p,charged:h})),fn_cart.gaAddRemoveEvent("Charged","Charged",JSON.stringify(h)),clevertap.event.push("Charged",h));var v=-1!==location.href.search("/order-status/");return void 0!==y.loyalty_details?(window.location.href="/loyalty/success",{v:void 0}):v?(window.location.reload(),{v:void 0}):void redirectToOrderStatusPage(f)}();if("object"==_typeof(r))return r.v;break;case 206:switch(s){case"CREATED_WAITING_FOR_CLIENT_ACTION":switch(b){case"paypal":fn_main.showloader(),openPaypalWithDetails(y,b,k);break;case"upi":openRazorpayWithDetails(y,b,k);break;case"saved_payments":case"card":case"netbanking":case"wallet":openRazorpayWithDetails(y,b,k);break;default:return}break;case"CREATED_WITH_FAILURE":if(-1!==location.href.search("/order-status/"))return void window.location.reload();redirectToOrderStatusPage(n);break;case"CREATED_WITH_UNKNOWN":if(k)return void window.location.reload();redirectToOrderStatusPage(n);default:return}break;case 400:return void(void 0!==y.loyalty_details&&(localStorage.setItem("loyaltyPaymentState","retrypurchase_loyalty"),$(".ll-payment-failure-popup").addClass("show"),$(".loc-screen").addClass("show"),$(".ll-pf-retry-button").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId}),$(".ll-pf-alert-close").click(function(){$(".ll-payment-failure-popup").removeClass("show"),$(".loc-screen").removeClass("show"),window.location.href="/loyalty/payment/"+subProgramId})));default:return}};fn_checkout=(_defineProperty(_fn_checkout={isCODEnabled:!1,isPODEnabled:!1,addrFlag:!1,timer:"",mobile_regex:/^[6789]\d{9}$/,email_regex:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,selectAddress:function(){$(".li-saved-address li").on("click",function(){$(".li-saved-address").find("li").removeClass("selected"),$(this).addClass("selected")})},editAddress:function(){$(".li-saved-address li .edit-addr").on("click",function(){$(".li-saved-address").find("li").removeClass("selected"),$(this).addClass("selected")})},clevertapAddress:function(e,t,a){clevertap.event.push(t,{Source:"Checkout_address","Saved address":a}),fn_cart.gaAddRemoveEvent(e,"Checkout_address",a)},addAddress:function(){$(".li-add-address").on("click",function(){fn_checkout.showAddrPartfirst(),clevertap.event.push("Add Address",{Source:"Checkout_address"}),fn_cart.gaAddRemoveEvent("Checkout_Addaddress","Checkout_address"),fn_checkout.showAddrForm()}),fn_checkout.resetAddAddr()},showAddrPartfirst:function(){$(".li-form-holder").show(),$(".li-confirm-address").hide(),$(".map-marker-holder").css("width","50%"),$(".move-marker-msg").removeClass("show"),$(".addr-merge-info").removeClass("show")},showAddrPartsecond:function(){$(".li-form-holder").hide(),$(".li-confirm-address").show(),$(".map-marker-holder").css("width","100%"),$(".move-marker-msg").addClass("show"),$(".addr-merge-info").addClass("show")},showAddrForm:function(e){switch(e){case"new":$(".addr-form-back").hide();break;default:$(".addr-form-back").show()}fn_checkout.checkProfile(),$(".li-addr-loader").addClass("show"),$(".li-checkout-page.address").find(".li-page-body").addClass("strict"),$(".li-addr-form-fields").find('[data-type="addr-flat"]').focus()},showAddrLoaders:function(){var e=$(".li-address-container");e.find("li").hide(),e.find(".addr_loader").show(),$(".addr-count").html("-------------")},hideAddrLoaders:function(){$(".li-address-container").find(".addr_loader").hide()},resetAddAddr:function(){$(".addr-form-back").on("click",function(){$(".li-addr-loader").removeClass("show"),$(".li-checkout-page.address").find(".li-page-body").removeClass("strict"),$(".li-checkout-page.address").removeClass("activez").addClass("active"),fn_checkout.resetForm()})},showSlots:function(){$(".slots-selector").on("click",function(){var e=$(this).parent().find(".slots-layout");e.hasClass("fade-in")?e.removeClass("fade-in"):e.addClass("fade-in"),$(this).toggleClass("up"),$(this).parent().find(".slots-screen").fadeIn(),$(".slots-screen-bg").fadeIn(),$(".pointer").addClass("fade");var t=$(this).attr("ship-id"),a=$(this).attr("lock_slot_id");$(".dates").removeClass("active"),$(".slot-day-time").removeClass("active"),$(".slot-day-time").hide(),"false"===$(this).parent().attr("data-slotselected")?$(".slots_"+t).find(".select-proceed").addClass("disabled"):$(".slots_"+t).find(".select-proceed").removeClass("disabled");var o="undefined"!==a&&null!=a&&""!==a?a:t+"1";$("#slot-day-time_"+o).show(),$("#dates_"+o).addClass("active"),$("li button").removeClass("selected");var s=$("#slot-day-time_"+o).find('[data-time="'+slot_lock_dates[Number(t-1)]+'"]');s.children("button").addClass("selected"),date=(li=s).data("date"),ship_id=s.data("ship_id"),time=s.data("time")})},hideSlots:function(){$(".slots-screen, .slots-screen-bg, .slots-dropdown .cancel , .slots-dropdown .cancel-slot").on("click",function(e){var t={Source:"Checkout_Slot",Checkout_Flow:checkout_flow()};fn_main.assignIncomingSource(t),clevertap.event.push("Closed Slot Selection",t),fn_cart.gaAddRemoveEvent("Checkout_Slot_Closed","Checkout_Slot"),$(".slots-dropdown").find(".slots-layout").removeClass("fade-in"),$(".slots-dropdown").find(".slots-selector").removeClass("up"),$(".slots-screen-bg, .slots-screen").fadeOut(),$(".pointer").removeClass("fade")})},checkProfile:function(){var e=JSON.parse(localStorage.getItem("profile_complete")),t=$(".li-addr-form-fields");null!=e&&"true"==e.status?(t.find('[data-type="email"]').attr("data-flag","true").val("").parent().hide(),t.find('[data-type="name"]').attr("data-flag","true").val("").parent().hide()):(t.find('[data-type="email"]').attr("data-flag","false").parent().show(),t.find('[data-type="name"]').attr("data-flag","false").parent().show())},setProfile:function(e,t){""!=e&&""!=t&&null!=e&&null!=t&&fn.checkout_oos.ajaxForm({name:e,email:t},"POST","/checkout/store-user-data");var a,o=JSON.parse(localStorage.getItem("profile_complete"));null==o?(a={status:!0,name:e,email:t},localStorage.setItem("profile_complete",JSON.stringify(a))):(o.status="true",localStorage.setItem("profile_complete",JSON.stringify(o)))},showAlert:function(e){clearTimeout(fn_checkout.timer),$(".addr-error").html(e).addClass("show"),fn_checkout.timer=setTimeout(function(){$(".addr-error").html("").removeClass("show")},3e3)},validateMobile:function(){var e=$(".addr-mobile");e.on("blur",function(){""==e.val()?(fn_checkout.showAlert("Mobile number required"),e.focus(),e[0].dataset.flag=!1):fn_checkout.mobile_regex.test(e.val())?(e[0].dataset.flag=!0,fn_checkout.checkFlag()):(fn_checkout.showAlert("Invalid Mobile number"),e.focus(),e[0].dataset.flag=!1)}),e.on("keyup",function(){!(e.val().length<1)&&fn_checkout.mobile_regex.test(e.val())?e[0].dataset.flag=!0:e[0].dataset.flag=!1,fn_checkout.checkFlag()})},validateEmail:function(){var e=$(".addr-email");e.on("blur",function(){""==e.val()?(fn_checkout.showAlert("Email required"),e.focus(),e[0].dataset.flag=!1):fn_checkout.email_regex.test(e.val())?(e[0].dataset.flag=!0,fn_checkout.checkFlag()):(fn_checkout.showAlert("Invalid Email"),e.focus(),e[0].dataset.flag=!1)}),e.on("keyup",function(){!(e.val().length<1)&&fn_checkout.email_regex.test(e.val())?e[0].dataset.flag=!0:e[0].dataset.flag=!1,fn_checkout.checkFlag()})},validateFlat:function(){var e=$(".addr-flat");e.on("blur",function(){""==e.val()?(fn_checkout.showAlert("Flat no / Building name is required"),e.focus(),e[0].dataset.flag=!1):(e[0].dataset.flag=!0,fn_checkout.checkFlag())}),e.on("keyup",function(){e.val().length<1?e[0].dataset.flag=!1:e[0].dataset.flag=!0,fn_checkout.checkFlag()})},validateName:function(){var e=$(".addr-name");e.on("blur",function(){""==e.val()?(fn_checkout.showAlert("Name required"),e[0].focus(),e[0].dataset.flag=!1):(e[0].dataset.flag=!0,fn_checkout.checkFlag())}),e.on("keyup",function(){e.val().length<1?e[0].dataset.flag=!1:e[0].dataset.flag=!0,fn_checkout.checkFlag()})},validateLoc:function(){var e=$(".addr-location");e.on("keyup",function(){e.val().length<1&&(e[0].dataset.flag=!1),fn_checkout.checkFlag()})},checkFlag:function(){var e=$(".li-addr-form-fields").find('[data-opt="required"]');$.each(e,function(e,t){return"false"==t.dataset.flag?($(".addr-save-btn").addClass("disabled"),!1):($(".addr-save-btn").removeClass("disabled"),void fn_checkout.mergeAddress())})},setFlag:function(a){var o=$(".li-addr-form-fields").find('[data-opt="required"]');$.each(o,function(e,t){o.attr("data-flag",a)}),o.eq(0).attr("data-flag","true")},getAddr:function(){fn_checkout.showAddrLoaders(),$(".li-page-body").find(".complete-address").addClass("disabled");var e,t,a,o=window.location.href.split("#")[1]||"",s=o.split("?")[1];"paypal-order-success"===(o=o.split("?")[0])||"paypal-link-view-success"===o?(fn_main.showloader(),fn_paypal.updatePaymentStatus("SUCCESS")):"paypal-order-fail"==o?(fn_main.showloader(),fn_paypal.updatePaymentStatus("FAIL")):"quick-checkout"===o?(sessionStorage.setItem("checkout_flow","quick_checkout"),document.referrer.includes("past-orders")?sessionStorage.setItem("incoming_source","past_order"):document.referrer.includes("favourite-items")&&sessionStorage.setItem("incoming_source","favorite_items"),e=fn_ll.getterLS("count"),0<Number(e)?($(".new-cart-count").addClass("loaded"),$(".new-cart-count").find("i").html(e)):$(".new-cart-count").removeClass("loaded"),"delivery-summary"===s?(fn_home.validateReferralMsg()&&$(".checkout-referral-msg").show(),fn_checkout.setPageActive("addr"),t={title:"Choose Address <span quickload='true' class = 'change-addr'>Change</span>",subtitle:localStorage.getItem("address")},fn_checkout.setNavMessages(t,"addr"),fn_checkout.setNavActive("addr"),fn_checkout.quickCheckoutResetAddr(),fn_checkout.getShipments("proceed-shipment")):"payments"===s?(a={title:"Choose Address <span quickload='true' class = 'change-addr'>Change</span>",subtitle:localStorage.getItem("address")},fn_checkout.setNavMessages(a,"addr"),fn_checkout.setNavActive("addr"),fn_checkout.quickCheckoutResetAddr(),fn_checkout.quickCheckoutPayment()):(fn_checkout.setpage("order-summary"),fn_checkout.loadAddress())):fn_checkout.setpage("order-summary"),"quick-checkout"!==o&&fn_checkout.loadAddress()},quickCheckoutPayment:function(){$(".co-ll-item").hide(),localStorage.setItem("pay-later-scenario",!1),fn_checkout.pushEEProgressCheckout(),$(".checkout-referral-msg").hide(),$(".checkout-referral-msg").hide(),$(".checkout-referral-msg").hide(),$(".checkout-referral-msg").hide(),$(".checkout-referral-msg").hide(),fn_checkout.setPageActive("shipment"),fn_checkout.setNavActive("shipment");var e=localStorage.getItem("shipment_message");localStorage.removeItem("shipment_message");var t={title:"Delivery Summary <span quickload='true' class = 'edit-shipment'>Edit</span>",subtitle:e};fn_checkout.setNavMessages(t,"shipment"),$(".licious-wallet").find(".lic-btn").removeClass("checked"),$(".li-bill-details").show(),fn_checkout.renderBillDetails(JSON.parse(localStorage.getItem("bill_details"))),localStorage.removeItem("bill_details"),fn_checkout.quickCheckoutResetShipment(),fn_checkout.payments.fetchPayments("payment")},quickCheckoutResetShipment:function(){$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").on("click",function(){var e;"true"===$(this).attr("quickload")&&(""==(e=localStorage.getItem("coupon_used"))||null==e?fn_checkout.quickCheckoutLoadShipment():fn_checkout.alertBox("Applied coupon will be removed, Wish to continue?","","confirm-shipment"))})},quickCheckoutLoadShipment:function(){$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").attr("quickload",""),$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").unbind("click"),$(".co-ll-item").show(),fn_home.validateReferralMsg()&&$(".checkout-referral-msg").show(),$(".free-delivery-mssg").hide(),$(".li-checkout-nav-steps ul").removeClass("ul-wth-msg"),clevertap.event.push("Edit Slots",{ShipmentId_NewSlot:localStorage.getItem("shipmentid"),Source:"Purchase"}),fn_cart.gaAddRemoveEvent("Purchase_EditSlot","Purchase"),fn_checkout.setNavActive("redo-shipment"),fn_checkout.setPageActive("redo-shipment"),$(".li-bill-details").hide(),$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").hide();fn_checkout.setNavMessages({title:"Payment methods",subtitle:""},"cards"),fn_checkout.getShipments()},quickCheckoutResetAddr:function(){$(".li-checkout-nav-steps").find(".li-nav-title .change-addr").on("click",function(){var e;"true"===$(this).attr("quickload")&&(""==(e=localStorage.getItem("coupon_used"))||null==e?fn_checkout.quickCheckoutAddressLoad():fn_checkout.alertBox("Applied coupon will be removed, Wish to continue?","","confirm-addr"))})},quickCheckoutAddressLoad:function(){$(".li-checkout-nav-steps").find(".li-nav-title .change-addr").unbind("click"),$("free-delivery-mssg").hide(),$(".li-checkout-nav-steps").find(".li-nav-title .change-addr").attr("quickload",""),fn_checkout.setpage("order-summary"),fn_home.validateReferralMsg()&&$(".checkout-referral-msg").show(),fn_checkout.setNavActive("redo-addr"),fn_checkout.setPageActive("redo-addr"),$(".li-bill-details").hide(),$(this).hide(),$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").hide();fn_checkout.setNavMessages({title:"Payment methods",subtitle:""},"cards"),fn_checkout.loadAddress()},loadAddress:function(){var i=$(".li-page-container").find(".li-address-container"),s="";fn_home.ajaxForm({},"POST","/checkout/get-all-address").done(function(e){var t,a=JSON.parse(e);200===a.statusCode?(localStorage.setItem("address-count",a.data.address.length),$(".li-checkout-nav-steps .address").addClass("active"),t=a.data.address,$.map(t,function(e,t){var a=null==e.landmark?"":"<br>"+e.landmark,o=e.line2+" "+e.line1+" "+a+" "+e.city+" "+e.contact;s+='<li data-prid="'+e.address_id+'" data-lat="'+e.lat+'" data-hub-id="'+e.hub_id+'" data-city="'+e.city+'" data-lng="'+e.lng+'" data-addrstr="'+o+'" class="address-block"><div class="li-addr-sel"><p class="li-addr-title">'+e.line2+'</p><p class = "li-addr-body">'+e.line2+"<br>"+e.line1+a+"<br>"+e.city+" "+e.pincode+"<br>Mobile Number:"+e.contact+'</p></div><div class="li-addr-cta"><button class="edit-addr" data-addrid="'+e.address_id+'">Edit</button><button class="delete-addr" data-addrid="'+e.address_id+'">Delete</button></div></li>'}),i.html(s),0<a.data.defaultaddress.length?$.map(a.data.defaultaddress,function(e){i.find('[data-prid="'+e+'"]').addClass("selected");var t=i.find('[data-prid="'+e+'"]').data("addrstr"),a=i.find('[data-prid="'+e+'"]').data("lat"),o=i.find('[data-prid="'+e+'"]').data("lng"),s=i.find('[data-prid="'+e+'"]').data("hub-id"),n=t.split("<br>")[0],r=i.find('[data-prid="'+e+'"]').data("city");localStorage.setItem("default_addr_id",e),localStorage.setItem("default_addr_lat",a),localStorage.setItem("default_addr_lng",o),localStorage.setItem("hub_id",s),localStorage.setItem("address",n),localStorage.setItem("city_name",r),$(".sub-header").find(".location-name").html(n),$(".city-location .city").html(localStorage.getItem("city_name")),$(".li-checkout-page-title").find(".selected-item.address").html(t),$(".li-page-body").find(".complete-address").removeClass("disabled")}):($(".li-page-body").find(".complete-address").addClass("disabled"),localStorage.setItem("default_addr_id","")),fn_checkout.hideAddrLoaders(),fn_checkout.setAddrCount(t.length),fn_checkout.updateAddr(),$(".li-checkout-page.address").removeClass("activez").addClass("active"),fn_home.validateReferralMsg()&&$(".checkout-referral-msg").show()):203===a.statusCode&&(fn_checkout.showAddrForm("new"),fn_checkout.setAddrCount(0))}).fail(function(e){Materialize.toast("Something went wrong, please try reloading the page")}),fn_checkout.completeAddress()},getAddrCount:function(e,t,a){var o=$(".li-address-container").find("li").length;"delete"==a&&--o,"Save"==a&&(o+=1),fn_checkout.clevertapAddress(e,t,o),"Checkout_choose Address"!==e&&fn_checkout.setAddrCount(o)},setAddrCount:function(e){var t;t=0===e?(fn_checkout.showAddrForm("new"),{title:"Add Address",subtitle:"You don't seem to have any address saved"}):($(".addr-count").html(e+" Saved Addresses"),{title:"Choose Address ",subtitle:"You have "+e+" saved address"}),fn_checkout.setNavMessages(t,"addr")},setNavMessages:function(e,t){var a=$(".li-checkout-nav-steps");switch(t){case"addr":a.find("li.address .li-nav-title").html(e.title),a.find("li.address .li-nav-subtitle").html(e.subtitle),a.find("li.shipment .li-nav-subtitle").html(""),$(".li-checkout-page-title").find(".selected-item.shipment").html("");break;case"shipment":a.find("li.shipment .li-nav-title").html(e.title),a.find("li.shipment .li-nav-subtitle").html(e.subtitle),$(".li-checkout-page-title").find(".selected-item.shipment").html(e.subtitle);break;case"cards":a.find("li.payment .li-nav-title").html(e.title),a.find("li.payment .li-nav-subtitle").html(e.subtitle)}},setNavActive:function(e){var t=$(".li-checkout-nav-steps");switch(e){case"addr":t.find(".address").removeClass("active").addClass("complete"),t.find(".shipment").addClass("active");break;case"redo-addr":t.find("li").removeClass("active complete"),t.find(".address").addClass("active"),t.parent().find(".li-bill-details").hide(),fn_checkout.removeCLD();break;case"redo-shipment":t.find("li").removeClass("active complete"),t.find(".address").addClass("complete"),t.find(".shipment").addClass("active"),t.parent().find(".li-bill-details").hide(),fn_checkout.removeCLD();break;case"shipment":t.find(".shipment").removeClass("active").addClass("complete"),t.find(".payment").addClass("active")}},removeCLD:function(){$(".cld-placeholder").html(""),$(".slot-payment-flow").removeClass("cld"),$(".li-checkout-nav-steps ul li").removeClass("cld"),$(".li-checkout-page.payment .pointer").removeClass("cld")},setPageActive:function(e){var t=$(".li-checkout-pages");switch(e){case"addr":t.find(".li-checkout-page.active").addClass("collapse"),setTimeout(function(){t.find(".li-checkout-page").removeClass("active complete collapse expand"),t.find(".address").addClass("complete"),t.find(".shipments").addClass("active"),$(".addr-slot-flow").css("border-color","#427605"),$(".addr-slot-flow").css("border-style","solid"),$(".slot-payment-flow").css("border-color","#cbcbcb"),$(".slot-payment-flow").css("border-style","dashed"),fn_checkout.setpage("delivery-summary"),window.scrollTo(0,0)},400);break;case"redo-addr":t.find(".li-checkout-page.active").addClass("collapse"),setTimeout(function(){t.find(".li-checkout-page").removeClass("active complete collapse expand"),t.find(".address").addClass("active"),$(".addr-slot-flow").css("border-color","#cbcbcb"),$(".addr-slot-flow").css("border-style","dashed"),$(".slot-payment-flow").css("border-color","#cbcbcb"),$(".slot-payment-flow").css("border-style","dashed"),fn_checkout.setpage("order-summary"),window.scrollTo(0,0)},400);break;case"redo-shipment":t.find(".li-checkout-page.active").addClass("collapse"),setTimeout(function(){t.find(".li-checkout-page").removeClass("active complete collapse expand"),t.find(".address").addClass("complete"),t.find(".shipments").addClass("active"),$(".addr-slot-flow").css("border-color","#427605"),$(".addr-slot-flow").css("border-style","solid"),$(".slot-payment-flow").css("border-color","#cbcbcb"),$(".slot-payment-flow").css("border-style","dashed"),fn_checkout.setpage("delivery-summary"),window.scrollTo(0,0)},400);break;case"shipment":t.find(".li-checkout-page").addClass("collapse"),setTimeout(function(){t.find(".li-checkout-page").removeClass("active complete collapse expand"),t.find(".payment").addClass("active"),t.find(".address").addClass("complete"),t.find(".shipments").addClass("complete"),$(".addr-slot-flow").css("border-color","#427605"),$(".addr-slot-flow").css("border-style","solid"),$(".slot-payment-flow").css("border-color","#427605"),$(".slot-payment-flow").css("border-style","solid"),fn_checkout.setpage("payments"),window.scrollTo(0,0)},400)}},validateAddrField:function(){$(".li-addr-form-fields").find('[data-type="addr-loc"]').on("change",function(){$(this).val().length<1&&$(this).attr({"data-flag":"false"})})},saveAddr:function(){var t=$(".li-addr-form-fields");$(".confirm-save-addr").on("click",function(e){e.stopImmediatePropagation(),$(".li-addr-loader").addClass("loader-div"),fn_checkout.getAddrCount("Checkout_SaveAddress","Save Address","Save");var s={line1:t.find('[data-type="addr-loc"]').val(),line2:t.find('[data-type="flat"]').val(),city:t.find('[data-type="addr-city"]').val(),landmark:t.find('[data-type="addr-landmark"]').val(),pincode:t.attr("data-pincode"),contact:t.find('[data-type="mobile"]').val(),email:t.find('[data-type="email"]').val(),name:t.find('[data-type="name"]').val(),lat:t.attr("data-lat"),lng:t.attr("data-lng")},n=$(".addr-save-btn"),r=n.attr("data-type"),i=n.attr("data-addrid");"update"==r&&Object.assign(s,{address_id:i});var l=$(".li-page-container").find(".li-address-container");fn_home.ajaxForm(s,"POST","/checkout/save-address").done(function(e){var t,a,o=JSON.parse(e);200===o.statusCode?(l.find("li").removeClass("selected"),localStorage.setItem("city_name",o.data.address.city),localStorage.setItem("hub_id",o.data.address.hub_id),sessionStorage.setItem("review_cart_city_name",o.data.address.city),sessionStorage.setItem("review_cart_address",o.data.address.line2),$(".addr-email").val()&&(clevertap.profile.push({Site:{Name:""+s.name,Email:""+s.email}}),$(".profile-container").find(".username").html(s.name)),"update"==r&&l.find('[data-prid="'+i+'"]').remove(),a=null!=(t=o.data.address).landmark?"<br>"+t.landmark:"",t.line2,t.line1,t.city,t.contact,t.address_id,t.lat,t.lng,t.line2,t.line2,t.line1,t.city,t.pincode,t.contact,t.address_id,t.address_id,fn_checkout.setProfile(s.name,s.email),$(".li-addr-loader").removeClass("show"),fn_checkout.resetForm(),fn_checkout.getAddr(),$(".complete-address").removeClass("disabled"),$(".li-checkout-page.address").find(".li-page-body").removeClass("strict"),fn_home.ajaxForm({lat:o.data.address.lat,lng:o.data.address.lng},"POST","/checkout_oos/change-address").done(function(e){var t=JSON.parse(e);switch(localStorage.getItem("address-count"),fn_checkout.getAddrCount("Checkout_choose Address","Choose Address"),localStorage.setItem("default_addr_lat",o.data.address.lat),localStorage.setItem("default_addr_lng",o.data.address.lng),localStorage.setItem("default_addr_id",o.data.address.address_id),t.code){case 200:fn_checkout.alertBox(t.message,t.data,"location-changed");break;case 201:null!=t.data&&fn_home.ajaxForm({location:t.data.address,lat:t.data.lat,lng:t.data.lng,clearcart:"false"},"POST","/get-location").done(function(e){var t;"success"==e.result&&(localStorage.setItem("default_addr_lat",o.data.address.lat),localStorage.setItem("default_addr_lng",o.data.address.lng),localStorage.setItem("default_addr_id",o.data.address.address_id),fn_checkout.setLocation(e),t={title:"Choose Address <span class = 'change-addr'>Change</span>",subtitle:localStorage.getItem("address")},fn_checkout.setNavMessages(t,"addr"),fn_checkout.getShipments("proceed-shipment"),fn_checkout.setNavActive("redo-shipment"),fn_checkout.setPageActive("redo-shipment"),fn_checkout.resetAddr(),$(".li-saved-address").find("li").removeClass("selected"),$(".li-address-container").find('[data-prid="'+o.data.address.address_id+'"]').addClass("selected"),$(".li-page-body").find(".complete-address").removeClass("disabled"),$(".li-checkout-page-title").find(".selected-item.address").html($(".li-address-container").find('[data-prid="'+o.data.address.address_id+'"]').attr("data-addrstr")))})}}),fn_checkout.updateAddr(),fn_checkout.selectAddress(),fn_checkout.hideAddrLoaders(),n.attr("data-type","save"),n.attr("data-addrid","")):fn_checkout.showAlert(o.data.message)}).always(function(){$(".li-addr-loader").addClass("complete"),setTimeout(function(){$(".li-addr-loader").removeClass("complete loader-div")},1200)})})},mergeAddress:function(){var o=$(".li-addr-form-fields"),h=[],f=new mapFn;$(".addr-save-btn").on("click",function(e){function u(e){return e*(Math.PI/180)}e.stopImmediatePropagation(),fn_checkout.showAddrPartsecond();for(var m={line1:o.find('[data-type="addr-loc"]').val(),line2:o.find('[data-type="flat"]').val(),city:o.find('[data-type="addr-city"]').val(),landmark:o.find('[data-type="addr-landmark"]').val(),pincode:o.attr("data-pincode"),contact:o.find('[data-type="mobile"]').val(),email:o.find('[data-type="email"]').val(),name:o.find('[data-type="name"]').val(),lat:o.attr("data-lat"),lng:o.attr("data-lng")},t=m.line1,a=0;a<marker1.length;a++)marker1[a]&&marker1[a].setMap&&marker1[a].setMap(null);$.ajax({url:"/maps/geocoding?address="+encodeURIComponent(t),type:"GET",timeout:2e4,headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}).done(function(e){var t,a,o,s;"success"===(e=JSON.parse(e)).type?(t=e.data,h=[],a={url:"https://d2407na1z3fc0t.cloudfront.net/Banner/otherlocation.png",scaledSize:new google.maps.Size(30,30),anchor:new google.maps.Point(15,15)},$.map(t,function(e,t){var a,o,s,n,r,i,l,d={lat:m.lat,lng:m.lng},c={lat:e.lat,lng:e.lng},p=(o=d.lng,n=c.lng,r=u((s=c.lat)-(a=d.lat)),i=u(n-o),l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(u(a))*Math.cos(u(s))*Math.sin(i/2)*Math.sin(i/2),2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371*1e3);h.push({distance:p,lat:c.lat,lng:c.lng,faddress:e.formatted_address}),1<=h.length&&(f.mapReset({lat:h[0].lat,lng:h[0].lng}),f.fn_geocoder({lat:h[0].lat,lng:h[0].lng}),zoom=Math.round(h[0].distance)<=100?18:Math.round(h[0].distance)<=500?16:Math.round(h[0].distance)<=1e3?15:Math.round(h[0].distance)<=2e3?14:Math.round(h[0].distance)<=3e3?13.5:Math.round(h[0].distance)<=4e3?13:Math.round(h[0].distance)<=6e3?12.5:Math.round(h[0].distance)<=8e3?12:11,map.setZoom(zoom))}),h.sort(function(e,t){return e.distance-t.distance}),0<h.length&&(Math.round(h[0].distance)<=20?(o={lat:h[0].lat,lng:h[0].lng},marker1[0]=new google.maps.Marker({position:o,icon:a}),marker1[0].setMap(map),$(".two-loc-popup").hide()):(o={lat:h[0].lat,lng:h[0].lng},marker1[0]=new google.maps.Marker({position:o,icon:a}),marker1[0].setMap(map),s={lat:Number(m.lat),lng:Number(m.lng)},marker1[1]=new google.maps.Marker({position:s,icon:a}),marker1[1].setMap(map),$(".two-loc-popup").show()),google.maps.event.addListener(marker1[0],"click",function(){var e={lat:h[0].lat,lng:h[0].lng};f.mapReset(e),f.fn_geocoder(e)}),google.maps.event.addListener(marker1[1],"click",function(){var e={lat:Number(m.lat),lng:Number(m.lng)};f.mapReset(e),f.fn_geocoder(e)}))):alert("Geocode was not successful for the following reason: "+status)}),fn_checkout.saveAddr()}),$(".back-to-form").on("click",function(e){e.stopImmediatePropagation();for(var t=0;t<marker1.length;t++)marker1[t]&&marker1[t].setMap&&marker1[t].setMap(null);fn_checkout.showAddrPartfirst()}),$(".confirm-addr-location").on("click",function(e){e.stopImmediatePropagation();for(var t=0;t<marker1.length;t++)marker1[t]&&marker1[t].setMap&&marker1[t].setMap(null);fn_checkout.showAddrPartfirst()})},setRecentSearchAddr:function(o){var s,a,n,e=JSON.parse(localStorage.getItem("addresses"));null==e||0==e.length?((e=[]).unshift({lat:o.lat,lng:o.lng,location:o.loc,city:o.city}),localStorage.setItem("addresses",JSON.stringify(e))):(s=e.slice(0,3),(a=$(".recent-search-container .recent-data")).html(""),$.map(s,function(e,t){a.append('<div class="recent-search-item" data-lat = "'+e.lat+'" data-lng = "'+e.lng+'" data-loc = "'+e.location+'" data-city="'+e.city+'"><div class ="search-string">'+e.location+"</div></div>")}),fn_checkout.bindCheckoutRecentSearchClick(),n=!1,$.map(s,function(e,t){if(parseFloat(o.lat)==parseFloat(e.lat)&&parseFloat(o.lng)==parseFloat(e.lng)){n=!0;var a=s.splice(t,1);return s.unshift(a[0]),void localStorage.setItem("addresses",JSON.stringify(s))}}),0==n&&(s.unshift({lat:o.lat,lng:o.lng,location:o.loc,city:o.city}),s=s.slice(0,3),localStorage.setItem("addresses",JSON.stringify(s))))},bindCheckoutRecentSearchClick:function(){$(".recent-data .recent-search-item").on("click",function(e){fn_main.showloader(),e.stopImmediatePropagation();var t={lat:Number($(this).attr("data-lat")),lng:Number($(this).attr("data-lng"))},a=new mapFn;a.mapReset(t),a.fn_geocoder(t),$(".recent-search-container").hide(),$(".search-container").css("display","none")})}},"showAddrPartfirst",function(){$(".li-form-holder").show(),$(".li-confirm-address").hide(),$(".map-marker-holder").css("width","50%"),$(".move-marker-msg").removeClass("show"),$(".addr-merge-info").removeClass("show")}),_defineProperty(_fn_checkout,"showAddrPartsecond",function(){$(".li-form-holder").hide(),$(".li-confirm-address").show(),$(".map-marker-holder").css("width","100%"),$(".move-marker-msg").addClass("show"),$(".addr-merge-info").addClass("show")}),_defineProperty(_fn_checkout,"updateAddr",function(){$(".li-address-container").find("li").on("click",function(e){if(e.stopImmediatePropagation(),"delete-addr"===e.target.className)fn_home.ajaxForm({addr_id:e.target.dataset.addrid},"POST","/checkout/delete-address").done(function(e){200===JSON.parse(e).statusCode?(fn_checkout.getAddr(),fn_checkout.getAddrCount("Checkout_DeleteAddress","Delete Address","delete")):alert("Error deleting address, please try again!")});else if("edit-addr"===e.target.className)fn_home.ajaxForm({addr_id:e.target.dataset.addrid},"POST","/checkout/get-address-id").done(function(e){var t,a,o,s=JSON.parse(e),n=$(".li-addr-form-fields");200===s.statusCode?(fn_checkout.getAddrCount("Checkout_EditAddress","Edit Address"),a=null!=(t=s.data.address).landmark?t.landmark:"",$(".li-addr-loader").addClass("show"),$(".li-checkout-page.address").find(".li-page-body").addClass("strict"),n.find('[data-type="addr-flat"]').focus(),n.attr("data-pincode",t.pincode),n.attr("data-lat",t.lat),n.attr("data-lng",t.lng),n.find('[data-type="addr-loc"]').val(t.line1),n.find('[data-type="flat"]').val(t.line2),n.find('[data-type="addr-landmark"]').val(a),n.find('[data-type="addr-city"]').val(t.city),n.find('[data-type="mobile"]').val(t.contact),n.find(".addr-save-btn").removeClass("disabled").html("Update").attr({"data-type":"update","data-addrid":t.address_id}),fn_checkout.showAddrPartfirst(),fn_checkout.setFlag("true"),o=new google.maps.LatLng(t.lat,t.lng),map.panTo(o),n.find(".addr-form-back").show(),fn_checkout.checkProfile(),fn_checkout.mergeAddress()):alert("Error fetching address, please try again!")});else{if("li-addr-cta"===e.target.className)return;fn_main.showloader();var t=$(this).attr("data-lat"),a=$(this).attr("data-lng");fn_checkout.verifyService(t,a,$(this)),$(".li-saved-address").find("li").removeClass("selected"),$(".li-page-body").find(".complete-address").removeClass("disabled"),$(this).addClass("selected"),localStorage.setItem("default_addr_lat",t),localStorage.setItem("default_addr_lng",a),localStorage.setItem("default_addr_id",$(this).attr("data-prid")),$(".li-checkout-page-title").find(".selected-item.address").html($(this).data("addrstr"))}})}),_defineProperty(_fn_checkout,"verifyService",function(e,t,a){fn_home.ajaxForm({lat:e,lng:t},"POST","/checkout_oos/change-address").done(function(e){fn_main.hideloader();var t=JSON.parse(e);switch(localStorage.getItem("address-count"),fn_checkout.getAddrCount("Checkout_choose Address","Choose Address"),localStorage.setItem("address",a.attr("data-addrstr").split("<br>")[0]),t.code){case 200:sessionStorage.setItem("review_cart_city_name",a.attr("data-city").trim()),sessionStorage.setItem("review_cart_address",a.attr("data-addrstr").split("<br>")[0]),fn_checkout.alertBox(t.message,t.data,"location-changed");break;case 201:null!=t.data&&fn_home.ajaxForm({location:t.data.address,lat:t.data.lat,lng:t.data.lng,clearcart:"false"},"POST","/get-location").done(function(e){"success"==e.result&&(localStorage.setItem("city_name",a.attr("data-city").trim()),fn_checkout.setLocation(e))})}}).fail(function(){fn_main.hideloader()}).always(function(){fn_main.hideloader()})}),_defineProperty(_fn_checkout,"updateCartLocation",function(e,t){return fn_home.ajaxForm({lat:e,lng:t},"POST","/checkout_oos/update-cart-location")}),_defineProperty(_fn_checkout,"renderPaymentLoyaltyItem",function(e){subProgramId=e,fn_home.ajaxForm({},"GET","/loyalty/get-sub-program-details/"+e).done(function(e){var t;200===(e=JSON.parse(e)).statusCode?(t=e.data,loyaltyPayableAmount=t.price,$(".payment-cta").find(".init-pay").html("Pay <i class = 'rupee'>"+parseFloat(t.price).toFixed(2)+"</i>"),$(".lp-ll-sub-program").html(t.planName),$(".lp-ll-selling-price").html("&#8377 "+t.price),$(".lp-ll-selling-price").attr("value",t.price),t.strikePrice>t.price&&($(".lp-ll-marked-price").html("&#8377 "+t.strikePrice),$(".lp-ll-marked-price").attr("value",t.strikePrice))):console.log({Error:e})}).fail(function(){console.log("res")}).always(function(){fn_main.hideloader()})}),_defineProperty(_fn_checkout,"alertBox",function(e,t,a){var o=$(".li-alert-screen"),s=o.find(".cta");switch(a){case"no-slots-qc":o.find(".message").html(e),o.find(".heading").html("Alert!"),s.find(".cancel").html("Okay").attr("data-action","normal"),s.find(".confirm").hide(),o.addClass("show");break;case"repeat-order":var n=e.split("text-separator");o.find(".message").html(n[0]),o.find(".heading").html(n[1]),s.find(".cancel").css("margin-right","18px").html("EXISTING CART").attr("data-action","repeat-order"),s.find(".confirm").html("REPEAT ORDER").show().attr("data-action","repeat-order").attr("data-ship-id",n[2]),o.addClass("show");break;case"oos":o.find(".message").html(e),o.find(".heading").html("Alert [Change Product availability]"),s.find(".cancel").html("Dismiss").attr("data-action","normal"),s.find(".confirm").hide(),o.addClass("show");break;case"location-changed":o.find(".message").html(e),o.find(".heading").html("Alert! - Location Changed"),s.find(".cancel").html("Change Address"),s.find(".confirm").html("Review Cart").show().attr("data-action","review-cart"),o.addClass("show");break;case"alert":o.find(".message").html(e),o.find(".heading").html("Alert!"),s.find(".cancel").html("Okay"),s.find(".confirm").hide(),o.addClass("show");break;case"confirm-shipment":o.find(".message").html(e),o.find(".heading").html("Alert!"),s.html('\n        <button class="confirm">\n            Cancel\n        </button>\n        <button class="cancel">\n            Cancel\n        </button>'),s.find(".cancel").html("No").css({background:"#e41d36",color:"#ffffff","border-color":"#e41d36"}),s.find(".confirm").html("Yes").show().css({background:"#ffffff",color:"rgba(0, 0, 0, 0.87)","border-color":"rgba(0, 0, 0, 0.87)"}),s.find(".confirm").attr("data-action","review-shipment"),o.addClass("show");break;case"confirm-addr":o.find(".message").html(e),o.find(".heading").html("Alert!"),s.html('\n        <button class="confirm">\n            Cancel\n        </button>\n        <button class="cancel">\n            Cancel\n        </button>'),s.find(".cancel").html("No").css({background:"#e41d36",color:"#ffffff","border-color":"#e41d36"}),s.find(".confirm").html("Yes").show().css({background:"#ffffff",color:"rgba(0, 0, 0, 0.87)","border-color":"rgba(0, 0, 0, 0.87)"}),s.find(".confirm").attr("data-action","review-addr"),o.addClass("show");break;case"free-delivery":o.find(".message").html(e),o.find(".heading").html("Alert!"),s.html('\n        <button class="confirm">\n            Cancel\n        </button>\n        <button class="cancel">\n            Cancel\n        </button>'),s.find(".confirm").html("Remove").show().css({background:"#ffffff",color:"rgba(0, 0, 0, 0.87)","border-color":"rgba(0, 0, 0, 0.87)"}),s.find(".confirm").attr("data-action","remove-coupon"),s.find(".cancel").html("Continue").css({background:"#e41d36",color:"#ffffff","border-color":"#e41d36"}),o.addClass("show");break;case"alert-upi":o.find(".message").html(e),o.find(".heading").html("Are you sure to go back?"),s.find(".cancel").html("Stay"),s.find(".confirm").html("Leave").show().attr("data-action","upi-leave"),o.addClass("show")}"location-changed"!=a&&o.click(function(){o.removeClass("show"),s.removeClass("show")}),fn_checkout.alertCta(t,a)}),_defineProperty(_fn_checkout,"alertCta",function(a,o){var s=$(".li-alert-screen"),e=s.find(".cta");e.find(".cancel").on("click",function(e){switch(o){case"location-changed":$(".li-saved-address").find("li").removeClass("selected"),$(".li-page-body").find(".complete-address").addClass("disabled");break;case"free-delivery":var t=JSON.parse(localStorage.getItem("coupon")),a={"Total Amount":t.TotalAmount,"Coupon Name":t.CouponName,"Coupon Type":t.CouponType,Status:t.Status,Message:t.Message,"Hub ID":Number(localStorage.getItem("hub_id")),"City Name":localStorage.getItem("city_name"),Discount:t.Discount,"Licious Wallet Amount":Number(localStorage.getItem("wallet_usedValue"))};fn_cart.gaAddRemoveEvent("FreeDel_Coupon_Apply","Purchase",JSON.stringify(a)),a.Source="Purchase",clevertap.event.push("FreeDel_Coupon_Apply",a)}s.removeClass("show")}),e.find(".confirm").on("click",function(e){var t;switch(e.stopImmediatePropagation(),$(this).attr("data-action")){case"review-cart":fn_checkout.reviewCart(a,"show-location");break;case"remove-coupon":fn_checkout.removeCouponClick("free_remove");break;case"review-shipment":"true"===$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").attr("quickload")?(s.removeClass("show"),localStorage.setItem("coupon_used",""),fn_checkout.quickCheckoutLoadShipment()):(fn_checkout.removeCouponClick("remove"),fn_checkout.setNavActive("redo-shipment"),fn_checkout.setPageActive("redo-shipment"),$(".li-bill-details").hide(),$(".edit-shipments").hide(),localStorage.setItem("coupon_used",""),t={title:"Payment methods",subtitle:""},fn_checkout.setNavMessages(t,"cards"),s.removeClass("show"),fn_home.validateReferralMsg()&&$(".checkout-referral-msg").show());break;case"review-addr":"true"===$(".li-checkout-nav-steps").find(".li-nav-title .change-addr").attr("quickload")?(s.removeClass("show"),localStorage.setItem("coupon_used",""),fn_checkout.quickCheckoutAddressLoad()):(fn_checkout.setNavActive("redo-addr"),fn_checkout.setPageActive("redo-addr"),t={title:"Choose Address",subtitle:"You have "+$(".li-address-container").find("li").length+" saved address"},fn_checkout.setNavMessages(t,"addr"),t={title:"Payment methods",subtitle:""},fn_checkout.setNavMessages(t,"cards"),$(".li-bill-details").hide(),$(".change-addr").hide(),$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").hide(),s.removeClass("show"),localStorage.setItem("coupon_used",""),fn_home.validateReferralMsg()&&$(".checkout-referral-msg").show())}})}),_defineProperty(_fn_checkout,"reviewCart",function(){var e=localStorage.getItem("default_addr_lat"),t=localStorage.getItem("default_addr_lng");localStorage.setItem("address",sessionStorage.getItem("review_cart_address")),localStorage.setItem("city_name",sessionStorage.getItem("review_cart_city_name")),sessionStorage.removeItem("review_cart_city_name"),sessionStorage.removeItem("review_cart_address"),fn_checkout.updateCartLocation(e,t).done(function(e){var t=JSON.parse(e);"LOCATION_CHANGED"==t.status||"SERVICABLE"==t.status?null!=t.data?fn_home.ajaxForm({location:t.data.address,lat:t.data.lat,lng:t.data.lng,clearcart:"false"},"POST","/get-location").done(function(e){"success"==e.result&&(fn_checkout.setLocation(e),fn_cart.miniCart(),$(".li-alert-screen").removeClass("show"))}):(fn_cart.miniCart(),$(".li-alert-screen").removeClass("show")):Materialize.toast(t.message,3e3)})}),_defineProperty(_fn_checkout,"setLocation",function(e){$(".sub-header").find(".location-name").html(e.location),localStorage.setItem("hub_id",e.hub_id),localStorage.setItem("address",e.location),$(".city-location .city").html(localStorage.getItem("city_name"))}),_defineProperty(_fn_checkout,"resetAddr",function(){$(".li-checkout-nav-steps").find(".li-nav-title .change-addr").on("click",function(){var e,t=localStorage.getItem("coupon_used");""==t||null==t?(fn_checkout.getAddrCount("Checkout_changeAddress","Change Address"),fn_checkout.setNavActive("redo-addr"),fn_checkout.setPageActive("redo-addr"),e={title:"Choose Address",subtitle:"You have "+$(".li-address-container").find("li").length+" saved address"},fn_checkout.setNavMessages(e,"addr"),$(".li-bill-details").hide(),$(this).hide(),$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").hide(),e={title:"Payment methods",subtitle:""},fn_checkout.setNavMessages(e,"cards"),fn_home.validateReferralMsg()&&$(".checkout-referral-msg").show()):(fn_checkout.alertBox("Applied coupon will be removed, Wish to continue?","","confirm-addr"),$(".li-checkout-nav-steps").find("li.address .li-nav-title").html("Choose Address <span class = 'change-addr'>Change</span>"),fn_checkout.resetAddr())})}),_defineProperty(_fn_checkout,"completeAddress",function(){$(".complete-address").on("click",function(e){e.stopImmediatePropagation();var t,a=localStorage.getItem("default_addr_id");localStorage.getItem("default_addr_lat"),localStorage.getItem("default_addr_lng"),""==a?fn_checkout.alertBox("Select an address to continue","","alert"):(fn_checkout.setPageActive("addr"),localStorage.getItem("address")||localStorage.setItem("address",localStorage.getItem("last_address").split("<br>")[0]),t={title:"Choose Address <span class = 'change-addr'>Change</span>",subtitle:localStorage.getItem("address")},fn_checkout.setNavMessages(t,"addr"),fn_checkout.setNavActive("addr"),fn_checkout.getShipments("proceed-shipment"),fn_checkout.resetAddr())})}),_defineProperty(_fn_checkout,"resetForm",function(){var e=$(".li-addr-form-fields"),t=e.find("input");$.each(t,function(e,t){"addr-loc"!=t.dataset.type&&"addr-city"!=t.dataset.type&&(t.value="")}),e.find('[data-type="addr-flat"]').focus(),$(".addr-save-btn").addClass("disabled").html("Save").attr({"data-type":""}),fn_checkout.setFlag("false"),fn_checkout.showAddrPartfirst(),e.find('[data-type="email"]').prop("disabled",!1).css({opacity:1}),e.find('[data-type="name"]').prop("disabled",!1).css({opacity:1}),e.find('[data-type="addr-loc"]').prop("disabled",!1)}),_defineProperty(_fn_checkout,"showContinueShopping",function(e){$(".complete-shipments").hide(),$(".cart-empty-wrapper").show(),$(".continue-btn.shopping").on("click",function(){"cart"==e&&($(".li-cart-summary-wrapper").removeClass("show"),$(".cart-screen").hide()),window.location.href="/"})}),_defineProperty(_fn_checkout,"showAlertMessages",function(e){e&&Array.isArray(e)&&e.length&&e.map(function(e,t){$(".li-checkout-container").find(".shipment-"+(t+1)).find(".slots-selector").text()===e.which_slot?$(".li-checkout-container").find(".shipment-"+(t+1)).find(".slots-alert-message").html(e.message).show():$(".li-checkout-container").find(".shipment-"+(t+1)).find(".slots-alert-message").html("").hide()})}),_defineProperty(_fn_checkout,"eggFlag",!1),_defineProperty(_fn_checkout,"getShipments",function(c){return new Promise(function(l,d){slot_lock=[],slot_lock_dates=[],$(".complete-shipments").addClass("disabled"),$(".complete-shipments").show(),$(".li-checkout-page.shipments").find(".li-shipment-container.express").hide,$(".li-checkout-page.shipments").find(".li-shipment-container.split").hide(),fn_home.ajaxForm({},"POST","/checkout/get-shipments").done(function(e){var t,a,o,s,n,r,i=JSON.parse(e);200===i.statusCode?(i.data.shipment_summary.length&&i.data.shipment_summary[0].products[0].hub_id!==localStorage.getItem("hub_id")&&(Materialize.toast("Your current location and selected location seems to be different. Please select the right address before placing an order.",3e3),window.location.reload()),$(".cart-empty-wrapper").hide(),"loyalty_item"in i.data&&null!==i.data.loyalty_item&&0!==i.data.loyalty_item.length&&(renderCheckoutLoyaltyItem(i.data.loyalty_item[0]),$(".co-ll-item").show()),fn_home.validateReferralMsg()&&$(".checkout-referral-msg").show(),0<i.data.dynamic_delivery_message.length&&(i.data.dynamic_delivery_message[0].enable||"success"===i.data.dynamic_delivery_message[0].style)?($(".dynamic-delivery-message .message").html(i.data.dynamic_delivery_message[0].message),$(".dynamic-delivery-info-pop-up .info-header .header-text").html(i.data.dynamic_delivery_message[0].information_header),$(".dynamic-delivery-info-pop-up .info-body").html(i.data.dynamic_delivery_message[0].information),"success"===i.data.dynamic_delivery_message[0].style?$(".dynamic-delivery-message").addClass("success"):$(".dynamic-delivery-message").removeClass("success"),$(".dynamic-delivery-message").click(function(){$(".dynamic-delivery-info-pop-up").show(),$(".loc-screen").removeClass("hide"),$(".loc-screen").addClass("show"),$(".dynamic-delivery-info-pop-up .info-header .close").click(function(){$(".dynamic-delivery-info-pop-up").hide(),$(".loc-screen").addClass("hide"),$(".loc-screen").removeClass("show")}),$(".loc-screen").click(function(){$(".dynamic-delivery-info-pop-up").hide(),$(".loc-screen").addClass("hide"),$(".loc-screen").removeClass("show")})}),$(".dynamic-delivery-message").css("display","flex")):$(".dynamic-delivery-message").css("display","none"),$(".li-checkout-page.shipments").find(".li-shipment-container.express").html("").show(),$(".li-checkout-page.shipments").find(".li-shipment-container.split").html("").show(),1<i.data.shipment_summary.length&&$(".li-checkout-page.shipments").find(".li-shipment-container.split").show(),localStorage.setItem("split",i.data.shipment_summary.length),localStorage.setItem("shipment_split",i.data.shipment_summary.length),t=0<i.data.messages.length?i.data.messages[0].message:"",0<i.data.messages.length?$.map(i.data.messages,function(e){"eggs"===e.condition?fn_checkout.eggFlag=!0:fn_checkout.eggFlag=!1}):fn_checkout.eggFlag=!1,a=i.data.shipment_summary.length,o=0,$.map(i.data.shipment_summary,function(e){e.products.map(function(e){return o+=parseInt(e.quantity)})}),s=i.data.order_charges,n={title:"Delivery Summary",subtitle:o+" items to be delivered in "+a+" shipments"},fn_checkout.setNavMessages(n,"shipment"),fn_cart.cartSaveMessage(i.data),localStorage.setItem("count",o),r={},$.map(s,function(e){"subtotal"==e.key&&(r.subtotal=e.value),"deliverycharge"!=e.key&&"delivery_charge"!=e.key||(r.delivery=e.value),"discount"==e.key&&(r.discount=e.value),"liciouswallet"!=e.key&&"wallet"!=e.key||(r.wallet=e.value),"total"==e.key.toLowerCase()&&(r.total=e.value)}),fn_ll.loyalty_cart_value=r.total.toString(),fn_ll.loyalty_delivery_charges=r.delivery.toString(),localStorage.setItem("amount",JSON.stringify(r)),fn_checkout.renderShipments(i.data.shipment_summary,t,c,r,o),fn_checkout.showAlertMessages(i.data.shipment_alert_message),$(".info-hover").hover(function(){var e={ShipmentID:$(this).attr("data-ship_id"),"Product Name":$(this).attr("data-prname"),"Category Name":$(this).attr("data-category"),"Category ID":JSON.parse(localStorage.getItem("allitem")).category_id,Source:"Checkout_Slot",Checkout_Flow:checkout_flow()};fn_main.assignIncomingSource(e),fn_cart.gaAddRemoveEvent("Checkout_InfoIcon","Checkout_Slot",JSON.stringify(e)),clevertap.event.push("Slot Selection Load",e)}),l(i)):202!==i.statusCode||"oos_error"!==i.data.errorMessage&&"cross_sell_modified"!==i.data.errorMessage&&"empty_shipment"!==i.data.errorMessage?202===i.statusCode&&"empty_cart"==i.data.errorMessage?($(".li-checkout-page.shipments").find(".li-shipment-container.express").html(""),$(".li-checkout-page.shipments").find(".li-shipment-container.split").html(""),$(".dynamic-delivery-message").css("display","none"),fn_checkout.showContinueShopping(),$(".co-ll-item-placeholder").html("")):d("fail"):(Materialize.toast(i.data.message,5e3),fn_cart.miniCart(),$(".dynamic-delivery-message").css("display","none"))})})}),_defineProperty(_fn_checkout,"renderShipments",function(e,t,a,o){total_shipments=e.length,slot_lock.length=total_shipments,slot_lock_dates.length=total_shipments;var s=e[0].products,n=(JSON.parse(localStorage.getItem("amount")).discount,'<div class="split-message">'+t+"</div>");$(".li-checkout-page.shipments").find(".li-shipment-container.express").html(""),$(".li-checkout-page.shipments").find(".li-shipment-container.split").html(""),$(".li-checkout-page.shipments").find(".li-shipment-container.split").html(n),1<e.length?(localStorage.setItem("split","True"),$(".li-checkout-page.shipments").find(".li-shipment-container.express").show(),$(".li-checkout-page.shipments").find(".li-shipment-container.split").show()):(localStorage.setItem("split","False"),$(".li-checkout-page.shipments").find(".li-shipment-container.express").show(),$(".li-checkout-page.shipments").find(".li-shipment-container.split").hide()),branchEventData=[];var r={productId:"",productName:"",quantity_avail:0,quantity_stock:0,category_id:"",base_price:"",category_name:""},i={expressProductName:"",scheduledProductName:"",expressType:"",expressQuantity:"",expressInventory:"",expressDp:"",expresRm:"",schedule1Type:"",schedule1Quantity:"",schedule1Inventory:"",schedule1Dp:"",schedule1Rm:"",shipmentType:"",shipmentId:""};localStorage.setItem("shipmentCount",e?e.length:0),$.map(e,function(e,t){present_shipment=t+1,i.shipmentId=i.shipmentId.concat(e.id+",");var a='<div class="li-shipment shipment-'+e.id+'"><div class="li-page-heading"></div><div class="li-slots-render"></div><div class="slots-alert-message"></div><div class="li-shipment-items"><ul></ul></div></div>';0===t?("EXPRESS"==e.slots[0].type&&(i.expresscount=e.products.length,i.shipmentType=i.shipmentType.concat("EXPRESS"),e.products.forEach(function(e){i.expressRm=i.expressRm+Number(e.rm_buffer_avail),i.expressDp=i.expressDp+Number(e.dispatched_quantity_avail)+",",i.expressQuantity=i.expressQuantity+Number(e.quantity)+",",i.expressInventory=i.expressInventory+Number(e.live_stock_avail)+",",i.expressType=i.expressType.concat(e.type+","),i.expressProductName=i.expressProductName.concat(e.product_name+",")})),"SCHEDULED"==e.slots[0].type&&(i.scheduledcount=e.products.length,i.shipmentType=i.shipmentType.concat("SCHEDULED"),e.products.forEach(function(e){i.schedule1Rm=i.schedule1Rm+Number(e.rm_buffer_avail),i.schedule1Dp=i.schedule1Dp+Number(e.dispatched_quantity_avail)+",",i.schedule1Quantity=i.schedule1Quantity+Number(e.quantity)+",",i.schedule1Inventory=i.schedule1Inventory+Number(e.live_stock_avail)+",",i.schedule1Type=i.schedule1Type.concat(e.type+","),i.scheduledProductName=i.scheduledProductName.concat(e.product_name+",")})),$(".li-checkout-page.shipments").find(".li-shipment-container.express").append(a)):(i.scheduledcount=e.products.length,e.products.forEach(function(e){i.schedule1Rm=i.schedule1Rm+Number(e.rm_buffer_avail),i.schedule1Dp=i.schedule1Dp+Number(e.dispatched_quantity_avail)+",",i.schedule1Quantity=i.schedule1Quantity+Number(e.quantity)+",",i.schedule1Inventory=i.schedule1Inventory+Number(e.live_stock_avail)+",",i.schedule1Type=i.schedule1Type.concat(e.type+","),i.scheduledProductName=i.scheduledProductName.concat(e.product_name+",")}),$(".li-checkout-page.shipments").find(".li-shipment-container.split").append(a)),$.map(e.products,function(e,t){r.productId=r.productId.concat(e.product_id+","),r.category_name=r.category_name.concat(e.category_name+","),r.productName=r.productName.concat(e.product_name+","),r.category_id=r.category_id.concat(e.category_id+","),r.base_price=r.base_price.concat(e.base_price+","),r.quantity_avail=r.quantity_avail+(e.quantity+","),r.quantity_stock=r.quantity_stock+Number(e.live_stock),branchEventData.push({item_name:e.product_name,item_id:e.product_id,currency:"INR",price:e.base_price.toString(),quantity:e.quantity.toString(),item_category:e.category_name})}),localStorage.setItem("allitem",JSON.stringify(r)),localStorage.setItem("shipmentType",i.shipmentType),fn_checkout.renderShipmentProducts(e.products,"li-shipment.shipment-"+e.id,e.id,e.slots),fn_checkout.renderShipmentHeading(e.messages,"li-shipment.shipment-"+e.id),fn_checkout.renderShipmentSlots(e.slots,"li-shipment.shipment-"+e.id,e.id)});var d={},c=1;$.map(e,function(e,t){var a,o=[],s=[],n=[],r=[],i=[],l=[];$.map(e.products,function(e,t){o.push(e.product_name),s.push(e.type),n.push(e.quantity),r.push(e.live_stock_avail),i.push(e.dispatched_quantity_avail),l.push(e.rm_buffer_avail)}),"EXPRESS"==e.slots[0].type?Object.assign(d,{"Express Item Count":e.products.length,"Express Delivery Items":o.toString(),"Express Item types":s.toString(),"Express Item Quantity":n.toString(),"Express Item Live Inventory":r.toString(),"Express Item DP":i.toString(),"Express Item RM":l.toString(),Checkout_Flow:checkout_flow()}):((a={})["Slot "+c+" Item Count"]=e.products.length,a["Scheduled"+c+" delivery Items"]=o.toString(),a["Schedule"+c+" Item types"]=s.toString(),a["Scheduled"+c+" Item Quantity"]=n.toString(),a["Scheduled"+c+" Live Inventory"]=r.toString(),a["Scheduled"+c+" Item DP"]=i.toString(),a["Scheduled"+c+" Item RM"]=l.toString(),Object.assign(d,a),c++),fn_main.assignIncomingSource(d)}),localStorage.setItem("shipmentid",i.shipmentId);var l,p=JSON.parse(localStorage.getItem("cart")),u=null!==localStorage.getItem("amount")?JSON.parse(localStorage.getItem("amount")).discount:0;"false"!=a&&"remove"!=a&&(e={"Cart Value":JSON.parse(localStorage.getItem("amount")).subtotal,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id")),"Saved Value":p&&p.savedAmount?p.savedAmount:u,"Reason for Slot":"","Split Slot":1<Number(e.length),"No of Split":Number(e.length),"Default Slot":i.shipmentType,"Category ID":r.category_id,Checkout_Flow:checkout_flow()},fn_main.assignIncomingSource(e),Object.assign(d,e),fn_cart.gaAddRemoveEvent("Checkout_defaultslot","Checkout_Slot",JSON.stringify(d)),d.Source="Checkout_Slot",clevertap.event.push("Slot Selection Load",d)),"proceed-shipment"==a&&(l={"Cart Value":o.subtotal,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(s[0].hub_id),"Product ID":r.productId,"Product Name":r.productName,"Category ID":r.category_id,Quantity:localStorage.getItem("itemQuan"),"Saved Value":p&&p.savedAmount?p.savedAmount:u,"City ID":Number(localStorage.getItem("city_id")),Checkout_Flow:checkout_flow()},fn_main.assignIncomingSource(l),fn_cart.gaAddRemoveEvent("Checkout_Selectshipment","Checkout_Proceedshipment",JSON.stringify(l)),l.Source="Checkout_Proceedshipment",clevertap.event.push("Checkout Started",l)),fn_checkout.showSlots(),fn_checkout.hideSlots(),fn_checkout.selectSlot(i,e),fn_checkout.completeShipment(i,e,r,o,i.shipmentType)}),_defineProperty(_fn_checkout,"renderShipmentProducts",function(e,r,i){var l={product_id:"",product_name:"",quantity:""};$.map(e,function(e){var t="",a="",o="qty",s=0<e.discount?'<span class = "price discount"><b class = "rupee">'+e.base_price+'</b><b class = "rupee">'+e.actual_price+"</b></span>":'<span class = "price"><b class = "rupee text-red">'+e.actual_price+"</b></span>";""!=e.shipment_info_message&&(t='<i class="info-hover" data-ship_id="'+i+'" data-category="'+e.category_name+'" data-prname="'+e.product_name+'">i <label>'+e.shipment_info_message+"</label></i>",o="split-qty",a=e.shipment_quantity.replace(/of/g,"/")),l.product_id=l.product_id.concat(e.product_id+","),l.product_name=l.product_name.concat(e.product_name+","),l.quantity=l.quantity+(e.quantity+","),a=e.quantity;var n='<li data-sprid="'+e.product_id+'" ><img src="'+e.image+'" alt="'+e.product_name+'"><div class="li-prod-desc"><p class="pr-name">'+e.product_name+"</p><p>"+e.weight+s+'<span class="'+o+'">qty:<span>'+a+"</span>"+t+'</span></p><span class="delete-prod" '+fn_cart.getAttributesString(e)+' data-shipid="'+i+'" data-prid="'+e.product_id+'" data-sprname="'+e.product_name+'" data-category="'+e.category_name+'" data-hubid='+e.hub_id+" data-split="+e.is_split+' ><label for="">Remove Product</label></span></div></li>';$("."+r).find(".li-shipment-items ul").append(n)}),localStorage.setItem("product",JSON.stringify(l)),fn_checkout.deleteShipmentItem()}),_defineProperty(_fn_checkout,"renderShipmentHeading",function(e,t){$("."+t).find(".li-page-heading").html(e.message)}),_defineProperty(_fn_checkout,"renderShipmentSlots",function(e,c,p){e=e.filter(function(e){return 0<e.slots.length});var u="",m="",h="";default_delivery="Select a Delivery Slot",slot_class=" error",shipment_continue=!1,slot_selected=!1,$.map(e,function(n,e){ship_slotId=e+1,n.is_express&&(default_delivery=n.slots[0].time),n.selected&&(slot_selected=!0),0!=e||n.is_express?0==e&&n.is_express&&(h=h.replace("{{time_slot}}",n.slots[0].time).replace("{{ship_id}}",p).replace("{{date}}",n.date).replace("{{slot_time}}",n.slots[0].time)):h="";var r="",i=n.date;$.map(n.slots,function(e,t){var a=1==e.status?"":"n-a",o=void 0;e.selected?(o=" selected",slot_lock_dates[present_shipment-1]=e.time):o="";var s="";s+='<div class="dd-charge '+(1===e.show_delivery_type||0===e.status?"hide-dc":2===e.show_delivery_type?"free-delivery":"show-dc")+'">'+e.message+"</div>",r+='<li data-ship_id="'+p+'" data-date="'+i+'" data-time="'+e.time+'">\n                          <button class = "'+a+o+'">\n                            '+e.time+"\n                          </button>\n                          "+s+"\n                        </li>",n.is_express&&0==t&&(r+="<br/>")}),$.map(n.slots,function(e){if(e.selected)return default_delivery=e.time,slot_class="",!(shipment_continue=!0)}),shipment_continue&&!fn_checkout.eggFlag?$(".complete-shipments").removeClass("disabled"):$(".complete-shipments").addClass("disabled");var t,a=" ",o=new Date(n.timestamp).getDate(),s=(new Date).getDate(),l=new Date(n.timestamp).getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][new Date(n.timestamp).getMonth()];o===s?t=l:o===s+1?(t="Tomorrow "+l,n.selected&&"Select a Delivery Slot"!==default_delivery&&(default_delivery="Tomorrow "+default_delivery)):(t=l,n.selected&&"Select a Delivery Slot"!==default_delivery&&(default_delivery+=", "+l)),m+='<div class="dates" ship-id="'+present_shipment+'" data-id="'+present_shipment+ship_slotId+'" id="dates_'+present_shipment+ship_slotId+'"> '+(o===s?"Today "+t:t)+" </div>",u+='<div class = "slot-day-time" ship-id="'+present_shipment+'" id="slot-day-time_'+present_shipment+ship_slotId+'" data-id="'+present_shipment+ship_slotId+'" >\n                            <ul class = "slot-time">\n                              '+r+"\n                            </ul>\n                          </div>";var d='<div class="slots-dropdown '+slot_class+'" data-slotselected="'+slot_selected+'"><label>Choose your slot to continue</label><div class="slots-selector" ship-id="'+present_shipment+'" lock_slot_id="'+slot_lock[present_shipment-1]+'" >'+default_delivery+'</div><div class="slots-screen"></div><div class="slots-layout"><div class="slots_'+present_shipment+'"><div class="slot-header-text">\n          <span> Select slot for Shipment '+present_shipment+" of "+total_shipments+' </span>\n          <div class="cancel-slot">x</div>\n        </div><div class="slot-day-text" ship-id="'+present_shipment+'">'+m+"</div>"+h+u+'<div class="action">\n                            <span class="cancel">CANCEL</span>\n                            <button class="select-proceed">SELECT & PROCEED</button>\n                          </div></div></div></div></div>',a=a.concat(default_delivery+",");localStorage.setItem("slotTime",a),$("."+c).find(".li-slots-render").html(d),$(".slot-day-time").hide(),$(".dates").on("click",function(){$(".dates").removeClass("active"),$(this).addClass("active"),$(".slot-day-time").hide();for(var e=$(this).attr("data-id"),t=document.querySelectorAll(".slot-day-time"),a=0;a<t.length;a++)if("slot-day-time_"+e===t[a].id){$("#slot-day-time_"+e).show();break}}),$(".slot-time").find(".hide-dc").length===$(".slot-time").find("li").length?($(".dd-charge").css("display","none"),$(".slot-time li").css("margin-bottom","15px")):($(".dd-charge").css("display","block"),$(".slot-time li").css("margin-bottom","0px"))})}),_defineProperty(_fn_checkout,"deleteShipmentItem",function(){$(".li-shipment-items").find(".delete-prod").on("click",function(){var t,o,s,n=$(this);n.data("is_combo_child")?fn_cart.showRemovePopup(n,"shipment"):(t=n.attr("data-prid"),o=n.attr("data-shipid"),category=n.attr("data-category"),hub_id=n.attr("data-hubid"),prname=n.attr("data-sprname"),split=n.attr("data-is_split"),schedule_slot=$(".li-shipment.shipment-"+o).find(".slots-selector").text(),slot=$(".li-shipment.shipment-2").find(".slots-dropdown ").attr("data-slotselected"),is_split=localStorage.getItem("split"),slot="false"==slot?"EXPRESS":"SCHEDULED",s="False"!=is_split,fn.checkout_oos.ajaxForm({shipId:o,productId:t},"POST","/checkout/shipment-item-delete").done(function(e){var a;"success"==JSON.parse(e).status&&(a={"Product Name":prname,"Category Name":category,"Shipment ID":Number(o),"Product ID":t,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(hub_id),Slot:slot,"Is Split Order":s,"Scheduled Slot Selected":schedule_slot,Checkout_Flow:checkout_flow()},fn_main.assignIncomingSource(a),1==n.data("is_combo")&&function(){a.is_combo="1";var e=$(".orange-alert-toast"),t=(n.data("combo_msgs")||{alert_message:"Combo offer removed due to combo modification"}).alert_message;e.html('<div class="orange-toast">'+t+"</div>"),"none"==$(".dynamic-delivery-message").css("display")?e.css("position","inherit"):e.css("position","absolute"),e.show(),setTimeout(function(){e.hide()},5e3),n.removeData("is_combo")}(),fn_cart.gaAddRemoveEvent("Checkout_Slot_Remove","Checkout_Slot",JSON.stringify(a)),a.Source="Checkout_Slot",clevertap.event.push("Remove Items",a),n.parents(".li-shipment-items").find('[data-sprid="'+t+'"]').addClass("remove"),fn.checkout_oos.cartCount(),setTimeout(function(){n.parents(".li-shipment-items").find('[data-sprid="'+t+'"]').removeClass("remove"),n.parents(".li-shipment-items").find('[data-sprid="'+t+'"]').remove(),fn_checkout.getShipments("remove")},600))}))})}),_defineProperty(_fn_checkout,"selectSlot",function(l){$(".slots-dropdown").find("li").on("click",function(e){$(this).children("button").hasClass("n-a")||(e.stopImmediatePropagation(),$(".slots-dropdown").find("li button").removeClass("selected"),$(".slots-dropdown").find(".select-proceed").removeClass("disabled"),li=$(this),date=li.data("date"),ship_id=li.data("ship_id"),time=li.data("time"),li.find("button").addClass("selected"))}),$(".slots-dropdown").find(".select-proceed").on("click",function(e){e.stopImmediatePropagation(),void 0===li||li.hasClass("n-a")||(li.parents(".slots-layout").addClass("loader-div"),$(this).addClass("disabled"),fn_home.ajaxForm({date:date,slot:time,ship_id:ship_id},"POST","/checkout/select-slot").done(function(e){var t,a,o,s,n,r,i=JSON.parse(e);200===i.statusCode?(t=JSON.parse(localStorage.getItem("amount")),a=JSON.parse(localStorage.getItem("count")),localStorage.setItem("shipment_len",i.data.shipment_summary.length),o=Number(li.parent().parent().attr("ship-id")),s=Number(li.parent().parent().attr("data-id")),slot_lock[o-1]=s,slot_lock_dates[o-1]=time,n=0<i.data.messages.length?i.data.messages[0].message:"",fn_checkout.renderShipments(i.data.shipment_summary,n,"false",t,a),fn_checkout.showAlertMessages(i.data.shipment_alert_message),$(this).removeClass("disabled"),$(".slots-screen-bg").hide(),$(".pointer").removeClass("fade"),li.parents(".slots-dropdown").attr("data-slotselected","true"),r={"Default Slot":l.shipmentType,"Split Slot":1<i.data.shipment_summary.length,"No of Split":Number(i.data.shipment_summary.length),"Express Delivery Items":l.expressProductName,"Scheduled Delivery Items":l.scheduledProductName,"Scheduled Date":date,"Shipment ID":ship_id,Checkout_Flow:checkout_flow()},fn_main.assignIncomingSource(r),fn_cart.gaAddRemoveEvent("Checkout_changeSlot","Checkout_Slot",JSON.stringify(r)),r.Source="Checkout_Slot",clevertap.event.push("Changed Slot",r)):202===i.statusCode&&"empty_stock"==i.data.errorMessage?(fn_checkout.getShipments("proceed-shipment"),Materialize.toast(i.data.message,5e3),$(".slots-screen-bg").hide(),$(".pointer").removeClass("fade")):400===i.statusCode?($(".slots-screen-bg").trigger("click"),Materialize.toast("Something went wrong, please try again",5e3)):(li.parents(".slots-dropdown").attr("data-slotselected","true"),Materialize.toast(i.data.message,5e3))}).always(function(){li.parents(".slots-layout").addClass("complete"),setTimeout(function(){li.parents(".slots-layout").removeClass("loader-div complete")},1200)}))})}),_defineProperty(_fn_checkout,"mergeShipments",function(){return fn_home.ajaxForm({},"POST","/checkout/merge-shipment")}),_defineProperty(_fn_checkout,"resetShipment",function(){$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").on("click",function(){$(".co-ll-item").show(),$(".free-delivery-mssg").hide(),$(".li-checkout-nav-steps ul").removeClass("ul-wth-msg");var e=localStorage.getItem("coupon_used");""==e||null==e?(clevertap.event.push("Edit Slots",{ShipmentId_NewSlot:localStorage.getItem("shipmentid"),Source:"Purchase"}),fn_cart.gaAddRemoveEvent("Purchase_EditSlot","Purchase"),fn_checkout.setNavActive("redo-shipment"),fn_checkout.setPageActive("redo-shipment"),$(".li-bill-details").hide(),$(this).hide(),fn_checkout.setNavMessages({title:"Payment methods",subtitle:""},"cards"),fn_home.validateReferralMsg()&&$(".checkout-referral-msg").show()):fn_checkout.alertBox("Applied coupon will be removed, Wish to continue?","","confirm-shipment")})}),_defineProperty(_fn_checkout,"pushEEProgressCheckout",function(){try{window.dataLayer&&dataLayer.push({event:"checkout_progress",ecommerce:{checkout:{actionField:{step:2,option:"slot"},products:function(){try{var e=function(){var e=JSON.parse(localStorage.getItem("cart")),t={};try{t=JSON.parse(localStorage.getItem("allitem"))}catch(e){}function a(e){var t=e.string,a=e.split,o=e.initialValue;return t.split(a).reduce(function(e,t){return""!==t.trim()&&e.push(t.trim()),e},o)}var o=a({string:e.ProductID,split:",",initialValue:[]}),s=a({string:e.ProductName,split:",",initialValue:[]}),n=a({string:t.category_id,split:",",initialValue:[]}),r=a({string:t.base_price,split:",",initialValue:[]}),i=a({string:t.quantity_avail,split:",",initialValue:[]});return{v:o.reduce(function(e,t,a){return e.push({item_name:s[a],id:o[a],item_id:o[a],item_category:n[a],price:r[a],index:a,currency:"INR",quantity:Number(i[a])}),e},[])}}();if("object"==_typeof(e))return e.v}catch(e){return[]}}()}}})}catch(e){}}),_defineProperty(_fn_checkout,"completeShipment",function(e,t,f,_,g){return new Promise(function(e,t){e(),$(".complete-shipments").on("click",function(e){$(".co-ll-item").hide(),e.stopImmediatePropagation();var h=$(this);localStorage.removeItem("method"),$(".li-page-body.delivery-summary").addClass("loader-div"),h.addClass("disabled"),h.attr("disabled",!0);var a=!1;return $.each($(".slots-dropdown"),function(e,t){return $(t).data("slotselected")?(a=!0,void $(t).removeClass("error")):(a=!1,void $(t).addClass("error"))}),localStorage.setItem("pay-later-scenario",!1),fn_checkout.pushEEProgressCheckout(),a?void fn_checkout.mergeShipments().done(function(e){var t,a,o,s,n,r,i,l,d,c,p,u,m=JSON.parse(e);200===m.statusCode?($(".checkout-referral-msg").hide(),localStorage.setItem("product_quantity",f.quantity_avail),$.map(m.data.order_charges,function(e){"subtotal"===e.key&&(t=e.value),"deliverycharge"!==e.key&&"delivery_charge"!=e.key||(a=e.value),"total"===e.key.toLowerCase()&&(o=e.value),"discount"===e.key&&(s=e.value),"loyaltyitem"===e.key&&localStorage.setItem("cartHasLoyalty",!0)}),n={total:o,subtotal:t,discount:s,deliveryCharge:a},localStorage.setItem("amount",JSON.stringify(n)),null!==localStorage.getItem("cartHasLoyalty")&&"true"==localStorage.getItem("cartHasLoyalty")&&(fn_ll.loyalty_cart_value=t.toString(),fn_ll.loyalty_delivery_charges=a.toString()),i=(r=JSON.parse(localStorage.getItem("allitem"))).quantity_avail,l="True"==(l=localStorage.getItem("split","True")),d={"Cart Value":t,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id")),"Product ID":r.productId,"Product Name":r.productName,"Category ID":r.category_id?r.category_id:"","Saved Value":_.discount,"Is Split order":l,"No of Split":Number(localStorage.getItem("shipment_split")),Defaultslot:g,Checkout_Flow:checkout_flow()},fn_main.assignIncomingSource(d),c={CartValue:t,ProductID:r.productId,ProductName:r.productName,SavedValue:_.discount,Delivery:a,Discount:s,Total:o,Checkout_Flow:checkout_flow()},fn_main.assignIncomingSource(c),localStorage.setItem("payment-delivery",JSON.stringify(c)),p=JSON.parse(JSON.stringify(d)),"object"==_typeof(i.split(","))&&(d.Quantity=i.split(",")),"string"==typeof i&&(p.Quantity=i),fn_cart.gaAddRemoveEvent("Checkout_ProceedPayment","Checkout_Slot",JSON.stringify(p)),p.Source="Checkout_Slot",p["Category ID"]=JSON.parse(localStorage.getItem("allitem")).category_id,clevertap.event.push("Payment Initiated",p),fn_home.sendBranchCheckoutEvent("checkout_progress",branchEventData),localStorage.setItem("discount",_.discount),fn_checkout.setPageActive("shipment"),fn_checkout.setNavActive("shipment"),u={title:"Delivery Summary <span class = 'edit-shipment'>Edit</span>",subtitle:m.data.messages.message},fn_checkout.setNavMessages(u,"shipment"),$(".licious-wallet").find(".lic-btn").removeClass("checked"),fn_checkout.isCODEnabled&&$(".payment-options-list").find('[data-payname="cod"]').removeClass("disabled"),fn_checkout.isPODEnabled&&$(".payment-options-list").find('[data-payname="pod"]').removeClass("disabled"),fn_checkout.isCODEnabled&&$(".payment-options-list").find('[data-payname="cod"]').removeClass("disabled"),fn_checkout.isPODEnabled&&$(".payment-options-list").find('[data-payname="pod"]').removeClass("disabled"),$(".li-bill-details").show(),fn_checkout.renderBillDetails(m.data.order_charges),fn_checkout.resetShipment(),fn_checkout.payments.fetchPayments("payment"),h.removeClass("loading")):(Materialize.toast(m.data.message,5e3),fn_cart.miniCart()),h.attr("disabled",!1)}).fail(function(){h.attr("disabled",!1),h.removeClass("disabled")}).always(function(){$(".li-page-body.delivery-summary").addClass("complete"),h.removeClass("disabled"),setTimeout(function(){$(".li-page-body.delivery-summary").removeClass("complete loader-div")},1200)}):(h.attr("disabled",!1),$(".li-page-body.delivery-summary").addClass("complete"),void setTimeout(function(){$(".li-page-body.delivery-summary").removeClass("complete loader-div")},1200))})})}),_defineProperty(_fn_checkout,"renderBillDetails",function(e){var o=$(".bill-breakup");o.html("");var t='<p class = "c-a coupon-remove"><span><b></b><i>COUPON NAME</i></span><button class = "remove-coupon" is-auto-ref="'+fn_home.validateReferralMsg()+'">Remove</button></p>',a='<div class = "coupon-div coupon-holder"> <div class="title">'+apply_coupon_title+'</div><p class = "c-a coupon-apply" style="margin: 0px;"><input type="text" style="font-size: 17px; color: #6d6e71; padding-left: 0px; height: 36px; width: 72%;" required class = "coupon-code" placeholder="Type your code here"><button class = "apply-coupon" disabled>Apply</button><button class = "clear-coupon-code">Remove</button></p>'+t+'<p class = "c-a complimentary-prod"><span><img src = "https://d2407na1z3fc0t.cloudfront.net/products/pr_57ac8c42ee432/pr_img_59b8bb6407da8"/><i>COUPON NAME</i></span><button class = "remove-coupon">Remove</button></p><div class="coupon-msg-success"></div><div class="coupon-error"></div></div>',s=0,n=$(".payment-cta").find(".init-pay");$.each(e,function(e,t){var a;"total"===t.key.toLowerCase()&&(s=t.value,a=JSON.parse(localStorage.getItem("amount")),"CREATED_WITH_FAILURE"===localStorage.getItem("payment_info")&&null!==a.total?localStorage.setItem("payable",a.total):localStorage.setItem("payable",s),n.find("i").html(parseFloat(s).toFixed(2)))});var r="";$.map(e,function(e){var t,a=e.attribute.toLowerCase().replace(/ /g,"-");"total"===e.key.toLowerCase()?r='<li class="'+a+'">'+e.attribute+"<span>"+e.value+'</span>\n        <div class="message">'+e.message+"</div></li>":(t='<li class="'+a+'">\n                            '+e.attribute+"\n                            <span>"+("discount"===e.key&&e.value?"-"+e.value:e.value)+'</span>\n                            <div class="message '+("discount"===e.key||("deliverycharge"===e.key||"delivery_charge"==e.key)&&0===e.value?"positive":"")+'">'+e.message+"</div>\n                          </li>",o.append(t))}),o.append(r),o.find("li").length,$(".coupon-div").length&&$(".coupon-div").remove(),$("div[class='licious-wallet']").before(a),$(".clear-coupon-code").click(function(){$(".coupon-code").val(""),$(".coupon-code").css("text-transform","none"),$(".coupon-code").attr("placeholder","Type your code here"),$(".clear-coupon-code").hide(),$(".coupon-code").css("width","75%"),$(".coupon-code").css("pointer-events","auto"),$(".li-bill-details").find(".coupon-error").hide(),$(".li-bill-details").find(".coupon-div").removeClass("coupon-invalid"),$(".li-bill-details").find(".c-a .apply-coupon").show()}),$(".coupon-code").focus(function(){$(this).attr("placeholder",""),$(this).css("text-transform","uppercase"),$(".coupon-holder").css("box-shadow","0 2px 4px 0 rgba(0, 0, 0, 0.19)"),$(this).css("border-bottom","solid 1px #6d6e71 !imporatant"),0===$(this).val().length&&($(".apply-coupon").attr("disabled",!0),$(".apply-coupon").css("border-color","#cbcbcb"),$(".apply-coupon").css("color","#cbcbcb"))}),$(".coupon-code").blur(function(){$(".coupon-holder").css("box-shadow","none"),$(this).css("border-bottom","solid 1px #cbcbcb"),0===$(this).val().length&&($(this).css("text-transform","none"),$(this).attr("placeholder","Type your code here"),$(".apply-coupon").attr("disabled",!0),$(".apply-coupon").css("border-color","#d0021b"),$(".apply-coupon").css("color","#d0021b"))}),$(".coupon-code").keyup(function(){0===$(this).val().length?($(".apply-coupon").attr("disabled",!0),$(".apply-coupon").css("border-color","#cbcbcb"),$(".apply-coupon").css("color","#cbcbcb")):($(".apply-coupon").attr("disabled",!1),$(".apply-coupon").css("border-color","#d0021b"),$(".apply-coupon").css("color","#d0021b"))}),fn_checkout.applyCoupon()}),_defineProperty(_fn_checkout,"updateBilling",function(e,t){var a=$(".bill-breakup"),o=$(".payment-cta").find(".init-pay"),s=$(".lp-ll-selling-price").length?parseFloat(loyaltyPayableAmount):parseFloat(localStorage.getItem("payable")),n=0;"li_minus"==t?(n=parseFloat(s-e),a.find('[class="licious-wallet"]').find("span").html("-"+e),a.find('[class="total"]').find("span").html(n.toFixed(2)),o.find("i").html(parseFloat(n).toFixed(2)),localStorage.setItem("payable",n),0===(loyaltyPayableAmount=n)?(o.html("Place Order"),localStorage.setItem("pay_source","l_wallet")):o.html("Pay <i class='rupee'>"+n.toFixed(2)+"</i>")):"li_plus"==t?(n=parseFloat(s+e),a.find('[class="licious-wallet"]').find("span").html(0),a.find('[class="total"]').find("span").html(n.toFixed(2)),o.find("i").html(n.toFixed(2)),localStorage.setItem("payable",n),0===(loyaltyPayableAmount=n)?(o.html("Place Order"),localStorage.setItem("pay_source","l_wallet")):o.html("Pay <i class='rupee'>"+n.toFixed(2)+"</i>")):(a.find('[class="subtotal"]').find("span").html(e.subtotal),a.find('[class="delivery-charge"]').find("span").html(e.delivery),a.find('[class="discount"]').find("span").html(e.discount),a.find('[class="licious-wallet"]').find("span").html(e.wallet),a.find('[class="packaging-charges"]').find("span").html(e.packagingcharges),a.find('[class="total"]').find("span").html(e.total),localStorage.setItem("payable",e.total),o.find("i").html(parseFloat(e.total).toFixed(2)));Number(localStorage.getItem("paytm_amt"));0==($(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):Number(localStorage.getItem("payable")))&&$(".paytm-checkbox").hasClass("selected")&&($(".less-amt-err").removeClass("show"),$(".paytm-checkbox").removeClass("selected"))}),_defineProperty(_fn_checkout,"resetLiciousWallet",function(){var e,t,a,o=localStorage.getItem("wallet_used");0===($(".lp-ll-selling-price").length?parseFloat(loyaltyPayableAmount):parseFloat(localStorage.getItem("payable")))&&($(".licious-wallet").find(".lic-btn").removeClass("checked"),fn_checkout.updateBilling(o,"li_plus"),localStorage.setItem("wallet_used",0),e=localStorage.getItem("before_paylater"),t=Number(localStorage.getItem("max_cod_value")),a=$(".lp-ll-selling-price").length?parseFloat(loyaltyPayableAmount):parseFloat(localStorage.getItem("payable")),"true"==e&&a<=t&&0===$(".lp-ll-selling-price").length&&(fn_checkout.isCODEnabled&&$(".payment-options-list").find('[data-payname="cod"]').removeClass("disabled"),fn_checkout.isPODEnabled&&$(".payment-options-list").find('[data-payname="pod"]').removeClass("disabled")))}),_defineProperty(_fn_checkout,"applyCoupon",function(){localStorage.setItem("coupon_type",""),localStorage.setItem("discount_coupon","0"),$(".li-bill-details").find(".apply-coupon").on("click",function(e){$(".apply-coupon").addClass("disabled"),fn_main.showloader();var t=$(".li-bill-details").find(".coupon-code").val(),A=$(".coupon-holder");fn.checkout_oos.ajaxForm({coupon:t,uid:fn_home.getDeviceFingerPrint()},"POST","/checkout/apply-coupon").done(function(e){var t=JSON.parse(e);if("success"==t.status){$(".coupon-holder").addClass("coupon-applied"),$(".apply-ref-div").hide(),A.find(".title").html("Coupon code"),t.free_delivery&&fn_checkout.alertBox(t.free_delivery_message,"","free-delivery");var a=0,o=0,s=0,n=0,r=0,i=!0,l=!1,d=void 0;try{for(var c,p=t.order_charges[Symbol.iterator]();!(i=(c=p.next()).done);i=!0)charge=c.value,"total"===charge.key.toLowerCase()?a=charge.value:"subtotal"===charge.key?o=charge.value:"discount"===charge.key?s=-1*charge.value:"deliverycharge"===charge.key||"delivery_charge"==charge.key?n=charge.value:"packagingcharges"===charge.key&&(r=charge.value)}catch(e){l=!0,d=e}finally{try{!i&&p.return&&p.return()}finally{if(l)throw d}}var u={total:a,subtotal:o,discount:s,deliveryCharge:n,packagingcharges:r};localStorage.setItem("amount",JSON.stringify(u)),fn_ll.loyalty_cart_value=a.toString(),fn_ll.loyalty_delivery_charges=n.toString(),fn_paypal.updateUIviaPaypal(a);var m={};Object.assign(m,{subtotal:o,total:a,discount:s,delivery:n,packagingcharges:r,wallet:0}),$(".licious-wallet").find(".lic-btn").removeClass("checked"),fn_checkout.isCODEnabled&&$(".payment-options-list").find('[data-payname="cod"]').removeClass("disabled"),fn_checkout.isPODEnabled&&$(".payment-options-list").find('[data-payname="pod"]').removeClass("disabled"),fn_checkout.updateBilling(m),$.map(t.order_charges,function(e){"Licious Wallet"==e.attribute&&(wallet=e.value)});var h={TotalAmount:o,CouponName:t.cart.coupon,CouponType:t.cart.coupon_type,Status:t.status,Message:t.message,Discount:t.cart.discount},f={"Total Amount":o,"Coupon Name":t.cart.coupon,"Coupon Type":t.cart.coupon_type,Status:t.status,Message:t.message,"Hub ID":Number(localStorage.getItem("hub_id")),"City Name":localStorage.getItem("city_name"),Discount:t.cart.discount,"Licious Wallet Amount":Number(localStorage.getItem("wallet_usedValue"))};localStorage.setItem("coupon",JSON.stringify(h)),$(".li-bill-details").find(".coupon-msg-success").html('<span class="round-tick-success"></span><div class="message-section"><div class="message">'+t.message+"</div></div>").show(),fn_cart.gaAddRemoveEvent("Purchase_CouponAdd","Purchase",JSON.stringify(f)),f.Source="Purchase",clevertap.event.push("Coupon Apply Success",f),localStorage.setItem("discount_coupon",t.cart.discount),localStorage.setItem("coupon_used",t.cart.coupon),localStorage.setItem("coupon_type",t.cart.coupon_type);var _=$(".coupon-code").val().toUpperCase();switch("REF"===t.cart.coupon&&sessionStorage.setItem("auto_ref_code",_),t.cart.coupon_type){case"percentage":case"flat":case"cashback":case"delivery":A.find(".c-a").hide(),A.find(".coupon-remove").find("span i").html(_),A.find(".coupon-remove").show(),A.find(".coupon-success").show();break;case"complementry":A.find(".c-a").hide(),A.find(".coupon-remove").find("span i").html(_),$(".li-bill-details").find(".coupon-msg-success").find(".message-section").append('<div class="complementary-msg">'+(t.cart.complementary_product_message||"")+"</div>");var g=!1,v=!0,y=!1,b=void 0;try{for(var k,C=t.cart.shipments[Symbol.iterator]();!(v=(k=C.next()).done)&&(shipment=k.value,!g);v=!0){var w=!0,S=!1,I=void 0;try{for(var P,x=shipment.products[Symbol.iterator]();!(w=(P=x.next()).done);w=!0)if(prod=P.value,prod.product_type&&"COMP"==prod.product_type.toUpperCase()){var O='<div class="contents">\n                                            <img class="product-image" src='+prod.image+' />\n                                            <div class="product-contents">\n                                              <div class="product-name">'+prod.product_name+'</div>\n                                              <div class="bottom-contents">\n                                                <div class="weight">'+prod.weight+'</div>\n                                                <div class="free-text">Free</div>\n                                                <div class="qty-text">'+prod.quantity+"</div>\n                                              </div>\n                                            </div>\n                                          </div>";$(".li-bill-details").find(".coupon-msg-success").after('<div class="complementary-product-card">'+O+"</div>"),$(".complementary-msg").hide(),setTimeout(function(){$(".li-bill-details").find(".complementary-product-card").remove(),$(".complementary-msg").show()},5e3),g=!0;break}}catch(e){S=!0,I=e}finally{try{!w&&x.return&&x.return()}finally{if(S)throw I}}}}catch(e){y=!0,b=e}finally{try{!v&&C.return&&C.return()}finally{if(y)throw b}}A.find(".coupon-remove").show(),A.find(".coupon-success").show()}fn_checkout.payments.fetchWallet()}else fn_main.hideloader(),localStorage.setItem("coupon_used",""),localStorage.setItem("coupon_type",""),fn_checkout.showCouponError(t.message,t,h);$(".apply-coupon").removeClass("disabled")}).fail(function(){fn_main.hideloader()}).always(function(){$(".coupon-holder").addClass("complete")}),fn_checkout.removeCoupon()}),"true"===$(".remove-coupon").attr("is-auto-ref")&&($(".coupon-code").val(""+sessionStorage.getItem("auto_ref_code")),$(".apply-coupon").attr("disabled",!1),$(".apply-coupon").css("color","#d0021b"),$(".apply-coupon").trigger("click"))}),_defineProperty(_fn_checkout,"removeCouponClick",function(_){fn_main.showloader(),$(".li-alert-screen").removeClass("show");fn_home.ajaxForm({},"POST","/checkout/remove-coupon").done(function(e){var t=JSON.parse(e),a=$(".coupon-holder");if("success"===t.status){var o=0,s=0,n=0,r=0,i=0,l=!0,d=!1,c=void 0;try{for(var p,u=t.order_charges[Symbol.iterator]();!(l=(p=u.next()).done);l=!0)charge=p.value,"total"===charge.key.toLowerCase()?o=charge.value:"subtotal"===charge.key?s=charge.value:"discount"===charge.key?n=-1*charge.value:"deliverycharge"===charge.key||"delivery_charge"===charge.key?r=charge.value:"packagingcharges"===charge.key&&(i=charge.value)}catch(e){d=!0,c=e}finally{try{!l&&u.return&&u.return()}finally{if(d)throw c}}var m={total:o,subtotal:s,discount:n,deliveryCharge:r,packagingcharges:i};localStorage.setItem("amount",JSON.stringify(m)),fn_ll.loyalty_cart_value=o.toString(),fn_ll.loyalty_delivery_charges=r.toString(),fn_paypal.updateUIviaPaypal(o);var h,f={};localStorage.setItem("discount_coupon","0"),$(".li-bill-details").find(".coupon-msg-success").html("").hide(),"true"===$(".remove-coupon").attr("is-auto-ref")&&($(".loc-screen").addClass("hide"),$(".apply-ref-div").show()),$(".coupon-holder").removeClass("coupon-applied"),$(".coupon-holder").find(".title").html(apply_coupon_title),"remove"==_&&(h={"Coupon Name":localStorage.getItem("coupon_used"),"Coupon Type":localStorage.getItem("coupon_type"),Status:t.status,Message:t.message,"Hub ID":Number(localStorage.getItem("hub_id")),"City ID":Number(localStorage.getItem("city_id")),Discount:n,"Licious Wallet Amount":Number(localStorage.getItem("balance"))},fn_cart.gaAddRemoveEvent("Purchase_CouponRemove","Purchase",JSON.stringify(h)),h.Source="Purchase",clevertap.event.push("Coupon Remove Success",h)),"free_remove"==_&&(h={"Coupon Name":localStorage.getItem("coupon_used"),"Coupon Type":localStorage.getItem("coupon_type"),Status:t.status,Message:t.message,"Hub ID":Number(localStorage.getItem("hub_id")),"City ID":Number(localStorage.getItem("city_id")),Discount:n,"Licious Wallet Amount":Number(localStorage.getItem("balance"))},fn_cart.gaAddRemoveEvent("FreeDel_Coupon_Remove","Purchase",JSON.stringify(h)),h.Source="Purchase",clevertap.event.push("FreeDel_Coupon_Remove",h)),localStorage.setItem("coupon_used",""),localStorage.setItem("coupon_type",""),a.find(".c-a").hide(),a.find(".coupon-apply").show(),Object.assign(f,{subtotal:s,total:o,discount:n,delivery:r,packagingcharges:i,wallet:0}),fn_checkout.updateBilling(f),$(".licious-wallet").find(".lic-btn").removeClass("checked"),fn_checkout.isCODEnabled&&$(".payment-options-list").find('[data-payname="cod"]').removeClass("disabled"),fn_checkout.isPODEnabled&&$(".payment-options-list").find('[data-payname="pod"]').removeClass("disabled"),fn_checkout.payments.fetchWallet(),localStorage.setItem("coupon_used","")}else"clearing"===_?fn_checkout.payments.fetchWallet():fn_main.hideloader()}).fail(function(){"clearing"===_?fn_checkout.payments.fetchWallet():fn_main.hideloader()}).always(function(){$(".remove-coupon").removeClass("disabled")})}),_defineProperty(_fn_checkout,"removeCoupon",function(){$(".li-bill-details").find(".remove-coupon").on("click",function(e){e.stopImmediatePropagation(),$(".remove-coupon").addClass("disabled"),$(".coupon-remove").find("i").html()===sessionStorage.getItem("auto_ref_code")?($(".remove-referral-pop-up").show(),$(".loc-screen").removeClass("hide"),$(".loc-screen").addClass("show")):fn_checkout.removeCouponClick("remove")})}),_defineProperty(_fn_checkout,"showCouponError",function(e,t,a){$(".coupon-code").css("pointer-events","none"),$(".apply-ref-div").hide(),$(".li-bill-details").find(".coupon-error").html('<img src="/img/circularAlert.png" class="error-alert"><div class="message">'+e+"</div>").css("display","flex"),$(".li-bill-details").find(".coupon-div").addClass("coupon-invalid"),$(".li-bill-details").find(".c-a .apply-coupon").hide(),$(".clear-coupon-code").show(),$(".coupon-code").css("width","72%");var o={"Total Amount":Number(localStorage.getItem("payable")),"Coupon Name":a,"Coupon Type":"",Status:t.status,Message:e,"Hub Id":Number(localStorage.getItem("hub_id")),"City ID":Number(localStorage.getItem("city_id")),"Licious Wallet Amount":Number(localStorage.getItem("wallet_usedValue")),Discount:0};fn_cart.gaAddRemoveEvent("Purchase_CouponFail","Purchase",JSON.stringify(o)),o.Source="Purchase",clevertap.event.push("Coupon Apply Fail",o)}),_defineProperty(_fn_checkout,"setpage",function(e){var t=(t=location.hash).replace(/[#_=]/gi,""),a=window.location.href;""==t&&"/"!==window.location.href?window.location.href=a+"#order-summary":(a=a.replace(location.hash,""),window.location.href=a+"#"+e)}),_defineProperty(_fn_checkout,"setpage",function(e){var t=(t=location.hash).replace(/[#_=]/gi,""),a=window.location.href;""==t?window.location.href=a+"#order-summary":(a=a.replace(location.hash,""),window.location.href=a+"#"+e)}),_defineProperty(_fn_checkout,"paytm",{getOtp:function(){var a=$(".payment-paytm");a.find(".paytm-getOTP").on("click",function(e){var t=a.find(".paytm-mobile").val();fn_home.ajaxForm({mobile:t},"POST","/paytm/get-otp").done(function(e){var t=JSON.parse(e);"SUCCESS"===t.status&&localStorage.setItem("state_value",t.state),alert(t.message)})})},verifyToken:function(){fn_home.ajaxForm({sso:localStorage.getItem("sso")},"POST","/paytm/verify-token").done(function(e){JSON.parse(e),fn_checkout.paytm.walletBalance()})},walletBalance:function(){fn_home.ajaxForm({sso:localStorage.getItem("sso")},"POST","/paytm/get-balance").done(function(e){JSON.parse(e)})},addMoney:function(e,t){fn_home.ajaxForm({sso:localStorage.getItem("sso"),amt:e,csum:t},"POST","/paytm/add-money").done(function(e){})},addMoneyCTA:function(){$(".add-money").on("click",function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];null!==e&&""!==e?fn_checkout.paytm.generateChecksum("ADDMONEY",200,null,e):fn_checkout.paytm.generateChecksum("ADDMONEY",200)})}}),_defineProperty(_fn_checkout,"razorPay",""),_defineProperty(_fn_checkout,"payments",(_defineProperty(_payments={paytmStatus:function(){fn_home.ajaxForm({},"GET","/paytm/get-paytm-status").done(function(e){var t=JSON.parse(e);200==t.statusCode&&(1==t.data.verified?($(".before-login").hide(),$(".after-login").hide(),fn_checkout.payments.getPaytmOtp()):($(".before-login").show(),$(".paytm-checkbox").addClass("disabled"),$(".payment-paytm .paytm-link-button").addClass("show")))}),$(".payment-paytm .paytm-link-button").on("click",function(e){e.stopImmediatePropagation(),$(".payment-paytm .paytm-link-button").removeClass("show"),fn_checkout.payments.getPaytmOtp()})},resendPaytmOtp:function(){$(".resendpaytm-otp").on("click",function(e){e.stopImmediatePropagation(),fn_checkout.payments.getPaytmOtp()})},getPaytmOtp:function(){$(".paytm-inline-loader").show(),$(".paytm-refresh-loader").hide(),$(".payment-paytm .paytm-link-button").removeClass("show"),fn_home.ajaxForm({},"POST","/paytm/get-paytm-otp").done(function(e){var t=JSON.parse(e);"success"==t.status?(localStorage.setItem("paytm_amt",Number(t.balance)),$(".paytm-checkbox").removeClass("disabled"),$(".paytm-login .paytm-verify-otp").hide(),0<t.food_balance?$(".after-login").show():$(".after-login").hide(),localStorage.setItem("paytm_amt",t.balance),$(".paytm-checkbox .amount-paytm").html("&#8377; "+t.balance)):"error"==t.status?($(".before-login").hide(),$(".after-login").hide(),$(".payment-paytm .paytm-link-button").addClass("show"),$(".paytm-login .paytm-verify-otp").hide(),$(".paytm-checkbox").addClass("disabled")):($(".before-login").show(),$(".paytm-checkbox").removeClass("disabled"),$(".paytm-login .paytm-verify-otp").show(),fn_checkout.payments.verifyOtpPaytm())}).fail(function(e){$(".paytm-refresh-loader").show()}).always(function(){$(".paytm-inline-loader").hide()})},choosePaytm:function(){$(".paytm-checkbox").on("click",function(e){var t,a;$(this).hasClass("disabled")||($(this).addClass("selected"),t=Number(localStorage.getItem("paytm_amt")),a=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):Number(localStorage.getItem("payable")),$(this).addClass("selected"),t<a?$(".less-amt-err").addClass("show"):$(".less-amt-err").removeClass("show"),fn_checkout.resetLiciousWallet())})},verifyOtpPaytm:function(){$(".error-paytm-otp").html(""),$(".before-login").hide(),$(".after-login").hide(),$(".paytm-checkbox").addClass("disabled"),$(".paytm-verify-otp .paytm-verifyOTP").on("click",function(e){e.stopImmediatePropagation();var t=$(".paytm-otp").val();0==t.length?$(".error-paytm-otp").html("Please enter valid otp"):fn_home.ajaxForm({otp:t,phone:localStorage.getItem("user_contact")},"POST","/paytm/paytm-verify-otp").done(function(e){var t,a,o=JSON.parse(e);"success"==o.status?($(".paytm-checkbox").removeClass("disabled"),$(".paytm-login .paytm-verify-otp").hide(),0<o.food_balance?$(".after-login").show():$(".after-login").hide(),t=Number(localStorage.getItem("paytm_amt")),a=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):Number(localStorage.getItem("payable")),$(".paytm-checkbox").addClass("selected"),t<a?$(".less-amt-err").addClass("show"):$(".less-amt-err").removeClass("show"),localStorage.setItem("paytm_amt",o.balance),$(".paytm-checkbox .amount-paytm").html("&#8377; "+o.balance),ga("send",{hitType:"event",eventCategory:"Purchase",eventAction:"Paytm_Verify",eventLabel:""}),clevertap.event.push("Paytm_Verify",{Source:"Purchase"})):($(".before-login").show(),$(".error-paytm-otp").html(o.message),localStorage.setItem("paytm_access_token",""))})})},upiTimer:function(e,t){function a(){clearInterval(fn_checkout.initTimer)}clearInterval(fn_checkout.initTimer);var o,s,n=e;fn_checkout.initTimer=setInterval(function(){o=parseInt(n/60,10),s=parseInt(n%60,10),o=o<10?"0"+o:o,s=s<10?"0"+s:s,--n<0?(a(),t.html("00:00"),$(".upi-loader").css("animation","none"),fn_checkout.razorPay.emit("payment.cancel")):t.html(o+":"+s)},1e3),$(".confirm").on("click",function(){a(),fn_checkout.razorPay.emit("payment.cancel"),$(".upi-loader-container").removeClass("show"),$(".li-checkout-container").show(),$(".li-alert-screen").removeClass("show")})},selectUpiPayment:function(){$(document).on("click",".upi-list-wrapper .upi-card",function(e){var t;$(".vpa-section").removeClass("show"),$(".vpa-section input").val(""),$(".upi-list-wrapper .upi-card").removeClass("selected"),$(".upi-list-wrapper .upi-card .button-check").removeClass("show"),"true"==$(this).attr("data-enabled")&&($(this).addClass("selected"),$(this).find(".button-check").addClass("show"),$(".vpa-section").addClass("show"),t=$(this).find("img").attr("src"),$(".upi-card.selected").attr("data-display"),$(".upi-type-image img").attr("src",t),fn_checkout.resetLiciousWallet())})},cancelUPI:function(){$(".upi-loader-header .close-upi").on("click",function(e){e.stopImmediatePropagation(),fn_checkout.alertBox("Going back will exit the payment process","","alert-upi")}),history.pushState(null,null,location.href),window.onpopstate=function(){$(".upi-loader-container").hasClass("show")&&(history.go(1),fn_checkout.alertBox("Going back will exit the payment process","","alert-upi"))},$(window).on("hashchange",function(e){$(".upi-loader-container").hasClass("show")&&fn_checkout.alertBox("Going back will exit the payment process","","alert-upi")})},fetchPayments:function(l,d){fn_home.ajaxForm({},"GET","/checkout/get-user-data").done(function(e){var t=JSON.parse(e);localStorage.setItem("user_contact",t.user_phone);var a,o,s=localStorage.getItem("profile_complete");""==s||null==s||null==(a=JSON.parse(localStorage.getItem("profile_complete")))?(o={name:t.user_name,email:t.user_email},localStorage.setItem("profile_complete",JSON.stringify(o))):(a.name=t.user_name,a.email=t.user_email,localStorage.setItem("profile_complete",JSON.stringify(a)))}),$(".init-pay").addClass("disabled"),$(".free-delivery-mssg").hide(),$(".li-checkout-nav-steps ul").removeClass("ul-wth-msg");var e,t={};window.location.href.includes("order-status")&&(t={type:"true"==localStorage.getItem("is_shipment")?"shipment":"parent",order_id:d}),"loyalty-payment"===l&&(t={type:"loyalty"}),fn_home.ajaxForm(t,"POST","/checkout/get-payments-free-delivery").done(function(e){var t=JSON.parse(e),s=Number(t.data.max_cod_order_value),a=fn_ll.getterLS("count");0<Number(a)&&($(".new-cart-count").find("i").html(a),$(".new-cart-count").addClass("loaded"));var o,n=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):Number(localStorage.getItem("payable")),i=$(".li-payments").find(".payment-options-list ul");200===t.statusCode&&(localStorage.setItem("max_cod_value",t.data.max_cod_order_value),t.data.contactless_delivery&&t.data.contactless_delivery.enable&&fn_checkout.payments.renderContactLessDelivery(t.data.contactless_delivery),t.data.messages&&t.data.messages.length&&$.map(t.data.messages,function(e){var t,a,o,s;e&&"below_limit"==e.whichEvent&&(t='<div class="free-delivery-text">'+e.message+"</div>",$(".free-delivery-mssg").html(t),$(".free-delivery-mssg").show(),$(".li-checkout-nav-steps ul").addClass("ul-wth-msg"),a=JSON.parse(localStorage.getItem("payment-delivery")),o=JSON.parse(localStorage.getItem("product")),"loyalty-payment"!==l&&(s={"Product Name":a.ProductName,Quantity:o.quantity,"Cart Value":a.CartValue,"Delivery Charge":a.Delivery,"Saved Amount":a.SavedValue,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id"))},fn_cart.gaAddRemoveEvent("Purchase_FreeDel_Remove","Purchase",JSON.stringify(s)),s.Source="Purchase",clevertap.event.push("Purchase_FreeDel_Remove",s)))}),$(".payment-options-holder").find(".pay-method").hide(),i.html(""),i.append('<li class="" data-payname="saved_payments">Saved Payments</li>'),$.map(t.data.payments,function(e){var t=e.enabled?"enabled":"disabled",a=e.method?e.method:e.group_name;if("cod"===e.group_name?fn_checkout.isCODEnabled=e.enabled:"pod"===e.group_name&&(fn_checkout.isPODEnabled=e.enabled),"preferred_payments"!==a&&"liciouswallet"!=a&&"simpl"!=a){var o='<li class="'+t+'" data-payname="'+a+'">'+e.display_name+'<span class = "disabled-msg">'+e.meta.disable_message+"</span></li>";switch(i.append(o),e.group_name){case"paypal":var r=!1;$.map(e.payment_methods,function(e){e.isBAPresent&&e.enabled&&(r=!0),e.isBAPresent&&"paypal_auto_pay"==e.payment_code?localStorage.setItem("is_ba_present",!0):e.isBAPresent||"paypal_auto_pay"!=e.payment_code||localStorage.setItem("is_ba_present",!1);var t=e.payment_code,a=$("<li></li>").html(e.display_name).attr("data-paymentCode",t).attr("id",t),o=e.isSelected?"selected":"",s=e.enabled?"enabled":"disabled",n=a.addClass("paypal-payment-options "+o+" "+s);"enabled"==s?n.css("opacity","1"):n.css("opacity","0.4"),"paypal_auto_pay"==t&&$("#paypal_auto_pay").remove(),"paypal_one_time_pay"==t&&$("#paypal_one_time_pay").remove(),$("#paypal-payment-types").append(a),e.isBAPresent&&e.paypal_email&&a.append('<div style="font-size: 10px;color: #000000;">Account: <b>'+e.paypal_email+"</b></div>"),a.append('<div style="color: green;font-size: 10px;">'+e.meta.promo_msg+"</div>"),r&&$("#paypal_one_time_pay").css("display","none")});break;case"razorpay_wallets":$(".pay-method.other-wallets .li-page-title").html(e.display_name),$(".payment-options-list ul .licious-other-wallets").html(e.display_name),fn_checkout.payments.renderWallets(e.payment_methods,e.method);break;case"razorpay_netbanking":$(".payment-options-list ul .licious-net-banking").html(e.display_name),fn_checkout.payments.renderBanks(e,e.method);break;case"cod":$(".pay-method.cod .li-page-title").html(e.display_name),$(".payment-options-list ul .licious-cod").html(e.display_name),s<n&&($(".payment-options-list").find('[data-payname="cod"]').addClass("disabled"),fn_checkout.isCODEnabled=!1);break;case"pod":$(".pay-method.pod .li-page-title").html(e.display_name),$(".payment-options-list ul .licious-pod").html(e.display_name),s<n&&($(".payment-options-list").find('[data-payname="pod"]').addClass("disabled"),fn_checkout.isPODEnabled=!1);break;case"razorpay_cards":$(".payment-options-list ul .licious-payment-card").html(e.display_name);break;case"razorpay_upi":$(".pay-method.upi .upi-title").html(e.display_name),$(".upi-list-wrapper").html(""),$.map(e.payment_methods,function(e,t){var a='<button class="upi-card '+e.payment_code+'" data-display="'+e.display_name+'" data-method="upi" data-methodname="upi" data-paysource="'+e.payment_code+'" data-index="'+t+'" data-enabled="'+(1==e.enabled?"true":"false")+'"><div class="upi-image '+(""==e.meta.promo_msg&&""==e.meta.disable_message?"center-fit":"")+'"><img src="'+e.meta.icon_url+'" class="'+(0==e.enabled?"disable-img":"")+'"></div><p class="upi-offer">'+(1==e.enabled?e.meta.promo_msg:"")+'</p><p class="dis-msg">'+(0==e.enabled?e.meta.disable_message:"")+'</p><div class="button-check"></div></button>';$(".upi-list-wrapper").append(a)}),fn_checkout.payments.selectUpiPayment(),fn_checkout.payments.cancelUPI();break;case"paytm":$(".payment-paytm ul li .paytm-img").attr("src",e.meta.icon_url),$(".payment-options-list ul .licious-payment-paytm").html(e.display_name),$(".li-page-title-paytm").html(e.display_name),$(".payment-paytm ul li .paytm-contact").html(localStorage.getItem("user_contact")),fn_checkout.payments.paytmStatus(),fn_checkout.payments.choosePaytm(),fn_checkout.payments.resendPaytmOtp(),"loyalty-payment"===l?fn_checkout.payments.initPaytmLoadMoney(d):fn_checkout.payments.initPaytmLoadMoney()}}}),o=localStorage.getItem("before_paylater"),"track-page"==l&&null!=o&&"false"==o&&(i.find('[data-payname="pod"]').addClass("disabled"),i.find('[data-payname="cod"]').addClass("disabled"),fn_checkout.isCODEnabled=!1,fn_checkout.isPODEnabled=!1),fn_checkout.payments.fetchSavedCards()),fn_checkout.payments.tabs(l)}),fn_checkout.payments.initPay(l),"track-page"==l?(e="true"===localStorage.getItem("is_shipment"),fn_checkout.payments.fetchWalletNew(d,e)):"loyalty-payment"===l?(fn_main.showloader(),$(".licious-wallet").find(".lic-btn").removeClass("checked"),fn_checkout.payments.fetchWallet(null,!0)):fn_checkout.removeCouponClick("clearing"),$(".payment-paytm .paytm-link-button").on("click",function(e){e.stopImmediatePropagation(),fn_checkout.payments.getPaytmOtp()})},renderContactLessDelivery:function(e){var t=$(".cld-placeholder"),a='<div class="cld-div '+(e.is_mandatory?"disabled":"")+'">\n                      <div class="cld-left">\n                        <div class="cld-checkbox-div '+(e.is_mandatory||e.is_selected?"checked":"")+'">\n                          <img class="cld-checkbox-checked" src="/img/red_checked.svg"/>\n                          <input type="checkbox" class="cld-checkbox"\n                          '+(e.is_mandatory||e.is_selected?"checked":"")+'/>\n                        </div>\n                        <div class="cld-info">\n                            <div class="cld-heading">'+e.title+'</div>\n                            <div class="cld-content">'+e.description+"</div>\n                        </div>\n                      </div>\n                      "+(e.deep_link?'\n                        <a href="'+e.deep_link+'" target="_blank">Details</a>':"")+"\n                    </div>";$(".slot-payment-flow").addClass("cld"),$(".shipment.complete").addClass("cld"),$(".li-checkout-page.payment .pointer").addClass("cld"),t.html(a),$(".cld-div").click(function(e){"A"!==e.target.nodeName&&"cld-div disabled"!==$(".cld-div").prop("class")&&(fn_main.showloader(),fn_home.ajaxForm({selected:!$(".cld-checkbox").prop("checked")},"PUT","/checkout/contactless-delivery-update").done(function(e){var t=JSON.parse(e);200===t.statusCode&&"success"===t.statusMessage?($(".cld-checkbox").prop("checked",!$(".cld-checkbox").prop("checked")),$(".cld-checkbox-div").toggleClass("checked"),$(".licious-wallet").find(".lic-btn").removeClass("checked"),fn_checkout.isCODEnabled&&$(".payment-options-list").find('[data-payname="cod"]').removeClass("disabled"),fn_checkout.isPODEnabled&&$(".payment-options-list").find('[data-payname="pod"]').removeClass("disabled"),fn_checkout.payments.fetchWallet()):Materialize.toast("Something went wrong! Please try again.",3e3)}).fail(function(){fn_main.hideloader(),Materialize.toast("Something went wrong! Please try again.",3e3)}))})}},"selectUpiPayment",function(){$(document).on("click",".upi-list-wrapper .upi-card",function(e){var t;$(".vpa-section").removeClass("show"),$(".vpa-section input").val(""),$(".upi-list-wrapper .upi-card").removeClass("selected"),$(".upi-list-wrapper .upi-card .button-check").removeClass("show"),"true"==$(this).attr("data-enabled")&&($(this).addClass("selected"),$(this).find(".button-check").addClass("show"),$(".vpa-section").addClass("show"),t=$(this).find("img").attr("src"),$(".upi-card.selected").attr("data-display"),$(".upi-type-image img").attr("src",t))})}),_defineProperty(_payments,"cancelUPI",function(){$(".upi-loader-header .close-upi").on("click",function(e){e.stopImmediatePropagation(),fn_checkout.alertBox("Going back will exit the payment process","","alert-upi")}),history.pushState(null,null,location.href),window.onpopstate=function(){$(".upi-loader-container").hasClass("show")&&(history.go(1),fn_checkout.alertBox("Going back will exit the payment process","","alert-upi"))},$(window).on("hashchange",function(e){$(".upi-loader-container").hasClass("show")&&fn_checkout.alertBox("Going back will exit the payment process","","alert-upi")})}),_defineProperty(_payments,"paytmStatus",function(){fn_home.ajaxForm({},"GET","/paytm/get-paytm-status").done(function(e){var t=JSON.parse(e);200==t.statusCode&&(1==t.data.verified?($(".before-login").hide(),$(".after-login").hide(),fn_checkout.payments.getPaytmOtp()):($(".before-login").show(),$(".paytm-checkbox").addClass("disabled"),$(".payment-paytm .paytm-link-button").addClass("show")))}),$(".payment-paytm .paytm-link-button").on("click",function(e){e.stopImmediatePropagation(),$(".payment-paytm .paytm-link-button").removeClass("show"),fn_checkout.payments.getPaytmOtp()})}),_defineProperty(_payments,"resendPaytmOtp",function(){$(".resendpaytm-otp").on("click",function(e){e.stopImmediatePropagation(),fn_checkout.payments.getPaytmOtp()})}),_defineProperty(_payments,"getPaytmOtp",function(){$(".paytm-inline-loader").show(),$(".paytm-refresh-loader").hide(),$(".payment-paytm .paytm-link-button").removeClass("show"),fn_home.ajaxForm({},"POST","/paytm/get-paytm-otp").done(function(e){var t=JSON.parse(e);"success"==t.status?(localStorage.setItem("paytm_amt",Number(t.balance)),$(".paytm-checkbox").removeClass("disabled"),$(".paytm-login .paytm-verify-otp").hide(),0<t.food_balance?$(".after-login").show():$(".after-login").hide(),localStorage.setItem("paytm_amt",t.balance),$(".paytm-checkbox .amount-paytm").html("&#8377; "+t.balance)):"error"==t.status?($(".before-login").hide(),$(".after-login").hide(),$(".payment-paytm .paytm-link-button").addClass("show"),$(".paytm-login .paytm-verify-otp").hide(),$(".paytm-checkbox").addClass("disabled")):($(".before-login").show(),$(".paytm-checkbox").removeClass("disabled"),$(".paytm-login .paytm-verify-otp").show(),fn_checkout.payments.verifyOtpPaytm())}).fail(function(e){$(".paytm-refresh-loader").show()}).always(function(){$(".paytm-inline-loader").hide()})}),_defineProperty(_payments,"choosePaytm",function(){$(".paytm-checkbox").on("click",function(e){var t,a;$(this).hasClass("disabled")||($(this).addClass("selected"),t=Number(localStorage.getItem("paytm_amt")),a=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):Number(localStorage.getItem("payable")),$(this).addClass("selected"),t<a?$(".less-amt-err").addClass("show"):$(".less-amt-err").removeClass("show"))})}),_defineProperty(_payments,"verifyOtpPaytm",function(){$(".error-paytm-otp").html(""),$(".before-login").hide(),$(".after-login").hide(),$(".paytm-checkbox").addClass("disabled"),$(".paytm-verify-otp .paytm-verifyOTP").on("click",function(e){e.stopImmediatePropagation();var t=$(".paytm-otp").val();0==t.length?$(".error-paytm-otp").html("Please enter valid otp"):fn_home.ajaxForm({otp:t,phone:localStorage.getItem("user_contact")},"POST","/paytm/paytm-verify-otp").done(function(e){var t,a,o=JSON.parse(e);"success"==o.status?($(".paytm-checkbox").removeClass("disabled"),$(".paytm-login .paytm-verify-otp").hide(),0<o.food_balance?$(".after-login").show():$(".after-login").hide(),t=Number(localStorage.getItem("paytm_amt")),a=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):Number(localStorage.getItem("payable")),$(".paytm-checkbox").addClass("selected"),t<a?$(".less-amt-err").addClass("show"):$(".less-amt-err").removeClass("show"),localStorage.setItem("paytm_amt",o.balance),$(".paytm-checkbox .amount-paytm").html("&#8377; "+o.balance),ga("send",{hitType:"event",eventCategory:"Purchase",eventAction:"Paytm_Verify",eventLabel:""}),clevertap.event.push("Paytm_Verify",{Source:"Purchase"})):($(".before-login").show(),$(".error-paytm-otp").html(o.message),localStorage.setItem("paytm_access_token",""))})})}),_defineProperty(_payments,"initPaytmLoadMoney",function(n){$(".init-load-money").on("click",function(e){e.stopImmediatePropagation();var t=Number(localStorage.getItem("paytm_amt")),a=($(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):Number(localStorage.getItem("payable")))-t,o=Number($(".paytm-load-amt").val()),s=localStorage.getItem("user_contact");a<=o?fn_checkout.payments.generateCheckSum(o,s,"addmoney",n):($(".min-amount-head").addClass("err-border"),setTimeout(function(){$(".min-amount-head").removeClass("err-border")},1e3))})}),_defineProperty(_payments,"generateCheckSum",function(a,o,e,s){var n=-1!==location.href.search("/order-status/"),r=JSON.parse(localStorage.getItem("profile_complete")),i=localStorage.getItem("order_id");n&&(i=window.location.pathname.split("/")[2]),fn_home.ajaxForm({},"GET","/paytm/paytm-sso-token").done(function(e){var t=JSON.parse(e);"success"==t.status&&(t.sso_token,localStorage.setItem("paytm_access_token",t.sso_token),$(".paytm-load-money-wrap").addClass("loader-div"),fn_home.ajaxForm({mobile:o,amt:a,email:r.email,SSO:t.sso_token,REQUEST_TYPE:"ADD_MONEY",orderData:{isreinitiate:n,order_id:i},plan_id:s},"POST","/paytm/li-generate-checksum").done(function(e){fn_checkout.payments.verifyCheckSum(e,"")}).always(function(){$(".paytm-load-money-wrap").addClass("complete"),setTimeout(function(){$(".paytm-load-money-wrap").removeClass("complete loader-div")},1200)}))}).always(function(){$(".paytm-load-money-wrapm").addClass("complete"),setTimeout(function(){$(".paytm-load-money-wrap").removeClass("complete loader-div")},1200)})}),_defineProperty(_payments,"verifyCheckSum",function(e){$("#paytmssotoken").val(e.SSO_TOKEN),$("#paytmtxtamount").val(e.TXN_AMOUNT),$("#paytmorderid").val(e.ORDER_ID),$("#paytmcustid").val(e.CUST_ID),$("#paytmmobile").val(e.MOBILE_NO),$("#paytmcallback").val(e.CALLBACK_URL),fn_home.ajaxForm({MID:e.MID,ORDER_ID:e.ORDER_ID,CUST_ID:e.CUST_ID,INDUSTRY_TYPE_ID:e.INDUSTRY_TYPE_ID,CHANNEL_ID:"WEB",TXN_AMOUNT:e.TXN_AMOUNT,WEBSITE:e.WEBSITE,CALLBACK_URL:e.CALLBACK_URL,EMAIL:e.EMAIL,MOBILE_NO:e.MOBILE_NO,CHECKSUMHASH:e.CHECKSUMHASH,SSO_TOKEN:e.SSO_TOKEN,REQUEST_TYPE:e.REQUEST_TYPE},"POST","/paytm/li-verify-checksum").done(function(e){"true"==e&&fn_checkout.payments.addMoneyPaytm()})}),_defineProperty(_payments,"addMoneyPaytm",function(){$("#paytmForm").submit(),localStorage.setItem("paytm-redirect",!0)}),_defineProperty(_payments,"callPaytmThirdParty",function(e){fn_home.ajaxForm({CALLBACK_URL:e.CALLBACK_URL,CHANNEL_ID:e.CHANNEL_ID,CHECKSUMHASH:e.CHECKSUMHASH,CUST_ID:e.CUST_ID,INDUSTRY_TYPE_ID:e.INDUSTRY_TYPE_ID,MID:e.MID,MOBILE_NO:e.MOBILE_NO,ORDER_ID:e.ORDER_ID,REQUEST_TYPE:e.REQUEST_TYPE,SSO_TOKEN:e.SSO_TOKEN,TXN_AMOUNT:Number(e.TXN_AMOUNT),WEBSITE:e.WEBSITE},"POST","/paytm/paytm-thirdparty").done(function(e){})}),_defineProperty(_payments,"fetchSavedCards",function(){$(".payment-options-list ul").addClass("disabled"),$(".payment-options-list").find("li.enabled").removeClass("active"),$(".payment-options-list").find('[data-payname="saved_payments"]').addClass("active"),$(".payment-options-holder").find(".pay-method").hide(),$(".payment-options-holder").find('[data-payname="saved_payments"]').show(),$(".payment-options-holder").find(".pay-method.saved").find("ul").html("<p>Fetching saved cards....</p>");var e=JSON.parse(localStorage.getItem("profile_complete"));null==e?($(".payment-options-list").find('[data-payname="saved_payments"]').removeClass("active").addClass("disabled"),$(".payment-options-holder").find('[data-payname="saved_payments"]').hide(),$(".payment-options-list").find('[data-payname="card"]').addClass("active"),$(".payment-options-holder").find('[data-payname="card"]').show(),localStorage.setItem("pay_source","card"),$(".init-pay").removeClass("disabled")):fn_home.ajaxForm({name:e.name,email:e.email},"POST","/checkout/get-cards").done(function(e){$(".payment-options-list ul").removeClass("disabled");var t=JSON.parse(e);200===t.statusCode?(localStorage.setItem("rp_cust_token",t.data.razorpay_customer_token),fn_checkout.payments.renderCards(t.data.tokens)):($(".payment-options-list").find('[data-payname="saved_payments"]').removeClass("active").addClass("disabled"),$(".payment-options-holder").find('[data-payname="saved_payments"]').hide(),$(".payment-options-list").find('[data-payname="card"]').addClass("active"),$(".payment-options-holder").find('[data-payname="card"]').show()),$(".init-pay").removeClass("disabled")}).fail(function(){$(".payment-options-list ul").removeClass("disabled"),$(".payment-options-list").find('[data-payname="saved_payments"]').removeClass("active").addClass("disabled"),$(".payment-options-holder").find('[data-payname="saved_payments"]').hide(),$(".payment-options-list").find('[data-payname="card"]').addClass("active"),$(".payment-options-holder").find('[data-payname="card"]').show(),$(".init-pay").removeClass("disabled")})}),_defineProperty(_payments,"renderCards",function(e){var t,o=$(".payment-options-holder").find(".pay-method.saved");o.find("ul").html(""),0<e.items.length?(t={title:"Payment Methods",subtitle:"You have "+e.items.length+" saved cards"},$(".payment-options-list").find('[data-payname="saved_payments"]').addClass("active").removeClass("disabled"),$(".payment-options-holder").find(".pay-method").hide(),$(".payment-options-holder").find('[data-payname="saved_payments"]').show(),localStorage.setItem("pay_source","saved_payments")):(t={title:"Payment Methods",subtitle:"You have no saved cards"},$(".payment-options-list").find('[data-payname="saved_payments"]').removeClass("active").addClass("disabled"),$(".payment-options-holder").find('[data-payname="saved_payments"]').hide(),$(".payment-options-list").find('[data-payname="card"]').addClass("active"),$(".payment-options-holder").find('[data-payname="card"]').show(),localStorage.setItem("pay_source","card")),fn_checkout.setNavMessages(t,"cards"),$.map(e.items,function(e){var t=e.card.network.toLowerCase(),a='<li data-token="'+e.token+'"><span class = "card-icon '+t+'"></span><span class="card-num">XXXX XXXX XXXX <b class = "last4">'+e.card.last4+'</b></span><p><input type="password" class = "sc-cvv" required maxlength="4"><label for="">CVV</label></p></li>';o.find("ul").append(a)}),fn_checkout.payments.selectSavedCard()}),_defineProperty(_payments,"selectSavedCard",function(){var o=$(".pay-method.saved");o.find("ul li").on("click",function(){var e=$(this),t=localStorage.getItem("rp_cust_token"),a=e.data("token");localStorage.setItem("pay_source","card"),localStorage.setItem("saved_card",1),o.find("ul li").removeClass("selected"),e.addClass("selected"),Object.assign(fn_checkout.payments.card,{customer_id:t,token:a}),fn_checkout.resetLiciousWallet()})}),_defineProperty(_payments,"resetSavedpayments",function(){$(".pay-method.saved").find(".cards ul li").removeClass("selected"),localStorage.setItem("saved_card",0)}),_defineProperty(_payments,"paymentHolder",$(".payment-options-holder")),_defineProperty(_payments,"renderWallets",function(e,t){fn_checkout.payments.paymentHolder.find(".other-wallets").attr("data-payname",t),fn_checkout.payments.paymentHolder.find(".other-wallets ul").html(""),$.map(e,function(e){var t='<li class = "'+(e.enabled?"enabled":"disabled")+'"style="display: flex; align-items: center;" data-paymode="'+e.payment_code+'"><span class = "img-holder"><img src = "'+e.meta.icon_url+'"/></span><span style="display: flex;flex-direction: column;"><span class="disp-name">'+e.display_name+"</span>"+(e.meta.promo_msg?'<span style="font-size: 12px; color: #1d911d;">'+e.meta.promo_msg+"</span>":"")+"</span>";e.meta.disable_message,$(".payment-options-holder").find(".other-wallets ul").append(t)})}),_defineProperty(_payments,"renderBanks",function(e,t){var o=fn_checkout.payments.paymentHolder.find(".net-banking"),s=0;o.attr("data-payname",t),localStorage.setItem("banks",JSON.stringify(e.payment_content.payment_list)),o.find(".preffered-banking-list").html(""),$.map(e.payment_content.payment_list,function(e,t){var a="<p data-bc="+t+' class="see">'+e+"</p>";o.find(".dropdown-list").append(a)}),$.map(e.payment_methods,function(e,t){var a='<li data-bc="'+e.payment_code+'"><img src = "'+e.meta.icon_url+'"/>'+e.name+"</li>";s++,o.find(".preffered-banking-list").append(a)}),0==s&&o.find(".preffered-banking").hide(),fn_checkout.payments.selectPreferredBank()}),_defineProperty(_payments,"renderPaymentBar",function(e,t,a){var o,s=arguments.length<=1||void 0===t?"undefined":t,n=arguments.length<=2||void 0===a?"":a;$(".first").attr("pay_key",""),e.is_payble&&("CREATED_WITH_FAILURE"===n||3<=s)?($(".first").attr("pay_key","true"),$(".payment-option-wrapper").show(),setTimeout(function(){$("html, body").animate({scrollTop:500},700,"swing")},3e3),!("true"===localStorage.getItem("is_shipment"))&&e.payment_status&&e.total?(o=JSON.parse(localStorage.getItem("amount")),"CREATED_WITH_FAILURE"===n&&null!==o.total?(localStorage.setItem("payable",o.total),amount=o.total):(amount=e.total,localStorage.setItem("payable",e.total)),$(".payment-option-wrapper").find(".init-pay i").html(parseFloat(amount).toFixed(2))):(localStorage.setItem("payable",e.total),$(".payment-option-wrapper").find(".init-pay i").html(parseFloat(e.total).toFixed(2))),$(".payment-option-wrapper").find(".init-pay").attr("data-po","pay-now")):($(".payment-option-wrapper").hide(),$(".first").hide(),$("#btn1").hide())}),_defineProperty(_payments,"tabs",function(s){$(".payment-options-list").find("li").on("click",function(){var e,t,a,o;$(".licious-wallet .lic-btn").hasClass("checked")?localStorage.setItem("wallet_status","ACTIVE"):(localStorage.setItem("wallet_status","INACTIVE"),localStorage.setItem("wallet_usedValue",0)),$(this).hasClass("disabled")||($(".init-pay").removeClass("disabled"),e=$(this).attr("data-payname"),o=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):localStorage.getItem("payable"),$(".paytm-checkbox").removeClass("selected"),$(".less-amt-err").removeClass("show"),$(".upi-list-wrapper .upi-card").removeClass("selected"),$(".upi-list-wrapper .upi-card .button-check").removeClass("show"),$(".vpa-section").removeClass("show"),$(".vpa-section input").val(""),$(".payment-options-holder").find(".pay-method").hide(),$(".payment-options-holder").find('[data-payname="'+e+'"]').show(),$(".payment-options-list").find("li").removeClass("active"),$(this).addClass("active"),"paytm"!=e&&($(".paytm-add-money-wrapper").removeClass("show"),$(".paytm-lock-screen").removeClass("show")),"wallet"==e?t="wallet":"saved_payments"==e||"card"==e?t="Card":"netbanking"==e?t="netbanking":"pod"==e?t="Pay on Delivery":"cod"==e?t="Cash on Delivery":"paytm"==e?t="Paytm":"upi"==e?t="upi":"paypal"==e&&(t="paypal"),localStorage.setItem("method",t),"payment"==s&&(a={"Licious Wallet Status":localStorage.getItem("wallet_status"),"Licious Wallet Used Value":Number(localStorage.getItem("wallet_usedValue")),"Payment Method":t,Total:Number(o),"City Name":localStorage.getItem("city_name"),hub_id:fn_ll.getterLS("hub_id"),"Category ID":JSON.parse(localStorage.getItem("allitem")).category_id,Checkout_Flow:checkout_flow()},fn_main.assignIncomingSource(a),fn_cart.gaAddRemoveEvent("Purchase_PaymentMethod","Purchase",JSON.stringify(a)),a.Source="Purchase",clevertap.event.push("Payment Method Selected",a)),"track-page"==s&&(a={"Licious Wallet Status":localStorage.getItem("wallet_status"),"Licious Wallet Used Value":Number(localStorage.getItem("wallet_usedValue")),"Payment Method":t,Total:Number(o)},fn_cart.gaAddRemoveEvent("Order_PODPay","order",JSON.stringify(a)),a.Source="Order",clevertap.event.push("Order Pay on Delivery",a)),localStorage.setItem("pay_source",e),localStorage.setItem("pay_mode",""),localStorage.setItem("saved_bank",0),localStorage.setItem("saved_card",0),fn_checkout.payments.resetWallets(),fn_checkout.payments.resetBanks(),fn_checkout.payments.resetCard(),fn_checkout.payments.resetSavedpayments(),"cod"==e||"pod"==e?$(".payment-cta").find(".init-pay").html("Place Order"):$(".payment-cta").find(".init-pay").html("Pay <i class = 'rupee'>"+parseFloat(o).toFixed(2)+"</i>"),$(".payment-cta").find(".init-pay").attr("data-mode",e),fn_checkout.resetLiciousWallet(),fn_checkout.payments.validatecardYear())}),fn_checkout.payments.selectWallet(),fn_checkout.payments.saveCardFn(),fn_checkout.payments.selectPaypalOption()}),_defineProperty(_payments,"resetWallets",function(){$(".pay-method.other-wallets").find("li").removeClass("selected")}),_defineProperty(_payments,"resetBanks",function(){$(".pay-method.net-banking").find(".search-bank").val(""),$(".preffered-banking-list").find("li").removeClass("selected")}),_defineProperty(_payments,"resetCard",function(){$(".pay-method.payment-card").find('[data-card="detail"]').val("")}),_defineProperty(_payments,"card",{}),_defineProperty(_payments,"saveCard",0),_defineProperty(_payments,"saveCardFn",function(){$(".save-card").on("click",function(){$(this).hasClass("checked")?($(this).removeClass("checked"),fn_checkout.payments.saveCard=0,Object.assign(fn_checkout.payments.card,{save:0,customer_id:localStorage.getItem("rp_cust_token")})):($(this).addClass("checked"),Object.assign(fn_checkout.payments.card,{save:1,customer_id:localStorage.getItem("rp_cust_token")}))})}),_defineProperty(_payments,"validateCard",function(){var e=$(".pay-method.payment-card").find('[data-card="detail"]'),a=0;return e.each(function(e,t){switch($(t).data("type")){case"card-num":if(""==$(t).val())return fn_checkout.alertBox("Enter Card Number","","alert"),a=0,!1;if($(t).val().length<15||16<$(t).val().length)return fn_checkout.alertBox("Card Number must be of 15 Digits","","alert"),a=0,!1;a=1,Object.assign(fn_checkout.payments.card,{num:$(t).val()});break;case"card-mon":if(""==$(t).val())return fn_checkout.alertBox("Enter expiry month of card","","alert"),a=0,!1;if($(t).val().length<2||2<$(t).val().length)return fn_checkout.alertBox("Expiry month of card must be of 01 to 12","","alert"),a=0,!1;a=1,Object.assign(fn_checkout.payments.card,{exm:$(t).val()});break;case"card-year":if(""==$(t).val())return fn_checkout.alertBox("Enter expiry year of card","","alert"),a=0,!1;if($(t).val()<(new Date).getFullYear())return fn_checkout.alertBox("Expiry year of card should be greater than current year","","alert"),a=0,!1;a=1,Object.assign(fn_checkout.payments.card,{exy:$(t).val()});break;case"card-cvv":if(""==$(t).val())return fn_checkout.alertBox("Enter CVV of card","","alert"),a=0,!1;if($(t).val().length<3)return fn_checkout.alertBox("CVV of card must be of Min. 3 digits","","alert"),a=0,!1;a=1,Object.assign(fn_checkout.payments.card,{cvv:$(t).val()});break;case"card-name":if(""==$(t).val())return fn_checkout.alertBox("Enter Name on the card","","alert"),a=0,!1;a=1,Object.assign(fn_checkout.payments.card,{name:$(t).val()})}}),a}),_defineProperty(_payments,"validatecardYear",function(){$(".payment-card").find('[data-type="card-year"]').on("keydown",function(e){if(95<e.keyCode&&e.keyCode<106&&3<$(this).val().length)return!1}),$(".payment-card").find('[data-type="card-mon"]').on("keydown",function(e){if(95<e.keyCode&&e.keyCode<106&&1<$(this).val().length)return!1}),$(".payment-card").find('[data-type="card-num"]').on("keydown",function(e){if(95<e.keyCode&&e.keyCode<106&&15<$(this).val().length)return!1})}),_defineProperty(_payments,"showBanks",function(){$(".search-wrapper").on("click",function(){document.querySelector(".dropdown-list").style.display="block",document.querySelector(".dropdown-list .screen").style.display="block",document.querySelector(".search-bank").focus(),fn_checkout.payments.clickOut(),$(".preffered-banking-list").find("li").removeClass("selected"),localStorage.setItem("pay_mode",""),localStorage.setItem("saved_bank",0)})}),_defineProperty(_payments,"hideBanks",function(){document.querySelector(".dropdown-list").style.display="none",document.querySelector(".dropdown-list .screen").style.display="none"}),_defineProperty(_payments,"count",-1),_defineProperty(_payments,"selectBank",function(){$(".dropdown-list p").on("click",function(){$(".search-bank").val($(this).text()),$(".dropdown-list").hide(),$(".dropdown-list .screen").hide()});var n=JSON.parse(localStorage.getItem("banks"));$(".search-bank").on("keyup",function(e){var t=$(".dropdown-list p.see").length,a=document.querySelector(".search-bank").value.toUpperCase();$.map(n,function(e,t){e.toUpperCase().indexOf(a)?$(".dropdown-list").find('[data-bc="'+t+'"]').hide().removeClass("see"):$(".dropdown-list").find('[data-bc="'+t+'"]').show().addClass("see")});var o,s=$(".dropdown-list p.see");40===e.keyCode&&count<t?count++:38===e.keyCode&&0<count?count--:(13===e.keyCode&&(o=$(".dropdown-list").find("p.see.active"),$(".search-bank").val(o.text()).blur(),s.removeClass("active"),localStorage.setItem("pay_mode",o.attr("data-bc")),localStorage.setItem("pay_source","netbanking"),fn_checkout.payments.hideBanks()),count=0),s.removeClass("active"),s.eq(count).addClass("active")})}),_defineProperty(_payments,"selectPreferredBank",function(){$(".preffered-banking-list").find("li").on("click",function(){var e=$(this).attr("data-bc");localStorage.setItem("pay_mode",e),localStorage.setItem("pay_source","netbanking"),$(".preffered-banking-list").find("li").removeClass("selected"),$(this).addClass("selected"),$(".search-bank").val(""),localStorage.setItem("saved_bank",1),fn_checkout.resetLiciousWallet()})}),_defineProperty(_payments,"selectPaypalOption",function(){$(".pay-method.paypal").find("li").on("click",function(){var e;$(this).hasClass("disabled")||(e=$(this).attr("data-paymode"),localStorage.setItem("pay_mode",e),localStorage.setItem("pay_source","paypal"),$(".pay-method.paypal").find("li").removeClass("selected"),$(this).addClass("selected"))})}),_defineProperty(_payments,"selectWallet",function(){$(".other-wallets").find("li").on("click",function(){var e;$(this).hasClass("disabled")||(e=$(this).attr("data-paymode"),localStorage.setItem("pay_mode",e),localStorage.setItem("pay_source","wallet"),$(".other-wallets").find("li").removeClass("selected"),$(this).addClass("selected"),fn_checkout.resetLiciousWallet())})}),_defineProperty(_payments,"clickOut",function(){$(document).click(function(e){return!$(e.target).is(".dropdown-list, .search-bank")&&void($(e.target).is(".dropdown-list p")?($(".search-bank").val($(e.target).text()),$(".dropdown-list").hide(),$(".dropdown-list .screen").hide(),localStorage.setItem("pay_mode",$(e.target).attr("data-bc")),localStorage.setItem("pay_source","netbanking")):$(".dropdown-list").fadeOut())})}),_defineProperty(_payments,"fetchWallet",function(c,p){var e=p?{type:"loyalty",subProgramId:subProgramId}:{};$(".licious-wallet").find(".lic-btn").css("pointer-events","none"),fn_home.ajaxForm(e,"POST","/checkout/fetch-wallet").done(function(e){fn_main.hideloader(),$(".licious-wallet").find(".lic-btn").css("pointer-events","auto");var t=JSON.parse(e),a=$(".lic-breakup"),o={licious_wallet:{total_payble_without_wallet:t.licious_wallet.total_payble_without_wallet,total_payble_after_wallet:t.licious_wallet.total_payble_after_wallet}};localStorage.setItem("fetchWalletApi",JSON.stringify(o));var r=$(".bill-breakup");r.html("");var i=0,l=0,d="";if($.map(t.order_charges,function(e,t){var a,o,s,n=e.attribute.toLowerCase().replace(/ /g,"-");"Overdue"!==e.attribute&&"total"!==e.key.toLowerCase()?(a='<li class="'+n+'">\n                                '+e.attribute+"\n                                <span>"+("discount"===e.key&&e.value?"-"+e.value:e.value)+'</span>\n                                <div class="message '+("discount"===e.key||("deliverycharge"===e.key||"delivery_charge"===e.key)&&0===e.value?"positive":"")+'">'+e.message+"</div>\n                              </li>",r.append(a),"deliverycharge"!==e.key&&"delivery_charge"!==e.key||(l=e.value)):"total"===e.key.toLowerCase()&&(i=e.value,d='<li class="'+n+'">'+e.attribute+"<span>"+e.value+'</span>\n              <div class="message">'+e.message+"</div></li>",o=e.value,s=JSON.parse(localStorage.getItem("amount")),"CREATED_WITH_FAILURE"===localStorage.getItem("payment_info")&&null!==s.total?localStorage.setItem("payable",s.total):localStorage.setItem("payable",o),$(".payment-cta").find(".init-pay").find("i").html(parseFloat(o).toFixed(2)))}),p&&(fn_ll.loyalty_cart_value=i.toString(),fn_ll.loyalty_delivery_charges=l.toString()),r.append(d),t.licious_wallet){localStorage.setItem("wallet_status","INACTIVE"),a.find(".usable-licp").html("Usable Bonus Cash "+t.licious_wallet.licious_cashp),a.find(".usable-licw").html("Usable Licious Cash "+t.licious_wallet.licious_cash);var s="<h5>Balance</h5><p>Licious Cash<span>"+t.licious_wallet.transactional_balance+"</span></p><p>Bonus Cash<span>"+t.licious_wallet.promotional_balance+"</span></p>";a.find(".balance").html(s);var n=0<t.licious_wallet.payable_wallet_amount?"enabled":"disabled";if($(".licious-wallet").find(".usable-liwallet").html(parseFloat(t.licious_wallet.payable_wallet_amount)),$(".licious-wallet").find(".lic-btn").attr("data-usableamt",parseFloat(t.licious_wallet.payable_wallet_amount)).addClass(n),"remove-coupon"==c)return;localStorage.setItem("wallet_used",0),localStorage.setItem("balance",t.licious_wallet.payable_wallet_amount),localStorage.setItem("wallet_usedValue",t.licious_wallet.payable_wallet_amount),localStorage.setItem("status",t.licious_wallet.Status)}}).fail(function(){fn_main.hideloader()}).always(function(){fn_main.hideloader()}),fn_checkout.payments.useWalletBalance()}),_defineProperty(_payments,"fetchWalletNew",function(e,t){fn_home.ajaxForm({ship_id:e,isShipment:t?1:0},"POST","/checkout/fetch-wallet-new").done(function(e){var t,a,o=JSON.parse(e),s=$(".lic-breakup");"success"==o.status&&(s.find(".usable-licp").html("Usable Bonus Cash "+o.licious_wallet.licious_cashp),s.find(".usable-licw").html("Usable Licious Cash "+o.licious_wallet.licious_cash),t="<h5>Balance</h5><p>Licious Cash<span>"+o.licious_wallet.transactional_balance+"</span></p><p>Bonus Cash<span>"+o.licious_wallet.promotional_balance+"</span></p>",s.find(".balance").html(t),a=0<o.licious_wallet.payable_wallet_amount?"enabled":"disabled",$(".licious-wallet").find(".usable-liwallet").html(parseFloat(o.licious_wallet.payable_wallet_amount)),$(".licious-wallet").find(".lic-btn").attr("data-usableamt",parseFloat(o.licious_wallet.payable_wallet_amount)).addClass(a),localStorage.setItem("balance",o.licious_wallet.payable_wallet_amount),localStorage.setItem("status",o.licious_wallet.Status))}),fn_checkout.payments.useWalletBalance("pay-later")}),_defineProperty(_payments,"useWalletBalance",function(d){$(".licious-wallet").find(".lic-btn").on("click",function(e){e.stopImmediatePropagation();var t,a,o,s,n,r=$(this).hasClass("enabled"),i=parseFloat($(this).attr("data-usableamt")),l=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):localStorage.getItem("payable");$(".payment-options-list").find('[data-payname="cod"]').hasClass("disabled"),r?$(this).hasClass("checked")?(fn_paypal.updateUIviaPaypal(Number(l)+Number(i)),$(this).removeClass("checked"),localStorage.setItem("wallet_used",0),localStorage.setItem("wallet_usedValue",0),localStorage.setItem("wallet_status","INACTIVE"),fn_checkout.updateBilling(i,"li_plus"),t=localStorage.getItem("before_paylater"),"pay-later"==d&&"false"==t&&null!=t?(o=$(".payment-options-list ul .enabled.active").data("payname"),$(".payment-options-list").find('[data-payname="cod"]').addClass("disabled").removeClass("active"),$(".payment-options-list").find('[data-payname="pod"]').addClass("disabled").removeClass("active"),"cod"!==o&&"pod"!==o||(n=!0,$.map($(".payment-options-list ul li"),function(e,t){"enabled"===e.className&&n&&($(".payment-options-list").find('[data-payname="'+e.dataset.payname+'"]').trigger("click"),n=!1)}))):0===$(".lp-ll-selling-price").length&&(a=Number(localStorage.getItem("max_cod_value")),Number(localStorage.getItem("payable"))<=a&&(fn_checkout.isCODEnabled&&$(".payment-options-list").find('[data-payname="cod"]').removeClass("disabled"),fn_checkout.isPODEnabled&&$(".payment-options-list").find('[data-payname="pod"]').removeClass("disabled")))):(fn_paypal.updateUIviaPaypal(Number(l)-Number(i)),$(this).addClass("checked"),localStorage.setItem("wallet_status","ACTIVE"),localStorage.setItem("wallet_usedValue",i),localStorage.setItem("wallet_used",i),fn_checkout.updateBilling(i,"li_minus"),o=$(".payment-options-list ul .enabled.active").data("payname"),$(".payment-options-list").find('[data-payname="cod"]').addClass("disabled"),$(".payment-options-list").find('[data-payname="pod"]').addClass("disabled"),"cod"!==o&&"pod"!==o||(s=!0,$.map($(".payment-options-list ul li"),function(e,t){"enabled"===e.className&&s&&($(".payment-options-list").find('[data-payname="'+e.dataset.payname+'"]').trigger("click"),s=!1)})),localStorage.setItem("pay_mode",""),localStorage.setItem("saved_bank",0),localStorage.setItem("saved_card",0),fn_checkout.payments.resetWallets(),fn_checkout.payments.resetBanks(),fn_checkout.payments.resetSavedpayments()):localStorage.setItem("wallet_status","INACTIVE")})}),_defineProperty(_payments,"upiTimer",function(e,t){function a(){clearInterval(fn_checkout.initTimer)}clearInterval(fn_checkout.initTimer);var o,s,n=e;fn_checkout.initTimer=setInterval(function(){o=parseInt(n/60,10),s=parseInt(n%60,10),o=o<10?"0"+o:o,s=s<10?"0"+s:s,--n<0?(a(),t.html("00:00"),$(".upi-loader").css("animation","none"),fn_checkout.razorPay.emit("payment.cancel")):t.html(o+":"+s)},1e3),$(".confirm").on("click",function(){a(),fn_checkout.razorPay.emit("payment.cancel"),$(".upi-loader-container").removeClass("show"),$(".li-checkout-container").show(),$(".li-alert-screen").removeClass("show")})}),_defineProperty(_payments,"detectPopupBlocker",function(){var e=window.open("about:blank","","directories=no,height=1,width=1,menubar=no,resizable=no,scrollbars=no,status=no,titlebar=no,top=0,location=no");return e.document.getElementsByTagName("body")[0].style.opacity=.5,e?void e.close():void fn_checkout.alertBox("Please turn off the pop up blocker in the browser and refresh the page, as it may affect your payment","","alert")}),_defineProperty(_payments,"validateBeforePay",function(e){var t,a,o=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):localStorage.getItem("payable"),s=localStorage.getItem("pay_mode"),n=(localStorage.getItem("default_addr_id"),$(".search-bank")),r=0,i=localStorage.getItem("saved_card"),l=localStorage.getItem("saved_bank"),d=$("#user-vpa").val(),c=$(".payment-cta").find(".init-pay");switch(e){case"paypal":$("#paypal_one_time_pay").hasClass("selected")||$("#paypal_auto_pay").hasClass("selected")?r=1:(fn_checkout.alertBox("Select a payment method to continue","","alert"),c.removeClass("disabled"));break;case"l_wallet":return 1;case"netbanking":r=1!=l&&""==n.val()?(fn_checkout.alertBox("Select a payment method to continue","","alert"),c.removeClass("disabled"),0):1;break;case"wallet":r=""==s?(fn_checkout.alertBox("Select a payment method to continue","","alert"),c.removeClass("disabled"),0):1;break;case"card":if(1==i){var p=(fn_checkout.payments.card,$(".pay-method.saved .cards").find("li.selected")).find(".sc-cvv").val();if(""==p)return fn_checkout.alertBox("Provide CVV to continue","","alert"),r=0,void c.removeClass("disabled");if(p.length<3)return fn_checkout.alertBox("CVV of a Card must be 3 digits","","alert"),void c.removeClass("disabled");r=1}else{if(1!=fn_checkout.payments.validateCard())return c.removeClass("disabled"),r=0,!1;fn_checkout.payments.card,r=1}break;case"upi":if(!$(".upi-card ").hasClass("selected"))return fn_checkout.alertBox("Select a payment method to continue","","alert"),c.removeClass("disabled"),0;""==d||null==d?($(".error-upi-vpa").html("Please enter VPA ID / UPI ID"),r=0,c.removeClass("disabled")):/^.+@.+$/.test(d)?($(".error-upi-vpa").html(""),r=1):($(".error-upi-vpa").html("Please enter a valid VPA ID / UPI ID"),r=0,c.removeClass("disabled"));break;case"paytm":$(".paytm-checkbox").hasClass("selected")?(t=Number(localStorage.getItem("paytm_amt")),a=Math.ceil(o-t),t<o&&$(".paytm-checkbox").hasClass("selected")?($(".min-amount-head .minimum-amount").html("&#8377; "+a),$(".paytm-load-amt").val(a),$(".paytm-add-money-wrapper").addClass("show"),$(".paytm-lock-screen").addClass("show"),r=0,c.removeClass("disabled")):r=1):(fn_checkout.alertBox("Select a payment method to continue","","alert"),c.removeClass("disabled"),r=0);break;case"saved_payments":return $(".pay-method.saved.active").find("li").hasClass("selected")||fn_checkout.alertBox("Select a payment method to continue","","alert"),c.removeClass("disabled"),r=0}return r}),_defineProperty(_payments,"getPaymentsObjectsForOtherMethod",function(){var e,t=[];return"ACTIVE"===localStorage.getItem("wallet_status")&&(e=localStorage.getItem("wallet_usedValue"),t.push({type:"wallet",amount_to_deduct:e})),t}),_defineProperty(_payments,"activityAfterRazorpaySuccessOrError",function(e,r){var t=r.amount,a=r.isreinitiate,o=localStorage.getItem("max_cod_value"),s=t/100>Number(o);$(".payment-cta").find(".init-pay").removeClass("disabled");var n="false"===localStorage.getItem("before_paylater"),i=window.location.pathname.includes("/order-status/"),l='\n          <div class="payment-fail-container">\n          <img src="https://d2407na1z3fc0t.cloudfront.net/Banner/payment-fail.png" alt="">\n          <div class="desc">\n              '+(s?"":'<div class="title">Payment Cancelled</div>')+"\n              "+(s?"":fn_checkout.isPODEnabled||fn_checkout.isCODEnabled?'<div class="subtitle">You can place the order now via Pay Online on Delivery and pay online later when your order is out for delivery.</div>':'<div class="subtitle">Please try again online. In case your amount is debited, your amount will be refunded automatically.</div>')+"\n              "+(s?'<div class="subtitle">Your order is exceeding maximum COD amount. Please click on Back to cart to cancel the order</div>':"")+'\n              </div>\n\n          <div class="retry-cta">\n              '+(s?'<button class = "create-order-pod">Retry</button>':fn_checkout.isPODEnabled||fn_checkout.isCODEnabled?'<button class = "create-order-pod">Pay on Delivery</button>':"")+"\n              "+(i?'<button class = "retry cart loaded" data-url="/user/checkout">Cancel</button>':'<button class = "retry cart loaded" data-url="/user/checkout">Back to cart</button>')+"\n\n          </div>\n          </div>\n        ";n&&a&&(l='\n        <div class="payment-fail-container">\n        <img src="https://d2407na1z3fc0t.cloudfront.net/Banner/payment-fail.png" alt="">\n        <div class="desc">\n           <div class="title">Payment Cancelled</div>\n            <div class="subtitle">Please retry again</div>\n            </div>\n\n        <div class="retry-cta">\n            <button class = "retry cart loaded" data-url="/user/checkout">Retry</button>\n        </div>\n        </div>\n      ');var d=$(".retry-payment");switch(d.html(""),e){case"orderFailure":d.html('\n        <div class="payment-fail-container">\n        <img src="https://d2407na1z3fc0t.cloudfront.net/Banner/payment-fail.png" alt="">\n        <div class="desc">\n            <div class="title">Order create failure</div>\n            <div class="subtitle">Your order is not created due to unforeseen issues</div>\n        </div>\n\n        <div class="retry-cta">\n            \x3c!-- <button class = "create-order-pod">Pay on Delivery</button> --\x3e\n            <button class = "retry cart loaded" data-url="/user/checkout">Back to cart</button>\n        </div>\n        </div>\n\n        ').show(),d.off(),d.find(".retry-cta .retry.cart.loaded").on("click",function(){d.hide(),fn_cart.miniCart()});break;case"paymentFailed":d.html(l).show(),d.off();var c=d.find(".retry-cta .retry.cart.loaded"),p=d.find(".retry-cta .create-order-pod");n&&a?c.on("click",function(){window.location.reload()}):c.on("click",function(){d.hide(),new Promise(function(e,t){var a=r.orderApiResponse,o=r.amount,s=r.razorpayResponse,n={order_id:a.order_id,payment:{type:"razorpay",id:"",amount:o,status:"FAILURE",failed_reason:s&&s.error?s.error.description:""},secondry_action:"CANCELLED"};paymentStatusApiCall(n).then(function(e){if(e)return i?(d.html(l).hide(),void window.location.reload()):(d.html(l).hide(),void fn_home.ajaxForm({},"POST","/new-cart").done(function(e){200===JSON.parse(e).statusCode&&(fn_checkout.setNavActive("redo-addr"),fn_checkout.setPageActive("redo-addr"),fn_cart.miniCart())}))}).catch(function(e){})})}),s&&i?(p.off(),p.on("click",function(){window.location.reload()})):s?(p.off(),p.on("click",function(){new Promise(function(e,t){var a=r.orderApiResponse,o=r.amount,s=r.razorpayResponse,n={order_id:a.order_id,payment:{type:"razorpay",id:"",amount:o,status:"FAILURE",failed_reason:s&&s.error?s.error.description:""},secondry_action:"CANCELLED"};paymentStatusApiCall(n).then(function(e){if(e){if(i)return d.html(l).hide(),void window.location.reload();window.location.reload(),d.html(l).hide()}}).catch(function(e){})})})):p.on("click",function(){d.hide(),new Promise(function(e,t){var a=r.orderApiResponse,o=r.amount,s=r.razorpayResponse,n={order_id:a.order_id,payment:{type:"razorpay",id:"",amount:o,status:"FAILURE",failed_reason:s&&s.error?s.error.description:""},secondry_action:"COD"};paymentStatusApiCall(n,a).then(function(v){var y;v&&function(){var e,t,a,o,s,n,r,i,l,d,c,p,u,m,h=v.orderDetailsRes||{},f=h.order_id,_=h.address_id,g=h.orderDetails;try{t=(e=g||{}).cart_value,a=e.discount_amount,o=e.currency,s=e.product_ids,n=e.product_names,r=e.prices,i=e.delivery_type,l=e.delivery_slots,d=e.hub_id,c=parseFloat(localStorage.getItem("wallet_used")),p=localStorage.getItem("coupon_used"),localStorage.getItem("method"),localStorage.getItem("pay_source"),u=fn_ll.getterSS("customer_type"),m={Source:"Purchase","Total Amount":Number(t),"Coupon Name":p,"Coupon Type":localStorage.getItem("coupon_type"),"City Name":localStorage.getItem("city_name"),"Hub ID":d,Discount:a,"Licious wallet Amount":c,"Charged ID":f,Currency:o,"Payment Method":"POD","Product ID":s?s.toString():"","Product Name":n?n.toString():"","Category ID":JSON.parse(localStorage.getItem("allitem")).category_id,Price:r?r.toString():"",Quantity:localStorage.getItem("product_quantity"),ShipmentIDs:localStorage.getItem("shipmentCount"),ShipmentTypes:i,ShipmentTime:l,AddressID:_,"Transaction ID":f,Checkout_Flow:checkout_flow(),user_type:u},fn_main.assignIncomingSource(m),fn_home.sendBranchChargedEvent(m,f),Number(t),localStorage.getItem("city_name"),ga("ecommerce:addTransaction",{id:f,revenue:Number(t)}),y=(y=localStorage.getItem("product_quantity")).split(","),$.map(n,function(e,t){ga("ecommerce:addItem",{id:f,name:e,sku:s[t],price:r[t],quantity:y[t]})}),window.dataLayer&&window.dataLayer.push({event:"debug-charged","ga-category":"debug-charged","ga-action":"Logging debug charged","ga-label":g?JSON.stringify(g):"orderDetails not available"}),pushEEPurchases(parsePushEEPurchaseEvent({product_names:n,product_ids:s,prices:r,pr_qty:y,currency:o,order_id:f,transactionId:f,cart_value:t,delivery_type:i,delivery_slots:l,address_id:_,coupon_used:p,charged:m})),fn_cart.gaAddRemoveEvent("Charged","Charged",JSON.stringify(m)),clevertap.event.push("Charged",m)}catch(e){}redirectToOrderStatusPage(f)}()}).catch(function(e){})})});break;default:return}}),_defineProperty(_payments,"reinitiatePaymentForCreatedOrder",function(e,t,a,o){var s=Object.assign({},e),n=$(".retry-payment"),r=localStorage.getItem("is_shipment");if(t||o)return s={payments:s.payments,order_id:localStorage.getItem("order_id"),total:s.total,is_shipment:"true"===r?1:0,source:SOURCE},fn_main.showloader(),void fn_home.ajaxForm(s,"POST","/checkout/reinitiate-payment",6e4).done(function(e){var t=parseJSON(e);localStorage.setItem("CreateOrderApiResponse",JSON.stringify(t));processCreateOrderResponse(t,a,!0)}).fail(function(){n.html(orderFailureContent).show()}).always(function(){fn_main.hideloader()})}),_defineProperty(_payments,"pushEEProceedToPayment",function(e){try{window.dataLayer&&window.dataLayer.push({event:"proceed_to_pay",ecommerce:{checkout:{actionField:e.actionField,products:function(){try{var e=function(){var e=JSON.parse(localStorage.getItem("cart"));try{productInCart=JSON.parse(localStorage.getItem("allitem"))}catch(e){}var o=e.ProductID.split(",").reduce(function(e,t){return""!==t.trim()&&e.push(t.trim()),e},[]),s=e.ProductName.split(",").reduce(function(e,t){return""!==t.trim()&&e.push(t.trim()),e},[]),n=productInCart.category_id?productInCart.category_id.split(",").reduce(function(e,t){return""!==t.trim()&&e.push(t.trim()),e},[]):[];return{v:o.reduce(function(e,t,a){return e.push({item_name:s[a],id:o[a],item_id:o[a],item_category:n[a]}),e},[])}}();if("object"==_typeof(e))return e.v}catch(e){return[]}}()}}})}catch(e){}}),_defineProperty(_payments,"logProceedToPayment",function(e){try{var t={"Licious Wallet Status":localStorage.getItem("wallet_status"),"Licious Wallet Used Value":Number(localStorage.getItem("wallet_usedValue")),"Payment Method":localStorage.getItem("method"),Total:Number(e),"Coupon Name":localStorage.getItem("coupon_used"),hub_id:fn_ll.getterLS("hub_id"),"City Name":localStorage.getItem("city_name"),"Category ID":JSON.parse(localStorage.getItem("allitem")).category_id,"Coupon Type":localStorage.getItem("coupon_type"),Checkout_Flow:checkout_flow()};fn_main.assignIncomingSource(t),fn_cart.gaAddRemoveEvent("Purchase_charged","Purchase",JSON.stringify(t));var a={total:Number(e),payment_method:"l_wallet"==fn_ll.getterLS("pay_source")?"l_wallet":fn_ll.getterLS("method")};t.Source="Purchase",clevertap.event.push("Proceed to Payment Gateway",t),branch.logEvent("proceed_to_pay",a),fn_checkout.payments.pushEEProceedToPayment({actionField:{licious_wallet_status:localStorage.getItem("wallet_status"),licious_wallet_used_value:Number(localStorage.getItem("wallet_usedValue")),payment_method:localStorage.getItem("method"),total:Number(e),coupon_name:localStorage.getItem("coupon_used"),coupon_type:localStorage.getItem("coupon_type"),paytm_amt:localStorage.getItem("paytm_amt"),step:3,option:"proceed_to_pay"}})}catch(e){}}),_defineProperty(_payments,"initPay",function(){var v=$(".payment-cta").find(".init-pay"),y=-1!==location.href.search("/order-status/"),b=localStorage.getItem("pay_source");v.off(),v.on("click",function(o){var s={screen_width:screen.width.toString(),screen_height:screen.height.toString(),browser_fingerprint_id:""};if(branch.getBrowserFingerprintId(function(e,t){null===e&&(s.browser_fingerprint_id=t)}),v.addClass("disabled"),b=localStorage.getItem("pay_source"),fn_checkout.payments.validateBeforePay(b)||"cod"===b||"pod"===b){var e,t,n=0,r="/checkout/new-create-order";$(".lp-ll-selling-price").length?(r="/loyalty/loyalty-purchase",n=Number(loyaltyPayableAmount),e={licious_wallet_status:$(".lic-btn").hasClass("checked")?"ACTIVE":"INACTIVE",licious_wallet_usedValue:$(".lic-btn").hasClass("checked")?$(".usable-liwallet").html():"0",Payment_method:b,total_amount:n.toString(),plan_details:$(".lp-ll-sub-program").html()+", "+(0<$(".lp-ll-marked-price").length?$(".lp-ll-marked-price").attr("value"):"0")+", "+$(".lp-ll-selling-price").attr("value"),paytm_balance:fn_ll.getPaytmBalance(),name:fn_ll.loyalty_plan_name,city:fn_ll.getCityFromLS()},t=null===localStorage.getItem("loyaltyPaymentState")||void 0===localStorage.getItem("loyaltyPaymentState")?"purchase_loyalty":localStorage.getItem("loyaltyPaymentState"),fn_ll.sendAnalyticsData(t,_extends({source:"loyalty"},e))):n=localStorage.getItem("payable");var i=(localStorage.getItem("pay_mode"),localStorage.getItem("default_addr_id")),a=($(".search-bank"),localStorage.getItem("saved_card"),localStorage.getItem("saved_bank"),$(this).attr("data-po"),localStorage.getItem("order_id")),l=localStorage.getItem("cust_key"),d=($(".user_mobile").val(),localStorage.getItem("hub_id")),c=localStorage.getItem("coupocreateOrderPaypaln_used"),p=($(".retry-payment"),fn_checkout.payments.getPaymentsObjectsForOtherMethod());switch(b){case"paypal":if(y)return void fn_checkout.payments.createOrderPaypal(!0,a);fn_checkout.payments.createOrderPaypal(!1,a);break;case"upi":var u=function(){$("#user-vpa").val(),localStorage.setItem("isCodPod",!1);var t,a={customer_key:l,hub_id:d,source:SOURCE,coupon:c,address_id:i,payments:[{type:"razorpay",amount_to_deduct:Number(n)}],total:Number(n)};return $(".lp-ll-selling-price").length?a.loyalty_item={sub_program_id:subProgramId,amount:$(".lp-ll-selling-price").attr("value")}:a.user_data=s,0!==p.length&&(t=a.payments,p.forEach(function(e){isNaN(parseInt(a.total))&&(a.total=0),a.total+=Number(e.amount_to_deduct),t.push(e)})),PAYMENTRAZORPAYOBJECT={},fn_checkout.razorPay.createPayment(PAYMENTRAZORPAYOBJECT,{paused:!0,message:"loading"}),y?(fn_checkout.payments.logProceedToPayment(a.total),fn_checkout.payments.reinitiatePaymentForCreatedOrder(a,y,b),{v:void 0}):(fn_checkout.payments.logProceedToPayment(a.total),void fn_home.ajaxForm(a,"POST",r,6e4).done(function(e){var t=parseJSON(e);"CREATED_WITH_SUCCESS"===t.status&&"ORDER PLACED SUCCESSFULLY"===t.statusMessage?fn_home.addDeviceData():"error"===t.status&&fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o),processCreateOrderResponse(t,"upi")}).fail(function(){fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o)}))}();if("object"==_typeof(u))return u.v;break;case"saved_payments":case"card":var m=function(){localStorage.setItem("isCodPod",!1);var t,a={customer_key:l,hub_id:d,source:SOURCE,coupon:c,address_id:i,payments:[{type:"razorpay",amount_to_deduct:Number(n)}],total:Number(n)};return $(".lp-ll-selling-price").length?a.loyalty_item={sub_program_id:subProgramId,amount:$(".lp-ll-selling-price").attr("value")}:a.user_data=s,0!==p.length&&(t=a.payments,p.forEach(function(e){isNaN(parseInt(a.total))&&(a.total=0),a.total+=Number(e.amount_to_deduct),t.push(e)})),PAYMENTRAZORPAYOBJECT={},fn_checkout.razorPay.createPayment(PAYMENTRAZORPAYOBJECT,{paused:!0,message:"loading"}),y?(fn_checkout.payments.logProceedToPayment(a.total),fn_checkout.payments.reinitiatePaymentForCreatedOrder(a,y,b),{v:void 0}):(fn_checkout.payments.logProceedToPayment(a.total),void fn_home.ajaxForm(a,"POST",r,6e4).done(function(e){var t=parseJSON(e);"CREATED_WITH_SUCCESS"===t.status&&"ORDER PLACED SUCCESSFULLY"===t.statusMessage?fn_home.addDeviceData():"error"===t.status&&fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o),processCreateOrderResponse(t,"card")}).fail(function(e){fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",e)}))}();if("object"==_typeof(m))return m.v;break;case"netbanking":var h=function(){localStorage.setItem("isCodPod",!1);var t,a={customer_key:l,hub_id:d,source:SOURCE,coupon:c,address_id:i,payments:[{type:"razorpay",amount_to_deduct:Number(n)}],total:Number(n)};return $(".lp-ll-selling-price").length?a.loyalty_item={sub_program_id:subProgramId,amount:$(".lp-ll-selling-price").attr("value")}:a.user_data=s,0!==p.length&&(t=a.payments,p.forEach(function(e){isNaN(parseInt(a.total))&&(a.total=0),a.total+=Number(e.amount_to_deduct),t.push(e)})),PAYMENTRAZORPAYOBJECT={},fn_checkout.razorPay.createPayment(PAYMENTRAZORPAYOBJECT,{paused:!0,message:"loading"}),y?(fn_checkout.payments.logProceedToPayment(a.total),fn_checkout.payments.reinitiatePaymentForCreatedOrder(a,y,b),{v:void 0}):(fn_checkout.payments.logProceedToPayment(a.total),void fn_home.ajaxForm(a,"POST",r,6e4).done(function(e){var t=parseJSON(e);"CREATED_WITH_SUCCESS"===t.status&&"ORDER PLACED SUCCESSFULLY"===t.statusMessage?fn_home.addDeviceData():"error"===t.status&&fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o),processCreateOrderResponse(t,b)}).fail(function(e){fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",e)}))}();if("object"==_typeof(h))return h.v;break;case"wallet":var f=function(){localStorage.setItem("isCodPod",!1);var t,a={customer_key:l,hub_id:d,source:SOURCE,coupon:c,address_id:i,payments:[{type:"razorpay",amount_to_deduct:Number(n)}],total:Number(n)};return $(".lp-ll-selling-price").length?a.loyalty_item={sub_program_id:subProgramId,amount:$(".lp-ll-selling-price").attr("value")}:a.user_data=s,0!==p.length&&(t=a.payments,p.forEach(function(e){isNaN(parseInt(a.total))&&(a.total=0),a.total+=Number(e.amount_to_deduct),t.push(e)})),PAYMENTRAZORPAYOBJECT={},fn_checkout.razorPay.createPayment(PAYMENTRAZORPAYOBJECT,{paused:!0,message:"loading"}),y?(fn_checkout.payments.logProceedToPayment(a.total),fn_checkout.payments.reinitiatePaymentForCreatedOrder(a,y,b),{v:void 0}):(fn_checkout.payments.logProceedToPayment(a.total),void fn_home.ajaxForm(a,"POST",r,6e4).done(function(e){var t=parseJSON(e);"CREATED_WITH_SUCCESS"===t.status&&"ORDER PLACED SUCCESSFULLY"===t.statusMessage?fn_home.addDeviceData():"error"===t.status&&fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o),processCreateOrderResponse(t,b)}).fail(function(){fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o)}))}();if("object"==_typeof(f))return f.v;break;case"l_wallet":var _=function(){localStorage.setItem("isCodPod",!1);var t,a={customer_key:l,hub_id:d,source:SOURCE,coupon:c,address_id:i,payments:[],total:Number(n)};return $(".lp-ll-selling-price").length?a.loyalty_item={sub_program_id:subProgramId,amount:$(".lp-ll-selling-price").attr("value")}:a.user_data=s,0!==p.length&&(t=a.payments,p.forEach(function(e){isNaN(parseInt(a.total))&&(a.total=0),a.total+=Number(e.amount_to_deduct),t.push(e)})),y?(fn_checkout.payments.logProceedToPayment(a.total),fn_checkout.payments.reinitiatePaymentForCreatedOrder(a,y,b),{v:void 0}):(fn_checkout.payments.logProceedToPayment(a.total),void fn_home.ajaxForm(a,"POST",r,6e4).done(function(e){var t=parseJSON(e);"CREATED_WITH_SUCCESS"===t.status&&"ORDER PLACED SUCCESSFULLY"===t.statusMessage?fn_home.addDeviceData():"error"===t.status&&fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o),processCreateOrderResponse(t,b)}).fail(function(){fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o)}))}();if("object"==_typeof(_))return _.v;break;case"cod":case"pod":if(localStorage.setItem("isCodPod",!0),"ACTIVE"===localStorage.getItem("wallet_status"))return;var g={customer_key:l,hub_id:d,source:SOURCE,coupon:c,address_id:i,payments:[{type:"COD",amount_to_deduct:Number(n)}],total:Number(n)};if($(".lp-ll-selling-price").length?g.loyalty_item={sub_program_id:subProgramId,amount:$(".lp-ll-selling-price").attr("value")}:g.user_data=s,y)return fn_checkout.payments.logProceedToPayment(g.total),void fn_checkout.payments.reinitiatePaymentForCreatedOrder(g,y,b);fn_checkout.payments.logProceedToPayment(g.total),fn_home.ajaxForm(g,"POST",r,6e4).done(function(e){var t=parseJSON(e);"CREATED_WITH_SUCCESS"===t.status&&"ORDER PLACED SUCCESSFULLY"===t.statusMessage?fn_home.addDeviceData():"error"===t.status&&fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o),processCreateOrderResponse(t,b)}).fail(function(){fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",o)});break;case"paytm":fn_checkout.payments.createOrderPaytm();default:return}}else b||fn_checkout.alertBox("Select a payment method to continue","","alert")})}),_defineProperty(_payments,"createOrder",function(c,p,u,e,m){var h=parseFloat(localStorage.getItem("wallet_used")),f=localStorage.getItem("coupon_used"),_=localStorage.getItem("method");$(".li-checkout-page.payment").addClass("loader-div"),fn_home.ajaxForm({txn_id:c,addr_id:p,type:u,wallet:h,coupon:f},"POST","/checkout/confirm-order").done(function(e){var t,a,o,s,n,r,i,l,d=JSON.parse(e);"success"==d.status?("pay on Delivery"==_?m=_:"Cash on Delivery"==_&&(m="Card, Cash on Delivery"),"wallet"==u&&(clevertap.event.push("Transaction Success",{"Transaction ID":"",Msg:"Success",Status:"Authorized",Type:u,Source:""}),fn_cart.gaAddRemoveEvent("Transaction Success","Transaction Success",_)),t={"Total Amount":Number(d.orderDetails.cart_value),"Coupon Name":f,"Coupon Type":localStorage.getItem("coupon_type"),"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id")),Discount:d.orderDetails.discount_amount,"Licious wallet Amount":h,"Charged ID":d.order_id,Currency:d.orderDetails.currency,"Payment Method":m,"Product ID":d.orderDetails.product_ids.toString(),"Product Name":d.orderDetails.product_names.toString(),Price:d.orderDetails.prices.toString(),Quantity:localStorage.getItem("product_quantity"),ShipmentIDs:localStorage.getItem("shipmentCount"),ShipmentTypes:d.orderDetails.delivery_type,ShipmentTime:d.orderDetails.delivery_slots,AddressID:p,"Transaction ID":c,Checkout_Flow:checkout_flow()},fn_main.assignIncomingSource(t),a={Charged:"Yes","Total Amount":Number(d.orderDetails.cart_value),City:localStorage.getItem("city_name"),"Payment Method":u,"Charged ID":d.order_id},localStorage.setItem("gtm_obj",JSON.stringify(a)),ga("ecommerce:addTransaction",{id:d.order_id,revenue:Number(d.orderDetails.cart_value)}),o=(o=localStorage.getItem("product_quantity")).split(","),$.map(d.orderDetails.product_names,function(e,t){ga("ecommerce:addItem",{id:d.order_id,name:e,sku:d.orderDetails.product_ids[t],price:d.orderDetails.prices[t],quantity:o[t]})}),fn_cart.gaAddRemoveEvent("Charged","Charged",JSON.stringify(t)),t.Source="Charged",clevertap.event.push("Charged",t),fn_checkout.payments.flushLSD(),window.location.href="/order-status/"+d.order_id+"?action=confirm_order"):(s=JSON.parse(localStorage.getItem("payment-delivery")),n="ACTIVE"==(n=localStorage.getItem("wallet_status"))?"True":"False",r={Status:d.status,"Error Message":d.message,"Payment Method":_,"Payment ID":c,"Licious wallet used":n,"Licious Amount":Number(localStorage.getItem("wallet_usedValue")),Discount:Number(localStorage.getItem("discount_coupon")),Total:s.Total},fn_cart.gaAddRemoveEvent("OrderCreate_Fail","Order",JSON.stringify(r)),r.Source="Order",clevertap.event.push("OrderCreate_Fail",r),"wallet"==u&&(i={Msg:d.error.description,Status:"Error",Method:u,hub_id:fn_ll.getterLS("hub_id"),"City Name":localStorage.getItem("city_name"),"Category ID":JSON.parse(localStorage.getItem("allitem")).category_id,Source:""},clevertap.event.push("Transaction Failed",i),fn_cart.gaAddRemoveEvent("Transaction Failed","Transaction Failed",i)),Materialize.toast(d.message,5e3),fn_cart.miniCart(),fn_checkout.setNavActive("redo-addr"),fn_checkout.setPageActive("redo-addr"),l={title:"Choose Address",subtitle:"You have "+$(".li-address-container").find("li").length+" saved address"},fn_checkout.setNavMessages(l,"addr"),$(".li-bill-details").hide(),$(".change-addr").hide(),$(".edit-shipments").hide(),$(".li-checkout-nav-steps").find(".li-nav-title .edit-shipment").hide(),l={title:"Payment methods",subtitle:""},fn_checkout.setNavMessages(l,"cards"))}).always(function(){$(".li-checkout-page.payment").addClass("complete"),$(".init-pay").removeClass("disabled"),setTimeout(function(){$(".li-checkout-page.payment").removeClass("loader-div complete")},1200)})}),_defineProperty(_payments,"createOrderPaypal",function(t,a){localStorage.setItem("isCodPod",!1);var o,s,n=$("#paypal-payment-types > .selected")[0].dataset.paymentcode,r=localStorage.getItem("payable"),i=fn_checkout.payments.getPaymentsObjectsForOtherMethod(),l=-1!==location.href.search("/order-status/"),d={customer_key:localStorage.getItem("cust_key"),hub_id:localStorage.getItem("hub_id"),source:SOURCE,coupon:localStorage.getItem("coupon_used"),address_id:localStorage.getItem("default_addr_id"),payments:[{type:"paypal",amount_to_deduct:Number(r),pg_mode:n,"paypal-client-metadata-id":ggUID}],total:Number(r)};if("paypal_one_time_pay"===n){var c=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");if(d.payments[0].return_url=c+"/user/checkout#paypal-order-success",d.payments[0].cancel_url=c+"/user/checkout#paypal-order-fail",0!==i.length&&(s=d.payments,i.forEach(function(e){isNaN(parseInt(d.total))&&(d.total=0),d.total+=Number(e.amount_to_deduct),s.push(e)})),l||t&&a)return fn_checkout.payments.logProceedToPayment(d.total),void fn_checkout.payments.reinitiatePaymentForCreatedOrder(d,l,"paypal");fn_checkout.payments.logProceedToPayment(d.total),fn_main.showloader(),fn_home.ajaxForm(d,"POST","/checkout/new-create-order",6e4).done(function(t){var a=parseJSON(t);"CREATED_WITH_SUCCESS"===a.status&&"ORDER PLACED SUCCESSFULLY"===a.statusMessage?fn_home.addDeviceData():"error"==a.status&&fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",e),localStorage.setItem("CreateOrderApiResponse",t),processCreateOrderResponse(a,"paypal")}).fail(function(e){fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",e)})}else if("paypal_auto_pay"===n)return 0!==i.length&&(o=d.payments,i.forEach(function(e){isNaN(parseInt(d.total))&&(d.total=0),d.total+=Number(e.amount_to_deduct),o.push(e)})),l||t&&a?(fn_checkout.payments.logProceedToPayment(d.total),void fn_checkout.payments.reinitiatePaymentForCreatedOrder(d,l,"paypal")):(fn_checkout.payments.logProceedToPayment(d.total),setTimeout(function(){fn_main.showloader()},1e3),void fn_home.ajaxForm(d,"POST","/checkout/new-create-order",6e4).done(function(t){var a=parseJSON(t);"CREATED_WITH_SUCCESS"===a.status&&"ORDER PLACED SUCCESSFULLY"===a.statusMessage?fn_home.addDeviceData():"error"==a.status&&fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",e),localStorage.setItem("CreateOrderApiResponse",t),processCreateOrderResponse(a,"paypal")}).fail(function(e){fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",e)}))}),_defineProperty(_payments,"createOrderPaytm",function(t,a){var o=localStorage.getItem("pay_source"),s=(parseFloat(localStorage.getItem("wallet_used")),localStorage.getItem("coupon_used"),localStorage.getItem("method"),-1!==location.href.search("/order-status/")),n=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):localStorage.getItem("payable"),r=(localStorage.getItem("pay_mode"),localStorage.getItem("default_addr_id")),i=($(".search-bank"),localStorage.getItem("saved_card"),localStorage.getItem("saved_bank"),$(this).attr("data-po"),localStorage.getItem("cust_key")),l=($(".user_mobile").val(),localStorage.getItem("hub_id")),d=localStorage.getItem("coupon_used"),c=($(".retry-payment"),{screen_width:screen.width.toString(),screen_height:screen.height.toString(),browser_fingerprint_id:""});branch.getBrowserFingerprintId(function(e,t){null===e&&(c.browser_fingerprint_id=t)});var p,u=fn_checkout.payments.getPaymentsObjectsForOtherMethod(),m={customer_key:i,hub_id:l,source:SOURCE,coupon:d,address_id:r,payments:[{type:"paytm",amount_to_deduct:Number(n)}],total:Number(n)},h="/checkout/new-create-order";return $(".lp-ll-selling-price").length?(m.loyalty_item={sub_program_id:subProgramId,amount:$(".lp-ll-selling-price").attr("value")},h="/loyalty/loyalty-purchase"):m.user_data=c,$(".li-checkout-page.payment").addClass("loader-div"),0!==u.length&&(p=m.payments,u.forEach(function(e){isNaN(parseInt(m.total))&&(m.total=0),m.total+=Number(e.amount_to_deduct),p.push(e)})),s||t&&a?(fn_checkout.payments.logProceedToPayment(m.total),void fn_checkout.payments.reinitiatePaymentForCreatedOrder(m,s,o,!0)):(fn_checkout.payments.logProceedToPayment(m.total),void fn_home.ajaxForm(m,"POST",h,6e4).done(function(t){var a=parseJSON(t);"CREATED_WITH_SUCCESS"===a.status&&"ORDER PLACED SUCCESSFULLY"===a.statusMessage?fn_home.addDeviceData():"error"===a.status&&fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",e),processCreateOrderResponse(a,o)}).fail(function(){fn_checkout.payments.activityAfterRazorpaySuccessOrError("orderFailure",e)}).always(function(){$(".li-checkout-page.payment").addClass("complete"),$(".init-pay").removeClass("disabled"),setTimeout(function(){$(".li-checkout-page.payment").removeClass("loader-div complete")},1200)}))}),_defineProperty(_payments,"payNow",function(e,t,a,o){var s=parseFloat(localStorage.getItem("wallet_used")).toFixed(2),n=$(".lp-ll-selling-price").length?Number(loyaltyPayableAmount):localStorage.getItem("payable"),r=localStorage.getItem("coupon_used");$(".li-checkout-page.payment").addClass("loader-div"),fn_home.ajaxForm({txn_id:e,orderId:t,type:o,wallet:s,payable:n,coupon:r,cust_key:a},"POST","/checkout/pay-now").done(function(e){200===JSON.parse(e).statusCode?(Materialize.toast("Payment successful",3e3),setTimeout(function(){window.location.reload()},2e3)):(Materialize.toast("Some thing went wrong",3e3),setTimeout(function(){},3e3))}).always(function(){$(".li-checkout-page.payment").addClass("complete"),$(".init-pay").removeClass("disabled"),setTimeout(function(){$(".li-checkout-page.payment").removeClass("loader-div complete")},1200)})}),_defineProperty(_payments,"retryPayments",function(a){$(".retry-payment").find(".retry").on("click",function(e){var t;e.stopImmediatePropagation(),"payment"==a&&(fn_cart.gaAddRemoveEvent("Purchase_fail_Tryagain","Purchase",""),clevertap.event.push("Purchase_fail_Tryagain",{Source:"Purchase"})),"track-page"==a&&(t={Source:"Order","Order Status":localStorage.getItem("order_status")},fn_cart.gaAddRemoveEvent("Order_PoDfail_Tryagain","order",JSON.stringify(t)),clevertap.event.push("Order_PoDfail_Tryagain",{Source:"Order","Order Status":localStorage.getItem("order_status")})),$(".retry-payment").hide()}),$(".retry-payment").find(".dismiss").on("click",function(){var e;"track-page"==a&&(window.location.href="/",e={Source:"Order","Order Status":localStorage.getItem("order_status")},fn_cart.gaAddRemoveEvent("Order_PoDfail_cash","Order",JSON.stringify(e)),clevertap.event.push("Order_PoDfail_cash",{Source:"Order","Order Status":localStorage.getItem("order_status")})),$(".retry-payment").hide(),$(".payment-option-wrapper").hide(),setTimeout(function(){$("html, body").animate({scrollTop:0},700,"swing")},500)}),$(".retry-payment").find(".create-order-pod").on("click",function(e){e.stopImmediatePropagation();var t=localStorage.getItem("default_addr_id");"payment"==a&&(fn_cart.gaAddRemoveEvent("Purchase_fail_PoD","Purchase",""),clevertap.event.push("Purchase_fail_PoD",{Source:"Purchase"})),fn_checkout.payments.createOrder("",t,"COD")})}),_defineProperty(_payments,"flushLSD",function(){$.map(["default_addr_id","pay_mode","pay_source","payable","rp_cust_token","saved_card","coupon_used"],function(e){localStorage.setItem(e,"")})}),_defineProperty(_payments,"execute",function(){this.fetchPayments()}),_payments)),_defineProperty(_fn_checkout,"execute",function(){this.validateMobile(),this.validateEmail(),this.validateFlat(),this.validateName(),this.validateLoc(),this.payments.selectBank(),this.addAddress(),this.payments.showBanks(),this.updateAddr()}),_fn_checkout),fn_cart={flag:!1,getAttributesString:function(e){return"data-name='"+e.product_name+"' data-offered_product='"+e.offer_discount+"' data-discount="+parseFloat(e.actual_price-e.base_price).toFixed(2)+" data-is_combo_child='"+e.is_combo_child+"' data-combo_msgs='"+JSON.stringify(e.combo_pop_up_messages)+"'"},showAndHideAlertToast:function(e,t){var a=arguments.length<=1||void 0===t?5e3:t,o='<div class="variable-pay-toast">  \n                  <div class="variable-pay-message">'+e+"</div>\n                </div>";document.querySelector(".variable-pay-msgholder").innerHTML=o,$(".variable-pay-msgholder").show(),setTimeout(function(){$(".variable-pay-msgholder").hide()},a)},miniCart:function(v){return new Promise(function(t,a){$(".li-cart-summary-wrapper").addClass("show"),$(".cart-screen").show(),$(".btn-proceed").addClass("disabled"),fn_cart.resetCart();var e=$(".li-cart-container").find(".item-available");e.find(".minus-one").unbind("click"),e.find(".plus-one").unbind("click"),e.find(".close").unbind("click"),fn_home.ajaxForm({},"POST","/new-cart").done(function(e){var i,l,d,c,p,u,m,h,f,_,g=JSON.parse(e);$(".item-available ul").html(""),$(".item-unavailable ul").html(""),$(".item-unavailable").hide(),200===g.statusCode?function(){var e,t,a;fn_ll.populateCartData(g.data),g.data.hasOwnProperty("overdue")&&(t=(e=g.data.overdue).message,a=e.amount,e.status&&0<a&&t&&null!=t&&fn_cart.showAndHideAlertToast(t)),i=g.data.products.concat(g.data.exotic),l={CartValue:g.data.cart_total,ProductID:" ",ProductName:" ",Quantity:" ",DeliveryCharge:g.data.shipping,SavedAmount:g.data.discount,UnavailableItems:" ",product_category:"",product_price:""},d=[],(c=g.data.oss_products).length&&($(".item-unavailable").show(),$.map(c,function(e){l.UnavailableItems=l.UnavailableItems.concat(e.product_name+","),l.Quantity=l.Quantity+Number(e.quantity)+",";var t='<li><div class="item-detail"><span class="item-name">'+e.product_name+'</span><span class="item-qty">Qty:'+e.quantity+"</span></div></li>";$(".item-unavailable ul").append(t)})),fn_home.branchData=[];var s="";if(i.length){p=1,$.map(i,function(e){fn_home.branchData.push({item_name:e.product_name,item_id:e.product_id,quantity:e.quantity,item_category:e.category_name,price:e.base_price,currency:"INR"}),l.Quantity=l.Quantity+Number(e.quantity)+",",l.ProductID=l.ProductID.concat(e.product_id+","),l.ProductName=l.ProductName.concat(e.product_name+","),l.product_category=l.product_category.concat(e.category_name+","),l.product_price=l.product_price.concat(e.base_price+","),s=s.concat(e.category_id+",");var t,a=e.offer_discount&&0<e.discount?'<span class = "discount-price text-red rupee">'+parseFloat(e.base_price).toFixed(2)+'</span><span class = "base-price discount rupee">'+parseFloat(e.actual_price).toFixed(2)+"</span>":'<span class = "discount-price text-red rupee">'+parseFloat(e.base_price).toFixed(2)+"</span>",o='<li class="prd-'+e.product_id+'"><div class="item-desc"><span class="index-item">'+p+++'</span><div class="item-name">'+e.product_name+'</div><span class="close" '+fn_cart.getAttributesString(e)+" data-prid = "+e.product_id+'></span></div><div class="item-total"><span class="item-qty">'+(""!=(t=e).pieces?t.pieces:t.weight)+"</span>"+a+'<div class="qty"><span class="minus-one" '+fn_cart.getAttributesString(e)+" data-prid = "+e.product_id+" data-prqty="+e.quantity+" data-stock="+e.stock+'></span><span class="number prd-'+e.product_id+'">'+e.quantity+'</span><span class="plus-one" data-cartvalue='+g.data.cart_total+" data-isoffer="+g.data.offer_discount+" data-discount="+g.data.discount+" data-offer="+e.offer_type+' data-prname = "'+e.product_name+'" data-prid = '+e.product_id+" data-prqty="+e.quantity+" data-stock="+e.stock+"></span></div></div></li>";$(".item-available ul").append(o),d=d.concat(e.quantity),localStorage.setItem("itemQuan",d.toString()),fn_cart.deleteCartItem($(".li-cart-container .close")),fn_cart.addCartItem($(".qty")),fn_cart.removeCartItem($(".qty"))});var o={cart_value:g&&g.data&&g.data.cart_total?String(g.data.cart_total):"",city_name:fn_ll.getterLS("city_name"),hub_id:fn_ll.getterLS("hub_id"),product_id:l&&l.ProductID?l.ProductID:"",product_name:l&&l.ProductName?l.ProductName:"",quantity:l&&l.Quantity?l.Quantity:"",total_items:String(i.length),"Category ID":s};localStorage.setItem("start_checkout_obj",JSON.stringify(o)),"loyalty_item"in g.data&&null!==g.data.loyalty_item&&0!==g.data.loyalty_item.length?(renderCartLoyaltyItem(g.data.loyalty_item[0]),$(".mc-ll-top-banner-placeholder").hide(),$(".li-crossell-wrapper").css("box-shadow","0 0 13px 0 rgba(0, 0, 0, 0.14)"),localStorage.setItem("loyalty_price",g.data.loyalty_item[0].price.toString()),localStorage.setItem("loyalty_discounted_price",g.data.loyalty_item[0].discounted_price.toString()),localStorage.setItem("loyalty_subprogram_name",g.data.loyalty_item[0].subprogram_name.toString()),localStorage.setItem("total_items",(g.data.products.length+g.data.exotic.length).toString()),localStorage.setItem("saved_amount",g.data.loyalty_delivery_discount.toString())):(new LoyaltyBanners).getLoyaltyBanner("mc");var n=0,r=0;m=!(u=!0),h=void 0;try{for(f=g.data.cart_order_charges[Symbol.iterator]();!(u=(_=f.next()).done);u=!0)charge=_.value,"total"===charge.key.toLowerCase()?n=charge.value:"deliverycharge"!==charge.key&&"delivery_charge"!==charge.key||(r=charge.value)}catch(e){m=!0,h=e}finally{try{!u&&f.return&&f.return()}finally{if(m)throw h}}fn_ll.loyalty_cart_value=n.toString(),fn_ll.loyalty_delivery_charges=r.toString(),fn_cart.cartSaveMessage(g.data,l),fn_cart.setTotalBar(n,r,g.data.delivery_free),localStorage.setItem("cart",JSON.stringify(l))}else $(".mc-ll-top-banner-placeholder").html(""),$(".mc-ll-top-banner-placeholder").hide(),$(".li-crossell-wrapper").css("box-shadow","0 0 13px 0 rgba(0, 0, 0, 0.14)"),c.length?($(".li-cart-wrapper").show(),$(".btn-proceed").removeClass("disabled")):($(".li-cart-wrapper").hide(),$(".li-crossell-wrapper").hide(),"review"==v?fn_checkout.showContinueShopping():fn_checkout.showContinueShopping("cart"));fn.checkout_oos.cartCount()}():202===g.statusCode&&"empty_cart"==g.data.errorMessage?($(".li-cart-wrapper").hide(),$(".li-crossell-wrapper").css("box-shadow","0 0 13px 0 rgba(0, 0, 0, 0.14)"),$(".li-crossell-wrapper").hide(),fn_checkout.showContinueShopping("cart"),$(".mc-ll-top-banner-placeholder").html(""),$(".mc-ll-top-banner-placeholder").hide()):400===g.statusCode&&($(".li-crossell-wrapper").css("box-shadow","0 0 13px 0 rgba(0, 0, 0, 0.14)"),$(".mc-ll-top-banner-placeholder").html(""),$(".mc-ll-top-banner-placeholder").hide(),fn_cart.miniCart()),0==fn_cart.flag&&(fn_cart.stickyBarFixed(),fn_cart.flag=!0),t(e)}).fail(function(e){$(".btn-proceed").removeClass("disabled"),a(e)}).always(function(){fn_cart.hideCart(),fn_cart.reloadCartCheckout(),fn_cart.OfferedProducts()})})},hideCart:function(){$(".li-cart-header .close").on("click",function(e){$(".free-delivery-mssg").hide(),$(".li-checkout-nav-steps ul").removeClass("ul-wth-msg"),e.stopImmediatePropagation(),$(".update-cart").addClass("disabled"),fn_home.ajaxForm({},"POST","/new-cart").done(function(e){200===JSON.parse(e).statusCode&&(fn_checkout.setNavActive("redo-addr"),0===$(".lp-ll-item").length&&fn_checkout.setPageActive("redo-addr"),$(".li-cart-summary-wrapper").removeClass("show"),$(".cart-screen").hide()),$(".update-cart").removeClass("disabled")}),fn.checkout_oos.cartCount(),$(".li-cart-summary-wrapper").removeClass("show"),$(".cart-screen").hide()}),$(".cart-screen").on("click",function(){$(".li-cart-summary-wrapper").removeClass("show"),$(".cart-screen").hide()})},resetCart:function(){$(".li-cart-wrapper").show(),$(".cart-empty-wrapper").hide()},appendCartItem:function(e){var t,a=$(".item-available ul li").length,o=e.offer_discount&&0<e.discount?'<span class = "discount-price text-red rupee">'+parseFloat(e.base_price).toFixed(2)+'</span><span class = "base-price discount rupee">'+parseFloat(e.base_price+e.discount/e.quantity).toFixed(2)+"</span>":'<span class = "discount-price text-red rupee">'+parseFloat(e.base_price).toFixed(2)+"</span>",s='<li class="prd-'+e.product_id+'"><div class="item-desc"><span class="index-item">'+Number(a+1)+'</span><div class="item-name">'+e.product_name+'</div><span class="close" '+fn_cart.getAttributesString(e)+" data-prid = "+e.product_id+'></span></div><div class="item-total"><span class="item-qty">'+(""!=(t=e).pieces?t.pieces+"Pieces":t.weight)+"</span>"+o+'<div class="qty"><span class="minus-one" '+fn_cart.getAttributesString(e)+" data-prid = "+e.product_id+" data-prqty="+e.quantity+" data-stock="+e.stock+'></span><span class="number prd-'+e.product_id+'">'+e.quantity+'</span><span class="plus-one" data-prid = '+e.product_id+" data-prqty="+e.quantity+" data-stock="+e.stock+"></span></div></div></li>";$(".item-available ul").append(s),fn_cart.deleteCartItem($(".close")),fn_cart.addCartItem($(".qty")),fn_cart.removeCartItem($(".qty"))},cartSaveMessage:function(e,s){var a,o;0<e.messages.length?(o=a="",$.each(e.messages,function(e,t){var a,o;"free_delivery"==t.condition&&($(".btn-proceed").removeClass("disabled"),$(".complete-shipments").removeClass("disabled"),a='<div class="free-delivery-text">'+t.message+"</div>",$(".free-delivery-wrapper").html(a),$(".free-delivery-wrapper").show(),"above_limit"==t.whichEvent?(o={"Cart Value":s.CartValue,"Delivery Charge":s.DeliveryCharge,"Saved Amount":s.SavedAmount,"Product Name":s.ProductName,Quantity:s.Quantity,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id"))},fn_cart.gaAddRemoveEvent("Cart_FreeDel_Apply","CartView",JSON.stringify(o)),o.Source="CartView",clevertap.event.push("Cart_FreeDel_Apply",o)):(o={"Cart Value":s.CartValue,"Delivery Charge":s.DeliveryCharge,"Saved Amount":s.SavedAmount,"Product Name":s.ProductName,Quantity:s.Quantity,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id"))},fn_cart.gaAddRemoveEvent("Cart_FreeDel_Remove","CartView",JSON.stringify(o)),o.Source="CartView",clevertap.event.push("Cart_FreeDel_Remove",o)))}),$.each(e.messages,function(e,t){return"eggs"==t.condition?($(".btn-proceed").addClass("disabled"),a="<span>"+t.message+"</span>",o="warn",$(".warn-msg").html(a).show(),$(".li-cart-message").html(a).addClass(o),$(".li-cart-message").show(),!1):void("cart_discount"==t.condition&&($(".checkout-proceed-wrapper .li-cart-message").removeClass("warn"),$(".btn-proceed").removeClass("disabled"),$(".complete-shipments").removeClass("disabled"),a="<span>"+t.message+"</span>",o="",localStorage.setItem("save-message",t.message),$(".li-cart-message").html(a),$(".li-cart-message").show()))})):($(".li-cart-message").hide(),$(".warn-msg").html("").hide(),$(".complete-shipments").removeClass("disabled"),$(".btn-proceed").removeClass("disabled"))},setTotalBar:function(e,t,a){1==a&&(t=0);var o='<div class="pay-amt"><span class="total pay">Total</span><span class="rupees text-red rupee">'+e+'</span></div><div class="delivery-charges"><span class="delivery-text">Delivery Charge:</span><span class="delivery-pay rupee"> '+t+"</span></div>";$(".checkout-wrapper").find(".amount").html(o)},stickyBarFixed:function(){$(".li-cart-header").innerHeight()+$(".li-cart-container").innerHeight()+50>window.innerHeight?($(".checkout-proceed-wrapper").addClass("fixed"),$(".li-cart-wrapper").css("margin-bottom","125px")):($(".checkout-proceed-wrapper").removeClass("fixed"),$(".li-cart-wrapper").css("margin-bottom","0px"))},deleteCartItem:function(e){e.on("click",function(e){e.stopImmediatePropagation();var t,a,o,s=$(this);s.data("is_combo_child")?fn_cart.showRemovePopup(s,"cart"):(t=s.data("prid"),a=$(".li-cart-container").find("li.prd-"+t),fn_cart.addLoader(a),s.addClass("disabled"),o=window.location.href.includes("/favourite-items")||window.location.href.includes("/past-orders")?{product_id:t,type:"reorder"}:{product_id:t},fn_home.ajaxForm(o,"POST","/new-cart-item-delete").done(function(e){var t=JSON.parse(e);fn_cart.pushEERemoveFromCart(t),"success"==t.status?(fn_cart.flag=!1,fn_cart.removeLoader(a),s.removeClass("disabled"),fn_cart.EventAddRemoveCart(t,"Remove Item","CartView",s),fn_home.checkForCombo(t,"cart"),fn_home.sendBranchEvent("remove_from_cart",t.product,!0),0==t.item_count&&($(".li-cart-wrapper").hide(),$(".li-crossell-wrapper").hide(),fn_checkout.showContinueShopping("cart")),fn_cart.eggMessage(t.message),fn_cart.removeCartAnimation("li.prd-"+t.product_id),""==t.popup_message||null==t.popup_message?(fn_cart.updatePrdPage(t,"delete"),fn_cart.miniCart()):($(".li-cart-message").html("<span>"+t.popup_message+"</span>").addClass("warn"),$(".li-cart-message").show(),fn_cart.removeCartAnimation("li.prd-"+t.product_id),setTimeout(function(){fn_cart.updatePrdPage(t,"delete"),fn_cart.miniCart()},5e3))):(fn_cart.removeLoader(a),s.removeClass("disabled"),Materialize.toast("Something went wrong, please retry",3e3))}))})},updatePrdPage:function(e,t){var a=e.product_id,o="delete"==t?e.item_count:e.quantity,s=e.product.next_available_by?e.product.next_available_by:"",n=$(".li-main-container").find('[data-prod="'+a+'"]'),r=n.find(".action-slider"),i=n.find(".action-slider1"),l=r.find(".item-qty"),d=n.find(".product-message").find(".message"),c=i.find(".item-qty-pdp");"delete"==t?(l.html(0),c.html(0),r.removeClass("slide"),i.removeClass("slide")):0==o?(l.html(o),c.html(o),r.removeClass("slide"),i.removeClass("slide")):(l.html(o),c.html(o)),""!=s&&d.length&&d.html(s)},removeCartAnimation:function(e){fn.checkout_oos.cartCount(),$(".item-available ul").find(e).addClass("remove"),setTimeout(function(){$(".item-available ul").find(e).removeClass("remove"),$(".item-available ul").find(e).remove()},500)},addCartItem:function(e){e.find(".plus-one").on("click",function(e){e.stopImmediatePropagation();var t=$(this),a=parseInt(t.parent().find(".number").html()),o=$(this).data("prid"),s=$(this).data("stock"),n=$(this).data("cartvalue"),r=$(this).data("isoffer"),i=$(this).data("discount"),l=$(this).data("offer"),d=$(this).data("prname"),c=a+1;if(!(c<=s)){var p={"Product Name":d,Discount:i,"New Cart Value":n,Quantity:s,"is Discounted Item":r,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id"))};return l&&"undefined"!=l&&(p["Offer Name"]=l),fn_cart.gaAddRemoveEvent("Cart_Add_OOS","CartView",JSON.stringify(p)),p.Source="CartView",clevertap.event.push("Cart-Add Out of Stock",p),void Materialize.toast("Only "+s+" units left",3e3)}fn_cart.updateCartItem(o,c,t,"add")}),e.find(".add").on("click",function(e){e.stopImmediatePropagation();var t=$(this),a=$(this).data("prid"),o=$(this).data("crosssellid"),s=$(this).data("offertype"),n=$(this).data("prname"),r=$(this).data("baseprice"),i=$(this).data("position");t.addClass("disabled"),fn_cart.crosssellAddCartItem(a,1,o,s,n,r,t,i)})},showRemovePopup:function(t,a){function o(){s.removeClass("show");var e={"Product Name":t.attr("data-name"),Discount:t.attr("data-discount"),"is discounted item":t.attr("data-offered_product"),"City Name":fn_ll.getterLS("city_name"),"Hub ID":fn_ll.getterLS("hub_id")};"cart"===a?fn_ll.sendAnalyticsData("Cart_ComboModal_DontRemove",e):"shipment"===a&&fn_ll.sendAnalyticsData("Del_ComboModal_DontRemove",e)}var s=$(".remove-child-product-background"),e=t.data("combo_msgs")||{title:"Remove combo product ?",description:"Removing a combo product or changing any quantity will result in cancellation of combo offer. Prices can change accordingly"},n=e.description,r=e.title;s.find(".title").html(r),s.find(".description").html(n),s.addClass("show"),s.unbind("click"),s.find(".close-icon").unbind("click"),s.find(".do-not-remove-cta").unbind("click"),s.find(".remove-cta").unbind("click"),s.find(".do-not-remove-cta, .cross-icon").click(function(e){o()}),s.click(function(e){e.target==this&&o()}),s.find(".remove-cta").click(function(e){s.removeClass("show"),t.data("is_combo_child",!1),t.data("is_combo",1),t.click()})},removeCartItem:function(e){e.find(".minus-one").on("click",function(e){e.stopImmediatePropagation();var t,a,o,s,n=$(this);n.data("is_combo_child")?fn_cart.showRemovePopup(n,"cart"):(t=parseInt(n.parent().find(".number").html()),a=$(this).data("prid"),0==(o=($(this).data("stock"),t-1))?(event.stopImmediatePropagation(),s=window.location.href.includes("/favourite-items")||window.location.href.includes("/past-orders")?{product_id:a,type:"reorder"}:{product_id:a},fn_home.ajaxForm(s,"POST","/new-cart-item-delete").done(function(e){fn_cart.flag=!1;var t=JSON.parse(e);fn_cart.pushEERemoveFromCart(t),"success"==t.status&&(fn_cart.EventAddRemoveCart(t,"Remove Item","CartView",n),fn_home.sendBranchEvent("remove_from_cart",t.product,!0),fn_home.checkForCombo(t,"cart"),0==t.item_count&&($(".li-cart-wrapper").hide(),$(".li-crossell-wrapper").hide(),fn_checkout.showContinueShopping("cart")),""==t.popup_message||null==t.popup_message?(fn_cart.updatePrdPage(t,"update"),fn_cart.OfferedProducts(),fn_cart.removeCartAnimation("li.prd-"+t.product_id),fn_cart.miniCart(),fn.checkout_oos.cartCount()):($(".li-cart-message").html("<span>"+t.popup_message+"</span>").addClass("warn"),$(".li-cart-message").show(),fn_cart.removeCartAnimation("li.prd-"+t.product_id),setTimeout(function(){fn_cart.updatePrdPage(t,"update"),fn_cart.OfferedProducts(),fn_cart.miniCart(),fn.checkout_oos.cartCount()},5e3)))})):fn_cart.updateCartItem(a,o,n,"remove"))})},crosssellAddCartItem:function(s,e,t,a,o,n,r,i){var l=$(".crossell-container").find(".productid-"+s);return fn_cart.addLoader(l),fn_home.ajaxForm({crosssell_id:t,product_id:s,quantity:e},"POST","/new-cart-item-update").done(function(e){var t,a,o=JSON.parse(e);fn_cart.pushEEAddToCart(o),"success"==o.status?($(".li-crossell-wrapper .crossell-container .crossell").find(".productid-"+s).fadeOut(300,function(){$(this).remove(),$(".li-crossell-wrapper .crossell-container .crossell").children("div").length<1?$(".li-crossell-wrapper").hide():$(".li-crossell-wrapper").show()}),fn.checkout_oos.cartCount(),fn_cart.miniCart(),t={"Product Name":o.product.product_name,Discount:o.product.discount,"Offer Name":o.product.offer_type,"New Cart Value":o.total,"Delivery Charge":o.shipping_charge,"Saved Amount":"","is discounted item":o.product.offer_discount,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(o.product.hub_id),"Position of item":i,Source:"CartView",incoming_source:"cross_category"},fn_cart.gaAddRemoveEvent("Add-Cross Sell","CartView",JSON.stringify(t)),clevertap.event.push("Add-Cross Sell",t),"delivery"==o.product.offer_type&&(a="<span>"+localStorage.getItem("offer_message")+"</span>",$(".li-cart-message").html(a),$(".li-cart-message").show())):(fn_cart.removeLoader(l),r.removeClass("disabled"))}).fail(function(){fn_cart.removeLoader(l),r.removeClass("disabled")})},gaAddRemoveEvent:function(e,t,a){ga("send",{hitType:"event",eventAction:e,eventCategory:t,eventLabel:a})},EventAddRemoveCart:function(e,t,a,o){var s,n=arguments.length<=3||void 0===o?void 0:o,r={"Product Name":e.product.product_name,Discount:e.product.discount,"New Cart Value":e.total,"Delivery Charge":e.shipping_charge,"Saved Amount":"","is discounted item":e.product.offer_discount,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(e.product.hub_id)};null!=n&&1==n.data("is_combo")&&(r.is_combo=1,s=(n.data("combo_msgs")||{alert_message:"Combo offer removed due to combo modification"}).alert_message,fn_cart.showAndHideAlertToast(s,5e3),n.removeData("is_combo")),e.product.offer_type&&(r["Offer Name"]=e.product.offer_type),fn_cart.gaAddRemoveEvent(t,a,JSON.stringify(r)),r.Source=a,clevertap.event.push(t,r)},pushEEAddToCart:function(e){try{var t=e.product.product_id,a=e.product.category_id,o=e.product.base_price,s=e.product.quantity,n=e.product.product_name;e&&window.dataLayer&&dataLayer.push({event:"add_to_cart",ecommerce:{currencyCode:"INR",add:{products:[{item_id:t,item_category:a,price:o,quantity:s,currency:"INR",item_name:n}]}}})}catch(e){}},pushEERemoveFromCart:function(e){try{var t=e.product.product_id,a=e.product.category_id,o=e.product.base_price,s=e.product.product_name,n=e.product.quantity;e&&window.dataLayer&&dataLayer.push({event:"remove_from_cart",ecommerce:{currencyCode:"INR",remove:{products:[{item_id:t,item_category:a,price:o,quantity:n,currency:"INR",item_name:s}]}}})}catch(e){}},updateCartItem:function(e,t,a,o){var s=$(".li-cart-container").find("li.prd-"+e);a.addClass("disabled"),fn_cart.addLoader(s);return fn_home.ajaxForm({product_id:e,quantity:t},"POST","/new-cart-item-update").done(function(e){var t=JSON.parse(e);"remove"===o?fn_cart.pushEERemoveFromCart(t):"add"===o&&fn_cart.pushEEAddToCart(t),"success"==t.status?(fn_home.checkForCombo(t,"cart"),$(".qty").find(".prd-"+t.product_id).html(t.quantity),fn_cart.updatePrdPage(t,"update"),fn_cart.removeLoader(s),fn.checkout_oos.cartCount(),fn_cart.miniCart().then(function(){a.removeClass("disabled")}),fn_cart.eggMessage(t.message),$(".checkout-proceed-wrapper .pay-amt .rupees.text-red.rupee").html(t.grand_total),"add"==o&&(fn_cart.EventAddRemoveCart(t,"Add-Item","CartView"),fn_home.sendBranchEvent("add_to_cart",t.product)),"remove"==o&&(fn_cart.EventAddRemoveCart(t,"Remove-Item","CartView",a),fn_home.sendBranchEvent("remove_from_cart",t.product))):fn_cart.removeLoader(s)}).fail(function(e){Materialize.toast("Something went wrong, please retry",3e3),fn_cart.removeLoader(s)})},eggMessage:function(e){""==e?($(".btn-proceed").removeClass("disabled"),$(".li-cart-message").removeClass("warn").hide()):($(".li-cart-message").show(),$(".btn-proceed").addClass("disabled"),$(".li-cart-message").html("<span>"+e+"</span>").addClass("warn"))},OfferedProducts:function(){fn_home.ajaxForm({},"POST","/new-offered-products").done(function(e){var n,r,t,i,s,l,a=JSON.parse(e);function o(e,t,a,o){return s.apply(this,arguments)}$(".li-crossell-wrapper .crossell").html(""),"success"==a.status?(s=function(e,t,a,o){return"percentage"==a?Math.round(e-e*t/100):"flat"==a?Math.round(e-t):"nooffer"==a&&0<o?Math.round(e-e*o/100):e},o.toString=function(){return s.toString()},l=o,r="hide",$(".li-crossell-wrapper").show(),t=" "+a.title+" ",$(".crossell-container .header").html(t),localStorage.setItem("offer_message",a.delivery_free_message),i=1,$.map(a.data,function(e){var t="delivery"==e.crosssell.type||"nooffer"==e.crosssell.type?"hide":"show",a=(e.crosssell.type,"nooffer"==e.crosssell.type&&0<e.base_discount?"show":"hide"),o="nooffer"==e.crosssell.type&&0<e.base_discount?"hide":"show";weight=""==e.pieces?e.net:e.pieces+"Pieces","percentage"==e.crosssell.type?(n=0<e.rounded_base_discount?e.rounded_base_discount+" %Off":e.crosssell.value+" %Off",r="show"):"delivery"==e.crosssell.type?(n="Free Delivery",r="show"):"flat"==e.crosssell.type?(n=0<e.rounded_base_discount?e.rounded_base_discount+" Off":e.crosssell.value+" Off",r="show"):"nooffer"==e.crosssell.type&&0<(e.rounded_base_discount||e.base_discount)?(n=(e.rounded_base_discount||e.base_discount)+" %Off",r="show"):"nooffer"==e.crosssell.type&&0==e.base_discount&&(n="",r="hide");var s='<div class="crossell-products productid-'+e.crosssell.product_id+" csid-"+e.crosssell.parent_product_id+'"><div class="product-image"><img src=" '+e.pr_image+'"></div><span class="offer-discount '+r+'">'+n+'</span><div class="item-name"><span>'+e.merchandise_name+'</span></div><div class="item-detail '+o+'"><span class="item-qty">'+weight+'</span><span class="discounted-price rupee ">'+l(e.base_price,e.crosssell.value,e.crosssell.type)+'</span><span class="base-price rupee '+t+'">'+e.base_price+'</span></div><div class="item-detail '+a+'"><span class="item-qty">'+weight+'</span><span class="discounted-price rupee">'+l(e.base_price,e.crosssell.value,e.crosssell.type,e.base_discount)+'</span><span class="base-price rupee">'+e.base_price+'</span></div><div class="add-item"><button class="add'+(2==e.slot_available?" disabled":"")+'" data-position='+i+++" data-prid = "+e.crosssell.product_id+" data-crosssellid = "+e.crosssell.id+" data-offertype = "+e.crosssell.type+' data-prname = "'+e.merchandise_name+'" data-baseprice = '+l(e.base_price,e.crosssell.value,e.crosssell.type,e.base_discount)+">ADD</button></div></div>";$(".li-crossell-wrapper .crossell").append(s)}),fn_cart.addCartItem($(".add-item"))):$(".li-crossell-wrapper").hide()})},reloadCartCheckout:function(){$(".update-cart").on("click",function(e){e.stopImmediatePropagation();var a=$(this);a.addClass("disabled"),$(".free-delivery-mssg").hide(),$(".li-checkout-nav-steps ul").removeClass("ul-wth-msg"),$(".co-ll-item-placeholder").html("");var t=JSON.parse(localStorage.getItem("cart")),o=localStorage.getItem("itemQuan"),s={"Cart Value":t.CartValue,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id")),"Product ID":t.ProductID,"Product Name":t.ProductName,"Delivery Charge":t.DeliveryCharge,"Saved Amount":t.SavedAmount,"Unavailable Items":t.UnavailableItems},n=JSON.parse(JSON.stringify(s));"object"==_typeof(o.split(","))&&(s.Quantity=o.split(",")),"string"==typeof o&&(n.Quantity=o),fn_cart.gaAddRemoveEvent("Cart_UpdateCart","CartView",JSON.stringify(n)),n.Source="CartView",clevertap.event.push("Update Cart",n),fn_home.ajaxForm({},"POST","/new-cart").done(function(e){var t=JSON.parse(e);200===t.statusCode?(fn_checkout.setNavActive("redo-addr"),0===$(".lp-ll-item").length&&fn_checkout.setPageActive("redo-addr"),$(".li-cart-summary-wrapper").removeClass("show"),$(".cart-screen").hide(),a.removeClass("disabled")):(Materialize.toast(t.data.message,3e3),$(".li-cart-wrapper").hide(),$(".li-crossell-wrapper").hide(),$(".item-unavailable").hide(),fn_checkout.showContinueShopping("cart"))})})},removeLoader:function(e){e.addClass("complete"),setTimeout(function(){e.removeClass("loader-div complete"),e.prop("disabled",!1)},250)},addLoader:function(e){e.addClass("loader-div"),e.prop("disabled",!0)},execute:function(){}},fn_trackorder={renderTrackOrderFaliure:function(e){$(".Faliure-Container").append('\n    <div class="timer-order-status" >\n              <img src="https://d2407na1z3fc0t.cloudfront.net/Banner/watch-timer.png" alt="">\n              <div class="minute-left">00</div>\n              <div class="second-left">00</div>\n              <div class="msg">Retry your<br> payment within 7mins</div>\n    </div>'),$(".first").css("display","block"),$("#btn").css("display","block");var t=e&&e?e.timer:0,a=$(".timer-order-status"),o=a.find(".minute-left");console.log(o);var s,n=a.find(".second-left"),r=t,r=Math.floor(r);t?(s=setInterval(function(){0===r&&(clearInterval(s),window.location.reload(),$(".payment-option-wrapper").hide()),0<r?--r:r=0;var e=r/60,t=r%60;e<10&&(e="0"+Math.floor(e)),t<10&&(t="0"+Math.floor(t)),o.html(e),n.html(t)},1e3),fn_trackorder.getPaymentStatusV2orderPage()):($(".new-div").hide(),$(".first").hide(),a.hide())},clearCancelOrderUI:function(){var e=$(".order-placed-wrapper-static");e.find(".cancel-order").hide(),e.find(".cancel-duration-msg").hide(),e.find("hr").hide(),document.querySelector(".refund-toast-placeholder").innerHTML=""},updateOrderCancellationUI:function(u,m,h){return new Promise(function(e){var t,a,o,s,n,r,i,l,d,c,p=$(".order-placed-wrapper-static");null!=u&&null!=u&&null!=u.order_cancellation_meta&&null!=u.order_cancellation_meta&&(a=(t=u.order_cancellation_meta).title,o=t.description,s=t.sub_title,n=t.Cancellation_reason,r=t.disable_cancel_description,u&&null!==u&&u.enable&&Array.isArray(n)&&n.length&&"5"!=h?(e(u),is_cancel_button_pressed||(c=void 0,l='<div class="order-cancellation-header">\n                              <div class="cross-icon">x</div>\n                              <div class="order-cancellation-text">'+a+"</div>\n                          </div>",d='<div class="action">\n                                  <div class="do-not-cancel-btn">DO NOT CANCEL</div>\n                                  <div class="cancel-order-btn">CANCEL ORDER</div>\n                              </div>\n                              <div class="bottom-msg-wrapper">\n                                *'+o+"\n                              </div>",c='<div class="options-wrapper">\n                        <div class="options-header">'+s+'</div>\n                        <div class="options">',n.map(function(e,t){c+='<div class="reason">\n                          <div>\n                              <input class="radio-custom" name="cancellation_reasons" type="radio" id="radio_'+t+'" value="'+e+'">\n                              <label for="radio_'+t+'" class="radio-custom-label">'+e+"</label>\n                          </div>\n                        </div>"}),i=l+'<div class="column-wrapper">'+(c+="</div></div>")+d+"</div>",document.querySelector(".cancel-order-popup").innerHTML="",document.querySelector(".cancel-order-popup").innerHTML=i),$(".cancel-order").unbind("click"),$(".cancel-order-btn").unbind("click"),$(".options").unbind("change"),$(".loc-screen").unbind("click"),$("do-not-cancel-btn").unbind("click"),$(".cross-icon").unbind("click"),void 0===$(".options").find("input[type='radio'][name='cancellation_reasons']:checked").val()?$(".cancel-order-btn").addClass("disabled"):$(".cancel-order-btn").removeClass("disabled"),$(".cancel-order").on("click",function(){$(".loc-screen").show(),$(".cancel-order-popup").show(),is_cancel_button_pressed=!0,$(".options-header").removeClass("warning")}),$(".options").on("change",function(){$(".cancel-order-btn").removeClass("disabled"),$(".options-header").removeClass("warning")}),$(".loc-screen, .do-not-cancel-btn, .cross-icon").on("click",function(){$(".loc-screen").hide(),$(".cancel-order-popup").hide(),is_cancel_button_pressed=!1}),$(".cancel-order-btn").on("click",function(e){var t;e.stopImmediatePropagation(),e.stopPropagation(),$(".cancel-order-btn").hasClass("disabled")?$(".options-header").addClass("warning"):(t=$(".options").find("input[type='radio'][name='cancellation_reasons']:checked").val(),fn_trackorder.cancelOrder(t,m))}),p.find(".cancel-order").show(),u.is_visible?p.find(".cancel-order").removeClass("disabled"):p.find(".cancel-order").addClass("disabled"),p.find(".cancel-duration-msg").show(),p.find("hr").show(),p.find(".cancel-duration-msg").html(r)):fn_trackorder.clearCancelOrderUI(),fn_trackorder.updateRefundToast(u,h))})},updateRefundToast:function(e){var t,a,o;e&&e.hasOwnProperty("refund_meta")&&e.refund_meta.is_visible?(o='<div class="refund-toast" '+((a=(t=e.refund_meta).weblink)?"":'style="cursor:default !important; pointer-events:none !important"')+">\n                              "+(a?"<a href = '"+a+"'>":"<a>")+'  \n                                <div class="refund-toast-message" '+(a?"":'style="width:100%"')+">"+t.refund_info+"</div>\n                                "+(a?'<div class="view-btn">View</div>':"")+"\n                              </a>\n                            </div>",document.querySelector(".refund-toast-placeholder").innerHTML=o):document.querySelector(".refund-toast-placeholder").innerHTML=""},cancelOrder:function(e,t){return new Promise(function(a){fn_main.showloader(),$(".loc-screen").hide(),$(".cancel-order-popup").hide(),is_cancel_button_pressed=!0,fn_home.ajaxForm({reason:e,refund_type:"source",order_id:t},"POST","/checkout/cancel-order").done(function(e){var t=JSON.parse(e);"success"===t.status?(a(t),is_cancel_button_pressed=!1,fn_main.hideloader(),setTimeout(function(){window.location.reload()},500)):Materialize.toast(t.message,5e3)}).fail(function(e){var t=JSON.parse(e);Materialize.toast(t.message?t.message:"Something went wrong. Try refreshing the page",5e3)}).always(function(){fn_main.hideloader(),is_cancel_button_pressed=!1})})},updateOrderPrices:function(e){for(var t=(e.total,e.split),a={},o=0;o<t.length;o++){var s=t[o].key;a[s]=t[o].value,"total"===s.toLowerCase()||"revisedamount"===s?$("#"+s).html(" "+t[o].value):$("#"+s).html(t[o].value)}var n=localStorage.getItem("payment_status"),r=localStorage.getItem("payable");null!=n&&"CREATED_WITH_FAILURE"===n&&null!==r?$("#Total-Absolute-Value").html(r):$("#Total-Absolute-Value").html(a.total)},getInvoiceURL:function(e){sendAnalyticsData("order_status_view_bill");var o=e.shipmentId,s=e.orderProcessingDate,s=moment(s).format("YYYY-MM-DD");return fn_main.showloader(),new Promise(function(a,t){fn_home.ajaxForm({order_id:o,order_date:s},"GET","/get-invoice-url").done(function(e){var t=JSON.parse(e);200==t.statusCode?(fn_main.hideloader(),a(t.data)):(fn_main.hideloader(),alert("Something went wrong try again."))}).fail(function(e){console.log(e),t(e)})}).catch(function(e){fn_main.hideloader()})},renderPaintHeader:function(e,t,a,o,s,n){var r=arguments.length<=2||void 0===a?null:a,i=arguments.length<=3||void 0===o?{}:o,l=arguments.length<=4||void 0===s?null:s,d=arguments.length<=5||void 0===n?null:n,c=$("#map").attr("data-maptype"),p=$(".Faliure-Container"),u='<div class="order-placed-container"><div class="scooter"><img src="'+e.image+'"></div><div class="order-success-container"><div class="order-success-wrapper"><div class="out-delivery-text">'+e.message+'</div></div></div></div>\n  <div class="container-error-payment">\n        <img class="img-tag" >\n        <div class="text-section">\n          <p class="head-txt"></p>\n          <p class="sub-txt"></p>\n        </div>\n  </div><div id=\'map\'></div>';0===$("#map").length?($(".order-placed-wrapper-dynamic").html(u),$(".order-placed-wrapper-dynamic").append(p)):($(".scooter > img").attr("src",e.image),$(".out-delivery-text").html(e.message)),3===t?r?null===document.getElementById("locusIframe")&&"LocusWebView"!==c&&i&&0<Object.keys(i).length&&fn_trackorder.renderLocousWebView(r,i.eta,i.badge_image):i&&0<Object.keys(i).length&&"GoogleMap"!==c&&fn_trackorder.renderGoogleMap(i,d,l):4===t&&($("#map").remove(),$(".order-placed-container").css("display","block"),$(".scooter > img").attr("src",e.image),$("#Arriving-Container").css("display","none"))},renderPaintContractContainer:function(e,t,a,o,s,n){void 0===e&&(e=0);var r,i=arguments.length<=2||void 0===a?"":a,l=arguments.length<=3||void 0===o?"":o,d=arguments.length<=4||void 0===s?"":s,c=!(arguments.length<=5||void 0===n)&&n;""!==d?(r='<div class=\'contact-container\'><div class="cancel-order">CANCEL ORDER</div><div class="contact-query"><div  style="text-align:left;margin-left: 16px;"> <p class="products-arriving" >'+t+'<p><p class="subtext-products-arriving"><img src="/img/house.svg" style="margin-right: 5px;"/>'+d+'<p><div class="seperator"></div></div><div id="Arriving-Container"> <div class="arrivalInfoText" style="margin: 0px 20px 0px auto"></div><div class="arrivalInfoBadge"><img/></div></div><hr/><div class="cancel-duration-msg"></div></div></div>',$(".order-placed-wrapper-static").html(r)):3===e&&c&&""!==l&&""!==i?($(".arrivalInfoText").html(i),$(".arrivalInfoBadge > img").attr("src",l)):3===e?($(".cancel-order").addClass("shift"),$(".subtext-products-arriving").css("width","40%"),$(".arriving").html('<div style="right: 2%;bottom: 32%;">'+i+"</div>"),$(".badge").html('<img src="'+l+'"  height="41"/>')):($(".arrivalInfoText").html(""),$(".arrivalInfoBadge").html(""),$(".arriving").html(""),$(".badge").html(""))},renderPaintTimeLine:function(e,t,a){var o,s="";e[1].cta_info&&e[1].cta_info.value&&2<=t&&$(".GenerateBill").css("cursor","pointer"),s=1===t?($("#Arriving-Container").css("display","none"),'<div class="stateBar"><div class="tickimageLineContainer"><div class="successTick"><img src="/img/checked.svg"/></div><div class="normalLowerLine"></div><div class="firstStateTextContainer"><div class="stateText">'+e[0].status_message+'</div><div class="subStateText">'+e[0].message+'</div></div></div></div><div class="stateBar"><div class="tickimageLineContainer"><div class="normalTick"></div><div class="normalLowerLine"></div><div class="secondStateTextContainer" style="padding-bottom:40px"><div class="stateTextInactive">'+e[1].status_message+'</div></div><div><img src="/img/bill_disabled.svg" height="30px" style="margin-top:10px;margin-left:15%;" /></div></div></div><div class="stateBar"><div class="tickimageLineContainer"><div class="normalTick"></div><div class="normalLowerLine"></div><div class="secondStateTextContainer" style="padding-bottom:40px"><div class="stateTextInactive">'+e[2].status_message+'</div></div></div></div><div class="stateBar"><div class="tickimageLineContainer"><div class="normalTick"></div><div class="normalStateTextContainer"><div class="stateTextInactive">'+e[3].status_message+"</div></div></div></div>"):2===t?($("#Arriving-Container").css("display","none"),o=e[1].cta_info&&e[1].cta_info.value?'<div class="GenerateBill" style=""><img src="/img/bill_generated.svg" height="30px" style="margin-left:15%;margin-top:10px;"/></div>':'<div ><img src="/img/bill_disabled.svg" height="30px" style="margin-left:15%;margin-top:10px;"/></div>','<div class="stateBar"><div class="tickimageLineContainer"><div class="successTick"><img src="/img/checked.svg"/></div><div class="successLowerLine"></div><div class="firstStateTextContainer"><div class="stateText">'+e[0].status_message+'</div><div class="subStateText">'+e[0].message+'</div></div></div></div><div class="concentricStateBar"><div class="tickimageLineContainer"><div class="circle-ripple"></div><div class="concentricNormalLowerLine"></div><div class="concentricStateTextContainer"><div class="stateText">'+e[1].status_message+'</div><div class="subStateText rm-btm-padding">'+e[1].message+'</div><div class="eg-message">\n              '+(e[1].eg_message&&e[1].eg_message.length?"\n                "+e[1].eg_message+'\n                <span class="eg-tooltip">Please check the bill details</span>\n                <img src="/img/eg_info_icon.svg" class="eg-info-icon"/>\n                ':"")+"\n             </div></div>"+o+'</div></div><div class="stateBar"><div class="tickimageLineContainer"><div class="normalTick"></div><div class="normalLowerLine"></div><div class="secondStateTextContainer" style="padding-bottom:40px"><div class="stateTextInactive">'+e[2].status_message+'</div></div></div></div><div class="stateBar"><div class="tickimageLineContainer"><div class="normalTick"></div><div class="normalStateTextContainer"><div class="stateTextInactive">'+e[3].status_message+"</div></div></div></div>"):3===t?'<div class="stateBar"><div class="tickimageLineContainer"><div class="successTick"><img src="/img/checked.svg"/></div><div class="successLowerLine"></div><div class="firstStateTextContainer"><div class="stateText">'+e[0].status_message+'</div><div class="subStateText">'+e[0].message+'</div></div></div></div><div class="stateBar"><div class="tickimageLineContainer"><div class="successTick"><img src="/img/checked.svg"/></div><div class="successLowerLine"></div><div class="secondStateTextContainer"><div class="stateText">'+e[1].status_message+'</div><div class="subStateText rm-btm-padding">'+e[1].message+'</div><div class="eg-message">\n                  '+(e[1].eg_message&&e[1].eg_message.length?"\n                    "+e[1].eg_message+'\n                    <span class="eg-tooltip">Please check the bill details</span>\n                    <img src="/img/eg_info_icon.svg" class="eg-info-icon"/>\n                    ':"")+'\n                 </div></div><div class="GenerateBill"><img src="/img/bill_generated.svg" height="30px" style="margin-left:15%;margin-top:10px;"/></div></div></div><div class="concentricStateBar"><div class="tickimageLineContainer"><div class="circle-ripple"></div><div class="concentricNormalLowerLine"></div><div class="concentricStateTextContainer"><div class="stateText">'+e[2].status_message+'</div><div class="subStateText">'+e[2].message+'</div></div></div></div><div class="stateBar"><div class="tickimageLineContainer"><div class="normalTick"></div><div class="normalStateTextContainer"><div class="stateTextInactive">'+e[3].status_message+"</div></div></div></div>":5==t?($("#Arriving-Container").css("display","none"),'<div class="stateBar"><div class="tickimageLineContainer"><div class="rejectedCross"><img src="/img/rejectedcross.svg"/></div><div class="firstStateTextContainer"><div class="stateText">'+a.status_message+'</div><div class="subStateText">'+a.slot_message+"</div></div></div></div>"):($(".badge").hide(),$(".arriving").hide(),'<div class="stateBar"><div class="tickimageLineContainer"><div class="successTick"><img src="/img/checked.svg"/></div><div class="successLowerLine"></div><div class="firstStateTextContainer"><div class="stateText">'+e[0].status_message+'</div><div class="subStateText">'+e[0].message+'</div></div></div></div><div class="stateBar"><div class="tickimageLineContainer"><div class="successTick"><img src="/img/checked.svg"/></div><div class="successLowerLine"></div><div class="secondStateTextContainer"><div class="stateText">'+e[1].status_message+'</div><div class="subStateText rm-btm-padding">'+e[1].message+'</div><div class="eg-message">\n                '+(e[1].eg_message&&e[1].eg_message.length?"\n                  "+e[1].eg_message+'\n                  <span class="eg-tooltip">Please check the bill details</span>\n                  <img src="/img/eg_info_icon.svg" class="eg-info-icon"/>\n                  ':"")+'\n               </div></div></div></div><div class="stateBar"><div class="tickimageLineContainer"><div class="successTick"><img src="/img/checked.svg"/></div><div class="successLowerLine"></div><div class="secondStateTextContainer"><div class="stateText">'+e[2].status_message+'</div><div class="subStateText">'+e[2].message+'</div></div></div></div><div class="concentricStateBar"><div class="tickimageLineContainer"><div class="circle-ripple"></div><div class="concentricStateTextContainer"><div class="stateText">'+e[3].status_message+'</div><div class="subStateText">'+e[3].message+"</div></div></div></div>"),$(".newOrderStatusContainer").html(s)},renderLocousWebView:function(e,t,a){$("#map").html(""),$(".arrivalInfoText").html(""),$(".arrivalInfoBadge").html(""),$("<iframe>",{src:e,id:"locusIframe",frameborder:0,scrolling:"no"}).appendTo("#map"),$(".order-placed-container").hide(),$("#map").show(),$("#map").attr("data-mapType","LocusWebView"),$(".badge").hide(),$(".arriving").hide(),$("#Arriving-Container").show(),$(".cancel-order").addClass("shift"),$(".subtext-products-arriving").css("width","40%"),$(".arrivalInfoText").html(t),$(".arrivalInfoBadge").html("<img src="+a+">")},showMap:function(e,t){function a(){var e=f.getPosition(),t=_.getPosition(),a=map.getProjection(),o=a.fromLatLngToPoint(e),s=a.fromLatLngToPoint(t),n=new m(s.x-o.x,s.y-o.y),r=new m(n.x/2,n.y/2),i=new m(n.y,-n.x),l=new m(r.x+.3*i.x,r.y+.3*i.y),d="M 0,0 q "+l.x+","+l.y+" "+n.x+","+n.y,c=map.getZoom(),p={path:d,scale:1/Math.pow(2,-c),strokeWeight:2,fillColor:"none",strokeOpacity:1};h?h.setOptions({position:e,icon:p}):h=new u({position:e,clickable:!1,icon:p,zIndex:0,map:map})}var o=(google.maps.Map,google.maps.LatLng),s=google.maps.LatLngBounds,u=google.maps.Marker,m=google.maps.Point,n=new o(e.lat,e.lng),r=new o(t.lat,t.lng),i=new s;i.extend(n),i.extend(r),map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:(e.lat+t.lat)/2,lng:(e.lng+t.lng)/2},zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1}),map.fitBounds(i),map.setOptions({draggable:!1});var h,f=new google.maps.Marker({position:n,draggable:!1,map:map,icon:"/img/location-home-icon.svg"}),_=new google.maps.Marker({position:r,draggable:!1,map:map,icon:"/img/pin-location.svg"}),l=new google.maps.InfoWindow({content:'<div id ="infoBox">Delivering nearby</div>'});l.open(map,_),google.maps.event.addListener(l,"domready",function(){$(".gm-ui-hover-effect").hide()}),google.maps.event.addListener(map,"projection_changed",a),google.maps.event.addListener(map,"zoom_changed",a),google.maps.event.addListener(f,"position_changed",a),google.maps.event.addListener(_,"position_changed",a)},renderGoogleMap:function(e){$(".order-placed-container").hide(),$("#map").show(),$("#map").attr("data-mapType","GoogleMap");var t={lat:Number(e.address_info.lat),lng:Number(e.address_info.lng)},a={lat:Number(e.hub_info.lat),lng:Number(e.hub_info.lng)};fn_trackorder.showMap(t,a)},orderTrackStatus:function(_,e){var g=arguments.length<=1||void 0===e?null:e;return fn_home.ajaxForm({order_id:_},"GET","/order-track-status").done(function(e){var t=JSON.parse(e);fn_main.hideloader(),mapAttributesForAnalytics(t.data.order,"track-order");var a,o,s,n,r,i,l=t.data.order.state_id,d=t.data.order.shipment_stages,c=t.data.order.shipment_messages,p=t.data.order.amount.payment_status,u=t.data.order.live_track_data.eta,m=t.data.order.live_track_data.badge_image,h=t.data.order.live_track_data.live_track_enabled,f=t.data.order.is_order_edited;fn_trackorder.renderPaintTimeLine(d,l,c),fn_trackorder.renderPaintContractContainer(l,c.items_message,u,m,"",h),!$(".shipment1.prd-"+_).data("bill_updated")&&d[1].cta_info&&d[1].cta_info.value&&location.reload(),!$(".shipment1.prd-"+_).data("order_edited")&&f&&location.reload(),3===l?(a=$("#map").attr("data-maptype"),o=t.data.order.live_track_data,s=t.data.order.live_track_data.eta,n=t.data.order.live_track_data.badge_image,r=t.data.order.track_link,i=t.data.order.amount,"GoogleMap"===a&&($(".arriving").html('<div style="right: 5%;bottom: 25%; z-index:100;">'+s+"</div>"),$(".badge").html('<img z-index:100; src="'+n+'"  height="41"/>'),$(".badge").css("z-index","100")),fn_trackorder.renderPaintHeader(c,l,r,o,n,s),fn_checkout.payments.renderPaymentBar(i,l,p)):4===l?(i=t.data.order.amount,clearInterval(g),rr_fn.getReviewRating("Order status page",_),$(".download-invoice-container").show(),fn_trackorder.renderPaintHeader(c,l),fn_checkout.payments.renderPaymentBar(i,l,p)):fn_trackorder.renderPaintHeader(c,l),fn_trackorder.updateOrderCancellationUI(t.data.customer_cancellation,_,t.data.order.state_id),is_cancel_button_pressed||fn_main.hideloader()}).fail(function(e){console.log("errr=>",e),is_cancel_button_pressed||fn_main.hideloader()})},order_state_homepage:"",trackOrderHomePage:function(){return $(".shipment-title").css("float","none"),new Promise(function(x,e){fn_home.ajaxForm({},"POST","/track-order-home").done(function(e){var t,a,o,s,n,r,i,l,d,c,p,u,m,h,f,_,g,v,y,b,k,C,w,S,I,P=JSON.parse(e);x(e),200===P.statusCode?(t=P.data.payment_info,a=$(".track-order-container"),s=(o=P.data.shipments[0]).state_id,o.homepage_date.img_shipment,n=o.shipment_messages.image,r=o.shipment_messages.message,i=P.data.shipments[0].homepage_date.label,l=1==o.shipment_items.length?o.shipment_items.length+" item":o.shipment_items.length+" items",o.homepage_date.placed_on_label,d=o.state_id-1,c=o.shipment_messages.status_message,p=o.track_link,a.find(".img-container .img1").attr("data-lazy",n),a.find(".cross-icon").attr("order_state",s),u="\n            <span>\n              "+l+'\n            </span>\n            <span class="hometrack-btn"></span>\n            ',a.find(".shipment-delivery").html(u),P.data.overdue.overdue_text&&P.data.overdue.overdue_text.length&&(a.find(".desc .eg-overdue-message").remove(),a.find(".desc").append('<div class="eg-overdue-message">'+P.data.overdue.overdue_text+"</div>")),$(".track-order-container").find(".track").attr("data-url",p),$(".track-order-container").find(".track").attr("data-url",p),m=P.data.shipments[0],null!=P.data&&setTimeout(function(){fn_trackorder.trackOrderHomePage()},1e3*m.track_refresh_interval),null==p||""==p?(a.find(".track").hide(),$(".hometrack-btn").show()):(a.find(".track").show(),$(".hometrack-btn").hide()),$(".chargeddetail1").html(""),$.map(m.amount.split,function(e){var t='<p><span class="chargedtype">'+e.attribute+'</span><span class="charged">'+e.value+"</span></p>";$(".chargeddetail1").append(t)}),$(".hometrack-btn").html(""),b="",h="CREATED_WITH_FAILURE"===t.payment_status&&0===t.payble,f="CREATED_WITH_FAILURE"===t.payment_status&&0<t.payble,_="CREATED_WITH_UNKNOWN"===t.payment_status,t.payment_status,g=$(".track-order-container .desc").find("title"),v=$(".track-order-container .desc").find(".shipment-title"),$(".track-order-container .desc .shipment-delivery").find(".hometrack-btn"),y=$(".new-status-images"),h?(i=o.state_id<=4?(r="Your order is created",o.shipment_stages[o.state_id-1].message):(r=o.shipment_messages.status_message,o.shipment_messages.message),g.html(r),v.html(i),S='<span class="view">View Order</span>',b="view",$(".hometrack-btn").html(S)):f?(i=o.state_id<=4?(r=o.shipment_stages[o.state_id-1].status_message,o.shipment_stages[o.state_id-1].message):(r=o.shipment_messages.status_message,o.shipment_messages.message),g.html(r),v.html(i),w='<span class="retry-pay">Retry Payment</span>',b="retrypay",$(".hometrack-btn").html(w)):_?(i=o.state_id<=4?(r=o.shipment_stages[o.state_id-1].status_message,o.shipment_stages[o.state_id-1].message):(r=o.shipment_messages.status_message,o.shipment_messages.message),g.html(r),v.html(i),S='<span class="view">View Order</span>',b="view",$(".hometrack-btn").html(S)):(y.hide(),C=k="",o.state_id<=4?(k=o.shipment_stages[o.state_id-1].status_message,C=o.shipment_stages[o.state_id-1].message):5===o.state_id?r="Your order is cancelled":(k=o.shipment_messages.status_message,C=o.shipment_messages.message),a.find(".title").html(k),a.find(".shipment-title").html(C),$(".hometrack-btn").html(""),1==m.amount.is_payble&&null!=p&&3==m.state_id?(w='<span class="track-pay">Track & Pay</span>',b="trackpay",$(".track").show(),$(".track").html(w)):1==m.amount.is_payble&&3<=m.state_id?(w='<span class="deliver-pay">Pay</span>',b="deliverpay",$(".track").show(),$(".track").html(w)):null!=p&&3==m.state_id?(w='<span class="track-btn">Track Order</span>',b="track",$(".track").show(),$(".track").html(w)):(b=1==m.amount.is_payble&&4==m.state_id?(S='<span class="pay">Pay</span>',"pay"):(S='<span class="view">View Order</span>',"view"),$(".hometrack-btn").html(S))),$(".payment-wrapper .pay-cta").on("click",function(){var e={Screen:"Track"};fn_cart.gaAddRemoveEvent("Track_Pay_Order","Track",JSON.stringify(e)),e.Source="Track",clevertap.event.push("Track_Pay_Order",e),window.location.href="/order-status/"+P.data.shipments[0].order_id}),$(".locus-wrapper .close").on("click",function(e){e.stopPropagation(),$(".locus-wrapper").hide(),$(".payment-wrapper").hide();var t={};fn_cart.gaAddRemoveEvent("TrackViewClose","Track",JSON.stringify(t)),t.Source="Track",clevertap.event.push("TrackViewClose",t)}),$(".track-order-container").on("click",function(e){var t,a=P.data.shipments[0].parent_order_id+"#"+P.data.shipments[0].order_id;"view"==b?(t={Screen:"Home"},fn_cart.gaAddRemoveEvent("Home_View_Order","Order",JSON.stringify(t)),t.Source="Order",clevertap.event.push("Home_View_Order",t),window.location.href="/order-status/"+a):"pay"==b?(t={Screen:"Track"},fn_cart.gaAddRemoveEvent("Track_Pay_Order","Order",JSON.stringify(t)),t.Source="Order",clevertap.event.push("Track_Pay_Order",t),window.location.href="/order-status/"+a):"deliverpay"==b?(t={Screen:"Home"},fn_cart.gaAddRemoveEvent("Home_DeliveredPay_Order","Order",JSON.stringify(t)),t.Source="Order",clevertap.event.push("Home_DeliveredPay_Order",t),window.location.href="/order-status/"+a):"trackpay"==b?(window.location.href="/order-status/"+a,t={Screen:"Home"},fn_cart.gaAddRemoveEvent("Home_TrackPay_Order","Order",JSON.stringify(t)),t.Source="Order",clevertap.event.push("Home_TrackPay_Order",t)):"track"==b?(window.location.href="/order-status/"+a,t={Screen:"Home"},fn_cart.gaAddRemoveEvent("Home_Track_Order","Order",JSON.stringify(t)),t.Source="Order",clevertap.event.push("Home_Track_Order",t)):"retrypay"==b&&(window.location.href="/order-status/"+P.data.shipments[0].parent_order_id)}),$(".track-order-container").find(".cross-icon").on("click",function(e){fn_trackorder.order_state_homepage=$(this).attr("order_state"),e.preventDefault(),e.stopImmediatePropagation(),$(".track-order-container").hide()}),I=a.find(".timeline-cont span"),$.each(I,function(e,t){e==d&&$(t).addClass("active").find(".status-text").html(c),e<d&&$(t).addClass("completed").find(".status-text").html("")}),s!=fn_trackorder.order_state_homepage&&a.show()):($(".track-order-container").hide(),rr_fn.getReviewRating("Home page"))})})},getOrderIdFromurl:function(){var e=[],t="",a="";return-1==window.location.href.indexOf("#")?t=(t=(t=(e=window.location.href.split("/"))[e.length-1]).split("?"))[0]:(t=(e=window.location.href.split(/['\/','#']+/))[e.length-2],a=e[e.length-1]),{parent_order_id:t,child_order_id:a,url:e}},orderTrackShipment:function(){$(".first").attr("pay_key",""),fn_main.showloader(),$(".download-invoice-container").hide(),$(".review-rating-container").hide();var e=[],t="",S="";-1==window.location.href.indexOf("#")?t=(t=(t=(e=window.location.href.split("/"))[e.length-1]).split("?"))[0]:(t=(e=window.location.href.split(/['\/','#']+/))[e.length-2],S=e[e.length-1]),fn_home.ajaxForm({orderId:t},"POST","/order-track-shipment").done(function(e){var t,a,o=JSON.parse(e);fn_main.hideloader(),200===o.statusCode&&null!=o.data.loyalty_status&&null!=o.data.loyalty_status&&((t=o.data.loyalty_status).is_subscribed?(null!==t.message&&(document.querySelector(".ll-message").innerHTML='<div class="ll-free-message"> <span class="message-text"> '+t.message+" </span></div>"),null!==t.purchased_banner?document.querySelector(".ll-item").innerHTML='<div class="loyalty-purchased-item">\n                                                <img src="/img/loyalty_licious_logo.svg" />\n                                                <div class="separator"></div>\n                                                <div class="ll-details">\n                                                    <div class="ll-item-name"> <span> '+t.purchased_banner.plan_details.program_name+'</span></div>\n                                                    <div class="ll-price-sec">\n                                                      <div class="ll-plan-name"> <span> '+t.purchased_banner.plan_details.plan_name+' </span> </div>\n                                                      <div> <span style="color:#313131; padding: 0 15px;opacity: 0.3"> | </span> </div>\n                                                      <div class="ll-act-price"> <span> '+(t.purchased_banner.plan_details.strike_price-t.purchased_banner.plan_details.actual_price<=0?"":"  "+t.purchased_banner.plan_details.strike_price)+' </span> </div>\n                                                      <div class="ll-price"> <span>  '+t.purchased_banner.plan_details.actual_price+" </span> </div>\n                                                    </div>           \n                                                </div>\n                                          </div>":null===t.purchased_banner&&(a="os",(new LoyaltyBanners).getLoyaltyBanner(a))):(a="os",(new LoyaltyBanners).getLoyaltyBanner(a)));var s=o.data.payment_info,n=s.payment_status;if((s&&s?s.timer:0)?(localStorage.setItem("isCodPod",!1),localStorage.setItem("pay-later-scenario",!1),localStorage.setItem("order_id",s.parent_order_id),localStorage.setItem("is_shipment",!1)):(localStorage.setItem("order_id",o.data.shipments[0].order_id),localStorage.setItem("is_shipment",!0),localStorage.setItem("isCodPod",!0),localStorage.setItem("pay-later-scenario",!0),o.data.payment_info.total&&localStorage.setItem("payable",o.data.payment_info.total)),n&&"CREATED_WITH_FAILURE"===n&&fn_trackorder.renderTrackOrderFaliure(s,o),null!==o.data.customer_type&&""!==o.data.customer_type&&(localStorage.setItem("user_type",o.data.customer_type),analyticsAttributes.user_type=o.data.customer_type),$(".total-shipment").html(""),"success"==o.statusMessage){var r=o.data.shipments;if($.map(o.data.shipments,function(e,t){var a=e.order_processing_date,o='<span class="shipment1 prd-'+e.order_id+'" index="'+t+'" \n                     data-order_id="'+e.order_id+'" data-cust_key="'+e.customer_key+'" \n                     data-bill_updated="'+Boolean(e.shipment_stages[1].cta_info&&e.shipment_stages[1].cta_info.value)+'"\n                     data-order_edited="'+e.is_order_edited+'"\n                     data-order-processing-date="'+a+'">\n                '+e.shipment_messages.label+"\n              </span>";$(".total-shipment").append(o)}),localStorage.setItem("payment_status",n),""!=S){$(".shipment1.prd-"+S).addClass("active");var i=r.filter(function(e){return e.order_id==S});localStorage.setItem("order_id",S),localStorage.setItem("cust_key",i[0].customer_key),fn_checkout.payments.fetchPayments("track-page",S),fn_trackorder.orderStatus(i[0],o.data.payment_info),fn_trackorder.selectShipment(o.data.shipments,o.data.payment_info)}else{$(".shipment1.prd-"+o.data.shipments[0].order_id).addClass("active"),localStorage.setItem("cust_key",o.data.shipments[0].customer_key),"true"===localStorage.getItem("is_shipment")?fn_checkout.payments.fetchPayments("track-page",o.data.shipments[0].order_id):fn_checkout.payments.fetchPayments("track-page",localStorage.getItem("order_id")),mapAttributesForAnalytics(o.data.shipments[0],"order-shipments"),fn_trackorder.orderStatus(o.data.shipments[0],o.data.payment_info),fn_trackorder.selectShipment(o.data.shipments,o.data.payment_info);var l=$(".container-error-payment").find(".head-txt"),d=$(".container-error-payment").find(".sub-txt"),c=$(".container-error-payment").find(".img-tag"),p=o.data.payment_info.alert,u=o.data.payment_info.payment_status;if(localStorage.setItem("payment_status",u),p){var m=p.header,h=p.label;switch(l.html(m),d.html(h),localStorage.setItem("payment_status",u),localStorage.setItem("headerDataOrderStatus",m),localStorage.setItem("subTxtDataOrderStatus",h),u){case"CREATED_WITH_FAILURE":$(".first").show(),$("#btn1").show(),$(".container-error-payment").addClass("failure-case"),c.attr("src","https://d2407na1z3fc0t.cloudfront.net/Banner/alert-pay.png");break;case"CREATED_WITH_UNKNOWN":$(".container-error-payment").addClass("unknown-case"),c.attr("src","https://d2407na1z3fc0t.cloudfront.net/Banner/not-confirm-icon.png");break;default:$(".container-error-payment").hide(),$(".first").hide(),$("#btn1").hide()}}else $(".container-error-payment").hide(),$(".first").hide(),$("#btn1").hide()}}else $(".order-status-container").hide(),$(".payemnt-wrapper").hide();var f=localStorage.getItem("order_id"),_=o.data.payment_info.payment_status,g=o.data.shipments,v=g.findIndex(function(e,t){return e.order_id===f}),y=g[v],b=y&&y.amount.is_payble,k=o.data.payment_info.timer||0,C=y&&y.state_id,w=o.data.payment_info.payble||0;localStorage.setItem("showPaymentOption",!1),"CREATED_WITH_SUCCESS"===_&&b&&2<C?($(".first").show(),$("#btn1").show(),localStorage.setItem("showPaymentOption",!0),localStorage.setItem("before_paylater",!1),$(".payment-options-list").find('[data-payname="cod"]').addClass("disabled"),$(".payment-options-list").find('[data-payname="pod"]').addClass("disabled"),$(".payment-option-wrapper .page-title").show()):($(".payment-option-wrapper .page-title").hide(),localStorage.setItem("before_paylater",!0)),"CREATED_WITH_SUCCESS"!==_&&(localStorage.setItem("showPaymentOption",!1),$(".total-shipment").show()),"CREATED_WITH_FAILURE"===_&&k&&w&&localStorage.setItem("showPaymentOption",!0),"false"===localStorage.getItem("showPaymentOption")&&$(".payment-option-wrapper").hide(),fn_trackorder.updateOrderCancellationUI(o.data.shipments[0].customer_cancellation,o.data.shipments[0].order_id,o.data.shipments[0].state_id)}).fail(function(e){fn_main.hideloader()})},getPaymentStatusV2orderPage:function(){$(".first").css("display","block"),$("#btn").css("display","block");fn_trackorder.getOrderIdFromurl().parent_order_id,$(".licious-wallet-container"),$(".order-status-info-bars").html('<div class="waiting-loader-container"><div><div class="loader-dot"><span /><span /><span /><span /><span /></div></div><div>Meanwhile we are checking with bank for the payment confirmation</div></div>')},selectShipment:function(l,d){var t=$($(".shipment1")).attr("data-order_id");-1!==window.location.href.indexOf("#")&&(url=window.location.href.split("#"),t=url[1]);var c="",p=[],e=(localStorage.getItem("cust_key"),l.filter(function(e){return e.order_id==t}));$(".first").hide(),$("#btn1").hide(),4===e[0].state_id&&(fn_main.hideloader(),$(".download-invoice-container").html('<div class="billImage"><img src="/img/bill_generated.svg"></div><div class="textContainer">Invoice<span>Download your invoice copy</span></div><img class="downloadIcon" src="/img/download-arrow.png" download id="downloadId">').show(),$(".payment-option-wrapper").show(),$(".payment-option-wrapper .page-title").show(),rr_fn.getReviewRating("Order status page",t));var a,o=e[0].amount;fn_trackorder.updateOrderPrices(o),fn_trackorder.renderPaintTimeLine(e[0].shipment_stages,e[0].state_id,e[0].shipment_messages),fn_trackorder.renderPaintHeader(e[0].shipment_messages,e[0].state_id),4!==e[0].state_id&&(a=fn_trackorder.orderTrackStatus(t),p.push(a),c=setInterval(function(){var e=fn_trackorder.orderTrackStatus(t,c);p.push(e)},3e4)),$(".shipment1").on("click",function(){fn_trackorder.clearCancelOrderUI(),$(".review-rating-container").hide(),$(".download-invoice-container").hide(),$(".badge").hide(),$(".arriving .div").hide(),fn_main.showloader(),$(".first").hide(),$("#btn1").hide(),"0"===$(this).attr("index")?$(".ll-item").show():$(".ll-item").hide(),clearInterval(c);for(var e=0;e<p.length;e++)p[e].abort();p=[];var t=$(this).attr("data-order_id"),a=l.filter(function(e){return e.order_id==t});a.parent_order_id,mapAttributesForAnalytics(a[0],"order-shipments");var o,s=(localStorage.getItem("cust_key"),a[0].amount);fn_trackorder.updateOrderPrices(s),$("#map").remove(),$("order-placed-container").css("display","block"),4!==a[0].state_id?(o=fn_trackorder.orderTrackStatus(t),p.push(o),c=setInterval(function(){var e=fn_trackorder.orderTrackStatus(t,c);p.push(e)},3e4)):4===a[0].state_id&&fn_main.hideloader();var n=$(this).attr("data-order_id"),r=$(this).attr("data-cust_key");localStorage.setItem("order_id",n),localStorage.setItem("cust_key",r),fn_cart.gaAddRemoveEvent("Shipment","Order"," "),4===a[0].state_id&&(rr_fn.getReviewRating("Order status page",t),$(".download-invoice-container").show()),clevertap.event.push("Shipment Switch Bar",{Source:"Order"}),$(".shipment1").removeClass("active"),$(this).addClass("active"),fn_trackorder.renderPaintTimeLine(a[0].shipment_stages,a[0].state_id,a[0].shipment_messages),fn_trackorder.renderPaintHeader(a[0].shipment_messages,a[0].state_id),fn_trackorder.orderStatus(a[0],d);var i="true"===localStorage.getItem("is_shipment");i&&fn_checkout.payments.fetchWalletNew(n,i)})},orderStatus:function(t){fn_main.hideloader(),$(".split-pay").html(""),$(".chargeddetail").html(""),$(".chargeddetail1").html(""),$(".offer-wrapper .refer-banner").html(""),$(".shipmentitem-holder").show(),""!=t.amount.cod_info_message&&t.amount.cod_info_message,fn_trackorder.renderPaintContractContainer(t.state_id,t.shipment_messages.items_message,"","",t.delivery_address);var e=localStorage.getItem("payment_status"),a=localStorage.getItem("headerDataOrderStatus"),o=localStorage.getItem("subTxtDataOrderStatus"),s=$(".container-error-payment").find(".head-txt");switch(e){case"CREATED_WITH_FAILURE":$(".first").show(),$("#btn1").show();var n=$(".container-error-payment").find(".sub-txt"),r=$(".container-error-payment").find(".img-tag"),i=a,l=o;s.html(i),n.html(l),$(".container-error-payment").addClass("failure-case"),r.attr("src","https://d2407na1z3fc0t.cloudfront.net/Banner/alert-pay.png");break;case"CREATED_WITH_UNKNOWN":n=$(".container-error-payment").find(".sub-txt"),r=$(".container-error-payment").find(".img-tag"),i=a,l=o;s.html(i),n.html(l),$(".container-error-payment").addClass("unknown-case"),$(".payment-option-wrapper").hide(),r.attr("src","https://d2407na1z3fc0t.cloudfront.net/Banner/not-confirm-icon.png");break;default:$(".first").hide(),$("#btn1").hide()}fn_checkout.payments.renderPaymentBar(t.amount,t.state_id,e),5===t.state_id&&$(".track-bar").hide();var d=" ";$(".shipment-item ul").html(""),$.map(t.shipment_items,function(e){var t=0<e.discount?"show":"hide";d=d.concat(e.product_name+","),localStorage.setItem("productName",d);var a=0;e.is_grammage_edited&&e.is_order_edited?a=1:e.is_grammage_edited?a=2:e.is_order_edited&&(a=3);var o,s='<li id="prod_bar" class="'+(e.is_deleted?"deleted":"")+'" cat_slug="'+e.category_list_slug+'" prod_slug="'+e.product_slug+'">\n        <div class="item-desc">\n          <span class="index-item">\n            <img src="'+e.image+'">\n          </span>\n          <div class="item-name">\n            '+e.product_name+(1===a?"*":"")+'\n          </div>\n        </div>\n        <div class="item-total">\n          <span class="item-qty">\n            '+e.weight+(2===a?"*":"")+'\n          </span>\n          <span class="separator">|</span>\n          <span class="base-price discount rupee '+t+'">\n            '+e.actual_price+'\n          </span>\n          <span class="discount-price text-red rupee ">\n            '+e.base_price+'\n          </span>\n          <span class="separator">|</span>\n          <span class="qty">qty:</span>\n          <span>\n            '+(""==(o=e).shipment_quantity?o.quantity:o.shipment_quantity)+(3===a?"*":"")+'\n          </span>\n        </div>\n        <div class="new-weight-message '+(e.is_deleted?"deleted":"")+'">\n          '+(e.new_weight_message&&e.new_weight_message.length?"\n            "+e.new_weight_message+'\n            <span class="eg-tooltip">Please check the bill details</span>\n            <img src="'+(e.is_deleted?"/img/red_info_icon.svg":"/img/eg_info_icon.svg")+'" class="eg-info-icon"/>\n            ':"")+"\n        </div>\n      </li>";$(".shipment-item ul").append(s)});var c='<div class="bill-heading">Bill Detail</div>';c="Paid"===t.amount.payment_status?'<div class="bill-heading">Bill Detail</div><img class="paid_img" src="https://d2407na1z3fc0t.cloudfront.net/Banner/paid.png" />':'<div class="bill-heading">Bill Detail</div>',$(".split-pay").html(c),$(".split-pay").html(c);var p,u,m,h,f,_,g=" ",v="<table>",y=t.payment_status,b="",k="",C="";$.map(t.amount.split,function(e){"discount"==e.key&&e.value,g=g.concat(e.attribute).concat(":"+e.value+","),"total"===e.key.toLowerCase()?b='\n          <tr class="total-type">\n            <td class="chargedtype">\n              '+e.attribute+'\n            </td>\n            <td class="charged" style="float: right;">\n              <div id="'+e.key+'"> '+e.value+"</div>\n            </td>\n          </tr>":"revisedamount"===e.key?k='\n          <tr class="total-type">\n            <td class="chargedtype">\n              '+e.attribute+'\n            </td>\n            <td class="charged" style="float: right;">\n              <div id="'+e.key+'"> '+e.value+"</div>\n            </td>\n          </tr>":"extragrammage"===e.key&&"paid"===y?C='\n          <tr>\n            <td class="chargedtype eg-padding">\n              '+e.attribute+'\n            </td>\n            <td class="charged" id="'+e.key+'">\n              '+e.value+'\n            </td>\n          </tr>\n          <tr>\n            <td class="charged-message">\n              '+e.message+"\n            </td>\n          </tr>":v+='\n          <tr>\n            <td class="chargedtype">\n              '+e.attribute+'\n            </td>\n            <td class="charged" id="'+e.key+'">\n              '+e.value+'\n            </td>\n          </tr>\n          <tr>\n            <td class="charged-message '+("discount"===e.key||("delivery_charge"===e.key||"deliverycharge"===e.key)&&0===e.value?"positive":"")+'">\n              '+e.message+"\n            </td>\n          </tr>"}),v+=b,C&&(v+=C+k),v+="</table>",$(".chargeddetail").append(v),$(".variation-explainer").remove(),t.variation_explainer.status&&(u='\n        <div class="variation-explainer">\n          <div class="ve-title-amount">\n            <div class="ve-title">\n              <img src="/img/ve_alert_icon.svg" class="ve-alert-icon" />\n              '+(p=t.variation_explainer).title+'\n            </div>\n            <div class="ve-amount '+(p.header_total_amount<0?"less":"extra")+'">\n              '+(p.header_total_amount<0?"-":"")+" "+Math.abs(p.header_total_amount)+'\n            </div>\n          </div>\n          <div class="ve-content">\n            '+function(e){if(1===e.length)return e[0];var t="";return $.map(e,function(e){t+="<div> "+e+"</div>"}),t}(p.content)+'\n          </div>\n          <div class="ve-wallet-trans">\n            '+(m=p.line_items,h=p.extraGrammage.eg_status,f=p.edit_order.status,_="",$.map(m,function(e){_+='\n            <div class="ve-line-items">\n              <div class="ve-li-message '+("ls_line_total"!==e.key&&"line_total"!==e.key||2!==h&&!f?"":"credit-msg")+'">'+e.message+'</div>\n              <div class="ve-li-amount">'+(e.amount<0?"-":"")+" "+Math.abs(e.amount)+"</div>\n            </div>\n          "}),_)+"\n          </div>\n          "+(2!==p.extraGrammage.eg_status&&3!==p.extraGrammage.eg_status&&1!==p.edit_order.status||"cod"===t.payment_type?"":'\n            <div class="ve-view-wallet">View Wallet</div>\n          ')+"\n        </div>\n        ",$(".shipment-footer").append(u),$(".ve-view-wallet").length&&$(".ve-view-wallet").click(function(){window.location="/user/profile#lic-wallet"})),$.map(t.amount.split,function(e){var t;"total"!=e.key&&(t='<p><span class="chargedtype1">'+e.attribute+'</span><span class="charged1">'+e.value+"</span></p>",$(".chargeddetail1").append(t))}),$(".info-icon").hover(function(){var e={"BreakUp of Payment":g};fn_cart.gaAddRemoveEvent("Payment Breakup icon","Order",JSON.stringify(e)),e.Source="Order",clevertap.event.push("Payment Breakup icon",e)}),$(".phone-call").on("click",function(){var e={ShipmentNo:t.order_id,"Order Status":t.shipment_messages.status_message};fn_cart.gaAddRemoveEvent("Order_callus","Order",JSON.stringify(e)),e.Source="Order",clevertap.event.push("Call us",e)}),$(".email").on("click",function(){var e={ShipmentNo:t.order_id,"Order Status":t.shipment_messages.status_message};fn_cart.gaAddRemoveEvent("Order_Email","Order",JSON.stringify(e)),e.Source="Order",clevertap.event.push("Email",e)});var w='<span class="pay-text">Pay</span><span class="rupee">'+t.amount.total+"</span>";$(".pay-cta").html(w),$(".pay-cta").find("i").html(t.amount.total),$.map(t.offers,function(t){var e='<a href = "'+t.web_url+'" ><img src = "'+t.web_image_url+'"/> </a>';$(".offer-wrapper .refer-banner").append(e),$(".offer-wrapper .refer-banner").on("click",function(){var e={"Banner Name":t.name,Position:t.id,Type:"Visual",Source:"Order"};fn_cart.gaAddRemoveEvent("Order_Promo","Order",JSON.stringify(e)),sendAnalyticsData("order_status_view_banner"),clevertap.event.push("Promo Banner",e)})}),$(".offer-wrapper .refer-banner").cycle({slides:">a",fx:"scrollHorz",timeout:3e3,"pause-on-hover":!0}),$(".header-new").innerHeight()+$(".order-status-container").innerHeight()+300>window.innerHeight?$(".payment-wrapper").addClass("fixed"):$(".payment-wrapper").removeClass("fixed")},execute:function(){}},fn_main={showloader:function(){$(".loader").show()},hideloader:function(){$(".loader").hide()},formatDateandTime:function(e,t,a){var o=!(arguments.length<=1||void 0===t)&&t,s=!(arguments.length<=2||void 0===a)&&a,n=e.split(/[^0-9]/),r=new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5]);return{day:(!1===s?["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"]:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"])[r.getDay()]+" "+r.getDate()+" "+(!1===o?["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]:["January","February","March","April","May","June","July","August","September","October","November","December"])[r.getMonth()]+" "+r.getFullYear(),time:(r.getHours()%12?r.getHours()%12:"12")+":"+("0"+r.getMinutes()).slice(-2)+" "+(12<=r.getHours()?"PM":"AM")}},clearCart:function(){return new Promise(function(a,e){fn_home.ajaxForm({},"POST","/reorder/clear-cart").done(function(e){var t=JSON.parse(e);"success"==t.status&&a(t)}).fail(function(){e("failed")}).always(function(){})})},throttle:function(t,a){var o=void 0;return function(){var e=arguments;o||(t.apply(this,e),o=!0,setTimeout(function(){return o=!1},a))}},showBottomAlertMsg:function(e,t){var a=$(".add_message");a.html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info"> '+e).show(),setTimeout(function(){a.hide()},t)},getIncomingSource:function(){var e=new URLSearchParams(window.location.search).get("src");return e||""},getQuickCheckoutIncomingSource:function(){return window.location.href.includes("favourite-items")?"favorite_items":window.location.href.includes("past-orders")?"past_order":void 0},assignIncomingSource:function(e){var t=sessionStorage.getItem("incoming_source");t&&null!==t&&""!==t&&e.Checkout_Flow&&"quick_checkout"==e.Checkout_Flow&&(e.incoming_source=t)},getPageName:function(e){var t=arguments.length<=0||void 0===e||e;return"/"===window.location.pathname?t?"homepage":"home_page":window.location.pathname.indexOf("/")===window.location.pathname.lastIndexOf("/")?"category_page":t?"product_description_page":"product_page"}},document.addEventListener("DOMContentLoaded",function(){fn_checkout.execute(),fn_cart.execute(),fn_trackorder.execute(),fn_checkout.paytm.addMoneyCTA()}),$(document).on("click",".GenerateBill",function(e){e.stopImmediatePropagation();var t={shipmentId:$(".shipment1.active").attr("data-order_id"),orderProcessingDate:$(".shipment1.active").attr("data-order-processing-date")};fn_trackorder.getInvoiceURL(t).then(function(e){fn_home.downloadFIle(e,"invoice.pdf")})}),$(document).on("click","#prod_bar",function(e){var t=$(this).attr("cat_slug"),a=$(this).attr("prod_slug");null!==t&&""!==t&&null!==a&&""!==a&&(window.location.href="/"+t+"/"+a)}),$(document).on("click",".download-invoice-container",function(e){e.stopImmediatePropagation();var t={shipmentId:$(".shipment1.active").attr("data-order_id"),orderProcessingDate:$(".shipment1.active").attr("data-order-processing-date")};fn_trackorder.getInvoiceURL(t).then(function(e){fn_home.downloadFIle(e,"invoice.pdf")})}),$(document).on("click",".help",function(e){sendAnalyticsData("order_status_help")}),$("#btn1").click(function(){$("html,body").animate({scrollTop:$(".payment-options-holder").offset().top},"slow"),$(".first").hide()});var old_checkout="old_checkout",quick_checkout="quick_checkout",qc_incoming_source=fn_main.getQuickCheckoutIncomingSource(),branchData=[],is_combo_child=!1,char_limit=90;fn_home={imageLazyLoad:function(e){var t,a;"IntersectionObserver"in window?(console.log("int_called"),new IntersectionObserver(function(e,o){e.forEach(function(e){var t,a;!e.isIntersecting||(a=(t=e.target).getAttribute("data-lazy"))&&(t.setAttribute("src",a),o.disconnect())})}).observe(e)):(a=(t=entry.target).getAttribute("data-lazy"))&&t.setAttribute("src",a)},getAllDOMImages:function(){document.querySelectorAll("img").forEach(fn_home.imageLazyLoad)},setFDUserAttributes:function(){return new Promise(function(n,e){fn_home.ajaxForm({},"GET","/checkout/get-user-data").done(function(e){var t=JSON.parse(e);n(t);var a=t.user_phone,o=t.user_email,s=t.user_name;s&&window.fcWidget.user.setProperties({firstName:s}),o&&window.fcWidget.user.setProperties({email:o}),a&&window.fcWidget.user.setProperties({phone:a})})})},downloadFIle:function(e,a){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.addEventListener("load",function(){var e,t;200===o.status&&(console.log(o.response),console.log(new Blob([o.response])),e=new Blob([o.response]),(t=document.createElement("a")).href=window.URL.createObjectURL(e),t.download=a,t.click())}),o.send()},splitShipment:!1,isSplitShipment:function(){return fn_home.splitShipment},getNotifiedMsg:function(){var e=localStorage.getItem("notified-msg");return null!=e&&""!=e||(e="Once available, you will be notified"),e},updateAvailabilityMsg:function(e){var t=$('[data-prod="'+e.product.product_id+'"]');t.length&&!t.find(".add-to-cart").hasClass("disabled")&&e&&e.product&&e.product.next_available_by&&null!==e.product.next_available_by&&""!==e.product.next_available_by&&t.find(".product-message").find(".message").html(e.product.next_available_by)},checKForBottomMsg:function(e){var t=e.product_inventory.next_available_by;return null!=t&&""!==t},ajaxForm:function(e,t,a,o){return $.ajax({url:a,type:t,data:e,timeout:o||2e4,headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}})},ajaxFormNC:function(e,t,a){return $.ajax({url:a,type:t,data:e,timeout:2e4})},carousel:function(a,e){var t;t="made"==e?{dots:!0,infinite:!1,slidesToShow:3,slidesToScroll:1,variableWidth:!0}:{infinite:!1,slidesToShow:3,slidesToScroll:1,variableWidth:!0},$("."+a+" .item-slider").slick(t),$("."+a+" .item-slider").on("setPosition",function(e,t){$(".slick-track").css("translateX"),parseInt($("."+a+" .slick-track").css("transform").replace(/^matrix(3d)?\((.*)\)$/,"$2").split(/, /)[4])})},sendAnalyticsData:function(e,t){var a=arguments.length<=1||void 0===t?{}:t;null===a.source&&(a.source="");var o={city:localStorage.getItem("city_name"),hub:localStorage.getItem("hub_id"),user_type:null!==localStorage.getItem("user_type")?localStorage.getItem("user_type"):"",logged_in:"true",total_orders:null!==localStorage.getItem("total_orders")?localStorage.getItem("total_orders"):""},s={};switch(e){case"Banner_impression":case"Banner_click":case"refer_knowmore":case"refer_shareothers":s=_extends({},o,a);break;case"refer_copycode":s=_extends({},o,a)}clevertap.event.push(e,s),ga("send",{hitType:"event",eventCategory:a.source,eventAction:e,eventLabel:JSON.stringify(s)})},branchData:[],sendBranchEvent:function(t,e,a){var o=!(arguments.length<=2||void 0===a)&&a;try{var s={quantity:e.quantity?e.quantity:e[0].quantity,item_id:e.product_id?e.product_id:e[0].product_id,price:e.base_price?e.base_price:e[0].base_price,currency:"INR",item_name:e.product_name?e.product_name:e[0].product_name};o&&(s.quantity="0"),branch.logEvent(t,s,function(e){fn_home.logBranchError(e,t,s)})}catch(e){fn_home.logBranchError(e,t,s)}},sendBranchCheckoutEvent:function(t,e){try{var a={checkout_step:"begin_checkout"===t?"1.0":"2.0",item_list:e};branch.logEvent(t,a,function(e){fn_home.logBranchError(e,t,a)})}catch(e){fn_home.logBranchError(e,t,a)}},sendBranchChargedEvent:function(e,t){var a=fn_ll.getterSS("customer_type"),o="PURCHASE";try{for(var s=(e["Product Name"]+",").split(","),n=(e["Product ID"]+",").split(","),r=(e.Price+",").split(","),i=e.Quantity.split(","),l=[],d=0;d<n.length-1;d++)l.push({$content_schema:"COMMERCE_PRODUCT",$og_title:s[d],$price:Number(r[d]),$quantity:Number(i[d]),$sku:n[d],$product_name:s[d],$condition:"EXCELLENT",$currency:"INR"});var c={user_type:a,transaction_id:t},p=$(".customer_key_value").attr("data-custkey"),u={event_name:o,custom_data:c,content_items:l,customer_key:p};fn_ll.sendAnalyticsData("BRANCH_CHARGED_EVENT",_extends({},u),!0),branch.logEvent(o,c,l,function(e){fn_home.logBranchError(e,o,_extends({},c,l))})}catch(e){fn_home.logBranchError(e,o,_extends({},c,l))}},addUserData:function(o){branch.getBrowserFingerprintId(function(e,t){var a={customer_key:o,screen_width:screen.width.toString(),screen_height:screen.height.toString(),device_id:fn_home.getDeviceFingerPrint().toString()};a.browser_fingerprint_id=null===e?t:"",fn_home.ajaxForm(a,"POST","/add-user-data").done(function(e){console.log(e)})})},logBranchError:function(e,t,a){var o;null!==e&&(o={error:e,event_name:t+="- catch",event_data:a,customer_key:$(".customer_key_value").attr("data-custkey")},fn_ll.sendAnalyticsData("BRANCH_ERR",_extends({},o),!0),fn_home.ajaxForm(o,"POST","/log-branch-err").done(function(){}))},homeRefer:function(){return new Promise(function(r,i){fn_home.ajaxForm({},"GET","/home_page/get-config").done(function(e){var t,a,o,s,n=JSON.parse(e);sessionStorage.setItem("customer_type",n.data.customer_type),n.data.hasOwnProperty("customer_chat")&&1==n.data.customer_chat.enable?(sessionStorage.setItem("customer_chat",!0),"true"===sessionStorage.getItem("customer_chat")?$("#chat_opt").css("display","inline-block"):$("#chat_opt").css("display","none")):(sessionStorage.setItem("customer_chat",!1),$("#chat_opt").css("display","none"),window.fcWidget&&window.fcWidget.destroy()),localStorage.setItem("configApiResponse",e),"success"===n.status.toLowerCase()?(t='<a href="/user/profile#hogbucks-view"><div class="referrContainer"><div class="referImage"><img src="'+n.data.referral.referral_image_web+'" /></div><span class="referText">'+n.data.referral.referral_label_web+'</span><div class="referArrow"><img src="/img/play_symbol.png"/></div> </div></a>',localStorage.setItem("user_type",n.data.referral.referral_user_type),localStorage.setItem("total_orders",n.data.referral.referral_total_orders),"TOP"===n.data.referral.referral_position?0<$(".referral-banner-top").length&&$(".referral-banner-top").append(t):0<$(".referral-banner-bottom").length&&$(".referral-banner-bottom").append(t),a={source:"Click",banner_url:n.data.referral.referral_link_web,banner_type:"Referral",position:n.data.referral.referral_position,list:"Home"},o={source:"Impression",banner_url:n.data.referral.referral_link_web,banner_type:"Referral",position:n.data.referral.referral_position,list:"Home"},s=!1,$(window).on("scroll",function(e){var t,a=document.querySelector(".referrContainer");s||null===a||0<=(t=a.getBoundingClientRect()).top&&0<=t.left&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&(fn_home.sendAnalyticsData("Banner_impression",o),s=!0)}),$(".referrContainer").on("click",function(){fn_home.sendAnalyticsData("Banner_click",a)}),r(n)):i("error")})})},getDeviceFingerPrint:function(){return(new ClientJS).getFingerprint()},validateReferralMsg:function(){return null!==sessionStorage.getItem("auto_ref_code")&&""!==sessionStorage.getItem("auto_ref_code")&&null!==sessionStorage.getItem("auto_ref_msg_cart")&&""!==sessionStorage.getItem("auto_ref_msg_cart")},addDeviceData:function(){return new Promise(function(t,a){null!==sessionStorage.getItem("checkout_flow")&&""!==sessionStorage.getItem("checkout_flow")&&sessionStorage.removeItem("checkout_flow"),null!==sessionStorage.getItem("auto_ref_code")&&""!==sessionStorage.getItem("auto_ref_code")&&fn_home.ajaxForm({device_uid:fn_home.getDeviceFingerPrint().toString(),request_check_type:"coupon",request_check_entity:sessionStorage.getItem("auto_ref_code")},"POST","/home_page/add-device-data").done(function(e){t(e),JSON.parse(e).statusCode.toString()}).fail(function(e){a("error"),console.log(e)}).always(function(){sessionStorage.removeItem("auto_ref_code"),sessionStorage.removeItem("auto_ref_msg"),sessionStorage.removeItem("auto_ref_msg_cart"),sessionStorage.removeItem("auto_ref_msg_pay")})})},getreferral:function(){fn_main.showloader(),fn_home.ajaxForm({},"GET","/home_page/get-referral").done(function(e){var t=JSON.parse(e);"success"===t.status.toLowerCase()&&($(".re-code").html(t.referral_key.code),$(".refer-content").html(t.referral_key.body.replace(/\n/g,"<br/>")),$(".refer-text").html(t.referral_key.terms),$(".refer-header").html(t.referral_key.title),$(".refer-and-earn-link a").html(t.referral_key.deeplink_text),$(".wallet-img").attr("src",t.referral_key.image_web),localStorage.setItem("total_orders",t.referral_key.total_orders),localStorage.setItem("user_type",t.referral_key.user_type),$(".share").html('<a href="mailto:?subject='+t.referral_key.email_subject+"&body="+encodeURIComponent(t.referral_key.message)+'"><img src="/img/share.png" /> </a>'))}).always(function(){fn_main.hideloader()})},homeExplore:function(){fn_home.ajaxForm({},"POST","/home_page/get-explore-home").done(function(e){"success"==(e=JSON.parse(e)).status?($(".explore-category").find(".img-loader").remove(),$.each(e.data,function(e,t){var a='<li><a href="/'+t.slug+'" data-index="'+e+'" data-text="'+t.cat_name+'" data-section="explore"><span class = "img-container"><img data-lazy="'+t.cat_tile_img+'" alt="'+t.cat_tile_img+'" title ="'+t.cat_tile_img+'"></span><span>'+t.cat_name+"</span>";$(".cat-list-tiles").append(a)}),ga("send",{hitType:"event",eventCategory:"ScreenHome - ExploreByCategory",eventAction:"Impression",eventLabel:"Explore by category"})):$(".cat-list-tiles").hide(),fn_home.getAllDOMImages()}).always(function(){fn_home.gaClicks($(".cat-list-tiles").find("a"),"ExploreByCategory")})},campaignTnc:function(){fn_home.ajaxForm({},"GET","/campaigntnc").done(function(e){var t,a,o=JSON.parse(e);$(".404-error-handler-image").hide(),"success"===o.status&&0<o.data.campaigntnc.length?($(".campaign-tnc-container").html(""),$(".other-tnc-container").html(""),t=o.data.campaigntnc[0].campaigntnc,a=o.data.campaigntnc[0].othertnc,$.map(t,function(e,t){var s=0,a=e.title,o=e.content;content="",$.map(o,function(e,t){var a=e.description,o="";$.map(a,function(e,t){o+="<li>"+e+"</li>"}),1===e.active_flag&&(s+=1,content+='<div class="col s12 sub-heading"><h6>'+s+") "+e.offer_name+'</h6></div><div class="col s12 list-points"><ul>'+o+"</ul></div>")});var n='<div class="container"><div class="row"><div class="col 12">&nbsp;<br/><br/></div><div class="col s12 heading"><h5>'+a+"</h5></div>"+content+"</div></div>";$(".campaignDiv").append(n)}),$.map(a,function(e,t){var a=e.title,o=e.content,s="";$.map(o,function(e,t){var a=e.description,o="";$.map(a,function(e,t){o+='<li class="other-tnc-list">'+e+"</li>"}),s+='<div class="other-tnc-container"><div class="other-tnc-header"><u>'+e.tnc_name+'</u></div><div class="col s12 list-points"><ul>'+o+"</ul></div></div>"});var n='<div class="container tnc"><p  margin-top: 0pt; margin-bottom: 14pt; font-size: 12pt; "><a name="_gjdgxs"></a><strong><u><span style="font-family: Times;font-size:20px;font-weight:bold;">'+a+'</span></u></strong></p></div><div class="container" ><div class="row"><div class="col 12">&nbsp;<br/><br/></div>'+s+"</div>";$(".tncDiv").append(n)})):$(".404-error-handler-image").show()})},homeCategory:function(){fn_home.ajaxForm({},"POST","/home_page/get-categories-home").done(function(e){"success"==(e=JSON.parse(e)).status?$.each(e.data,function(e,t){var a='<li>\n                              <a href="/'+t.slug+'" class="enabled"  data-id="'+t.id+'" data-section="topbar"\n                              data-text="'+t.cat_name+'" data-index="'+e+'" data-slug="'+t.slug+'">\n                                <img class="cat-icon" src="'+t.web_icon+'" icon-active="'+t.web_icon_active+'" \n                                icon-inactive="'+t.web_icon+'">\n                                '+t.cat_name+"\n                              </a>\n                            </li>";$(".cat-list ul.categories").append(a),$(".prod_cat_id").val("set"),ga("send",{hitType:"event",eventCategory:"ScreenHome - TopMenu",eventAction:"Impression",eventLabel:t.cat_name+" - Pos:"+parseInt(e+1)})}):($(".cat-list").hide(),$(".prod_cat_id").val("unset"))}).always(function(){fn_home.checkSlug(),fn_home.gaClicks($(".cat-list ul").find("a"),"TopMenu"),"set"==$(".prod_cat_id").val()&&(fn_product_page.productListing(),fn_product_page.getCatDetails())})},checkSlug:function(){var a=$(".slug").val().replace("/","");$(".cat-list .categories").find("li").each(function(e,t){a==$(t).find("a").data("slug")&&($(t).find("a").addClass("active"),$(t).find("a .cat-icon").attr("src",""+$(t).find("a .cat-icon").attr("icon-active")),localStorage.setItem("cat_id",$(t).find("a").data("id")),localStorage.setItem("cat_slug",$(t).find("a").data("text")))})},gaClicks:function(r,i){var l="";$(r).click(function(e){e.preventDefault();var t,a,o=parseInt(e.currentTarget.dataset.index)+1,s=e.currentTarget.getAttribute("target"),n=e.currentTarget.dataset.scname?e.currentTarget.dataset.scname+" - "+e.currentTarget.dataset.text+"- Pos:"+o:(l=e.currentTarget.dataset.text,e.currentTarget.dataset.text+"- Pos:"+o);"addCartBtn-home"!==e.target.classList[1]&&(ga("send",{hitType:"event",eventCategory:"ScreenHome - "+i,eventAction:"Click",eventLabel:n,transport:"beacon"}),r.data("section")&&(t="",a={"city name":fn_ll.getterLS("city_name"),"hub id":fn_ll.getterLS("hub_id"),"User Identifier":$(".customer_key")?$(".customer_key").val():""},"banners"==r.data("section")?(t="Screenhome_CarousalBanner",r=$(this),Object.assign(a,{"Banner name":r.data("title")?r.data("title"):"","Position of Banner":(r.data("index")+1).toString()})):"explore"==r.data("section")?(t="Screenhome_ExplorebyCategory",Object.assign(a,{"Category Name":l})):"topbar"==r.data("section")&&(Object.assign(a,{"Category Name":l,page:fn_main.getPageName(!1)}),t="Screenhome_CategoryNavigation"),clevertap.event.push(t,a)),"A"==e.target.tagName&&s?window.open(e.target.href,"_blank"):"A"==e.target.tagName&&(window.location.href=e.target.href),e.currentTarget.href&&s?window.open(e.currentTarget.href,"_blank"):e.currentTarget.href&&(window.location.href=e.currentTarget.href))})},vanityGA:function(e){$(e).on("click",function(e){e.preventDefault();var t="";e.currentTarget.dataset.val&&(t=e.currentTarget.dataset.val),ga("send",{hitType:"event",eventCategory:e.currentTarget.dataset.cat,eventAction:"Click",eventLabel:t,transport:"beacon"}),window.location.href=e.currentTarget.href})},headerGA:function(e){$(e).on("click",function(e){e.preventDefault();var t=$(this).data("eventlabel");ga("send",{hitType:"event",eventCategory:"ScreenHome - Header",eventAction:"Click",eventLabel:t,transport:"beacon"}),e.currentTarget.href&&(window.location.href=e.currentTarget.href)})},footerGA:function(){$(".footer-new .useful-links a, .footer-new .header a").on("click",function(e){e.preventDefault();var t=$(this).data("eventlabel");ga("send",{hitType:"event",eventCategory:"ScreenHome - Footer",eventAction:"Click",eventLabel:t,transport:"beacon"}),window.open(e.currentTarget.href,"_blank")})},pdpTestimonialsGA:function(e,o){e.on("click",function(e){e.preventDefault();var t,a=parseInt(e.currentTarget.dataset.index)+1;e.currentTarget.dataset.scname?(t=e.currentTarget.dataset.scname+" - "+e.currentTarget.dataset.text+"- Pos:"+a,"Testimonial"==o&&(t=e.currentTarget.dataset.scname+" - "+e.currentTarget.dataset.text)):(t=e.currentTarget.dataset.text+"- Pos:"+a,"Testimonial"==o&&(t=e.currentTarget.dataset.text)),"addCartBtn-home"!==e.target.classList[1]&&(ga("send",{hitType:"event",eventCategory:"ProductDetailPage - Testimonial",eventAction:"Click",eventLabel:t,transport:"beacon"}),"A"==e.target.tagName&&(window.location.href=e.target.href),e.currentTarget.href&&(window.location.href=e.currentTarget.href))})},getOperationalTicker:function(){fn_home.ajaxForm({},"GET","/home_page/get-operational-ticker").done(function(e){parsedResponse=JSON.parse(e),200===parsedResponse.statusCode&&parsedResponse.data.status&&parsedResponse.data.text&&($(".operational-ticker").html(parsedResponse.data.text).show(),$(".header-new").css("height","281px"))}).fail(function(e){}).always(function(){})},homeBanners:function(){fn_home.ajaxForm({},"POST","/home_page/get-banners-home").done(function(e){var t;"success"==(e=JSON.parse(e)).status&&($.each(e.data.banners,function(e,t){var a=t.web_url.split("?");0==e&&ga("send",{hitType:"event",eventCategory:"ScreenHome - OfferBanner",eventAction:"Impression",eventLabel:a[1]+" - Pos:"+parseInt(e+1)});var o='<a href="'+t.web_url+'" data-text="'+a[1]+'" data-index="'+e+'" style="width:100%; background: url('+t.web_banner+') no-repeat center /contain" data-webbanner="'+t.web_banner+'" data-section="banners" data-title="'+t.title+'"><img data-lazy="'+t.web_banner+'" style = "opacity: 0" alt=""></a>';$(".slider-banners ").append(o)}),t=$(".interlaced-banner-wrapper"),e.data&&e.data.interlaced&&e.data.interlaced.length?(t.find(".interlace-img").attr("src",e.data.interlaced[0].web_image_url),t.find(".interlaced-image-container").attr("href",e.data.interlaced[0].website_url),t.show()):t.hide(),$(".findVideo").on("click",function(e){$(".myVideo")[0].contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"),$(".loc-screen-video").addClass("show"),$("body").addClass("noscroll"),$(".slider-banners").cycle("pause")}),$(".closePopVid").on("click",function(e){$(".myVideo")[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),$(".loc-screen-video").removeClass("show"),$("body").removeClass("noscroll"),$(".slider-banners").cycle("resume")}),$(".loc-screen-video").on("click",function(e){$(".myVideo")[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),$(".loc-screen-video").removeClass("show"),$("body").removeClass("noscroll"),$(".slider-banners").cycle("resume")}),$(window).on("keydown",function(e){27==e.which&&($(".myVideo")[0].contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),$(".loc-screen-video").removeClass("show"),$("body").removeClass("noscroll"),$(".slider-banners").cycle("resume"))})),$(".slider-banners").cycle({slides:">a",fx:"scrollHorz",timeout:6e3,"pause-on-hover":!0}),$(".slider-banners").on("cycle-after",function(e,t){ga("send",{hitType:"event",eventCategory:"ScreenHome - OfferBanner",eventAction:"Impression",eventLabel:t.text+" - Pos:"+parseInt(t.index+1)})}),$(".slider-banners").on("cycle-prev",function(e,t){var a=t.slides[t.currSlide].dataset,o=Number(a.index);ga("send",{hitType:"event",eventCategory:"ScreenHome - OfferBanner",eventAction:"Left Arrow",eventLabel:a.text+" - Pos:"+parseInt(o+1)})}),$(".slider-banners").on("cycle-next",function(e,t){var a=t.slides[t.currSlide].dataset,o=Number(a.index);ga("send",{hitType:"event",eventCategory:"ScreenHome - OfferBanner",eventAction:"Right Arrow",eventLabel:a.text+" - Pos:"+parseInt(o+1)})}),fn_home.getAllDOMImages()}).always(function(){fn_home.gaClicks($(".slider-banners").find("a"),"OfferBanner")})},homeBlogs:function(){fn_home.ajaxForm({},"POST","/home_page/get-blogs-home").done(function(e){var t;"success"==(e=JSON.parse(e)).status?(t='<span class = "heading">'+e.title+'</span><a href = "https://www.licious.in/blog/" target = "_blank">See all</a>',$(".our-blog .header").append(t),$(".blog-items").html(""),$(".our-blog").find(".img-responsive").remove(),$.each(e.data,function(e,t){var a;e<3&&(a='<li><a href="'+t.url+'" target="_blank"  data-text="'+t.title+'" data-index="'+e+'"><div class="img-holder"><img data-lazy="'+t.image+'" alt="'+t.title+'" title="'+t.title+'"></div><span>'+t.title+"</span></a>",$(".blog-items").append(a)),ga("send",{hitType:"event",eventCategory:"ScreenHome - Blog",eventAction:"Impression",eventLabel:t.title+" - Pos:"+parseInt(e+1)}),fn_home.getAllDOMImages()})):$(".deals.our-blog").hide()}).always(function(){fn_home.gaClicks($(".blog-items").find("a"),"Blog")})},reverseTimer:function(r){var e=(r=r.replace(" ","T")).split(/[^0-9]/),i=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5]).getTime(),l=setInterval(function(){var e,t,a,o,s=(new Date).getTime(),n=i-s;Date.parse(r)<s?($(".timer").html("00:00:00"),$(".timer").fadeOut(),$(".deals.todays-deal").fadeOut(),setTimeout(function(){$(".deals.todays-deal").remove()},500)):(e=Math.floor(n/864e5),t=Math.floor(n%864e5/36e5)+24*e,a=Math.floor(n%36e5/6e4),o=Math.floor(n%6e4/1e3),$(".timer").html(("0"+t).slice(-2)+":"+("0"+a).slice(-2)+":"+("0"+o).slice(-2)),0==e&&0==t&&0==a&&0==o&&($(".timer").fadeOut(),$(".deals.todays-deal").fadeOut(),setTimeout(function(){$(".deals.todays-deal").remove()},500),clearInterval(l)))},1e3)},getMrpText:function(e,t){function a(e,t){return Math.round(e-e*t/100)}return"hide"===e?"<span class = \"rupee remove-before\"><span style='font-size: 14px;'>MRP: </span> &#8377;"+a(t.product_pricing.base_price,t.product_pricing.base_discount)+'</span><span class = "rupee disc remove-before '+e+'">&#8377;'+t.product_pricing.base_price+"</span>":"show"===e?'<span class = "rupee remove-before">&#8377;'+a(t.product_pricing.base_price,t.product_pricing.base_discount)+'</span><span class = "rupee disc remove-before '+e+"\"><span>MRP: </span><span class='price'> &#8377;"+t.product_pricing.base_price+'</span></span><span class = "offer-discount">'+(t.product_pricing.rounded_base_discount||Math.floor(t.product_pricing.base_discount))+"% OFF</span>":""},getPlusandMinusButtons:function(e,t,a){function o(e,t){return Math.round(e-e*t/100)}return'<span class = "cart-btns remove-one" data-cat = "'+t+'" data-prid="'+e.product_master.product_id+'" data-qty="'+e.product_inventory.stock_units+'" data-index="'+a+'" data-amt='+o(e.product_pricing.base_price,e.product_pricing.base_discount)+' data-text="'+e.product_merchantdising.merchandise_name+'" data-recommended="'+e.product_merchantdising.recommended+'"></span>\n            <span class = "item-qty">0</span>\n            <span class = "cart-btns'+(2==e.product_inventory.slot_available?" disabled":"")+' add-one" data-cat = "'+t+'" data-prid="'+e.product_master.product_id+'" data-qty="'+e.product_inventory.stock_units+'" data-index="'+a+'" data-amt='+o(e.product_pricing.base_price,e.product_pricing.base_discount)+' data-text="'+e.product_merchantdising.merchandise_name+'" data-recommended="'+e.product_merchantdising.recommended+'"></span>'},renderActionButtonandClusterMessage:function(e,t,a,o){var s,n,r,i="",l="";return l=0<e.product_inventory.stock_units?(i='<button class="add-to-cart addCartBtn-home'+((s=2==e.product_inventory.slot_available)?" disabled":"")+'" data-cat = "'+t+'" data-amt='+(n=e.product_pricing.base_price,r=e.product_pricing.base_discount,Math.round(n-n*r/100,10))+' data-text="'+e.product_merchantdising.merchandise_name+'" data-index="'+o+'" data-prid="'+e.product_master.product_id+'" data-qty="'+e.product_inventory.stock_units+'" data-recommended="'+e.product_merchantdising.recommended+'">Add To Cart</button>',fn_home.checKForBottomMsg(e)||s?'<div class="product-message">\n                            <div class="icon-message">\n                              '+(s?"":'<img src="/img/express_delivery.svg" class="scooter"/>')+'\n                              <span class="message '+(s?" oos":"")+'">'+(s?e.product_inventory.slot_custom_message:e.product_inventory.next_available_by)+"</span>\n                            </div>\n                          </div>":""):fn_home.validateCookieForProduct(e.product_master.product_id)?(i='<button type="button" data-pr-id="'+e.product_master.product_id+'"\n                        class="'+a+' notify-me notified"><img src="/img/tick_symbol.svg" class="alarm"/>\n                        <span class="notify-me-text">NOTIFY ME</span></button>',fn_home.checKForBottomMsg(e)?'<div class="product-message">\n                              <div class="icon-message">\n                                <span class="message notified">'+fn_home.getNotifiedMsg()+"</span>\n                              </div>\n                            </div>":""):(i='<button type="button" data-price="'+e.product_pricing.base_price+'"\n                        data-discount="'+Math.round(e.product_pricing.base_price*e.product_pricing.base_discount/100)+'"\n                        data-cat="'+t+'" data-pr-id="'+e.product_master.product_id+'"\n                        class="'+a+' notify-me"><img src="/img/alarm.svg"\n                        class="alarm"/><span class="notify-me-text">NOTIFY ME</span></button>',fn_home.checKForBottomMsg(e)?'<div class="product-message">\n                              <div class="icon-message">\n                                <span class="message oos">'+e.product_inventory.next_available_by+"</span>\n                              </div>\n                            </div>":""),{actionButton:i,productMessageDiv:l}},getItemName:function(e){if(e&&e.includes(" ")&&e.length>=char_limit){return'<div class="item-title"><span class="product-name">'+e+'</span><div class="ellipsis-container"><div class="ellipsis"></div><div class="ellipsis"></div><div class="ellipsis"></div></div></div>'}return'<div class="item-title"><span class="product-name">'+e+"</span></div>"},getItemDescription:function(e){var t=document.createElement("div");return t.innerHTML=e,'<div class="item-desc">'+t.innerText+"</div>"},getProductWeightDetails:function(e,t){if(1==Number(e.product_merchantdising.is_combo))return"";var a,o=""==e.product_merchantdising.wt_msg||null==e.product_merchantdising.wt_msg?"hide":"show";return'<p class="item-weight">\n            '+("eggs"==t?"":'<span class="net-weight"> Net wt: '+e.product_master.pr_weight+' <span class = "info-icon '+o+'">\n              <img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info-dark.png"></span> \n              <span class="info-bubble"> '+e.product_merchantdising.wt_msg+" </span></span>")+'\n              <span class="gross-weight"> '+("Kg"==(a=e.product_master).uom?0<a.gross.search("gm")?"Gross: "+a.gross:"Pieces: "+a.gross:(a.unit_sold_mode,"Pieces: "+a.gross))+"</span>\n            </p>"},homeDeals:function(){fn_home.ajaxForm({},"POST","/home_page/get-deals-home").done(function(i){var e;"success"==(i=JSON.parse(i)).status&&0<i.data.product_details.length&&1==i.data.block_details.timer_status?(localStorage.setItem("todaysDeals",JSON.stringify(i.data)),e='<span class = "heading">'+i.data.block_details.block_title+'</span><span class = "timer">--:--:--</span>',$(".todays-deal .header").append(e),$(".todays-deal  .item-slider .viewport").html(""),$.each(i.data.product_details,function(e,t){var a=(t.product_details.product_pricing.base_discount,0<t.product_details.product_pricing.base_discount?"show":"hide");e<3&&ga("send",{hitType:"event",eventCategory:"ScreenHome - "+i.data.block_details.block_title,eventAction:"Impression",eventLabel:t.product_details.product_merchantdising.merchandise_name+" - Pos:"+parseInt(e+1)});var o=fn_home.renderActionButtonandClusterMessage(t.product_details,i.data.block_details.block_title,"hdeals-notify-me",e),s=o.actionButton,n=o.productMessageDiv,r='<a  href="/'+t.product_details.category_details.slug+"/"+t.product_details.product_master.slug+'" data-text="'+t.product_details.product_master.pr_name+'" data-index="'+e+'"><div class="card" data-prod="'+t.product_id+'"><div class="item-img"><img class="product-image" data-lazy="'+t.product_details.product_merchantdising.pr_image+'" alt="'+t.product_details.product_merchantdising.product_shortname+'" title="'+t.product_details.product_merchantdising.product_shortname+'"><div class="item-details">'+fn_home.getItemName(t.product_details.product_merchantdising.merchandise_name)+fn_home.getItemDescription(t.product_details.product_merchantdising.usp_desc)+fn_home.getProductWeightDetails(t.product_details,t.product_details.category_details.slug)+'<div class="item-action"><div class="rate">'+fn_home.getMrpText(a,t.product_details)+'</div><div class="action"><div class="action-slider">'+s+"<p>"+fn_home.getPlusandMinusButtons(t.product_details,i.data.block_details.block_title,e)+"</p></p></div></div></div></div></div>"+n+"</a>";$(".todays-deal .item-slider .viewport").append(r)}),fn_home.bindNotifyMeButton(".hdeals-notify-me"),fn_home.dealsCarousel(),fn_home.addcart("home",i.data.block_details.block_title),fn_home.removecart("home"),fn_home.gaClicks($(".todays-deal .item-slider .viewport").find("a"),i.data.block_details.block_title)):$(".deals.todays-deal").hide(),fn_home.getAllDOMImages()}).always(function(e){var t=JSON.parse(e);"success"==t.status&&fn_home.reverseTimer(t.data.block_details.end_time),fn_home.carNav("todays-deal"),fn_home.getCart()})},cycleOption:function(e){4<$("."+e).find(".card").length?fn_home.cycleScroll(e):$("."+e).find(".item-slider").cycle()},carNav:function(e){3<$("."+e).find(".card").length?$("."+e+" .this_car_nav").show():$("."+e+" .this_car_nav").hide()},cycleScroll:function(e){3<$("."+e).find(".card").length?($("."+e+" .item-slider").cycle(),$("."+e+" .this_car_nav").show()):$("."+e+" .this_car_nav").hide(),$("."+e+"  .item-slider").on("cycle-next",function(e,t){var a=t.currSlide+2;t.slideCount,t.currSlide,4<t.slideCount&&$(this).cycle("goto",a)}),$("."+e+"  .item-slider").on("cycle-update-view",function(e,t){var a=$(".item-slider").width()-$(".cycle-carousel-wrap").width(),o=$(".cycle-carousel-wrap").offset().left;parseInt(o-135)<a?$(".next-todays-deals").css("opacity","0.5"):$(".next-todays-deals").css("opacity","1")}),$("."+e+"  .item-slider").on("cycle-prev",function(e,t){var a=t.currSlide-2,o=t.slideCount+t.currSlide;4<t.slideCount&&(a<=t.slideCount?$(this).cycle("goto",a):$(this).cycle("goto",o))})},pushEEProductImpressionHomePage:function(e){var t;e&&((t=e.product_details)&&Array.isArray(t)&&(t=t.reduce(function(e,t,a){var o=t.product_name,s=t.product_id,n=t.product_details.product_pricing.base_price,r=t.product_details.category_details.id;return e.push({name:o,id:s,price:n,category:r,list:"recommendation-home-page",position:a}),e},[])),window.dataLayer&&window.dataLayer.push({event:"productImpression",ecommerce:{currencyCode:"INR",impressions:t}}))},pushEEProductImpressionCategoryPage:function(e){var t;e&&e.data&&(t=(t=e.data).reduce(function(e,t,a){var o=t.product_master.pr_name,s=t.product_master.product_id,n=t.product_pricing.base_price,r=t.product_inventory.cat_id;return e.push({name:o,id:s,price:n,category:r,list:"recommendation-category-page",position:a}),e},[]),window.dataLayer&&window.dataLayer.push({event:"product_impression",ecommerce:{currencyCode:"INR",impressions:t}}))},homeRecommendations:function(){fn_home.ajaxForm({},"POST","/home_page/get-recomendtaion-home").done(function(i){var e;(i=JSON.parse(i)).data&&fn_home.pushEEProductImpressionHomePage(i.data),"success"==i.status&&0<i.data.product_details.length?(localStorage.setItem("youMayAlsoLike",JSON.stringify(i.data)),e='<span class = "heading">'+i.data.block_details.block_title+"</span>",$(".also-like .header").append(e),$(".also-like .item-slider .viewport").html(""),$.each(i.data.product_details,function(e,t){var a=(t.product_details.product_pricing.base_discount,0<t.product_details.product_pricing.base_discount?"show":"hide");e<3&&ga("send",{hitType:"event",eventCategory:"ScreenHome - "+i.data.block_details.block_title,eventAction:"Impression",eventLabel:t.product_details.product_merchantdising.merchandise_name+" - Pos:"+parseInt(e+1)});var o=fn_home.renderActionButtonandClusterMessage(t.product_details,i.data.block_details.block_title,"hrecommendations-notify-me",e),s=o.actionButton,n=o.productMessageDiv,r='<a  href="/'+t.product_details.category_details.slug+"/"+t.product_details.product_master.slug+'" data-text="'+t.product_details.product_master.pr_name+'" data-index="'+e+'"><div class="card" data-prod="'+t.product_id+'"><div class="item-img"><img class="product-image" data-lazy="'+t.product_details.product_merchantdising.pr_image+'" alt=""><div class="item-details">'+fn_home.getItemName(t.product_details.product_merchantdising.merchandise_name)+fn_home.getItemDescription(t.product_details.product_merchantdising.usp_desc)+fn_home.getProductWeightDetails(t.product_details,t.product_details.category_details.slug)+'<div class="item-action"><div class="rate">'+fn_home.getMrpText(a,t.product_details)+'</div><div class="action"><div class="action-slider">'+s+"<p>"+fn_home.getPlusandMinusButtons(t.product_details,i.data.block_details.block_title,e)+"</p></p></div></div></div></div></div>"+n+"</a>";$(".also-like .item-slider .viewport").append(r)}),fn_home.bindNotifyMeButton(".hrecommendations-notify-me"),fn_home.likeCarousel(),fn_home.addcart("home",i.data.block_details.block_title),fn_home.removecart("home"),fn_home.gaClicks($(".also-like .item-slider .viewport").find("a"),i.data.block_details.block_title)):($(".deals.also-like").hide(),$(".also-like .this_car_nav").hide()),fn_home.getAllDOMImages()}).always(function(e){JSON.parse(e),$(".also-like .this_car_nav").fadeIn(),fn_home.carNav("also-like"),fn_home.getCart()})},homeBestsellers:function(){fn_home.ajaxForm({},"POST","/home_page/get-bestsellers-home").done(function(i){var e;"success"==(i=JSON.parse(i)).status&&0<i.data.product_details.length?(localStorage.setItem("bestSellers",JSON.stringify(i.data)),e='<span class = "heading">'+i.data.block_details.block_title+"</span>",$(".best-sellers .header").append(e),$(".best-sellers .item-slider .viewport").html(""),$.each(i.data.product_details,function(e,t){var a=(t.product_details.product_pricing.base_discount,0<t.product_details.product_pricing.base_discount?"show":"hide");e<3&&ga("send",{hitType:"event",eventCategory:"ScreenHome - "+i.data.block_details.block_title,eventAction:"Impression",eventLabel:t.product_details.product_merchantdising.merchandise_name+" - Pos:"+parseInt(e+1)});var o=fn_home.renderActionButtonandClusterMessage(t.product_details,i.data.block_details.block_title,"hbestsellers-notify-me",e),s=o.actionButton,n=o.productMessageDiv,r='<a  href="/'+t.product_details.category_details.slug+"/"+t.product_details.product_master.slug+'" data-text="'+t.product_details.product_master.pr_name+'" data-index="'+e+'"><div class="card" data-prod="'+t.product_id+'"><div class="item-img"><img class="product-image" data-lazy="'+t.product_details.product_merchantdising.pr_image+'" alt="'+t.product_details.product_merchantdising.product_shortname+'" title="'+t.product_details.product_merchantdising.product_shortname+'"><div class="item-details">'+fn_home.getItemName(t.product_details.product_merchantdising.merchandise_name)+fn_home.getItemDescription(t.product_details.product_merchantdising.usp_desc)+fn_home.getProductWeightDetails(t.product_details,t.product_details.category_details.slug)+'<div class="item-action"><div class="rate">'+fn_home.getMrpText(a,t.product_details)+'</div><div class="action"><div class="action-slider">'+s+"<p>"+fn_home.getPlusandMinusButtons(t.product_details,i.data.block_details.block_title,e)+"</p></p></div></div></div></div></div>"+n+"</a>";$(".best-sellers  .item-slider .viewport").append(r)}),fn_home.bindNotifyMeButton(".hbestsellers-notify-me"),fn_home.bestCarousel(),fn_home.addcart("home",i.data.block_details.block_title),fn_home.removecart("home"),fn_home.gaClicks($(".best-sellers .item-slider .viewport").find("a"),i.data.block_details.block_title)):$(".deals.best-sellers").hide(),fn_home.getAllDOMImages()}).always(function(e){JSON.parse(e),fn_home.carNav("best-sellers"),fn_home.getCart()})},bestCarousel:function(){var r=$(".best-sellers"),e=r.find(".item-slider"),a=(e.find(".viewport"),e.find(".next-best-seller"),e.find(".prev-best-seller"),r.find(".viewport").css("transform"));t=a.replace(/^matrix(3d)?\((.*)\)$/,"$2").split(/, /),l=r.find(".card").length,r.find(".card").eq(0).addClass("best"),$(".prev-best-seller").addClass("disabled");var i=0,d=2,c=0,u=1,m=!1;$(".next-best-seller").on("click",function(){if(c=0,$(this),m)m=!1;else{m=!0;var e,t=localStorage.getItem("bestSellers"),a=JSON.parse(t),o=JSON.parse(t).length;Math.ceil(o/3),d<l&&(0==u?(d+=3,u=1):d++,e=a.product_details.splice(d,1),$.map(e,function(e,t){ga("send",{hitType:"event",eventCategory:"ScreenHome - "+a.block_details.block_title,eventAction:"Impression",eventLabel:e.product_details.product_merchantdising.merchandise_name+" - Pos:"+parseInt(d+(t+1))})})),3<l&&l<7&&$(".prev-best-seller").removeClass("disabled"),i<l-4?$(".prev-best-seller").removeClass("disabled"):$(".next-best-seller").addClass("disabled"),i<l-3&&(i++,r.find(".card").removeClass("best"),r.find(".card").eq(i).addClass("best"));var s=$(".viewport").css("transform");$(".viewport").innerWidth(),p=s.replace(/^matrix(3d)?\((.*)\)$/,"$2").split(/, /),h=parseInt(p[4]),w=r.find(".card").innerWidth(),k=$(".best-sellers .item-slider").innerWidth(),q=parseInt(l*w)/k;var n=parseInt(h-w);if($(".item-slider.best").scrollLeft(),n<=-parseInt(w*(l-2)))return!1;$(".item-slider.best").scrollTo(366*i,350),setTimeout(function(){m=!1},350)}}),w=r.find(".card").innerWidth(),$(".prev-best-seller").on("click",function(){var e,a,t,o,s,n;m?m=!1:(m=!0,u=0,e=localStorage.getItem("bestSellers"),a=JSON.parse(e),t=JSON.parse(e).length,Math.ceil(t/3),0<d&&(0==c?(d-=3,c=1):d--,o=a.product_details.splice(d,1),$.map(o,function(e,t){ga("send",{hitType:"event",eventCategory:"ScreenHome - "+a.block_details.block_title,eventAction:"Impression",eventLabel:e.product_details.product_merchantdising.merchandise_name+" - Pos:"+parseInt(d+(t+1))})})),1<i?$(".next-best-seller").removeClass("disabled"):$(".prev-best-seller").addClass("disabled"),3<l&&l<7&&$(".next-best-seller").removeClass("disabled"),0<i&&(i--,r.find(".card").removeClass("best"),r.find(".card").eq(i).addClass("best")),s=$(".viewport").css("transform").replace(/^matrix(3d)?\((.*)\)$/,"$2").split(/, /),n=parseInt(s[4]),$(".item-slider.best").scrollLeft(),parseInt(n+w),$(".item-slider.best").scrollTo(366*i,350),setTimeout(function(){m=!1},350))})},likeCarousel:function(){$(".deals.also-like"),$(".prev-also-like").addClass("disabled");var d=0,c=0,p=!1;$(".next-also-like").on("click",function(){var e,a,t,o,s,n,r,i,l;p=(p||(p=!0,e=localStorage.getItem("youMayAlsoLike"),t=(a=JSON.parse(e)).product_details.length,o=Math.ceil(t/3),c<3*o&&(c+=3,s=a.product_details.splice(c,3),$.map(s,function(e,t){ga("send",{hitType:"event",eventCategory:"ScreenHome - "+a.block_details.block_title,eventAction:"Impression",eventLabel:e.product_details.product_merchantdising.merchandise_name+" - Pos:"+parseInt(c+(t+1))})})),n=$(".also-like").find(".card").length,r=$(".also-like .item-slider").innerWidth(),d<Math.ceil(n/3)-1&&d++,l=0<(i=n%3)?n-i:n-3,3<n&&n<7&&$(".prev-also-like").removeClass("disabled"),3*d+1<l?$(".prev-also-like").removeClass("disabled"):$(".next-also-like").addClass("disabled"),$(".item-slider.also-like").scrollTo(r*d-.4,750)),!1)}),$(".prev-also-like").on("click",function(){var e,a,t,o,s,n;p?p=!1:(p=!0,e=localStorage.getItem("youMayAlsoLike"),t=(a=JSON.parse(e)).product_details.length,Math.ceil(t/3),0<c&&(c-=3,o=a.product_details.splice(c,3),$.map(o,function(e,t){ga("send",{hitType:"event",eventCategory:"ScreenHome - "+a.block_details.block_title,eventAction:"Impression",eventLabel:e.product_details.product_merchantdising.merchandise_name+" - Pos:"+parseInt(c+(t+1))})})),s=$(".also-like").find(".card").length,0<d&&d--,3<s&&s<7&&($(".prev-also-like").addClass("disabled"),$(".next-also-like").removeClass("disabled")),0<d?$(".next-also-like").removeClass("disabled"):$(".prev-also-like").addClass("disabled"),n=$(".also-like .item-slider").innerWidth(),$(".item-slider.also-like").scrollTo(n*d,750),setTimeout(function(){p=!1},350))})},dealsCarousel:function(){$(".deals.todays-deal"),$(".prev-todays-deals").addClass("disabled");var d=0,c=0,p=!1;$(".next-todays-deals").on("click",function(){var e,a,t,o,s,n,r,i,l;p=(p||(p=!0,e=localStorage.getItem("todaysDeals"),t=(a=JSON.parse(e)).product_details.length,o=Math.ceil(t/3),c<3*o&&(c+=3,s=a.product_details.splice(c,3),$.map(s,function(e,t){ga("send",{hitType:"event",eventCategory:"ScreenHome - "+a.block_details.block_title,eventAction:"Impression",eventLabel:e.product_details.product_merchantdising.merchandise_name+" - Pos:"+parseInt(c+(t+1))})})),n=$(".todays-deal").find(".card").length,r=$(".todays-deal .item-slider").innerWidth(),d<Math.ceil(n/3)-1&&d++,l=0<(i=n%3)?n-i:n-3,3<n&&n<7&&$(".prev-todays-deals").removeClass("disabled"),3*d+1<l?$(".prev-todays-deals").removeClass("disabled"):$(".next-todays-deals").addClass("disabled"),$(".item-slider.t-deals").scrollTo(r*d-.4,750,"easeOut")),!1)}),$(".prev-todays-deals").on("click",function(){var e,a,t,o,s,n;p?p=!1:(p=!0,e=localStorage.getItem("todaysDeals"),t=(a=JSON.parse(e)).product_details.length,Math.ceil(t/3),0<c&&(c-=3,o=a.product_details.splice(c,3),$.map(o,function(e,t){ga("send",{hitType:"event",eventCategory:"ScreenHome - "+a.block_details.block_title,eventAction:"Impression",eventLabel:e.product_details.product_merchantdising.merchandise_name+" - Pos:"+parseInt(c+(t+1))})})),s=$(".todays-deal").find(".card").length,0<d&&d--,3<s&&s<7&&($(".prev-todays-deals").addClass("disabled"),$(".next-todays-deals").removeClass("disabled")),0<d?$(".next-todays-deals").removeClass("disabled"):$(".prev-todays-deals").addClass("disabled"),n=$(".todays-deal .item-slider").innerWidth(),$(".item-slider.t-deals").scrollTo(n*d,750),setTimeout(function(){p=!1},350))})},homeNews:function(){fn_home.ajaxForm({},"POST","/home_page/get-news-home").done(function(e){var t;"error"==(e=JSON.parse(e)).status?$(".in-news").hide():(t=e.data,$(".in-news h3").html(t[0].description),$(".in-news ul").html(""),$.each(e.data,function(e,t){var a='<li data-news="'+t.description+'"><a href="'+t.url+'" data-text="'+t.description+'" data-index="'+e+'" target="_blank"><img data-lazy="'+t.image_url+'" alt="The Economic News"></a></li>';$(".in-news").find("ul").append(a),ga("send",{hitType:"event",eventCategory:"ScreenHome - News",eventAction:"Impression",eventLabel:"News"})}),$(".in-news ul li").on("mouseover",function(){$(".in-news h3").html($(this).data("news")),$(".in-news ul").find("li").css("opacity","0.55"),$(this).css("opacity","1"),ga("send",{hitType:"event",eventCategory:"ScreenHome - News",eventAction:"OnHover",eventLabel:$(this).data("news")})})),$(".in-news ul").find("li").eq(0).css("opacity","1"),fn_home.getAllDOMImages()}).always(function(){fn_home.gaClicks($(".in-news ul").find("a"),"News")})},homeSeo:function(){fn_home.ajaxForm({},"POST","/home_page/get-seo-home").done(function(e){"success"==(e=JSON.parse(e)).status?($(".faqs").html(""),$.each(e.data,function(e,t){var a="<h4>"+t.title+"</h4><p>"+t.description+"</p>";$(".faqs").append(a)})):$(".faqs").hide()})},homeTestimonials:function(o){fn_home.ajaxForm({},"POST","/home_page/get-testimonials-home").done(function(e){var t,a;"success"==(e=JSON.parse(e)).status?($(".made-with-licious .heading h3").html(e.data.block_details.block_title),$(".made-with-licious .heading p").html(e.data.block_details.block_description),$(".made-with-licious .heading img").attr("data-lazy",e.data.block_details.img_url),t='<a href="'+e.data.block_details.web_url+'" data-text="'+e.data.block_details.button_text+'" data-index="0">'+e.data.block_details.button_text+'<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/down-arrow-red.png" alt=""></a>',$(".made-with-licious .heading").append(t),$(".made-with-licious").find(".img-loader").remove(),$(".made-with .card").html(""),a="",$.each(e.data.testimonials,function(e,t){a+="pdp"===o?'<div class="card" style="height:50%" data-index="'+e+'"  data-text="'+t.title+'" data-scname="'+t.username+'"><div class="item-img"><img style="height:230px;" data-lazy="'+t.display_image+'" alt=""></div><div class="item-details"><div class="social-details"><div class="profile"><img data-lazy="'+t.profile_image+'" alt=""><span>'+t.username+'</span></div><div class="s-net"><a href="'+t.social_url+'"  class="social_link" data-text="'+t.title+'" target=_blank><img data-lazy="'+t.social_logo+'" alt="">'+t.social_platform+'</a></div></div><div class="desc">'+t.description+'</div><div class="made-with"><img data-lazy="https://d2407na1z3fc0t.cloudfront.net/Banner/chicken-leg2.png" alt=""><span><a href="'+t.web_url+'"  class="product_link" data-text="'+t.title+'" target=_blank>'+t.title+"</a></span></div></div></div>":'<div class="card" data-index="'+e+'"  data-text="'+t.title+'" data-scname="'+t.username+'"><div class="item-img"><img data-lazy="'+t.display_image+'" alt=""></div><div class="item-details"><div class="social-details"><div class="profile"><img data-lazy="'+t.profile_image+'" alt=""><span>'+t.username+'</span></div><div class="s-net"><a href="'+t.social_url+'"  class="social_link" data-text="'+t.title+'" target=_blank><img data-lazy="'+t.social_logo+'" alt="">'+t.social_platform+'</a></div></div><div class="desc">'+t.description+'</div><div class="made-with"><img data-lazy="https://d2407na1z3fc0t.cloudfront.net/Banner/chicken-leg2.png" alt=""><span><a href="'+t.web_url+'"  class="product_link" data-text="'+t.title+'" target=_blank>'+t.title+"</a></span></div></div></div>",e<3&&("pdp"==o?ga("send",{hitType:"event",eventCategory:"ProductDetailPage - Testimonial",eventAction:"Impression",eventLabel:t.title+" - Pos:"+parseInt(e+1)}):ga("send",{hitType:"event",eventCategory:"ScreenHome - Testimonial",eventAction:"Impression",eventLabel:t.title+" - Pos:"+parseInt(e+1)}))}),$(".made-with").append(a),fn_home.carousel("made-with-licious","made")):$(".made-with-licious").hide(),fn_home.getAllDOMImages()}).always(function(){"pdp"==o?(fn_home.pdpTestimonialsGA($(".made-with").find(".card")),fn_home.pdpTestimonialsGA($(".made-with-licious .heading").find("a"),"Testimonial")):(fn_home.gaClicks($(".made-with").find(".card"),"Testimonial"),fn_home.gaClicks($(".made-with-licious .heading").find("a"),"Testimonial"))})},homePopularsearch:function(){fn_home.ajaxForm({},"POST","/home_page/get-popularsearch-home").done(function(e){"error"==(e=JSON.parse(e)).status?$(".popular-searches").hide():($(".popular-searches").find(".list-items").html(""),$.each(e.data,function(t,e){var a='<ul class = "list-'+t+'"><li class="heading"><a href="'+e.category_url+'"> '+e.category_name+"</a></li></ul>",o=e.category_name;$(".popular-searches").find(".list-items").append(a),$.map(e.products,function(e){$(".list-items").find(".list-"+t).append('<li><a href="'+e.url+'" data-cat = "ScreenHome - Footer - PopularSearches"  data-val = "'+o+" - "+e.product_name+'">'+e.product_name+"</a></li>")})}),fn_home.vanityGA($(".popular-searches .list-items a")))})},homeHub:function(){fn_home.ajaxForm({},"GET","/home_page/get-hub-home").done(function(e){})},homeUspbanner:function(){fn_home.ajaxForm({},"POST","/home_page/get-uspbanner-home").done(function(e){var t;"success"==(e=JSON.parse(e)).status?(t='<img data-lazy="'+e.data.web_url+'" alt="Marketing banner" class = "img-responsive">',$(".banner").append(t),ga("send",{hitType:"event",eventCategory:"ScreenHome - USPBanner",eventAction:"Impression",eventLabel:"USP Banner"})):$(".banner").hide(),fn_home.getAllDOMImages()})},getCart:function(){return new Promise(function(a){fn_home.ajaxForm({},"post","/new-cart").done(function(e){var o,s,t=JSON.parse(e),n=0;200==t.statusCode&&(o=t.data.combo?t.data.combo:[],0<(s=t.data?t.data.products.concat(t.data.oss_products,t.data.exotic,o):[]).length?($.map(s,function(e,t){var a;0<parseInt(e.quantity)&&((a=$('[data-prod="'+e.product_id+'"]')).length&&(a.find(".item-qty").html(e.quantity),a.find(".action-slider").addClass("slide"),a.find(".item-qty-pdp").html(e.quantity),a.find(".action-slider1").addClass("slide"),a.find(".item-qty-pdp").attr("data-qty",e.quantity),a.find(".add-to-cart").hasClass("disabled")||null===e.next_available_by||void 0===e.next_available_by||""===e.next_available_by||a.find(".product-message").find(".message").html(e.next_available_by))),t<s.length-o.length&&(n+=parseInt(e.quantity))}),$(".new-cart-count").addClass("loaded"),$(".new-cart-count").find("i").html(n),localStorage.setItem("count",n),t.data.messages&&$.map(t.data.messages,function(e){"eggs"==e.condition&&$(".add_message").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+e.message).show()}),a(t),(window.location.href.includes("/favourite-items")||window.location.href.includes("/past-orders"))&&document.querySelector(".quick-checkout")&&"quick-checkout fade-in"!==$(".quick-checkout")[0].className&&fn_home.quickCheckout()):$(".new-cart-count").removeClass("loaded"))})})},quickCheckoutMergeShipment:function(){return new Promise(function(m,e){fn_main.showloader(),fn_checkout.mergeShipments().done(function(e){var t,a,o,s,n,r,i,l,d,c,p,u=JSON.parse(e);200===u.statusCode?(s=o=a=t=void 0,$.map(u.data.order_charges,function(e){"subtotal"===e.key&&(t=e.value),"deliverycharge"!==e.key&&"delivery_charge"!==e.key||(a=e.value),"total"===e.key.toLowerCase()&&(o=e.value),"discount"===e.key&&(s=e.value),"loyaltyitem"===e.key&&localStorage.setItem("cartHasLoyalty",!0)}),n={total:o,subtotal:t,discount:s,deliveryCharge:a},localStorage.setItem("amount",JSON.stringify(n)),null!==localStorage.getItem("cartHasLoyalty")&&"true"==localStorage.getItem("cartHasLoyalty")&&(fn_ll.loyalty_cart_value=t.toString(),fn_ll.loyalty_delivery_charges=a.toString()),i=(r=JSON.parse(localStorage.getItem("allitem"))).quantity_avail,l="True"==(l=localStorage.getItem("split","True")),d={"Cart Value":t,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id")),"Product ID":r.productId,"Product Name":r.productName,"Saved Value":n.discount,"Category ID":r.category_id?r.category_id:"","Is Split order":l,"No of Split":Number(localStorage.getItem("shipment_split")),Defaultslot:localStorage.getItem("shipmentType"),Checkout_Flow:quick_checkout,incoming_source:qc_incoming_source},c={CartValue:t,ProductID:r.productId,ProductName:r.productName,SavedValue:n.discount,Delivery:a,Discount:s,Total:o,Checkout_Flow:quick_checkout,incoming_source:qc_incoming_source},localStorage.setItem("payment-delivery",JSON.stringify(c)),p=JSON.parse(JSON.stringify(d)),"object"==_typeof(i.split(","))&&(d.Quantity=i.split(",")),"string"==typeof i&&(p.Quantity=i),fn_cart.gaAddRemoveEvent("Checkout_ProceedPayment","Checkout_Slot",JSON.stringify(p)),p.Source="Checkout_Slot",fn_home.sendBranchCheckoutEvent("checkout_progress",branchData),p["Category ID"]=JSON.parse(localStorage.getItem("allitem")).category_id,clevertap.event.push("Checkout Payment Initiated",p),localStorage.setItem("discount",n.discount),localStorage.setItem("shipment_message",u.data.messages.message),localStorage.setItem("bill_details",JSON.stringify(u.data.order_charges)),m(u),window.location.href="/user/checkout#quick-checkout?payments"):(fn_main.hideloader(),Materialize.toast(u.data.message+" Refreshing! Please try again.",5e3),fn_home.quickCheckout())}).fail(function(){fn_main.hideloader(),Materialize.toast(resp.data.message+" Refreshing! Please try again.",5e3),fn_home.quickCheckout()})})},quickCheckout:function(){$(".quick-checkout").addClass("fade-in"),$("#addressBody").html(""),$(".total-payment-button .payment-button").addClass("disabled"),$("#slotBody .slot-info").html(""),$("#slotBody .del-charge").html(""),$(".loader-address").show(),$(".loader-shipment").show(),$(".slot-row").css("pointer-events","none"),fn_home.ajaxForm({},"POST","/checkout/get-all-address").done(function(e){var a=JSON.parse(e);200===a.statusCode?(localStorage.setItem("address-count",a.data.address.length),$(".addr-slot .address").html(),0<a.data.defaultaddress.length?($.map(a.data.address,function(e){var t;e.address_id===a.data.defaultaddress[0]&&(localStorage.setItem("default_addr_id",e.address_id),localStorage.setItem("default_addr_lat",e.lat),localStorage.setItem("default_addr_lng",e.lng),t=e.line2+", "+e.line1,localStorage.setItem("address",t),$("#addressBody").html(t))}),fn_home.getQuickCheckoutShipments()):(localStorage.setItem("default_addr_id",""),$("#addressAction").html("Add New"),$("#addressBody").html("No Default Address Found"),$(".loader-shipment").hide())):203===a.statusCode&&($("#addressAction").html("Add New"),$("#addressBody").html("No Address Found"),$(".loader-shipment").hide()),$(".loader-address").hide()}).fail(function(){Materialize.toast("Something went wrong, please try reloading the page"),$(".loader-address").hide(),$(".loader-shipment").hide()})},getQuickCheckoutShipments:function(){fn_home.ajaxForm({type:"reorder"},"POST","/checkout/get-shipments").done(function(e){var n=JSON.parse(e);200===n.statusCode?function(){$(".loader-shipment").hide(),$(".slot-row").css("pointer-events","auto"),$(".all-slots").show(),$(".rm-oos-msg").hide(),slot_alert_msg_arr_length=n.data.shipment_alert_message?n.data.shipment_alert_message.length:0,0<n.data.shipment_alert_message.length&&(slot_alert_message=n.data.shipment_alert_message[0].message),localStorage.setItem("split",n.data.shipment_summary.length),localStorage.setItem("shipment_split",n.data.shipment_summary.length);var e=0<n.data.messages.length?n.data.messages[0].message:"";0<n.data.messages.length?$.map(n.data.messages,function(e){"eggs"===e.condition?fn_checkout.eggFlag=!0:fn_checkout.eggFlag=!1}):fn_checkout.eggFlag=!1;var t=0;$.map(n.data.shipment_summary,function(e){e.products.map(function(e){return t+=parseInt(e.quantity)})});var a=n.data.order_charges;localStorage.setItem("count",t),$(".profile-cart").find(".new-cart-count").addClass("loaded"),$(".profile-cart").find(".new-cart-count").find("i").html(t),$(".background-div").find("#product_count").html('<img class="bag icon" src="/img/bag-icon.png">'+t+" Item"+(1<t?"s ":" ")+"Selected"),$(".loader-shipment").hide(),localStorage.setItem("count",t);var o={};$.map(a,function(e){"subtotal"==e.key&&(o.subtotal=e.value),"deliverycharge"!=e.key&&"delivery_charge"!=e.key||(o.delivery=e.value),"discount"==e.key&&(o.discount=e.value),"liciouswallet"!=e.key&&"wallet"!=e.key||(o.wallet=e.value),"total"==e.key.toLowerCase()&&(o.total=e.value)}),fn_ll.loyalty_cart_value=o.total.toString(),fn_ll.loyalty_delivery_charges=o.delivery.toString(),localStorage.setItem("amount",JSON.stringify(o)),$(".qc-ll-item-placeholder").html(""),"loyalty_item"in n.data&&null!==n.data.loyalty_item&&0!==n.data.loyalty_item.length&&fn_home.renderQuickCheckoutLoyaltyItem(n.data.loyalty_item[0]),0<n.data.dynamic_delivery_message.length&&(n.data.dynamic_delivery_message[0].enable||"success"===n.data.dynamic_delivery_message[0].style)?($(".dd-charge-msg").html(n.data.dynamic_delivery_message[0].message),"success"===n.data.dynamic_delivery_message[0].style?$(".dd-charge-msg").css("color","#427605"):$(".dd-charge-msg").css("color","#d47015")):$(".dd-charge-msg").html(""),"loyalty_item"in n.data&&null!==n.data.loyalty_item&&0!==n.data.loyalty_item.length&&(localStorage.setItem("loyalty_price",n.data.loyalty_item[0].price.toString()),localStorage.setItem("loyalty_discounted_price",n.data.loyalty_item[0].discounted_price.toString()),localStorage.setItem("loyalty_subprogram_name",n.data.loyalty_item[0].subprogram_name.toString()),localStorage.setItem("total_items",t.toString()),localStorage.setItem("saved_amount",n.data.loyalty_delivery_discount.toString())),$.map(n.data.order_charges,function(e){var t;"total"===e.key.toLowerCase()?$(".total-payment-button .total").html("Total : &#8377;"+e.value):"deliverycharge"!==e.key&&"delivery_charge"!==e.key||(e.value?(t="*Delivery Charge: &#8377;"+e.value,$("#slotBody .del-charge").css("color","#d47015")):(t="Free Delivery",$("#slotBody .del-charge").css("color","#427605")),$("#slotBody .del-charge").html(t))}),fn_home.renderQuickCheckoutShipments(n.data.shipment_summary,e,o);var s=$(".bill-breakup");s.html(""),$.map(n.data.order_charges,function(e){var t,a=e.attribute.toLowerCase().replace(/ /g,"-");"liciouswallet"!==e.key&&"wallet"!==e.key&&(t='<li class="'+a+'">'+e.attribute+"<span>"+e.value+'</span>\n            <div class="message">'+e.message+"</div></li>",s.append(t))})}():202!==n.statusCode||"oos_error"!==n.data.errorMessage&&"cross_sell_modified"!==n.data.errorMessage&&"empty_shipment"!==n.data.errorMessage?202===n.statusCode&&"empty_cart"==n.data.errorMessage&&$(".quick-checkout").removeClass("fade-in"):function(){$(".rm-oos-msg").html(n.data.unav_msg),$(".rm-oos-msg").show(),$.map(n.data.order_charges,function(e){var t;"total"===e.key.toLowerCase()?$(".total-payment-button .total").html("Total : &#8377;"+e.value):"deliverycharge"!==e.key&&"delivery_charge"!==e.key||(e.value?(t="*Delivery Charge: &#8377;"+e.value,$("#slotBody .del-charge").css("color","#d47015")):(t="Free Delivery",$("#slotBody .del-charge").css("color","#427605")),$("#slotBody .del-charge").html(t))});var o=$(".bill-breakup");o.html(""),$.map(n.data.order_charges,function(e){var t,a=e.attribute.toLowerCase().replace(/ /g,"-");"liciouswallet"!==e.key&&"wallet"!==e.key&&(t='<li class="'+a+'">'+e.attribute+"<span>"+e.value+'</span>\n              <div class="message">'+e.message+"</div></li>",o.append(t))});var e=n.data.shipment_summary[0];fn_home.renderQuickCheckoutShipmentProducts(e.products),$(".slot-row").trigger("click"),$(".slot-row").css("pointer-events","none"),$(".all-slots").hide()}(),$(".loader-shipment").hide()}).fail(function(){$(".loader-shipment").hide()})},renderQuickCheckoutLoyaltyItem:function(e){document.querySelector(".qc-ll-item-placeholder").innerHTML='\n      <input id="program_id" type="number" value="'+e.program_id+'" hidden>\n      <input id="subprogram_id" type="number" value="'+e.subprogram_id+'" hidden>\n      <div class="qc-ll-item">\n        <img src="/img/loyalty_licious_logo.svg" class="qc-ll-item-licious-logo">\n        <div class="qc-ll-item-separator"></div>\n        <div class="right-section">\n          <div class="qc-ll-info">\n            <div class="qc-ll-sub-program">'+e.subprogram_name+'</div>\n            <div class="qc-ll-price">\n              '+(e.discounted_price!==e.price?'\n                <span class="qc-ll-selling-price" value="'+e.discounted_price+'">&#8377 '+e.discounted_price+'</span>\n                <span class="qc-ll-marked-price" value="'+e.price+'">&#8377 '+e.price+"</span>":'<span class="qc-ll-selling-price" value="'+e.discounted_price+'">&#8377 '+e.price+"</span>")+'\n            </div>\n          </div>\n          <div class="right">\n            <div class="remove-qc-ll-item"></div>\n          </div>\n        </div>\n      </div>\n    ',document.querySelector(".remove-qc-ll-item").addEventListener("click",function(){var t={name:"",city:"",hub_id:"",total_plans:"",list:"",member_status:"",selected_plan:"",recommended_plan:"",user_type:"",logged_in:"",total_orders:"",oldcart_value:"",total_items:"",olddelivery_charge:"",saved_amount:"",newcart_value:"",newdelivery_charge:"",Checkout_Flow:quick_checkout,incoming_source:qc_incoming_source},e=$(".qc-ll-sub-program").html()+", "+$(".qc-ll-selling-price").attr("value").toString()+", "+($(".qc-ll-marked-price").length?$(".qc-ll-marked-price").attr("value").toString():"0");t.name=fn_ll.loyalty_plan_name,t.city=fn_ll.getCityFromLS(),t.hub_id=fn_ll.getHubFromLS(),t.total_plans=fn_ll.getterLS("loyalty_total_plans"),t.list="slot",t.member_status=fn_ll.loyalty_banners_obj.member_status,t.selected_plan=e,t.recommended_plan=fn_ll.getterLS("loyalty_recommended"),t.user_type=fn_ll.getUserTypeFromLS(),t.logged_in=fn_ll.getLoginStatus(),t.total_orders=fn_ll.getTotalOrdersFromLS(),t.oldcart_value=fn_ll.loyalty_cart_value,t.total_items=fn_ll.getterLS("total_items"),t.olddelivery_charge=fn_ll.loyalty_delivery_charges,t.saved_amount=fn_ll.getterLS("saved_amount"),fn_home.ajaxForm({program_id:$("#program_id").val(),subprogram_id:$("#subprogram_id").val()},"POST","/loyalty/remove-loyalty").done(function(e){200===(e=JSON.parse(e)).statusCode&&(document.querySelector(".qc-ll-item-placeholder").innerHTML="",t.newcart_value=fn_ll.loyalty_cart_value,t.newdelivery_charge=fn_ll.loyalty_delivery_charges,fn_ll.sendAnalyticsData("removeplan_loyaltyslot",_extends({},t,{source:"loyalty"})),localStorage.setItem("cartHasLoyalty",!1),$(".mc-ll-item-placeholder").html(""),$(".li-crossell-wrapper").css("box-shadow","0 0 13px 0 rgba(0, 0, 0, 0.14)"),fn_home.getQuickCheckoutShipments())}).fail(function(){console.log("res")}).always(function(){})})},renderQuickCheckoutShipments:function(i,l,p){$(".slot-row").css("pointer-events","auto"),$(".total-payment-button .payment-button").removeClass("disabled"),1<i.length?($(".payment-button .button-text .sub-text").html("SELECT DELIVERY SLOT"),$("#slotBody .slot-info").css("color","#e41d36").html("(Select a Delivery Slot)"),$("#slotBody .del-charge").html(""),fn_home.splitShipment=!0):function(){fn_home.splitShipment=!1,localStorage.setItem("shipmentCount",i?i.length:0),branchData=[];var n={productId:" ",productName:"",quantity_avail:0,quantity_stock:0,category_id:"",base_price:""},r={expressProductName:"",scheduledProductName:"",expressType:"",expressQuantity:"",expressInventory:"",expressDp:"",expresRm:"",schedule1Type:"",schedule1Quantity:"",schedule1Inventory:"",schedule1Dp:"",schedule1Rm:"",shipmentType:"",shipmentId:""};$.map(i,function(e,t){r.shipmentId=r.shipmentId.concat(e.id+","),"SCHEDULED"!==i[0].slots[0].type&&0===i[0].slots[0].slots.length&&($(".slots-layout").removeClass("fade-in"),$(".slot-detials").removeClass("fade-in"),$("#slotAction").html("View"),$(".background-div").removeClass("dull-background"),$(".quick-checkout").removeClass("fade-in"),$(".quick-checkout .payment").removeClass("hide-class"),fn_checkout.alertBox("No slots available","","no-slots-qc"),$(".slots-selector .scooter").hide()),"EXPRESS"==e.slots[0].type&&(r.expresscount=e.products.length,r.shipmentType=r.shipmentType.concat("EXPRESS"),e.products.forEach(function(e){r.expressRm=r.expressRm+Number(e.rm_buffer_avail),r.expressDp=r.expressDp+Number(e.dispatched_quantity_avail)+",",r.expressQuantity=r.expressQuantity+Number(e.quantity)+",",r.expressInventory=r.expressInventory+Number(e.live_stock_avail)+",",r.expressType=r.expressType.concat(e.type+","),r.expressProductName=r.expressProductName.concat(e.product_name+",")})),"SCHEDULED"==e.slots[0].type&&(r.scheduledcount=e.products.length,r.shipmentType=r.shipmentType.concat("SCHEDULED"),e.products.forEach(function(e){r.schedule1Rm=r.schedule1Rm+Number(e.rm_buffer_avail),r.schedule1Dp=r.schedule1Dp+Number(e.dispatched_quantity_avail)+",",r.schedule1Quantity=r.schedule1Quantity+Number(e.quantity)+",",r.schedule1Inventory=r.schedule1Inventory+Number(e.live_stock_avail)+",",r.schedule1Type=r.schedule1Type.concat(e.type+","),r.scheduledProductName=r.scheduledProductName.concat(e.product_name+",")})),0===slot_alert_msg_arr_length&&$(".slots-alert-message").html(""),fn_home.renderQuickCheckoutShipmentProducts(e.products,e.id),fn_home.renderQuickCheckoutShipmentSlots(e.slots,".slot-detials .all-slots",e.id),fn_home.selectQuickCheckoutSlot(r,i),$.map(e.products,function(e){n.productId=n.productId.concat(e.product_id+","),n.productName=n.productName.concat(e.product_name+","),n.category_id=n.category_id.concat(e.category_id+","),n.base_price=n.base_price.concat(e.base_price+","),n.quantity_avail=n.quantity_avail+(e.quantity+","),n.quantity_stock=n.quantity_stock+Number(e.live_stock),branchData.push({item_name:e.product_name,item_id:e.product_id,currency:"INR",price:e.base_price.toString(),quantity:e.quantity.toString(),item_category:e.category_name})}),localStorage.setItem("allitem",JSON.stringify(n)),localStorage.setItem("shipmentType",r.shipmentType);var d={},c=1;$.map(i,function(e,t){var a,o=[],s=[],n=[],r=[],i=[],l=[];$.map(e.products,function(e,t){o.push(e.product_name),s.push(e.type),n.push(e.quantity),r.push(e.live_stock_avail),i.push(e.dispatched_quantity_avail),l.push(e.rm_buffer_avail)}),"EXPRESS"==e.slots[0].type?Object.assign(d,{"Express Item Count":e.products.length,"Express Delivery Items":o.toString(),"Express Item types":s.toString(),"Express Item Quantity":n.toString(),"Express Item Live Inventory":r.toString(),"Express Item DP":i.toString(),"Express Item RM":l.toString(),Checkout_Flow:quick_checkout,incoming_source:qc_incoming_source}):((a={})["Slot "+c+" Item Count"]=e.products.length,a["Scheduled"+c+" delivery Items"]=o.toString(),a["Schedule"+c+" Item types"]=s.toString(),a["Scheduled"+c+" Item Quantity"]=n.toString(),a["Scheduled"+c+" Live Inventory"]=r.toString(),a["Scheduled"+c+" Item DP"]=i.toString(),a["Scheduled"+c+" Item RM"]=l.toString(),Object.assign(d,a),c++)}),localStorage.setItem("shipmentid",r.shipmentId);var a,o=i[0].total_savings.split("")[1],s=JSON.parse(localStorage.getItem("amount"));"false"!=l&&"remove"!=l?(data={"Cart Value":s.subtotal,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id")),"Saved Value":o,"Reason for Slot":"","Split Slot":1<Number(i.length),"No of Split":Number(i.length),"Default Slot":r.shipmentType,Checkout_Flow:quick_checkout,incoming_source:qc_incoming_source},Object.assign(d,data),fn_cart.gaAddRemoveEvent("Checkout_defaultslot","Checkout_Slot",JSON.stringify(d)),d.Source="Checkout_Slot",clevertap.event.push("Checkout Slot Selection Load",d)):(a={"Cart Value":p.subtotal,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(localStorage.getItem("hub_id")),"Product ID":n.productId,"Product Name":n.productName,Quantity:localStorage.getItem("itemQuan"),"Saved Value":o,"City ID":Number(localStorage.getItem("city_id")),Checkout_Flow:quick_checkout,incoming_source:qc_incoming_source},fn_cart.gaAddRemoveEvent("Checkout_Selectshipment","Checkout_Shipment",JSON.stringify(a)),a.Source="Checkout_Shipment",clevertap.event.push("Checkout Shipment",a))})}()},renderQuickCheckoutShipmentSlots:function(e,c,p){var u="",m="",h="1",f="";default_delivery="Select a Delivery Slot",slot_class=" error",shipment_continue=!1,$.map(e,function(e,t){ship_slotId=t+1,e.is_express&&(default_delivery=e.slots[0].time),0!=t||e.is_express?0==t&&e.is_express&&(f=f.replace("{{time_slot}}",e.slots[0].time).replace("{{ship_id}}",p).replace("{{date}}",e.date).replace("{{slot_time}}",e.slots[0].time)):f="";var n="",r=e.date;$.map(e.slots,function(e,t){var a=1==e.status?"":"n-a",o=e.selected?" selected":"",s="";s+='<div class="dd-charge '+(1===e.show_delivery_type||0===e.status?"hide-dc":2===e.show_delivery_type?"free-delivery":"show-dc")+'">'+e.message+"</div>",n+='<li>\n                          <button class = "'+a+o+'" data-ship_id="'+p+'" \n                                            data-date="'+r+'" data-time="'+e.time+'">\n                            '+e.time+"\n                          </button>\n                          "+s+"\n                        </li>"}),$.map(e.slots,function(e,t){if(e.selected){var a=e.time.toString().replace(/-/,"to");return default_delivery=a.charAt(0)+a.toLowerCase().slice(1),slot_class="",!(shipment_continue=!0)}}),shipment_continue&&!fn_checkout.eggFlag?$(".complete-shipments").removeClass("disabled"):$(".complete-shipments").addClass("disabled");var a=" ",o=new Date(e.timestamp).getDate(),s=(new Date).getDate(),i=new Date(e.timestamp).getDate()+" "+["January","Feb","March","April","May","June","July","August","September","October","November","December"][new Date(e.timestamp).getMonth()],l="";o===s?(l="Today ("+i+")",e.selected&&"Select a Delivery Slot"!==default_delivery&&"Today"!==default_delivery.split("")[0]&&(default_delivery="Today, "+default_delivery)):o===s+1?(l="Tomorrow ("+i+")",e.selected&&"Select a Delivery Slot"!==default_delivery&&(default_delivery="Tomorrow, "+default_delivery)):(l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(e.timestamp).getDay()]+" ("+i+")",e.selected&&"Select a Delivery Slot"!==default_delivery&&(default_delivery+=", "+i)),e.selected&&"Select a Delivery Slot"!==default_delivery&&(h=ship_slotId),m+='<div class="dates" ship-id="1" data-id="1'+ship_slotId+'" id="dates_1'+ship_slotId+'">'+l+"</div>",u+='<div class = "slot-day-time" ship-id="1" id="slot-day-time_1'+ship_slotId+'">\n            <ul class = "slot-time">'+n+"</ul>\n          </div>";var d='<div class="slots-dropdown '+slot_class+'" data-slotselected="'+("Select a Delivery Slot"===default_delivery)+'">\n            <div class="slots-selector" ship-id="1">\n              <img class=\'scooter\' src=\'/img/express_delivery.svg\'>\n              '+default_delivery+'\n            </div>\n          </div>\n          <div class="slots-layout">\n          <div class="slots_1">\n            <div class="slot-day-text" ship-id="1">'+m+"</div>\n            "+f+"\n            "+u+"\n          </div>\n        </div>",a=a.concat(default_delivery+",");localStorage.setItem("slotTime",a),$(c).find(".li-slots-render").html(d),$(".slot-time").find(".hide-dc").length===$(".slot-time").find("li").length?($(".dd-charge").css("display","none"),$(".slot-time li").css("margin-bottom","15px")):($(".dd-charge").css("display","block"),$(".slot-time li").css("margin-bottom","0px")),$(".slot-day-time").hide(),$(".dates").on("click",function(){$(".dates").removeClass("active"),$(this).addClass("active"),$(".slot-day-time").hide(),slot_id=$(this).attr("data-id");for(var e=document.querySelectorAll(".slot-day-time"),t=0;t<e.length;t++)if("slot-day-time_"+slot_id===e[t].id){$("#slot-day-time_"+slot_id).show();break}})}),"Select a Delivery Slot"!==default_delivery?($(".total-payment-button .payment-button").attr("slot-selected","true"),$("#slotBody .slot-info").css("color","#6d6d71").html("("+default_delivery+")"),$(".payment-button .button-text .sub-text").html("SELECT PAYMENT OPTION"),$(".slots-selector .scooter").show()):($(".total-payment-button .payment-button").attr("slot-selected","false"),$("#slotBody .slot-info").css("color","#e41d36").html("("+default_delivery+")"),$(".payment-button .button-text .sub-text").html("SELECT DELIVERY SLOT"),$("#slotBody .del-charge").html(""),$(".slots-selector .scooter").hide()),fn_home.showQuickCheckoutSlots(h)},showQuickCheckoutSlots:function(o){$(".slots-selector").on("click",function(){var e,t=$(".slots-layout");t.hasClass("fade-in")?(t.removeClass("fade-in"),e={Source:"Checkout_Slot",Checkout_Flow:quick_checkout,incoming_source:qc_incoming_source},clevertap.event.push("Closed Slot Selection",e),fn_cart.gaAddRemoveEvent("Checkout_Slot_Closed","Checkout_Slot")):t.addClass("fade-in"),$(this).toggleClass("up"),$(".pointer").toggleClass("fade");var a=$(this).attr("ship-id");$(".slot-day-time").hide(),$(".dates").removeClass("active"),$("#slot-day-time_"+(a+o)).show(),$("#dates_"+(a+o)).addClass("active")})},selectQuickCheckoutSlot:function(i){$(".slot-time").find("li button").on("click",function(e){$(".slot-time").find("li button").css("pointer-events","none");var s=$(this),n=s.data("date"),r=s.data("ship_id"),t=s.data("time");s.css("background","#ffffff"),s.hasClass("n-a")||(s.parents(".slots-layout").addClass("loader-div"),fn_home.ajaxForm({date:n,slot:t,ship_id:r},"POST","/checkout/select-slot").done(function(e){var t=JSON.parse(e);200===t.statusCode?function(){JSON.parse(localStorage.getItem("count")),localStorage.setItem("shipment_len",t.data.shipment_summary.length);var a={};$.map(t.data.order_charges,function(e){var t;"subtotal"==e.key?a.subtotal=e.value:"deliverycharge"==e.key||"delivery_charge"==e.key?(a.delivery=e.value,e.value?(t="*Delivery Charge: &#8377;"+e.value,$("#slotBody .del-charge").css("color","#d47015")):(t="Free Delivery",$("#slotBody .del-charge").css("color","#427605")),$("#slotBody .del-charge").html(t)):"discount"==e.key?a.discount=e.value:"liciouswallet"==e.key||"wallet"==e.key?a.wallet=e.value:"total"==e.key.toLowerCase()&&($(".total-payment-button .total").html("Total : &#8377;"+e.value),a.total=e.value)}),fn_home.renderQuickCheckoutShipments(t.data.shipment_summary,"false",a);var o=$(".bill-breakup");o.html(""),$.map(t.data.order_charges,function(e){var t,a=e.attribute.toLowerCase().replace(/ /g,"-");"liciouswallet"!==e.key&&"wallet"!==e.key&&(t='<li class="'+a+'">'+e.attribute+"<span>"+e.value+'</span>\n                <div class="message">'+e.message+"</div></li>",o.append(t))}),s.parents(".slots-dropdown").attr("data-slotselected","true");var e={"Default Slot":i.shipmentType,"Split Slot":1<t.data.shipment_summary.length,"No of Split":Number(t.data.shipment_summary.length),"Express Delivery Items":i.expressProductName,"Scheduled Delivery Items":i.scheduledProductName,"Scheduled Date":n,"Shipment ID":r,Checkout_Flow:quick_checkout,incoming_source:qc_incoming_source};fn_cart.gaAddRemoveEvent("Checkout_changeSlot","Checkout_Slot",JSON.stringify(e)),e.Source="Checkout_Slot",clevertap.event.push("Changed Slot",e)}():(202===t.statusCode&&"empty_stock"==t.data.errorMessage?fn_home.getQuickCheckoutShipments():s.parents(".slots-dropdown").attr("data-slotselected","true"),Materialize.toast(t.data.message,5e3)),$(".slot-time").find("li button").css("pointer-events","auto")}).fail(function(){$(".slot-time").find("li button").css("pointer-events","auto")}).always(function(){$(".slot-time").find("li button").css("pointer-events","auto"),s.parents(".slots-layout").addClass("complete"),setTimeout(function(){s.parents(".slots-layout").removeClass("loader-div complete")},1200)}))})},renderQuickCheckoutShipmentProducts:function(e,t){var l=arguments.length<=1||void 0===t?1:t,d={product_id:"",product_name:"",quantity:""};$(".qc-products ul").html(""),$.map(e,function(e){var t="",a="",o="qty",s=0<e.discount?'<span class = "price discount"><b class = "rupee">'+e.base_price+'</b><b class = "rupee">'+e.actual_price+"</b></span>":'<span class = "price"><b class = "rupee text-red">'+e.actual_price+"</b></span>";""!=e.shipment_info_message&&(t='<i class="info-hover" data-ship_id="'+l+'" data-category="'+e.category_name+'" data-prname="'+e.product_name+'">i <label>'+e.shipment_info_message+"</label></i>",o="split-qty",a=e.shipment_quantity.replace(/of/g,"/")),d.product_id=d.product_id.concat(e.product_id+","),d.product_name=d.product_name.concat(e.product_name+","),d.quantity=d.quantity+(e.quantity+","),a=e.quantity;var n="",r="";e.reorder_oos&&(n="oos",r='<div class="oos-msg">'+e.reorder_unav_msg+"</div>");var i='<li class="'+n+'" data-sprid="'+e.product_id+'" >'+r+'<img src="'+e.image+'" alt="'+e.product_name+'"><div class="li-prod-desc"><p class="pr-name">'+e.product_name+'</p><p><span class="weight">'+e.weight+"</span>|"+s+'|<span class="'+o+'">qty:<span>'+a+"</span>"+t+'</span></p><span class="delete-prod" '+fn_cart.getAttributesString(e)+' data-shipid="'+l+'" data-prid="'+e.product_id+'" data-sprname="'+e.product_name+'" data-category="'+e.category_name+'" data-hubid='+e.hub_id+" data-split="+e.is_split+" ></span></div></li>";$(".qc-products ul").append(i)}),localStorage.setItem("product",JSON.stringify(d)),fn_home.deleteQuickCheckoutShipmentItem()},deleteQuickCheckoutShipmentItem:function(){$(".qc-products .delete-prod").on("click",function(){var o,s,n,e,r=$(this);r.data("is_combo_child")?fn_cart.showRemovePopup(r,"shipment"):(o=r.attr("data-prid"),s=r.attr("data-shipid"),category=r.attr("data-category"),hub_id=r.attr("data-hubid"),prname=r.attr("data-sprname"),split=r.attr("data-is_split"),schedule_slot=$(".slots-dropdown").find(".slots-selector").text(),slot="EXPRESS",is_split=localStorage.getItem("split"),n="False"!=is_split,e="/checkout_oos/cart-item-delete/"+o,fn_home.ajaxForm({type:"reorder"},"POST",e).done(function(e){var t,a=JSON.parse(e);"success"==a.status&&(t={"Product Name":prname,"Category Name":category,"Shipment ID":Number(s),"Product ID":o,"City Name":localStorage.getItem("city_name"),"Hub ID":Number(hub_id),Slot:slot,"Is Split Order":n,"Scheduled Slot Selected":schedule_slot,Checkout_Flow:quick_checkout,incoming_source:qc_incoming_source},1==r.data("is_combo")&&(t.is_combo="1",r.removeData("is_combo")),fn_cart.gaAddRemoveEvent("Checkout_Slot_Remove","Checkout_Slot",JSON.stringify(t)),t.Source="Checkout_Slot",clevertap.event.push("Remove Items",t),fn_home.sendBranchEvent("remove_from_cart",a.product,!0),fn_cart.updatePrdPage(a,"update"),r.parents(".qc-products").find('[data-sprid="'+o+'"]').addClass("remove"),fn.checkout_oos.cartCount(),setTimeout(function(){r.parents(".qc-products").find('[data-sprid="'+o+'"]').removeClass("remove"),r.parents(".qc-products").find('[data-sprid="'+o+'"]').remove()},600))}))})},showCircularLoader:function(e){$(e).html('<div class="circular-loader"></div>')},GaEventcart:function(e,t,a,o){ga("send","event",{eventCategory:e,eventAction:t,eventLabel:a,eventValue:o})},pushEEAddToCartNotOnCartView:function(e){try{var t=e.product.product_id,a=e.product.product_name,o=e.product.category_id,s=e.product.base_price,n=e.product.quantity;e&&window.dataLayer&&dataLayer.push({event:"add_to_cart",ecommerce:{currencyCode:"INR",add:{products:[{item_id:t,item_category:o,price:s,quantity:n,currency:"INR",item_name:a}]}}})}catch(e){}},pushEERemoveFromCartNotOnCartView:function(e){try{var t=e.product.product_id,a=e.product.category_id,o=e.product.product_name,s=e.product.base_price,n=e.product.quantity;e&&window.dataLayer&&dataLayer.push({event:"remove_from_cart",ecommerce:{currencyCode:"INR",remove:{products:[{item_id:t,item_category:a,price:s,quantity:n,currency:"INR",item_name:o}]}}})}catch(e){}},addcart:function(d){$(".addCartBtn-home").on("click",function(e){if(e.preventDefault(),e.stopImmediatePropagation(),!$(this).hasClass("disabled")){var t,a,r=$(this),o=parseInt(r.parent().find(".item-qty").html()),i=$(this).data("prid"),s=$(this).data("qty"),l=$(this).data("recommended"),n=o+1;if(!(n<=s))return void Materialize.toast("Only "+s+" units left",3e3);r.hasClass("ub")||(r.closest('[data-prod="'+i+'"]').append('<div class = "load_elem loader-div"></div>'),r.css("opacity","0.7").prop("disabled",!0),t="",a={},"favourites"===d?(t="/reorder/update-cart-reorder",a={products:[{product_id:i,quantity:n}],flow_key:1}):t="/checkout_oos/cart-item-update/"+i+"/"+n,r.parent().find(".item-qty").val(n),r.addClass("ub"),fn.checkout_oos.ajaxForm(a,"POST",t).done(function(e){try{var t=JSON.parse(e);fn_home.pushEEAddToCartNotOnCartView(t),fn_home.checkForCombo(t,d);var a,o,s="";t.message&&""!=t.message?($(".add_message").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+t.message).show(),$('[data-prod="'+i+'"]').addClass("complete"),o=parseInt(r.data("index"))+1,"home"==d&&(s="homepage_widget",r.data("cat"),t.product.product_name,fn_home.GaEventcart("Cart","HomePage"+r.data("cat")+"ProductAddedToCart",r.data("text")+" - Pos:"+o,r.data("amt"))),"category"==d&&(s="category_browse",r.data("cat"),t.product.product_name,fn_home.GaEventcart("Cart",r.data("cat")+"CategoryPageProductAddedToCart",r.data("text")+" - Pos:"+o,r.data("amt"))),"pdp"==d&&(s="product_page",r.data("cat"),t.product.product_name,fn_home.GaEventcart("Cart",r.data("cat")+"CategoryPDP"+r.data("title")+"ProductAddedToCart",r.data("text")+" - Pos:"+o,r.data("amt"))),"search_result"==d&&(s="search_result",0)):($(".add_message").hide(),"success"==t.status?(fn_home.updateAvailabilityMsg(t,r),"favourites"==d?(fn.checkout_oos.updateCartBtn(t.item_count),r.parent().find(".item-qty").html(t.product[0].quantity),fn_home.findUpdate(i,t.product[0].quantity),r.parent().addClass("slide"),$('[data-prod="'+i+'"]').find(".load_elem").addClass("complete"),a=parseInt(r.data("index"))+1,s="favorite_items",r.data("cat"),t.product[0].product_name,fn_home.GaEventcart("Cart",r.data("cat")+"CategoryPDP"+r.data("title")+"ProductAddedToCart",r.data("text")+" - Pos:"+a,r.data("amt")),fbq("track","AddToCart",{content_type:"product",incoming_source:s,content_ids:t.product[0].product_id,content_name:t.product[0].product_name,content_category:r.data("cat"),value:r.data("amt"),currency:"INR"})):(fn.checkout_oos.updateCartBtn(t.item_count),r.parent().find(".item-qty").html(t.product.quantity),fn_home.findUpdate(i,t.product.quantity),r.parent().addClass("slide"),$('[data-prod="'+i+'"]').find(".load_elem").addClass("complete"),o=parseInt(r.data("index"))+1,"home"==d&&(s="homepage_widget",r.data("cat"),t.product.product_name,fn_home.GaEventcart("Cart","HomePage"+r.data("cat")+"ProductAddedToCart",r.data("text")+" - Pos:"+o,r.data("amt"))),"category"==d&&(s="category_browse",r.data("cat"),t.product.product_name,fn_home.GaEventcart("Cart",r.data("cat")+"CategoryPageProductAddedToCart",r.data("text")+" - Pos:"+o,r.data("amt"))),"pdp"==d&&(s="product_page",r.data("cat"),t.product.product_name,fn_home.GaEventcart("Cart",r.data("cat")+"CategoryPDP"+r.data("title")+"ProductAddedToCart",r.data("text")+" - Pos:"+o,r.data("amt"))),"search_result"==d&&(s="search_result",0),fbq("track","AddToCart",{content_type:"product",incoming_source:s,content_ids:t.product.product_id,content_name:t.product.product_name,content_category:r.data("cat"),value:r.data("amt"),currency:"INR"}))):Materialize.toast(t.message,3e3));var n={"Product ID":t.product.product_id?t.product.product_id:t.product[0].product_id,"Product Name":t.product.product_name?t.product.product_name:t.product[0].product_name,Price:t.product.base_price?Number(t.product.base_price):Number(t.product[0].base_price),Quantity:t.product.quantity?Number(t.product.quantity):Number(t.product[0].quantity),incoming_source:s,Checkout_Flow:"favourites"===d?quick_checkout:old_checkout,"Category ID":t.product.category_id&&null!=t.product.category_id?t.product.category_id:Array.isArray(t.product)&&t.product[0].category_id&&null!=t.product[0].category_id?t.product[0].category_id:"",hub_id:fn_ll.getterLS("hub_id")};1==l&&(n.product_type="recommended"),clevertap.event.push("Added to Cart",n),clevertap.event.push("Product added to cart",n),fn_home.sendBranchEvent("add_to_cart",t.product)}catch(e){Materialize.toast("Something went wrong. Please try again",5e3),r.removeClass("ub"),setTimeout(function(){$('[data-prod="'+i+'"]').find(".load_elem").remove(),r.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},5e3),console.log(e)}}).always(function(){r.removeClass("ub"),setTimeout(function(){$('[data-prod="'+i+'"]').find(".load_elem").remove(),r.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},7e3)}))}}),$(".add-one").on("click",function(e){if(e.preventDefault(),e.stopImmediatePropagation(),!$(this).hasClass("disabled")){var t,a,n=$(this),o=parseInt(n.parent().find(".item-qty").html()),r=$(this).data("prid"),s=$(this).data("qty"),i=$(this).data("recommended"),l=o+1;if(!(l<=s))return void Materialize.toast("Only "+s+" units left",3e3);n.hasClass("ub")||(n.closest('[data-prod="'+r+'"]').append('<div class = "load_elem loader-div"></div>'),n.css("opacity","0.7").prop("disabled",!0),t="",a={},"favourites"===d?(t="/reorder/update-cart-reorder",a={products:[{product_id:r,quantity:l}],flow_key:1}):t="/checkout_oos/cart-item-update/"+r+"/"+l,n.parent().find(".item-qty").val(l),n.addClass("ub"),fn.checkout_oos.ajaxForm(a,"POST",t).done(function(e){try{var t=JSON.parse(e);fn_home.pushEEAddToCartNotOnCartView(t),fn_home.checkForCombo(t,d);var a,o="";t.message&&""!=t.messag?($(".add_message").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+t.message).show(),n.parent().addClass("slide"),$('[data-prod="'+r+'"]').find(".load_elem").addClass("complete")):($(".add_message").hide(),"success"==t.status?(fn_home.updateAvailabilityMsg(t,n),"favourites"==d?(fn.checkout_oos.updateCartBtn(t.item_count),n.parent().find(".item-qty").html(t.product[0].quantity),n.parent().addClass("slide"),fn_home.findUpdate(r,t.product[0].quantity),$('[data-prod="'+r+'"]').find(".load_elem").addClass("complete"),a=parseInt(n.data("index"))+1,o="favorite_items",fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPDP"+n.data("title")+"ProductAddedToCart",n.data("text")+" - Pos:"+a,n.data("amt"))):(fn.checkout_oos.updateCartBtn(t.item_count),n.parent().find(".item-qty").html(t.product.quantity),n.parent().addClass("slide"),fn_home.findUpdate(r,t.product.quantity),$('[data-prod="'+r+'"]').find(".load_elem").addClass("complete"),a=parseInt(n.data("index"))+1,"home"==d&&(o="homepage_widget",fn_home.GaEventcart("Cart","HomePage"+n.data("cat")+"ProductAddedToCart",n.data("text")+" - Pos:"+a,n.data("amt"))),"category"==d&&(o="category_browse",fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPageProductAddedToCart",n.data("text")+" - Pos:"+a,n.data("amt"))),"pdp"==d&&(o="product_page",fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPDP"+n.data("title")+"ProductAddedToCart",n.data("text")+" - Pos:"+a,n.data("amt"))),"search_result"==d&&(o="search_result",0))):Materialize.toast(t.message,3e3));var s={"Product ID":t.product.product_id?t.product.product_id:t.product[0].product_id,"Product Name":t.product.product_name?t.product.product_name:t.product[0].product_name,Price:t.product.base_price?Number(t.product.base_price):Number(t.product[0].base_price),Quantity:t.product.quantity?Number(t.product.quantity):Number(t.product[0].quantity),incoming_source:o,hub_id:fn_ll.getterLS("hub_id"),"Category ID":t.product.category_id&&null!=t.product.category_id?t.product.category_id:Array.isArray(t.product)&&t.product[0].category_id&&null!=t.product[0].category_id?t.product[0].category_id:"",Checkout_Flow:"favourites"===d?quick_checkout:old_checkout};1==i&&(s.product_type="recommended"),clevertap.event.push("Added to Cart",s),fn_home.sendBranchEvent("add_to_cart",t.product)}catch(e){Materialize.toast("Something went wrong. Please try again",5e3),n.removeClass("ub"),setTimeout(function(){$('[data-prod="'+r+'"]').find(".load_elem").remove(),n.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},5e3),console.log(e)}}).always(function(){n.removeClass("ub"),setTimeout(function(){$('[data-prod="'+r+'"]').find(".load_elem").remove(),n.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},7e3)}))}}),$(".item-title").on("click",function(e){var t=$(this);t.find(".product-name").html().length>=char_limit&&!t.hasClass("show-full")&&(t.addClass("show-full"),t.find(".ellipsis-container").hide(),e.preventDefault(),e.stopImmediatePropagation())}),$(".htc-cta").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).data("video-embed-url");loadAndPlayVideo(t);var a="";"category_page"===$(this).data("page")?a=$(this).closest(".card").data("prod"):"product_page"===$(this).data("page")&&(a=$(".product-detail-wrapper .product-desc-block").data("prod"));var o={city_name:fn_ll.getCityFromLS(),hub_id:fn_ll.getHubFromLS(),"user_identifier ":$(".customer_key_value.master").val(),category_name:$(".cat-list .active").text().trim(),page:$(this).data("page"),product_id:a};clevertap.event.push("screencat_cookingvideo",o)})},removecart:function(c){$(".remove-one").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var n=$(this),t=parseInt(n.parent().find(".item-qty").html()),r=$(this).data("prid"),i=($(this).data("qty"),$(this).data("recommended")),a=t-1;if(0<a){if(n.hasClass("ub"))return;var o='<div class = "load_elem loader-div"></div>';n.closest('[data-prod="'+r+'"]').append(o),n.css("opacity","0.7").prop("disabled",!0);var s="",l={};"favourites"===c?(s="/reorder/update-cart-reorder",l={products:[{product_id:r,quantity:a}],flow_key:1}):s="/checkout_oos/cart-item-update/"+r+"/"+a,n.parent().find(".item-qty").val(a),n.addClass("ub"),fn.checkout_oos.ajaxForm(l,"POST",s).done(function(e){try{var t,a,o=JSON.parse(e),s="";fn_home.pushEERemoveFromCartNotOnCartView(o),fn_home.checkForCombo(o,c),o.message&&""!=o.message?($(".add_message").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+o.message).show(),$('[data-prod="'+r+'"]').find(".load_elem").addClass("complete"),t=parseInt(n.data("index"))+1,"home"==c&&(s="homepage_widget",fn_home.GaEventcart("cart","HomePage"+n.data("cat")+"ProductRemovedFromCart",n.data("text")+" - Pos:"+t,n.data("amt"))),"category"==c&&(s="category_browse",fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPageProductRemovedFromCart",n.data("text")+" - Pos:"+t,n.data("amt"))),"pdp"==c&&(s="product_page",fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPDP"+n.data("title")+"ProductRemovedFromCart",n.data("text")+" - Pos:"+t,n.data("amt"))),"search_result"==c&&(s="search_result")):($(".add_message").hide(),"success"==o.status?(fn_home.updateAvailabilityMsg(o,n),"favourites"==c?(s="favorite_items",fn.checkout_oos.updateCartBtn(o.item_count),n.parent().find(".item-qty").html(o.product[0].quantity),fn_home.findUpdate(r,o.product[0].quantity),$('[data-prod="'+r+'"]').find(".load_elem").addClass("complete"),t=parseInt(n.data("index"))+1,fn_home.GaEventcart("Cart",n.data("cat")+"Favourites"+n.data("title")+"ProductRemovedFromCart",n.data("text")+" - Pos:"+t,n.data("amt"))):(fn.checkout_oos.updateCartBtn(o.item_count),n.parent().find(".item-qty").html(o.product.quantity),fn_home.findUpdate(r,o.product.quantity),$('[data-prod="'+r+'"]').find(".load_elem").addClass("complete"),t=parseInt(n.data("index"))+1,"home"==c&&(s="homepage_widget",fn_home.GaEventcart("cart","HomePage"+n.data("cat")+"ProductRemovedFromCart",n.data("text")+" - Pos:"+t,n.data("amt"))),"category"==c&&(s="category_browse",fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPageProductRemovedFromCart",n.data("text")+" - Pos:"+t,n.data("amt"))),"pdp"==c&&(s="product_page",fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPDP"+n.data("title")+"ProductRemovedFromCart",n.data("text")+" - Pos:"+t,n.data("amt"))),"search_result"==c&&(s="search_result")),a={"Product ID":o.product.product_id?o.product.product_id:o.product[0].product_id,"Product Name":o.product.product_name?o.product.product_name:o.product[0].product_name,incoming_source:s},1==i&&(a.product_type="recommended"),clevertap.event.push("Product Removed from Cart",a),fn_home.sendBranchEvent("remove_from_cart",o.product)):Materialize.toast(o.message,3e3))}catch(e){Materialize.toast("Something went wrong. Please try again",5e3),n.removeClass("ub"),setTimeout(function(){$('[data-prod="'+r+'"]').find(".load_elem").remove(),n.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},5e3),console.log(e)}}).always(function(){n.removeClass("ub"),setTimeout(function(){$('[data-prod="'+r+'"]').find(".load_elem").remove(),n.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},7e3)})}else{o='<div class = "load_elem loader-div"></div>';n.closest('[data-prod="'+r+'"]').append(o),n.css("opacity","0.7").prop("disabled",!0);var d="/checkout_oos/cart-item-delete/"+r,l="favourites"===c?{type:"reorder"}:{};fn.checkout_oos.ajaxForm(l,"POST",d).done(function(e){try{var t=JSON.parse(e);fn_home.pushEERemoveFromCartNotOnCartView(t),fn_home.checkForCombo(t,c);var a,o;"home"==c&&(fn_home.GaEventcart("Cart","HomePage"+n.data("cat")+"ProductRemovedFromCart",n.data("text")+" - Pos:"+a,n.data("amt")),incoming_source="homepage_widget"),"category"==c&&(incoming_source="category_browse",fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPageProductRemovedFromCart",n.data("text")+" - Pos:"+a,n.data("amt")),0),"pdp"==c&&(incoming_source="product_page",fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPDP"+n.data("title")+"ProductRemovedFromCart",n.data("text")+" - Pos:"+a,n.data("amt")),0),"favourites"==c&&(fn_home.GaEventcart("Cart",n.data("cat")+"CategoryPDP"+n.data("title")+"ProductRemovedFromCart",n.data("text")+" - Pos:"+a,n.data("amt")),incoming_source="favorite_items"),"search_result"==c&&(incoming_source="search_result",0),""!=t.message?($(".add_message").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+t.message).show(),n.parent().parent().removeClass("slide"),$('[data-prod="'+r+'"]').find(".load_elem").addClass("complete")):($(".add_message").hide(),"success"==t.status?(fn_home.updateAvailabilityMsg(t,n),fn.checkout_oos.updateCartBtn(t.item_count),n.parent().find(".item-qty").html(t.quantity),n.parent().parent().removeClass("slide"),fn_home.findUpdate(r,t.quantity),$('[data-prod="'+r+'"]').find(".load_elem").addClass("complete"),a=parseInt(n.data("index"))+1,o={"Product ID":t.product.product_id?t.product.product_id:t.product[0].product_id,"Product Name":t.product.product_name?t.product.product_name:t.product[0].product_name,incoming_source:incoming_source},1==i&&(o.product_type="recommended"),clevertap.event.push("Product Removed from Cart",o),fn_home.sendBranchEvent("remove_from_cart",t.product,!0)):Materialize.toast(t.message,3e3))}catch(e){Materialize.toast("Something went wrong. Please try again",5e3),n.removeClass("ub"),setTimeout(function(){$('[data-prod="'+r+'"]').find(".load_elem").remove(),n.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},5e3),console.log(e)}}).always(function(){n.removeClass("ub"),setTimeout(function(){$('[data-prod="'+r+'"]').find(".load_elem").remove(),n.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},7e3)})}})},findUpdate:function(e,t){var a=$('[data-prod="'+e+'"]');a.find(".item-qty").html(t),a.find(".item-qty-pdp").html(t),a.find(".item-qty-pdp").attr("data-qty",t),0<t?(a.find(".action-slider").addClass("slide"),a.find(".action-slider1").addClass("slide")):(a.find(".action-slider").removeClass("slide"),a.find(".action-slider1").removeClass("slide"))},checkForCombo:function(e){var t=e.hasOwnProperty("combo")&&null!==e.combo?e.combo:[],a=e.hasOwnProperty("combo_products")&&null!==e.combo_products?e.combo_products:[],o=t.concat(a);o.length&&o.map(function(e){var t=$('[data-prod="'+e.product_id+'"]');t.find(".item-qty").html(e.quantity),null!=e.next_available_by&&null!=e.next_available_by&&""!=e.next_available_by&&t.find(".product-message").find(".message").html(e.next_available_by),0<Number(e.quantity)?t.find(".action-slider").addClass("slide"):t.find(".action-slider").removeClass("slide"),0<Number(e.quantity)?t.find(".action-slider1").addClass("slide"):t.find(".action-slider1").removeClass("slide")})},lazyLoad:function(){var e=$(".deals.todays-deal"),t=!0,a=$(".deals.also-like"),o=!0,s=$(".deals.explore-category"),n=!0,r=$(".banner"),i=!0,l=$(".deals.best-sellers"),d=!0,c=$(".deals.our-blog"),p=!0,u=$(".made-with-licious"),m=!0,h=$(".in-news"),f=!0;parseInt(e.position().top)<window.innerHeight&&e.addClass("reveal"),window.addEventListener("scroll",function(){parseInt(window.pageYOffset),t&&$(window).scrollTop()>=parseInt(window.innerHeight-e.offset().top)&&(fn_home.homeDeals(),e.addClass("reveal"),t=!1),o&&$(window).scrollTop()>=parseInt(a.offset().top-window.innerHeight-50)&&(fn_home.homeRecommendations(),a.addClass("reveal"),o=!1),n&&$(window).scrollTop()>=parseInt(s.offset().top-window.innerHeight-50)&&(fn_home.homeExplore(),s.addClass("reveal"),n=!1),i&&$(window).scrollTop()>=parseInt(r.offset().top-window.innerHeight-50)&&(fn_home.homeUspbanner(),r.addClass("reveal"),i=!1),d&&$(window).scrollTop()>=parseInt(l.offset().top-window.innerHeight-50)&&(fn_home.homeBestsellers(),l.addClass("reveal"),d=!1),p&&$(window).scrollTop()>=parseInt(c.offset().top-window.innerHeight-50)&&(fn_home.homeBlogs(),c.addClass("reveal"),p=!1),m&&$(window).scrollTop()>=parseInt(u.offset().top-window.innerHeight-50)&&(fn_home.homeTestimonials(),u.addClass("reveal"),m=!1),f&&$(window).scrollTop()>=parseInt(h.offset().top-window.innerHeight-50)&&(h.addClass("reveal"),f=!1)})},youAlsoLike:function(){var e=$(".pr_id").val(),t=$(".pr_name").val(),a=$(".slug").val();fn_home.ajaxForm({prId:e,prName:t,slug:a},"POST","/home_page/you-also-like").done(function(e){})},savedAddresses:function(){$(".sublocation-popup-wrapper").addClass("clicked"),fn_home.ajaxForm({},"GET","/checkout_oos/get-addr").done(function(e){var o,t=JSON.parse(e).address,s="",n=localStorage.getItem("default_addr_id");localStorage.getItem("hub_id"),0==t.length||null==t?($(".sublocation-popup-wrapper").addClass("hide"),$(".sublocation-old-popup").addClass("hide"),$(".location-search-pop-wrapper").removeClass("hide"),$(".location-search-pop-wrapper").addClass("show")):($(".sublocation-popup-wrapper").addClass("show"),$(".sublocation-old-popup").addClass("show"),$(".location-search-pop-wrapper").addClass("hide"),$(".location-search-pop-wrapper").removeClass("show"),o="",1==t.length&&(o="fullwidth"),2==t.length&&(o="halfwidth"),2<t.length&&(o="onethird"),$.map(t,function(e,t){s=n==e.address_id?"selected":"";var a='<div class="address '+o+" "+s+'" data-addrid="'+e.address_id+'" data-lat="'+e.lat+'" data-lng="'+e.lng+'" data-location="'+e.line2+'" data-index="'+t+'" data-city="'+e.city+'"><span title = "'+e.line2+'">'+e.line1+"</span></div>";$(".addresses-block .addresses-list").append(a)}))}).always(function(){$(".addresses-list").find(".address").on("click",function(e){var s=$(this).attr("data-addrid"),n=$(this).data("lat"),r=$(this).data("lng"),i=$(this).data("location"),t=$(this).data("index"),l=($(this).data("city"),$(".pageName").val()),d="";null!=l&&("homepage"==l?d="SL-Homepage - SavedAddress":"plp"==l?d="SL-Product listing page - SavedAddress":"pdp"==l&&(d="SL-Product detail page - SavedAddress"),fn_sublocation.gaSublocation(d,"Click",t+1)),$.ajax({url:placesFormLanding.getAttribute("data-url"),type:"POST",data:{lat:$(this).data("lat"),lng:$(this).data("lng"),location:$(this).data("location"),clearcart:"true"},timeout:2e4,headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}}).done(function(e){var t,a,o;"success"==e.result?(t="Loc:"+i+" Lat:"+n+" Lon:"+r,localStorage.setItem("showLocation","hide"),localStorage.setItem("default_addr_id",s),localStorage.setItem("hub_id",e.hub_id),localStorage.setItem("city_name",e.city_name),null!=l&&("homepage"==l?d="SL-Homepage - Change Address":"plp"==l?d="SL-Product listing page - Change Address":"pdp"==l&&(d="SL-Product detail page - Change Address"),fn_sublocation.gaSublocation(d,"Click",t)),a=e.hub_id,o=e.city_name,null!=$(".customer_key_value.master").val()?window.dataLayer.push({user_logged_in:!0,user_current_hub:a,user_current_location:n+", "+r,user_current_city:o}):window.dataLayer.push({user_logged_in:!1,user_current_hub:a,user_current_location:n+", "+r,user_current_city:o}),window.location.reload()):(localStorage.setItem("showLocation","show"),$(".sublocation-popup-wrapper").find(".loc-error-addr").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/loc-err.png" alt="">We are working hard to bring safe, fresh meats and seafood to you soon. We will inform you as soon as we are up and running.').addClass("abs").show(),$(".use-my-loc").show(),$(".loader-img").hide(),ga("send",{hitType:"event",eventCategory:"LocationError",eventAction:"Error",eventLabel:"Loc:"+i+" Lat:"+n+" Lon:"+r+" - NoService"}))}).always(function(){document.addEventListener("click",function(e){"loc-screen show"==e.target.className&&($(".main-sublocation-wrapper").removeClass("show"),$(".loc-screen").removeClass("show"),$(".location-search-pop-wrapper").removeClass("show"),$(".sublocation-old-popup").show(),$(".loc-error, .loc-error-addr").hide())})}).fail(function(e){$(".use-my-loc").show(),$(".loader-img").hide()})})})},bindNotifyMeButton:function(o){$(o).click(function(e){var t,a=$(this);e.stopPropagation(),e.preventDefault(),a.hasClass("notified")||("true"===$(".req-mob-no-popup").attr("data-logged-in")?(t={product_id:a.attr("data-pr-id")},fn_home.setNotification(o,t,a)):($(".req-mob-no-popup").addClass("show"),$(".loc-screen").addClass("show"),$(".mob-no").keyup(function(){10===$(this).val().length?fn_checkout.mobile_regex.test($(this).val())?$(".proceed").prop("disabled",!1):($(".proceed").prop("disabled",!0),$(".mob-no-error").addClass("show"),setTimeout(function(){$(".mob-no-error").removeClass("show")},3e3)):$(".proceed").prop("disabled",!0)}),$(".proceed").click(function(e){e.preventDefault();var t={product_id:a.attr("data-pr-id"),phone_no:$(".mob-no").val()};fn_home.setNotification(o,t,a),$(".req-mob-no-popup").removeClass("show"),$(".loc-screen").removeClass("show")}),$(".close").click(function(){$(".req-mob-no-popup").removeClass("show"),$(".loc-screen").removeClass("show")})))})},setNotification:function(u,m,h,e){var f=arguments.length<=3||void 0===e||e;fn_main.showloader();var _="";f||(_=h.getAttribute("data-ship-id")),fn_home.ajaxForm(m,"POST","/loyalty/notify-me").done(function(e){var t=JSON.parse(e);if(fn_main.hideloader(),200===t.statusCode){var a="";null!==fn_home.getCookie("notify_products")&&""!==fn_home.getCookie("notify_products")&&(a+=fn_home.getCookie("notify_products")),a+=f?""!==a?","+m.product_id:m.product_id:""!==a?","+_:_;var o=new Date,s=new Date;s.setFullYear(o.getFullYear()),s.setMonth(o.getMonth()),s.setDate(o.getDate()+1),s.setHours(0),s.setMinutes(0),s.setSeconds(0);var n,r,i="expires="+s.toString();if(fn_home.setCookie("notify_products",a,i),f?(n=$('[data-prod="'+m.product_id+'"]'),(h=n.find(".notify-me")).addClass("notified"),h.children(".alarm").attr("src","/img/tick_symbol.svg"),h.children(".alarm").attr("data-lazy","/img/tick_symbol.svg"),".search-notify-me"===u?(h.closest(".search-item").find(".product-message").removeClass("oos").addClass("notified"),h.closest(".search-item").find(".product-message").html(t.message)):(n.find(".icon-message .message").html(t.message),n.find(".icon-message .message").removeClass("oos").addClass("notified"))):(h.classList.add("notified"),h.innerHTML='<img src="/img/tick_symbol.svg" class="alarm" > NOTIFY ME',(r=h.previousElementSibling).innerHTML=t.message,r.classList.add("notified")),localStorage.setItem("notified-msg",t.message),f){var l={incoming_source:"",category_name:"",product_name:"",product_id:"",price:"",discount:"",product_url:"",product_image_url:""};".notify-me-pdp"===u?(l.product_name=$(".title .heading").html(),l.product_image_url=h.attr("data-pr-img-url"),l.product_url=window.location.href):".search-notify-me"===u?(l.product_image_url=h.closest(".product-card").find("img.product-img").attr("src"),l.product_url=h.closest(".product-click-container").data("url"),l.product_name=h.closest(".product-click-container").attr("data-text")):(l.product_image_url=h.closest(".item-img").find("img:first").attr("src"),l.product_url=h.closest("a").attr("href"),l.product_name=h.closest("a").attr("data-text")),l.price=h.attr("data-price"),l.product_id=m.product_id,l.category_name=h.attr("data-cat"),l.incoming_source=".search-notify-me"===u?"search_result":h.attr("data-cat"),l.discount=h.attr("data-discount"),fn_ll.populateNotifyMeData(l),fn_ll.sendAnalyticsData("notify_productOOS",_extends({},fn_ll.notify_me_ana_obj,{source:"availability"}))}else for(var d=h.parentElement.parentElement,c=d.children,p=0;p<Number(d.childElementCount)-1;p++){l={incoming_source:"past_order",source:"availability",category_name:c[p].querySelector(".product-name").getAttribute("data-cat-name"),product_name:c[p].querySelector(".product-name").innerHTML,product_id:c[p].lastElementChild.getAttribute("data-product-id"),price:c[p].querySelector(".product-disc-price").getAttribute("data-base-price"),discount:c[p].querySelector(".product-disc-price").getAttribute("data-discount"),product_image_url:c[p].querySelector(".product-image").getAttribute("src"),product_url:c[p].querySelector(".product-image").getAttribute("data-prod-url")};fn_ll.sendAnalyticsData("notify_productOOS",_extends({},l,fn_ll.qc_obj))}}}).always(function(){fn_main.hideloader()})},getCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var s=a[o];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""},setCookie:function(e,t,a){document.cookie=e+"="+t+";"+a+";path=/"},validateCookieForProduct:function(e){return!!fn_home.getCookie("notify_products").includes(e)}};var productView={};fn_product_page={getUsp:function(e,a){fn_home.ajaxForm({cat_id:e},"POST","/home_page/get-usp").done(function(e){var t=JSON.parse(e);$(".usp-container .usp").append('<h1 class="name">'+a+"</h1>"),$.each(t.data,function(e,t){var a='<div class="images"><p><img data-lazy="'+t.img+'" alt=""><span>'+t.text+'<span class = "tool-tip">'+t.tooltip+"</span></span></p></div></div>";$(".usp-container .usp").append(a)}),fn_home.getAllDOMImages()})},getCatDetails:function(){var e=$(".cat-list .active").data("id");e&&fn_home.ajaxForm({cat_id:e},"POST","/home_page/get-category-details").done(function(e){var t=JSON.parse(e);clevertap.event.push("Category Viewed",{"Category Name":t.data.cat_name,"Category ID":Number(t.data.id),"Hub ID":localStorage.getItem("hub_id"),"City Name":localStorage.getItem("city_name")})})},productListing:function(){var a=$(".cat-list .active").data("id"),c=$(".cat-list .active").text();$(".cat-list .active").data("slug"),a&&fn_home.ajaxForm({cat_id:a},"POST","/home_page/get-product-listing").done(function(e){var l,d=JSON.parse(e);fn_home.pushEEProductImpressionCategoryPage(d),fn_product_page.getUsp(a,c),"success"==d.status&&0<d.data.length?(l=[],$.each(d.data,function(e,t){var a=(t.product_pricing.base_discount,0<t.product_pricing.base_discount?"show":"hide"),o=$(".cat-list .active").data("slug");l.push(t.product_master.product_id);var s=fn_home.renderActionButtonandClusterMessage(t,c,"category-notify-me",e),n=s.actionButton,r=s.productMessageDiv,i='<div class="card" data-prod="'+t.product_master.product_id+'"> \n                  <a  href="/'+o+"/"+t.product_master.slug+'"  data-text="'+t.product_merchantdising.merchandise_name+'" data-index="'+e+'">\n                    <div class="item-img">\n                      <img class="product-image" data-lazy="'+t.product_merchantdising.pr_image+'" alt="'+t.product_merchantdising.product_shortname+'" title="'+t.product_merchantdising.product_shortname+'">\n                      '+(t.product_videos.length&&t.product_videos[0].video_link?'\n                        <div class="htc-placeholder">\n                          <div class="htc-cta" data-video-embed-url="'+t.product_videos[0].video_link+'" data-page="category_page">\n                            <img class="htc-play-symbol" src="/img/play_icon.svg" alt="playbutton"/>\n                            <span class="cta-text">How to cook</span>\n                          </div>\n                        </div>':"")+'\n                      <div class="item-details">\n                        '+fn_home.getItemName(t.product_merchantdising.merchandise_name)+"\n                        "+fn_home.getItemDescription(t.product_merchantdising.usp_desc)+"\n                        "+fn_home.getProductWeightDetails(t,o)+'\n                        <div class="item-action">\n                          <div class="rate">\n                            '+fn_home.getMrpText(a,t)+'\n                          </div>\n                          <div class="action">\n                            <div class="action-slider">\n                              '+n+"\n                              <p>"+fn_home.getPlusandMinusButtons(t,c,e)+"</p>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    "+r+"\n                  </a>\n                </div>";$(".deals.product-list .item-slider").append(i),2!==e&&d.data.length-1!=e||$(".deals.product-list .item-slider").append('<p class="cat-ll-top-banner-placeholder"></p>'),5!==e&&d.data.length-1!=e||$(".deals.product-list .item-slider").append('<p class="cat-ll-bottom-banner-placeholder"></p>')}),fn_home.bindNotifyMeButton(".category-notify-me"),(new LoyaltyBanners).getLoyaltyBanner("cat"),fbq("track","ViewCategory",{content_category:c,content_ids:l,content_type:"product"}),fn_home.dealsCarousel(),fn_home.addcart("category","Product Listing Page - "+c),fn_home.removecart("category")):$(".deals.product-list").hide();var t=!1;$(document).on("scroll",function(){var e=document.querySelector(".cat-ll-top-banner-placeholder");!t&&null!==e&&fn_ll.checkElementInViewPort(e)&&(t=!0,fn_ll.sendAnalyticsData("Banner",_extends({},fn_ll.loyalty_banners_obj,{source:"impression",list:""+c})))}),fn_home.getAllDOMImages()}).always(function(){fn_home.getCart()})},getRecipeDetails:function(){fn_home.ajaxForm({recipe_id:$(".recipe_id").val()},"POST","/get-recipe-details").done(function(e){var t,a,o,s,n,r;"success"==(e=JSON.parse(e)).status&&(t='<img data-lazy="'+e.recipe.Images[0]+'" class="responsive-img">',$(".whole-wrapper .img-wrap").html(t),$(".recipe-title .title-name").html(e.recipe.title),a="","Breakfast"==e.recipe.category&&(a="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/Breakfast-1.png"),"Lunch"==e.recipe.category&&(a="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/Lunch-1.png"),"snacks"==e.recipe.category&&(a="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/Snack-1.png"),"Dinner"==e.recipe.category&&(a="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/Dinner-1.png"),$(".recipe-way .food1 img").attr("data-lazy",a),$(".recipe-name").html(e.recipe.title),$(".recipe-detail").html(e.recipe.description),$(".food").html(e.recipe.category),o="Cooking time "+e.recipe.prepTime,$(".time").html(o),s="Serves:"+e.recipe.serves,$(".serves1").html(s),n=e.recipe.recipe_method.replace(/\n/g,"<br />"),$(".recipe_title").html("Licious | "+e.recipe.title),$(".recipe-method p").html(n),r="",$.map(e.recipe.ingredients,function(e,t){r=r+'<li><div class="item-detail"><span class="count">'+(t+1)+'</span><span class="item">'+e.ingredients_name+'</span><span class=""></span></div><div class="item-quantity"><span>'+e.ingredients_qty+" "+e.ingredients_measurement+"</span></div></li>"}),$(".recipe-list ul").html(r),fn_product_page.getRecipePrevNext(e.recipe.id)),fn_home.getAllDOMImages()})},getRecipePrevNext:function(l){var d=$(".cat_id").val();fn_home.ajaxForm({cat_id:d},"POST","/get-prev-next-recipe").done(function(e){var a,t=JSON.parse(e),o=t.data,s=o.length;s<=1&&($(".prev-click").hide(),$(".next-click").hide()),$.map(t.data,function(e,t){e.id==l&&(a=t)});var n=$(".whole-wrapper"),r=n.find(".prev-click"),i=n.find(".next-click");r.removeAttr("href"),i.removeAttr("href"),r.addClass("disabled"),i.addClass("disabled"),0<a&&(prevSlug="/recipes/"+o[a-1].id+"/"+d,r.attr("href",prevSlug),$(".scroll-item-left .scroll-item-img img").attr("src",o[a-1].Images[0]),$(".scroll-item-left .scroll-item-title span").text(o[a-1].title),r.removeClass("disabled")),a<s-1&&(nextSlug="/recipes/"+o[a+1].id+"/"+d,i.attr("href",nextSlug),$(".scroll-item-right .scroll-item-img img").attr("src",o[a+1].Images[0]),$(".scroll-item-right .scroll-item-title span").text(o[a+1].title),i.removeClass("disabled")),r.hover(function(e){$(".scroll-item-left .scroll-item-img img").attr("src")?($(".scroll-item-left").css("display","block"),$(".left").addClass("arrow-border-left"),$(".left-arrow .prev").addClass("active show")):($(".left").removeClass("arrow-border-left"),$(".left-arrow .prev").removeClass("active show"))},function(e){$(".left").removeClass("arrow-border-left"),$(".left-arrow .prev").removeClass("active show"),$(".scroll-item-left").css("display","none")}),i.hover(function(e){$(".scroll-item-right .scroll-item-img img").attr("src")&&($(".scroll-item-right").css("display","block"),$(".right-arrow .next").addClass("active show"),$(".right").addClass("arrow-border-right"))},function(e){$(".right-arrow .next").removeClass("active show"),$(".right").removeClass("arrow-border-right"),$(".scroll-item-right").css("display","none")})})},productDetailsFetch:function(e,t,a){$(".product-breadcrumb .breadcrumb.second").attr("href","/"+a);var o=a.charAt(0).toUpperCase()+a.slice(1);$(".product-breadcrumb .breadcrumb.second").text(o),fn_product_page.getProductDetails(e),fn_product_page.getOfferData(e),fn_product_page.getPrevNextData(e,t,a)},reverseTiming:function(r){var e=(r=r.replace(" ","T")).split(/[^0-9]/),i=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5]).getTime(),l=setInterval(function(){var e,t,a,o,s=(new Date).getTime(),n=i-s;Date.parse(r)<s?($(".discount").hide(),$(".timer").html("00:00:00"),$(".timer").fadeOut(),$(".timer-block").hide()):(e=Math.floor(n/864e5),t=Math.floor(n%864e5/36e5)+24*e,a=Math.floor(n%36e5/6e4),o=Math.floor(n%6e4/1e3),$(".timer").html(("0"+t).slice(-2)+":"+("0"+a).slice(-2)+":"+("0"+o).slice(-2)),0==e&&0==t&&0==a&&0==o&&($(".timer").fadeOut(),$(".deals.todays-deal").fadeOut(),setTimeout(function(){$(".deals.todays-deal").remove()},500),clearInterval(l)))},1e3)},getProdId:function(e,t){var a=localStorage.getItem("cat_id");fn_product_page.homeRecommendationsNew(t,e,a),fn_product_page.productDetailsFetch(t,a,e),setTimeout(function(){var e=$(".item-qty-pdp").data("qty");null!=e&&Object.assign(productView,{Quantity:parseInt(e)})},5e3)},homeRecommendationsNew:function(e,i,t){fn_home.ajaxForm({product_id:e,cat_id:t},"POST","/get-recomendtaion-home-new").done(function(e){var t;e=JSON.parse(e),localStorage.setItem("youMayAlsoLikePDP",null),"success"==e.status&&0<e.data.length?(localStorage.setItem("youMayAlsoLikePDP",JSON.stringify(e.data)),t='<span class = "heading">'+e.title+"</span>",$(".also-like .header").html(t),$(".also-like .item-slider .viewport").html(""),$.each(e.data,function(e,t){var a=(t.product_pricing.base_discount,0<t.product_pricing.base_discount?"show":"hide"),o=fn_home.renderActionButtonandClusterMessage(t,i,"pdprecommendation-notify-me",e),s=o.actionButton,n=o.productMessageDiv,r='<a  href="/'+i+"/"+t.product_master.slug+'" data-text="'+t.product_master.pr_name+'" data-index="'+e+'"><div class="card" data-prod="'+t.product_master.product_id+'"><div class="item-img"><img class="product-image" data-lazy="'+t.product_merchantdising.pr_image+'" alt="'+t.product_merchantdising.product_shortname+'" title="'+t.product_merchantdising.product_shortname+'"><div class="item-details">'+fn_home.getItemName(t.product_merchantdising.merchandise_name)+fn_home.getItemDescription(t.product_merchantdising.usp_desc)+fn_home.getProductWeightDetails(t,i)+'<div class="item-action"><div class="rate">'+fn_home.getMrpText(a,t)+'</div><div class="action"><div class="action-slider">'+s+"<p>"+fn_home.getPlusandMinusButtons(t,i,e)+"</p></p></div></div></div></div></div>"+n+"</a>";$(".also-like .item-slider .viewport").append(r)}),fn_home.bindNotifyMeButton(".pdprecommendation-notify-me"),fn_product_page.likeCarouselPDP(),fn_home.addcart("pdp",e.title),fn_home.removecart("pdp"),fn_home.gaClicks($(".also-like .item-slider .viewport").find("a"),e.title),fn_home.getAllDOMImages()):($(".deals.also-like").hide(),$(".also-like .this_car_nav").hide())}).always(function(e){JSON.parse(e),$(".also-like .this_car_nav").fadeIn(),fn_home.carNav("also-like"),fn_home.getCart()})},getPdpRecipeDetails:function(e){var a="";$.map(e,function(e,t){a=0==t?a+"?recipe_ids="+e:a+"&recipe_ids="+e});var y=!1;fn_home.ajaxForm({recipe:a},"POST","/get-pdp-recipe").done(function(e){var t=JSON.parse(e),r=t.data;if(r.sort(fn_product_page.compareData),localStorage.setItem("RecipesData",JSON.stringify(r)),localStorage.setItem("pdp-recipe",JSON.stringify(t.data)),0<r.length){$(".prod-rec-button").show(),$(".prod-right-title").html("Recipes for your "+localStorage.getItem("cat_slug"));var a=r.length,o=Math.floor(a/6),s=1;if($(".prod-others").empty(),a<=6){$(".nav_arrow").hide();$(".prod-others").append('<li class="cycle"></li>'),$.map(r,function(e,t){var a='<div class="block-recipe1" data-gaaction="Clicks" data-pdplabel="'+e.title+'" data-index="'+t+'"><div class="product-image"><img data-lazy="'+e.Images!=void 0&&Array.isArray(e.Images)&&e.Images[0]?e.Images[0]:'"></div><div class="image-title"><span data-id="'+e.id+'">'+e.title+"</span></div></div>";$(".prod-others .cycle").append(a)})}else{y=!0;for(var n,i=0;i<=o;i++){var l='<li class="cycle'+i+'"></li>';$(".prod-others").append(l),n=s==o+1?6*s-6+a%6:6*s;for(var d=6*i;d<n;d++){var c='<div class="block-recipe1" data-gaaction="Clicks" data-pdplabel="'+r[d].title+'" data-index="'+d+'"><div class="product-image"><img data-lazy="'+(r[d].Images&&r[d].Images[0]?r[d].Images[0]:"")+'"></div><div class="image-title"><span data-id="'+r[d].id+'">'+r[d].title+"</span></div></div>";$(".prod-others").find(".cycle"+i).append(c)}s++}}var p=$(".prod-others li:first-child .block-recipe1:first-child");p.find(".image-title").addClass("nav-active1"),p.find(".product-image").addClass("img-border");var u=p.find(".product-image img").attr("src")?p.find(".product-image img").attr("src"):p.find(".product-image img").attr("data-lazy"),m=p.find(".image-title span").text(),h=p.find(".image-title span").data("id"),f="";$.map(r,function(e,t){e.id==h&&(f=e.description)});var _=p.data("index");$(".prod_left .prod-image img").attr("data-lazy",u),$(".prod-img-title p").html(m),$(".prod-img-desc p").html(f);var g=localStorage.getItem("cat_id"),h="/recipes/"+h+"/"+g;$(".prod-rec-button").attr("href",h),$(".prod-rec-button").attr("data-pdplabel","View Recipe - "+m+" - Pos:"+(_+1));var v=localStorage.getItem("cat_slug")+"PDP - Recipe";fn_product_page.gaClicksPDP($(".prod-rec-button"),v),$(".prod-others li .block-recipe1").on("click",function(){$(".image-title").removeClass("nav-active1"),$(".product-image").removeClass("img-border"),$(this).find(".product-image").addClass("img-border"),$(this).find(".image-title").addClass("nav-active1");var e=$(this).find(".product-image img").attr("src")?$(this).find(".product-image img").attr("src"):$(this).find(".product-image img").attr("dat-lazy"),t=$(this).find(".image-title span").text(),a=($(this).find(".image-title span").data("id"),$(this).find(".image-title span").data("id")),o="";$.map(r,function(e,t){e.id==a&&(o=e.description)});var s=$(this).data("index");$(".prod-rec-button").attr("data-pdplabel","View Recipe - "+t+" - Pos:"+(s+1));var n=localStorage.getItem("cat_slug")+"PDP - Recipe";fn_product_page.gaClicksPDP($(".prod-others li .block-recipe1").find(".prod-rec-button"),n),a="/recipes/"+a+"/"+g,$(".prod_left .prod-image img").attr("src",e),$(".prod-img-title p").html(t),$(".prod-img-desc p").html(o),$(".prod-rec-button").attr("href",a),ga("send",{hitType:"event",eventCategory:localStorage.getItem("cat_slug")+"PDP - Recipe",eventAction:"Click",eventLabel:$(this).data("pdplabel")+" - Pos:"+($(this).data("index")+1),transport:"beacon"})})}else $(".bottom-container").hide();fn_home.getAllDOMImages()}).always(function(){var s;1==y&&($(".prod-others").cycle({fx:"scrollHorz",timeout:0}),s=0,$(".prod-others").on("cycle-prev",function(e,t){var a=JSON.parse(localStorage.getItem("pdp-recipe"));s-=6;var o=a.splice(s,6);$.map(o,function(e,t){ga("send",{hitType:"event",eventCategory:localStorage.getItem("cat_slug")+"PDP - Recipe",eventAction:"Impression",eventLabel:e.title+" - Pos:"+(t+1)})})}),$(".prod-others").on("cycle-next",function(e,t){var a=JSON.parse(localStorage.getItem("pdp-recipe"));s+=6;var o=a.splice(s,6);$.map(o,function(e,t){ga("send",{hitType:"event",eventCategory:localStorage.getItem("cat_slug")+"PDP - Recipe",eventAction:"Impression",eventLabel:e.title+" - Pos:"+(t+s+1)})})}))})},get_how_to_eat:function(s){var e,t,a,o,n;0<s.data.length&&null!=s.data&&null!=s.data?($(".prod-rec-button").hide(),$(".prod-right-title").append(s.title),$(".prod-others").append("<li></li>"),$(".nav_arrow").hide(),s.data.sort(fn_product_page.compareData),localStorage.setItem("waysEnjoyData",JSON.stringify(s.data)),$.map(s.data,function(e,t){var a;t<6&&(a='<div class="block-recipe1" data-gaaction="Click" data-pdplabel="'+e.title+'" data-index="'+t+'"><div class="product-image"><img src="'+e.image_url+'"></div><div class="image-title"><span data-id="'+e.id+'">'+e.title+"</span></div></div>",$(".prod-others li").append(a))}),$(".prod-others li .block-recipe1").on("click",function(){$(".image-title").removeClass("nav-active1"),$(".product-image").removeClass("img-border"),$(this).find(".product-image").addClass("img-border"),$(this).find(".image-title").addClass("nav-active1");var e=$(this).find(".product-image img").attr("src")?$(this).find(".product-image img").attr("src"):$(this).find(".product-image img").attr("data-lazy"),t=$(this).find(".image-title span").text(),a=$(this).find(".image-title span").data("id"),o="";$.map(s.data,function(e,t){e.id==a&&(o=e.content)}),$(".prod_left .prod-image img").attr("src",e),$(".prod-img-title p").html(t),$(".prod-img-desc p").html(o),ga("send",{hitType:"event",eventCategory:localStorage.getItem("cat_slug")+"PDP - Recipe",eventAction:"Click",eventLabel:$(this).data("pdplabel")+" - Pos:"+($(this).data("index")+1),transport:"beacon"})}),e=$(".prod-others li .block-recipe1:first-child"),$(".nav_arrow").hide(),e.find(".image-title").addClass("nav-active1"),e.find(".product-image").addClass("img-border"),t=e.find(".product-image img").attr("src")?e.find(".product-image img").attr("src"):e.find(".product-image img").attr("data-lazy"),a=e.find(".image-title span").text(),o=e.find(".image-title span").data("id"),n="",$.map(s.data,function(e,t){e.id==o&&(n=e.content)}),$(".prod_left .prod-image img").attr("src",t),$(".prod-img-title p").html(a),$(".prod-img-desc p").html(n)):$(".bottom-container").hide()},getPrevNextData:function(p,e,u){fn_home.ajaxForm({cat_id:e},"POST","/home_page/get-prev-next-data").done(function(e){var t=JSON.parse(e),a=t.data,o=a.length,s=-1,n="/",r="/";$.map(t.data,function(e,t){e.product_id==p&&(s=t)});var i=$(".product-page-header"),l=i.find(".prev-click"),d=i.find(".next-click");l.removeAttr("href"),d.removeAttr("href"),l.addClass("disabled"),d.addClass("disabled"),0<s&&(n=n+u+"/"+a[s-1].slug,l.attr("href",n),$(".scroll-item-left .scroll-item-img img").attr("src",a[s-1].pr_image),$(".scroll-item-left .scroll-item-title span").text(a[s-1].merchandise_name),l.removeClass("disabled"),ga("send",{hitType:"event",eventCategory:"ProductDetailPage",eventAction:"Impression",eventLabel:"ProductDetailPageScroll - Left Arrow",transport:"beacon"})),s<o-1&&(r=r+u+"/"+a[s+1].slug,d.attr("href",r),$(".scroll-item-right .scroll-item-img img").attr("src",a[s+1].pr_image),$(".scroll-item-right .scroll-item-title span").text(a[s+1].merchandise_name),d.removeClass("disabled"),ga("send",{hitType:"event",eventCategory:"ProductDetailPage",eventAction:"Impression",eventLabel:"ProductDetailPageScroll - Right Arrow",transport:"beacon"})),l.hover(function(e){$(".scroll-item-left .scroll-item-img img").attr("src")?($(".scroll-item-left").css("display","block"),$(".left").addClass("arrow-border-left"),$(".left-arrow .prev").addClass("active show")):($(".left").removeClass("arrow-border-left"),$(".left-arrow .prev").removeClass("active show"))},function(e){$(".left").removeClass("arrow-border-left"),$(".left-arrow .prev").removeClass("active show"),$(".scroll-item-left").css("display","none")}),d.hover(function(e){$(".scroll-item-right .scroll-item-img img").attr("src")&&($(".scroll-item-right").css("display","block"),$(".right-arrow .next").addClass("active show"),$(".right").addClass("arrow-border-right"))},function(e){$(".right-arrow .next").removeClass("active show"),$(".right").removeClass("arrow-border-right"),$(".scroll-item-right").css("display","none")});var c="ProductDetailPage";fn_product_page.gaClicksPDP($(".prev-click"),c),fn_product_page.gaClicksPDP($(".next-click"),c)})},getOfferData:function(e){fn_home.ajaxForm({productId:e},"POST","/home_page/get-offer-data").done(function(e){(e=JSON.parse(e)).data,1==e.data.todays_deal.status?(fn_product_page.reverseTiming(e.data.todays_deal.end_time),$(".product-detail-wrapper .discount .timer-block").show(),$(".product-detail-wrapper .discount .timer-block .todays-deal .header").append('<span class = "timer"></span>')):$(".discount .timer-block").hide();var t=$(".product-detail-wrapper").find(".product-desc-block .title .sub-heading1");1==e.data.bestseller.status&&"New"!=t.html()&&(t.html("BestSeller"),t.show())})},getPdpData:function(e){fn_main.showloader(),fn_home.ajaxForm({productId:e},"POST","/home_page/get-pdp-data").done(function(e){res=JSON.parse(e),localStorage.setItem("waysEnjoyData",null),localStorage.setItem("RecipesData",null);var t,a,o,s,n,r=$(".middle-container"),i=$(".bottom-container");i.find(".prod-right").html('<div class="prod-right-title"></div>\n                          <div class="nav_arrow">\n                            <span><i class="left"></i></span>\n                            <span><i class="right"></i></span>\n                          </div>\n                          <ul class="prod-others"\n                            data-cycle-fx="scrollHorz"\n                            data-cycle-carousel-visible=1\n                            data-allow-wrap=false\n                            data-cycle-timeout="2000"\n                            data-cycle-slides="> li"\n                            data-cycle-prev=".nav_arrow .left"\n                            data-cycle-next=".nav_arrow .right">\n                          </ul>'),"success"==res.status&&null!=res.data&&null!=res.data?(t=res.data.branding,a=res.data.how_to_eat,o=res.data.recipes,s=!1,t.sort(fn_product_page.compareData),null!=t&&0!=t.length?($(".product-page-info .info-title").html(""),$(".middle-container-image").html(""),$(".history-block .info-title-left p").html(""),$(".info-title-desc .left-half").html(""),$(".source-desc p").html(""),$(".Ingredient-desc .Ingredient-content").html(""),$(".nutrition-desc").html(""),$(".info-title-desc .right-half").html(""),$.map(t,function(e,t){var a,o;1==e.status&&(s=!0,a='<div class="desc1" data-pdplabel="ProductDetailPage - '+e.title+'" data-gaaction="Click - Impression"><span data-id="'+e.id+'" data-imgurl="'+e.image_url+'">'+e.title+"</span></div>",$(".product-page-info .info-title").append(a),o='<img data-lazy="'+e.image_url+'" class="containerImage'+e.id+'">',$(".middle-container-image").append(o)),1==e.id&&1==e.status&&($(".history-block .info-title-left p").append(e.subtitle),$.map(e.proscons,function(e,t){var a;1==e.type&&(a='<li><span class="right-wrong"><img data-lazy="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/yes.png" style="width:18px;"></span><span class="list-text">'+e.key+"</span></li>",$(".info-title-desc .left-half").append(a)),0==e.type&&(a='<li><span class="right-wrong"><img data-lazy="https://s3-ap-southeast-1.amazonaws.com/liciousdev/Banner/no.png" style="width:18px;"></span><span class="list-text">'+e.key+"</span></li>",$(".info-title-desc .right-half").append(a))})),2==e.id&&1==e.status&&$(".source-desc p").append(e.content),3==e.id&&1==e.status&&$.map(e.content,function(e,t){var a='<li><div class="serial">'+(t+1)+'</div><div class="ingred">'+e+"</div></li>";$(".Ingredient-desc .Ingredient-content").append(a)}),4==e.id&&1==e.status&&$.map(e.content,function(e,t){var a='<div class="data-row"><div class="data-col1"><span>'+e.key+'</span></div><div class="data-col2"><p></p></div><div class="data-col3"><span>'+e.value+"</span></div></div>";$(".nutrition-desc").append(a)})}),fn_product_page.gaClicksPDP($(".product-page-info .info-title .desc1"),"ProductDetailPage"),s||(r.hide(),r.html(""))):(r.hide(),r.html("")),$(".product-page-info .info-title .desc1:first-child").find("span").addClass("nav-active"),n=$(".product-page-info .info-title .desc1:first-child").find(".nav-active").data("id"),$(".product-page-info .info-title .desc1:first-child").find(".nav-active").data("imgurl"),$(".containerImage"+n).addClass("fading"),$(".dataId"+n).show(),$(".product-page-info .info-title .desc1").on("click",function(){$(".product-page-info .info-title .desc1 span").removeClass("nav-active"),$(this).find("span").addClass("nav-active");var e=$(this).find(".nav-active").data("id");$(this).find(".nav-active").data("imgurl"),$(".middle-container-image").find("img").removeClass("fading"),$(".containerImage"+e).addClass("fading"),$(".method").hide(),$(".dataId"+e).show()}),1==a.status&&null!=a.status&&fn_product_page.get_how_to_eat(a),1==o.status&&null!=o.status&&res.data.recipes.recipe_id&&res.data.recipes.recipe_id.length&&(fn_product_page.getPdpRecipeDetails(res.data.recipes.recipe_id,res.data.recipes.status),i.show()),null==a.data&&null==o.recipe_id&&i.hide(),$(".info-Blocks").children().hide(),$(".info-Blocks").children(":first").show()):(r.hide(),r.html(""),i.hide(),i.html("")),fn_home.getAllDOMImages(),fn_main.hideloader()}).fail(function(){elem.hide(),elem2.hide(),fn_main.hideloader()})},pushEEProductClick:function(e){var t,a,o,s,n,r;e&&e.data&&(a=(t=e.data).product_master.pr_name,o=t.product_master.product_id,s=t.product_pricing.base_price,n=t.product_master.gross,r=localStorage.getItem("cat_id"),window.dataLayer&&window.dataLayer.push({event:"view_item",ecommerce:{click:{products:[{item_name:a,item_id:o,price:s,quantity:n,currency:"INR",index:0,item_category:r}]}}}))},populatePDPInventoryUI:function(e,t,a,o){var s,n,r,i,l,d,c,p,u,m,h,f,_,g,v,y,b,k,C,w,S,I,P,x=!(arguments.length<=2||void 0===a)&&a;!(arguments.length<=3||void 0===o)&&o||(s=function(e,t){return Math.round(e-e*t/100,10)},r=(n=e.product_inventory).slot_available,i=n.stock_units,l=n.next_available_by,d=n.slot_custom_message,p=(c=e.product_pricing).base_price,u=c.base_discount,m=c.rounded_base_discount,f=(h=e.product_merchantdising).merchandise_name,_=h.product_id,g=h.pr_image,v=h.product_shortname,h.is_combo,(y=$(".product-details-footer")).attr("data-prod",_),y.find(".pdp-prod-image").attr("data-lazy",g),y.find(".pdp-prod-details .pdp-prod-shortname").html(v||f),y.find(".pdp-prod-details .pdp-prod-fullname").html(v===f?"":f),k=(b=x?$(".combo-parent-wrapper"):$(".product-detail-wrapper")).find(".product-desc-block"),C=l||"",0<i?(S=(w=2==r)?d:C,I='<div class="action-slider1"><button class="add-to-cart addCartBtn-pdp'+(w?" disabled":"")+'" data-cat = "'+t+'" data-amt="'+s(p,u)+'" data-text="'+f+'" data-prid="'+_+'" data-qty="'+i+'">Add To Cart</button><p><span class = "cart-btns remove-one" data-cat = "'+t+'" data-amt="'+s(p,u)+'" data-text="'+f+'" data-prid="'+_+'" data-qty="'+i+'"></span><span class = "item-qty-pdp">0</span><span class = "cart-btns'+(w?" disabled":"")+' add-one"  data-cat = "'+t+'" data-amt="'+s(p,u)+'" data-prid="'+_+'" data-text="'+f+'" data-qty="'+i+'"></span></p></div>',b.find(".rate-block .action").html(I),w&&(k.find(".product-message .message").addClass("oos"),k.find(".product-message").find("img").remove()),k.find(".product-message .message").html(S)):((P=b.find(".notify-me-pdp")).show(),fn_home.validateCookieForProduct(_)?(P.children(".alarm").attr("data-lazy","/img/tick_symbol.svg"),P.addClass("notified"),k.find(".product-message .message").html(fn_home.getNotifiedMsg()),k.find(".product-message .message").removeClass("oos").addClass("notified"),k.find(".product-message .icon-message img").remove()):(k.find(".product-message .message").html(C),k.find(".product-message .message").addClass("oos"),k.find(".product-message .icon-message img").remove(),P.attr("data-pr-id",_),P.attr("data-cat",t),P.attr("data-discount",p*u/100),P.attr("data-price",p),P.attr("data-pr-img-url",g))),0<e.product_pricing.base_discount&&(b.find(".rate .rate1").html("<span>MRP: </span><span class='price'>&#8377; "+p+"</span>/-"),b.find(".rate .offer-percent").html((m||Math.floor(u))+"% OFF")),b.find(".rate .rate2").html((0<e.product_pricing.base_discount?"":'<span style="font-size:15px">MRP: </span>')+s(p,u)),e.product_videos.length&&e.product_videos[0].video_link?b.find(".htc-cta").attr("data-video-embed-url",e.product_videos[0].video_link):b.find(".htc-product-message").addClass("no-htc"),y.find(".pdp-prod-inventory-section").html('\n        <div class="rate-block">\n          '+b.find(".rate-block").html()+'\n        </div>\n        <div class="htc-product-message no-htc">\n          '+b.find(".htc-product-message").html()+"\n        </div>"),""!==C&&(k.find(".product-message").show(),y.find(".product-message").show()),fn_home.bindNotifyMeButton(".notify-me-pdp"))},renderProductDetails:function(e,t){var a=arguments.length<=1||void 0===t||t,o=e.data.product_master.product_id,s=e.data.product_merchantdising.merchandise_name,n=$(".fullSlug").val(),r=n.split("/")[1];Object.assign(productView,{"Product Name":e.data.product_merchantdising.product_shortname,"Hub ID":Number($(".hubId_main").val()),Currency:"INR","Category Name":$(".enabled.active").data("text"),"City Name":localStorage.getItem("city_name"),"Product ID":e.data.product_master.product_id,"Category ID":Number($(".enabled.active").data("id")),"Product Page Image URL Web":e.data.product_merchantdising.pr_image,"Delivery Type":e.data.product_merchantdising.product_delivery_type}),a&&fn_product_page.productViwedCache(o,s,n);var i,l,d,c,p,u,m,h,f,_,g,v=$(".main-product-details");"success"==e.status&&null!=e.data&&null!=e.data?(i=function(e,t){return Math.round(e-e*t/100,10)},l=e.data.product_merchantdising,d=e.data.product_master,c=e.data.product_pricing,is_combo_child||$(".product-breadcrumb").find(".third").text(d.pr_name),$(".pdp_title").append("Licious | "+d.pr_name),p=l.created_at.replace(" ","T").split(/[^0-9]/),u=new Date(p[0],p[1]-1,p[2],p[3],p[4],p[5]).getTime(),m=((new Date).getTime()-u)/1e3/60/1440,h=$(".product-desc-block .title .sub-heading1"),m<10&&(h.html("New"),h.show()),fn_product_page.populatePDPInventoryUI(e.data,r,"",is_combo_child),Object.assign(productView,{"Product Page Availability Status":"OOS"}),$(".product-detail-wrapper").find(".product-desc-block").attr("data-prod",d.product_id),$(".product-detail-wrapper").find(".product-desc-block").find(".heading").html(l.product_shortname),$(".product-detail-wrapper").find(".product-desc p").html(l.description),$(".sub-title").html(""),f=l.product_header_tags.split("|"),""!=l.product_header_tags?$.map(f,function(e,t){var a='<span class="sub-title-list">'+e+"</span>";$(".sub-title").append(a)}):$(".sub-title").hide(),0<c.base_discount?($(".discount").show(),$(".discount-per").html(c.base_discount+"% Off"),Object.assign(productView,{"Before Discount Price":Number(c.base_price),"After Discount Price":Number(i(c.base_price,c.base_discount)),"Discount Percentage":Number(c.base_discount),"Discount Amount":Number(c.base_price-i(c.base_price,c.base_discount))})):($(".discount").hide(),Object.assign(productView,{Price:Number(c.base_price)})),_=i(c.base_price,c.base_discount),l.cooking_time?(g='<div class="qty-block"><div class="block-container"> <div class="block1"><div class="icon-image"> <img data-lazy="'+l.pdp_pieces_img_url+'"> </div><div class="block-text UL">No. of Pieces '+l.no_of_piceces+'</div></div><div class="block2"><div class="icon-image"><img data-lazy="'+l.pdp_serves_img_url+'"></div><div class="block-text UR">Serves '+l.serves+'</div></div></div><div class="block-container"><div class="block1"><div class="icon-image"> <img data-lazy="'+l.pdp_cooktime_img_url+'"> </div><div class="block-text LL">Cooking time '+l.cooking_time+'</div></div> <div class="block2"> <div class="icon-image"><img data-lazy="'+l.net_wt_img_pdp+'"></div><div class="block-text LR">Net wt. '+l.pdp_net_wt+"</div> </div> </div> </div>",$(".quantity-block").html(g)):l.pdp_gross_wt?(g='<div class="qty-block"><div class="block-container"> <div class="block1"><div class="icon-image"> <img src="'+l.pdp_pieces_img_url+'" > </div><div class="block-text UL">No. of Pieces '+l.no_of_piceces+'</div></div><div class="block2"><div class="icon-image"><img src="'+l.pdp_serves_img_url+'" ></div><div class="block-text UR">Serves '+l.serves+'</div></div></div><div class="block-container"><div class="block1"><div class="icon-image"> <img data-lazy="'+l.gross_wt_img_pdp+'" > </div><div class="block-text LL">Gross Wt. '+l.pdp_gross_wt+'</div></div><div class="seafood-block"> <span class="image1"> <img data-lazy="https://d2407na1z3fc0t.cloudfront.net/Banner/dotline.png"  style="width: 100px;"> </span><span class="image2" > <img src="https://d2407na1z3fc0t.cloudfront.net/Banner/knife.png" style="width: 20px;"> </span> </div> <div class="block2"> <div class="icon-image"><img src="'+l.net_wt_img_pdp+'"></div><div class="block-text LR">Net wt. '+l.pdp_net_wt+"</div> </div> </div> </div>",$(".quantity-block").html(g)):l.best_before&&l.no_of_piceces?(g='<div class="qty-block"> <div class="block-container"> <div class="block1"> <div class="icon-image"><img data-lazy="'+l.pdp_bestbefore_img_url+'" > </div> <div class="block-text UL">Best before '+l.best_before+'</div> </div><div class="block2"> <div class="icon-image"> <img data-lazy="'+l.pdp_pieces_img_url+'" > </div><div class="block-text UR">No. of Pieces '+l.no_of_piceces+"</div> </div> </div> </div>",$(".quantity-block").html(g)):l.best_before&&l.pdp_net_wt?(g='<div class="qty-block"> <div class="block-container"> <div class="block1"> <div class="icon-image"><img data-lazy="'+l.pdp_bestbefore_img_url+'" > </div> <div class="block-text UL">Best before '+l.best_before+'</div> </div><div class="block2"> <div class="icon-image"> <img data-lazy="'+l.net_wt_img_pdp+'" > </div><div class="block-text UR">Net wt. '+l.pdp_net_wt+"</div> </div> </div> </div>",$(".quantity-block").html(g)):l.pdp_gross_wt||l.best_before||l.cooking_time||(g='<div class="qty-block"> <div class="block-container"> <div class="block1"> <div class="icon-image"><img data-lazy="'+l.pdp_pieces_img_url+'"> </div> <div class="block-text UL">No. of Pieces '+l.no_of_piceces+'</div> </div><div class="block2"> <div class="icon-image"> <img src="'+l.net_wt_img_pdp+'" > </div><div class="block-text UR">Net wt. '+l.pdp_net_wt+"</div> </div> </div> </div>",$(".quantity-block").html(g)),$(".product-image-block").html('<div class="prod_slider"\n                                data-cycle-fx=scrollHorz\n                                data-cycle-pager=".prod-pager"\n                                data-cycle-pause-on-hover="true">\n                              </div>\n                              <div class="prod-pager"></div>'),0!=l.images.length||null!=l.images?$.map(l.images,function(e,t){var a='<img data-lazy="'+e+'" data-index = "'+t+'" style = "opacity: 1" alt="">';$(".prod_slider").append(a)}):(g='<img data-lazy="/img/user_avatar.png" style = "opacity: 1" alt="">',$(".prod_slider").append(g)),1==l.images.length?$(".prod-pager").hide():$(".prod-pager").show(),null!=l.pdp_gross_wt&&""!=l.pdp_gross_wt&&Object.assign(productView,{"Gross Weight":l.pdp_gross_wt}),null!=l.pdp_net_wt&&""!=l.pdp_net_wt&&Object.assign(productView,{"Net Weight":l.pdp_net_wt}),null!=l.serves&&""!=l.serves&&Object.assign(productView,{Serves:l.serves}),null!=l.no_of_piceces&&""!=l.no_of_piceces&&Object.assign(productView,{Pieces:l.no_of_piceces}),a&&branch.logEvent("view_item",{price:_,currency:"INR",item_name:l.product_shortname,event_name:"view_item"})):v.hide(),fn_home.getAllDOMImages(),fn_product_page.assignCarouselClickEvents(),fn_product_page.getPdpData(l.product_id)},getProductDetails:function(e){var t=void 0;fn_home.ajaxForm({productId:e},"POST","/home_page/get-prod-details").done(function(e){res=JSON.parse(e),fn_product_page.pushEEProductClick(res),t=res.data.product_merchantdising.product_id,res.data.hasOwnProperty("child_products")&&Array.isArray(res.data.child_products)&&res.data.child_products.length&&function(){var a=res.data.child_products,e=res.data.product_videos.length&&res.data.product_videos[0].video_link,t=res.data.product_merchantdising,o=t.product_shortname,s=t.merchandise_name,n=t.product_id,r=t.pr_image,i=t.description;$(".product-breadcrumb").find(".third").text(s);var l='<img class="combo-image-block" src="'+r+'" />\n                                      <div class="product-desc-block" data-prod='+n+'>\n                                        <h1 class="heading">'+(o||s)+'</h1>\n                                        <p class="heading-full">'+s+'</p>\n                                        <div class="product-desc"><p>'+i+'</p></div>\n                                        <div class="rate-block">\n                                          <div class="rate">\n                                            <span class="rate2"></span>\n                                            <span class="rate1"></span>\n                                            <span class="offer-percent"></span>\n                                          </div>\n                                          <div class="out-of-stock">Out of Stock</div>\n                                          <div class="action">\n                                            <button type="button" class="notify-me notify-me-pdp"><img data-lazy="/img/alarm.svg" class="alarm" /><span class="notify-me-text">NOTIFY ME</span></button>\n                                          </div>\n                                        </div>\n                                        <div class="htc-product-message '+(e?"":"no-htc")+'">\n                                          <div class="htc-cta" data-video-embed-url="'+(e?res.data.product_videos[0].video_link:"")+'" data-page="product_page">\n                                            <img class="htc-play-symbol" src="/img/play_icon.svg" alt="playbutton"/>\n                                            <span class="cta-text">How to cook</span>\n                                          </div>\n                                          <div class="product-message">\n                                            <div class="icon-message">\n                                              <img src="/img/express_delivery.svg" class="scooter" />\n                                              <span class="message"></span>\n                                            </div>\n                                          </div>\n                                        </div>\n                                      </div>';$(".combo-parent-wrapper").html(l),fn_product_page.populatePDPInventoryUI(res.data,"combos",!0,!1);var d='<div class="product-switch-bar">';a.map(function(e,t){d+='<div class="product'+(0==t?" active-prod":"")+'" product_id='+e.product_master.product_id+" index="+t+"> "+(e.product_master.item_display_name?e.product_master.item_display_name:"ITEM "+(t+1))+" </div>"}),d+="</div>",$(".product-detail-wrapper").before(d),$(".product-detail-wrapper").find(".discount").css("top","70px"),res.data=a[0],$(".product-switch-bar").find(".product").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=$(this).attr("index");res.data=a[t],fn_product_page.renderProductDetails(res,!1),$(".product-switch-bar").find(".product").removeClass("active-prod"),$(this).addClass("active-prod")}),is_combo_child=!0}(),fn_product_page.renderProductDetails(res)}).always(function(){fn_product_page.addcartPdpPage("pdp","Product Detail page - "+$(".enabled.active").data("text")+" - "+res.data.product_merchantdising.product_shortname),fn_product_page.removecart("pdp"),fn_product_page.pdpScroll(t)}).fail(function(){elem.hide()})},assignCarouselClickEvents:function(){$(".prod_slider").cycle({fx:"scrollHorz",timeout:5e3,"pause-on-hover":!0}),$(".prod_slider").on("cycle-after",function(e,t){ga("send",{hitType:"event",eventCategory:$(".enabled.active").data("text")+"ProductView",eventAction:"Impression",eventLabel:parseInt(t.index+1)+"Picture"})}),$(".prod_slider").on("cycle-prev",function(e,t){var a=t.slides[t.currSlide].dataset;Number(a.index),ga("send",{hitType:"event",eventCategory:$(".enabled.active").data("text")+"ProductView",eventAction:"Impression",eventLabel:parseInt(t.index+1)+"Picture"})}),$(".prod_slider").on("cycle-next",function(e,t){var a=t.slides[t.currSlide].dataset;Number(a.index),ga("send",{hitType:"event",eventCategory:$(".enabled.active").data("text")+"ProductView",eventAction:"Impression",eventLabel:parseInt(t.index+1)+"Picture"})})},GaEventPdpcart:function(e,t,a,o){ga("send","event",{eventCategory:e,eventAction:t,eventLabel:a,eventValue:o})},addcartPdpPage:function(i){$(".addCartBtn-pdp").on("click",function(e){e.preventDefault();var t,a=$(this),o=parseInt(a.parent().find(".item-qty-pdp").html()),s=$(this).data("prid"),n=$(this).data("qty"),r=o+1;r<=n?a.hasClass("ub")||(a.css("opacity","0.7").prop("disabled",!0),t="/checkout_oos/cart-item-update/"+s+"/"+r,a.parent().find(".item-qty-pdp").val(r),a.parent().find(".item-qty-pdp").attr("data-qty",r),a.addClass("ub"),fn.checkout_oos.ajaxForm({},"POST",t).done(function(e){var t=JSON.parse(e);fn_home.pushEEAddToCartNotOnCartView(t),fn_home.checkForCombo(t,i),""!=t.message?($(".add_message").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+t.message).show(),a.parent().find(".item-qty-pdp").attr("data-qty",t.product.quantity),$('[data-prod="'+s+'"]').addClass("complete")):($(".add_message").hide(),"success"==t.status?(fn_home.updateAvailabilityMsg(t,a),fn.checkout_oos.updateCartBtn(t.item_count),a.parent().find(".item-qty-pdp").html(t.product.quantity),a.parent().find(".item-qty-pdp").attr("data-qty",t.product.quantity),fn_product_page.findUpdate(s,t.product.quantity),a.parent().addClass("slide"),$('[data-prod="'+s+'"]').find(".load_elem").addClass("complete"),"pdp"==i&&(fn_product_page.GaEventPdpcart("Cart",localStorage.getItem("cat_slug")+"CategoryPDPProductAddedToCart",a.data("text"),a.data("amt")),clevertap.event.push("Product added to cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,Price:Number(t.product.base_price),Quantity:Number(t.product.quantity),"Category ID":t.product.category_id?t.product.category_id:"",Checkout_Flow:old_checkout,incoming_source:"pdp",hub_id:fn_ll.getterLS("hub_id")})),fbq("track","AddToCart",{content_type:"product",content_ids:t.product.product_id,content_name:t.product.product_name,content_category:a.data("cat"),value:a.data("amt"),currency:"INR"})):Materialize.toast(t.message,3e3)),clevertap.event.push("Added to Cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,Price:t.product.base_price,Quantity:t.product.quantity,Checkout_Flow:old_checkout,"Category ID":t.product.category_id?t.product.category_id:"",incoming_source:"pdp",hub_id:fn_ll.getterLS("hub_id")}),fn_home.sendBranchEvent("add_to_cart",t.product)}).always(function(){a.removeClass("ub"),setTimeout(function(){$('[data-prod="'+s+'"]').find(".load_elem").remove(),a.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},7e3)})):Materialize.toast("Only "+n+" units left",3e3)}),$(".add-one").on("click",function(e){if(e.preventDefault(),e.stopImmediatePropagation(),!$(this).hasClass("disabled")){var t,a=$(this),o=parseInt(a.parent().find(".item-qty-pdp").html()),s=$(this).data("prid"),n=$(this).data("qty"),r=o+1;if(!(r<=n))return void Materialize.toast("Only "+n+" units left",3e3);a.hasClass("ub")||(a.css("opacity","0.7").prop("disabled",!0),t="/checkout_oos/cart-item-update/"+s+"/"+r,a.parent().find(".item-qty-pdp").val(r),a.parent().find(".item-qty-pdp").attr("data-qty",r),a.addClass("ub"),fn.checkout_oos.ajaxForm({},"POST",t).done(function(e){var t=JSON.parse(e);fn_home.pushEEAddToCartNotOnCartView(t),fn_home.checkForCombo(t,i),""!=t.message?($(".add_message").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+t.message).show(),a.parent().find(".item-qty-pdp").attr("data-qty",t.product.quantity),a.parent().addClass("slide"),$('[data-prod="'+s+'"]').find(".load_elem").addClass("complete")):($(".add_message").hide(),"success"==t.status?(fn_home.updateAvailabilityMsg(t,a),fn.checkout_oos.updateCartBtn(t.item_count),a.parent().find(".item-qty-pdp").html(t.product.quantity),a.parent().find(".item-qty-pdp").attr("data-qty",t.product.quantity),a.parent().addClass("slide"),fn_product_page.findUpdate(s,t.product.quantity),$('[data-prod="'+s+'"]').find(".load_elem").addClass("complete"),"pdp"==i&&fn_product_page.GaEventPdpcart("Cart",localStorage.getItem("cat_slug")+"CategoryPDPProductAddedToCart",a.data("text"),a.data("amt"))):Materialize.toast(t.message,3e3)),clevertap.event.push("Added to Cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,Price:t.product.base_price,Quantity:t.product.quantity,"Category ID":t.product.category_id?t.product.category_id:"",Checkout_Flow:old_checkout,incoming_source:"pdp",hub_id:fn_ll.getterLS("hub_id")}),fn_home.sendBranchEvent("add_to_cart",t.product),clevertap.event.push("Product added to cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,Price:Number(t.product.base_price),Quantity:Number(t.product.quantity),"Category ID":t.product.category_id?t.product.category_id:"",Checkout_Flow:old_checkout,incoming_source:"pdp",hub_id:fn_ll.getterLS("hub_id")})}).always(function(){a.removeClass("ub"),setTimeout(function(){$('[data-prod="'+s+'"]').find(".load_elem").remove(),a.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},7e3)}))}})},findUpdate:function(e,t){var a=$('[data-prod="'+e+'"]');a.find(".item-qty").html(t),a.find(".item-qty-pdp").html(t),a.find(".item-qty-pdp").attr("data-qty",t),0<t?(a.find(".action-slider").addClass("slide"),a.find(".action-slider1").addClass("slide")):(a.find(".action-slider").removeClass("slide"),a.find(".action-slider1").removeClass("slide"))},removecart:function(r){$(".remove-one").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation();var a=$(this),t=parseInt(a.parent().find(".item-qty-pdp").html()),o=$(this).data("prid"),s=($(this).data("qty"),t-1);if(0<s){if(a.hasClass("ub"))return;a.css("opacity","0.7").prop("disabled",!0);var n="/checkout_oos/cart-item-update/"+o+"/"+s;a.parent().find(".item-qty-pdp").val(s),a.parent().find(".item-qty-pdp").attr("data-qty",s),a.addClass("ub"),fn.checkout_oos.ajaxForm({},"POST",n).done(function(e){var t=JSON.parse(e);fn_home.pushEERemoveFromCartNotOnCartView(t),fn_home.checkForCombo(t,r),""!=t.message?($(".add_message").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+t.message).show(),a.parent().find(".item-qty-pdp").attr("data-qty",t.product.quantity),$('[data-prod="'+o+'"]').find(".load_elem").addClass("complete")):($(".add_message").hide(),"success"==t.status?(fn_home.updateAvailabilityMsg(t,a),fn.checkout_oos.updateCartBtn(t.item_count),a.parent().find(".item-qty-pdp").html(t.product.quantity),a.parent().find(".item-qty-pdp").attr("data-qty",t.product.quantity),fn_product_page.findUpdate(o,t.product.quantity),$('[data-prod="'+o+'"]').find(".load_elem").addClass("complete"),"pdp"==r&&fn_product_page.GaEventPdpcart("Cart",localStorage.getItem("cat_slug")+"CategoryPDPProductRemovedFromCart",a.data("text"),a.data("amt")),clevertap.event.push("Product Removed from Cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,"Product Price":t.product.base_price,incoming_source:"pdp"}),fn_home.sendBranchEvent("remove_from_cart",t.product)):Materialize.toast(t.message,3e3))}).always(function(){a.removeClass("ub"),setTimeout(function(){$('[data-prod="'+o+'"]').find(".load_elem").remove(),a.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},7e3)})}else{a.css("opacity","0.7").prop("disabled",!0);n="/checkout_oos/cart-item-delete/"+o;fn.checkout_oos.ajaxForm({},"POST",n).done(function(e){var t=JSON.parse(e);fn_home.pushEERemoveFromCartNotOnCartView(t),""!=t.message?($(".add_message").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+t.message).show(),a.parent().find(".item-qty-pdp").attr("data-qty",t.quantity),a.parent().parent().removeClass("slide"),$('[data-prod="'+o+'"]').find(".load_elem").addClass("complete")):($(".add_message").hide(),"success"==t.status?(fn_home.updateAvailabilityMsg(t,a),fn.checkout_oos.updateCartBtn(t.item_count),a.parent().find(".item-qty-pdp").html(t.quantity),a.parent().find(".item-qty-pdp").attr("data-qty",t.quantity),a.parent().parent().removeClass("slide"),fn_product_page.findUpdate(o,t.quantity),$('[data-prod="'+o+'"]').find(".load_elem").addClass("complete"),"pdp"==r&&fn_product_page.GaEventPdpcart("Cart",localStorage.getItem("cat_slug")+"CategoryPDPProductRemovedFromCart",a.data("text"),a.data("amt")),clevertap.event.push("Product Removed from Cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,"Product Price":t.product.base_price,incoming_source:"pdp"}),fn_home.sendBranchEvent("remove_from_cart",t.product,!0)):Materialize.toast(t.message,3e3))}).always(function(){a.removeClass("ub"),setTimeout(function(){$('[data-prod="'+o+'"]').find(".load_elem").remove(),a.css("opacity","1").prop("disabled",!1)},600),setTimeout(function(){$(".add_message").hide()},7e3)})}})},getCartPDP:function(){fn_home.ajaxForm({},"get","/checkout_oos/order-summary").done(function(e){var t=JSON.parse(e);0<t.items_count&&$.map(t.products,function(e){var t;0<e.quantity&&((t=$('[data-prod="'+e.product_id+'"]')).find(".item-qty-pdp").html(e.quantity),t.find(".item-qty-pdp").attr("data-qty",e.quantity),t.find(".action-slider1").addClass("slide"))})})},likeCarouselPDP:function(){$(".deals.also-like"),$(".prev-also-like").addClass("disabled");var d=0,c=0,p=!1;$(".next-also-like").on("click",function(){var e,t,a,o,s,n,r,i,l;p=(p||(p=!0,e=localStorage.getItem("youMayAlsoLikePDP"),a=(t=JSON.parse(e)).length,o=Math.ceil(a/3),c<3*o&&(c+=3,s=t.splice(c,3),$.map(s,function(e,t){ga("send",{hitType:"event",eventCategory:localStorage.getItem("cat_slug")+"PDP - Consumers Also Viewed",eventAction:"Impression",eventLabel:e.product_merchantdising.merchandise_name+" - Pos:"+parseInt(c+(t+1))})})),n=$(".also-like").find(".card").length,r=$(".also-like .item-slider").innerWidth(),d<Math.ceil(n/3)-1&&d++,l=0<(i=n%3)?n-i:n-3,3<n&&n<7&&$(".prev-also-like").removeClass("disabled"),3*d+1<l?$(".prev-also-like").removeClass("disabled"):$(".next-also-like").addClass("disabled"),$(".item-slider.also-like").scrollTo(r*d-.4,750)),!1)}),$(".prev-also-like").on("click",function(){var e,t,a,o,s,n;p?p=!1:(p=!0,e=localStorage.getItem("youMayAlsoLikePDP"),a=(t=JSON.parse(e)).length,Math.ceil(a/3),0<c&&(c-=3,o=t.splice(c,3),$.map(o,function(e,t){ga("send",{hitType:"event",eventCategory:localStorage.getItem("cat_slug")+"PDP - Consumers Also Viewed",eventAction:"Impression",eventLabel:e.product_merchantdising.merchandise_name+" - Pos:"+parseInt(c+(t+1))})})),s=$(".also-like").find(".card").length,0<d&&d--,3<s&&s<7&&($(".prev-also-like").addClass("disabled"),$(".next-also-like").removeClass("disabled")),0<d?$(".next-also-like").removeClass("disabled"):$(".prev-also-like").addClass("disabled"),n=$(".also-like .item-slider").innerWidth(),$(".item-slider.also-like").scrollTo(n*d,750),setTimeout(function(){p=!1},350))})},compareData:function(e,t){return e.order<t.order?-1:e.order>t.order?1:0},gaClicksPDP:function(e,o){$(e).click(function(e){e.preventDefault();var t=parseInt(e.currentTarget.dataset.index)+1,a=e.currentTarget.getAttribute("target");e.currentTarget.dataset.scname&&e.currentTarget.dataset.scname,e.currentTarget.dataset.text;"addCartBtn-home"!==e.target.classList[1]&&(ga("send",{hitType:"event",eventCategory:o,eventAction:e.currentTarget.dataset.gaaction,eventLabel:e.currentTarget.dataset.pdplabel,transport:"beacon"}),"A"==e.target.tagName&&a?window.open(e.target.href,"_blank"):"A"==e.target.tagName&&(window.location.href=e.target.href),e.currentTarget.href&&a?window.open(e.currentTarget.href,"_blank"):e.currentTarget.href&&(window.location.href=e.currentTarget.href))})},pdpScroll:function(e){var o=$(".pdp-info"),s=!0,n=$(".deals.also-like"),r=!0,i=$(".prod-right"),l=!0,d=$(".made-with-licious"),c=!0,p=$(".prod_slider"),u=document.querySelector("[data-prod="+e+"]").querySelector(".rate-block");parseInt(o.position().top)<window.innerHeight&&o.addClass("reveal"),window.addEventListener("scroll",function(){var e,t,a;fn_ll.checkElementInViewPort(u,!0)?($(".product-details-footer").removeClass("fade-in"),$(".track-order-container").css("bottom","0px")):($(".product-details-footer").addClass("fade-in"),$(".track-order-container").css("bottom",$(".product-details-footer").height()+20),$(".track-order-container").css("transform","translateY(0)")),parseInt(window.pageYOffset),null!=o.find(".desc1").eq(0).data("pdplabel")&&s&&$(window).scrollTop()>=parseInt(o.offset().top)-window.innerHeight&&(ga("send",{hitType:"event",eventCategory:"ProductDetailPage",eventAction:"Click - Impression",eventLabel:o.find(".desc1").eq(0).data("pdplabel")}),s=!1),r&&$(window).scrollTop()>=parseInt(n.offset().top-window.innerHeight)&&(e=JSON.parse(localStorage.getItem("youMayAlsoLikePDP")),$.map(e,function(e,t){t<3&&ga("send",{hitType:"event",eventCategory:localStorage.getItem("cat_slug")+"PDP - Consumers Also Viewed",eventAction:"Impression",eventLabel:e.product_merchantdising.merchandise_name+" - Pos:"+parseInt(t+1)})}),r=!1),c&&$(window).scrollTop()>=parseInt(d.offset().top)-window.innerHeight&&(fn_home.homeTestimonials("pdp"),c=!1),p.length&&$(window).scrollTop()>=parseInt(window.innerHeight-p.offset().top+110)?$(".prod_slider").cycle("pause"):$(".prod_slider").cycle("resume"),l&&$(window).scrollTop()>=parseInt(i.offset().top)-window.innerHeight&&(t=JSON.parse(localStorage.getItem("waysEnjoyData")),a=JSON.parse(localStorage.getItem("RecipesData")),null!=t&&$.map(t,function(e,t){t<6&&ga("send",{hitType:"event",eventCategory:localStorage.getItem("cat_slug")+"PDP - Recipe",eventAction:"Impression",eventLabel:e.title+" - Pos:"+(t+1)})}),null!=a&&$.map(a,function(e,t){t<6&&ga("send",{hitType:"event",eventCategory:localStorage.getItem("cat_slug")+"PDP - Recipe",eventAction:"Impression",eventLabel:e.title+" - Pos:"+(t+1)})}),l=!1)})},productViwedCache:function(e,t,a){fn_home.ajaxForm({prId:e,prName:t,slug:a},"POST","/prod-viewed-cache").done(function(e){})}},fn_sublocation={gaSublocation:function(e,t,a){ga("send",{hitType:"event",eventCategory:e,eventAction:t,eventLabel:a,transport:"beacon"})}};var CCValdiation=function(){var t;function e(e){return t.apply(this,arguments)}return{validateCreditCardNumber:(t=function(e){if(e){return/^\d{12,16}$/.test(e)}return!1},e.toString=function(){return t.toString()},e),validateCreditCardCvv:function(e){if(e){var t=/^[0-9]{3,4}$/;return t.test(e)}return!1},validateCreditCardMon:function(e){return!!e&&1<=e&&e<=12},validateCreditCardYear:function(e){if(e){var t=(new Date).getFullYear();return t<=e&&e<=t+100}return!1}}}(),resetWalletPaymentDetails=function(){function e(){s.trigger("reset")}function t(){n.trigger("reset")}function a(){r.prop("checked",!1)}function o(){i.val("")}var s=$(".li-card-details"),n=$(".netbanking"),r=$('input[name="walletAmount"]'),i=$("#licioius-wallet");return{resetCreditCardForm:e,resestNetbankingForm:t,resetRadioButton:a,resetLiciousWallet:o,clearLiContainer:function(){e(),t(),a(),o()}}}(),product_delId=0,shipId=0,prname="",amt="",quantity="",checkoutStart={};$(document).ready(function(){function s(e,t){e.attr("type","button"),"loading-text-pop"!=t?(e.addClass(t),e.html("<span>.</span><span>.</span><span>.</span>")):(e.addClass(t+" animated flipInY"),e.html(""))}function n(e,t){e.attr("type","submit"),"loading-text-pop"!=t?e.removeClass(t):e.removeClass(t+" animated flipInY").addClass("animated flipInY").removeClass("animated flipInY"),e.html(e.attr("data-name"))}function m(e,t,a){return $.ajax({url:a,type:t,data:e,timeout:2e4,headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}})}function u(e,t,a){return $.ajax({url:a,type:t,data:e,timeout:2e4})}function o(t){m({pin:$(t).val()},"POST",$(t).attr("data-url")).done(function(e){"error"==e.result?($(t).val(""),$(".pincode-error").html(e.msg),$(".cust-new-addr-btn").addClass("btn-default").attr("type","button")):($(".pincode-error").html(""),$(".cust-new-addr-btn").addClass("address-validated"),$(".cust-new-addr-btn").addClass("address-validated"),$(".cust-new-addr-btn").removeClass("btn-default").attr("type","submit"))})}function h(){m("","GET","/cart/fetchbalance").done(function(e){e.result,$(".lc-wallet-amount.balance").html("&#8377;"+e.newbalance)})}-1<window.location.href.indexOf("type=login")&&document.getElementsByClassName("login-user")[0].click(),(new Profile).init();function a(e){e.addClass("no-border no-background"),e.closest("li").addClass("color-green"),e.html('<img src="/img/Check-Option.png">')}function r(){var e=$(this).attr("data-type");return"summary"==e&&($(".ossitemshead").remove(),$(".ossitems").remove(),$(".check-step-1").addClass("lock"),$(".check-step-1 > .checkout-number").removeClass("no-border no-background"),$(".check-step-1").removeClass("color-green"),$(".check-step-1 > .checkout-number").html("1"),$(".check-step-2 > .checkout-number").removeClass("no-border no-background"),$(".check-step-2").removeClass("color-green"),$(".check-step-2").addClass("inactive-checkout"),$(".check-step-2 > .checkout-number").html("2"),$(".check-step-3 > .checkout-number").removeClass("no-border no-background"),$(".check-step-3").removeClass("color-green"),$(".check-step-3").addClass("inactive-checkout"),$(".check-step-3 > .checkout-number").html("3")),("summary"==e||!$(".check-step-1").hasClass("lock"))&&("payment"==e&&""==$(".customAddressId").val()?(Materialize.toast("Please select delivery address",3e3),!1):($(".check-step-2 > .checkout-number").removeClass("no-border no-background"),$(".check-step-2").removeClass("color-green"),$(".check-step-2 > .checkout-number").html("2"),$(".check-step-3 > .checkout-number").removeClass("no-border no-background"),$(".check-step-3").removeClass("color-green"),$(".check-step-3 > .checkout-number").html("3"),"later"==$(".customDeliveryType").val()&&""==$(".customAddressId").val()?(Materialize.toast("Please select delivery Slot",3e3),!1):($(".checkout-tab").removeClass("active animated fadeIn"),$(".checkout-tab."+e).addClass("active animated fadeIn"),void($(".lec-btn-prodeed-pay-tab").hasClass("exotic")&&(""==$("#exoticdate").val()?Materialize.toast("Please select Exotic delivery Slot",3e3):m({slotEx:$("#exoticslot").val(),dateEx:$("#exoticdate").val()},"POST",$(".delivery-slot-row-exotic").attr("data-url")).done(function(e){}))))))}$(".bxslider").bxSlider({auto:!0,onSliderLoad:function(){$(".lic-banner").css("visibility","visible"),$(".bx-controls-direction").hide()}}),$(".button-collapse").sideNav(),$(".modal-trigger").leanModal({ready:function(){}}),$("select").material_select(),$(document.body).on("click",".order-summary-close",function(){var e=($(this).closest("tr").attr("data-productdetails"),$(this).closest("tr").attr("data-hubid")),t="/checkoutproduct/remove/"+$(this).closest("tr").attr("data-productdetails")+"/"+e;m($(this).serialize(),"POST",t).done(function(e){var t=JSON.parse(e),a=JSON.parse(t.response),o=t.pr_count,s=$(".checkout-divs").find('[data-productdetails="'+a.product_id+'"]');"error"==a.status?$(".cart-item-total").removeClass("loading-text-pop"):(""!=a.message?($(".add_message").hasClass("hide")&&$(".add_message").removeClass("hide"),$(".add_message").show(),$(".aux-checkout-btn").removeClass("lec-btn-prodeed-payment"),$(".aux-checkout-btn").addClass("disabled"),$(".aux-checkout-btn").prop("disabled",!0)):($(".add_message").addClass("hide"),$(".aux-checkout-btn").addClass("lec-btn-prodeed-payment"),$(".aux-checkout-btn").removeClass("disabled"),$(".aux-checkout-btn").prop("disabled",!1)),s.addClass("animated fadeOut"),$(".cart").find("i").html(o),o<1&&$(".cart").removeClass("loaded"),setTimeout(function(){s.remove(),$("#couponSubmit > .cpn-apply-btn").hasClass("remove-cpn")&&$("#couponSubmit, .couponSubmit").submit(),$(".productlists > tbody > tr[data-type='products']").length<1&&$(".express-cont").remove(),$(".productlists > tbody > tr[data-type='exotic']").length<1&&$(".exotic-cont").remove(),0<$(".productlists > tbody > tr").length?(0==parseFloat(a.grand_total)&&($(".checkout-delivery").html("&#8377; 0"),$(".checkout-vatValue").html("&#8377; 0")),$(".checkout-gtotal").html("&#8377; "+a.grand_total),$(".citrusAmount").val(100*e.cartTotal),$("#lc-wallet-div").attr("data-lcpay",a.grand_total),$(".customCpn").val(e.coupon),$(".checkout-payment-btn.cod").html("Place Order &#8377; "+a.grand_total),parseFloat(a.grand_total)<parseFloat($("#lc-wallet-div").attr("data-wbal"))&&$(".lc-wallet-deduct-info").html("&#8377; "+a.grand_total+" will be deducted from the payable amount"),$(".checkout-payment-btn").val("Pay Now Rs. "+a.grand_total),0==parseFloat(a.grand_total)&&$(".checkout-payment-btn:not(.cod)").attr("disabled","disabled").addClass("disabled"),$(".checkout-gtotal").html("&#8377; "+a.grand_total)):($(".check-step").addClass("inactive-checkout"),$(".cart-summary-edit").html('<div class="col s12 mini-cart-empty-msg"><span class="lec-red-text"><center>Don\'t Be shy! Go ahead. Add a few items to your cart.</span><br/><a href="/" class="btn lec-red-bg">Continue Shopping</a></div><center></div>'))},800))})}),$(document).delegate(".update-cart-products","change",function(e){e.stopImmediatePropagation();var i=$(this).closest("tr").find(".cart-item-total").html(),l=$(this);$(this).closest("tr").find(".cart-item-total").html(""),$(this).closest("tr").find(".cart-item-total").addClass("loading-text-pop"),$(this).closest("tr").find(".cart-item-total").addClass("t-"+$(this).attr("data-id"));var d="t-"+$(this).attr("data-id"),c="q-"+$(this).attr("data-id"),p="tc-"+$(this).attr("data-id"),t=$(".hub_id").data("hubid"),u=$(this).val(),a="/product/update/"+$(this).attr("data-id")+"/"+$(this).attr("data-type")+"/"+$(this).val()+"/"+t;m($(this).serialize(),"POST",a).done(function(e){var t,a,o,s,n=JSON.parse(e),r=JSON.parse(n.response);n.pr_count,"error"==r.status?(Materialize.toast("Not Enough Stock Available",3e3),$(".cart-item-total").removeClass("loading-text-pop"),l.closest("tr").find(".cart-item-total").html(i)):(""!=r.message?($(".add_message").show(),$(".add_message").removeClass("hide"),$(".aux-checkout-btn").removeClass("lec-btn-prodeed-payment"),$(".aux-checkout-btn").addClass("disabled"),$(".aux-checkout-btn").prop("disabled",!0)):($(".add_message").hide(),$(".aux-checkout-btn").addClass("lec-btn-prodeed-payment"),$(".aux-checkout-btn").removeClass("disabled"),$(".aux-checkout-btn").prop("disabled",!1)),$("."+d).removeClass("loading-text-pop"),$("."+d).html("&#8377; "+parseFloat(r.product.total).toFixed(2)+'<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/close-button.png" class="order-summary-close">'),$("."+c).html(u),$("."+p).html("&#8377; "+parseFloat(r.product.total).toFixed(2)),fn.checkout.continue(),0==parseFloat(r.grand_total)&&($(".checkout-delivery").html("&#8377; 0"),$(".checkout-vatValue").html("&#8377; 0")),$(".checkout-gtotal").html("&#8377; "+r.grand_total),$(".citrusAmount").val(100*r.grand_total),$("#lc-wallet-div").attr("data-lcpay",parseFloat(r.grand_total).toFixed(2)),$(".customCpn").val(e.coupon),$(".checkout-payment-btn.cod").html("Place Order &#8377; "+parseFloat(r.grand_total).toFixed(2)),parseFloat(r.grand_total)<parseFloat($("#lc-wallet-div").attr("data-wbal"))&&$(".lc-wallet-deduct-info").html("&#8377; "+parseFloat(r.grand_total).toFixed(2)+" will be deducted from the payable amount"),$(".checkout-payment-btn").val("Pay Now Rs. "+parseFloat(r.grand_total).toFixed(2)),0==parseFloat(r.grand_total)&&$(".checkout-payment-btn:not(.cod)").attr("disabled","disabled").addClass("disabled"),$(".checkout-gtotal").html("&#8377; "+parseFloat(r.grand_total).toFixed(2)),$("#couponSubmit > .cpn-apply-btn").hasClass("remove-cpn")&&$("#couponSubmit, .couponSubmit").submit(),Materialize.toast("Cart updated",3e3),h(),t=$(".customAddressId").val(),a=$(".customDeliveryType").val(),o=$(".customDeliverySlot").val(),s=$(".customCpn").val(),$(".wallet-select").hasClass("check-img")&&($(".checkout-payment-btn").attr("disabled","disabled").addClass("disabled-btn"),$(".lc-wallet-div").addClass("wallet-div"),m({type:"unset",addressId:t,deliveryType:a,deliverySlot:o,cpn:s},"POST",$(".wallet-sw-ur").attr("data-url")).done(function(e){"error"!=e.result?($(".wallet-select").hasClass("check-img")?($(".wallet-select").attr("src","http://www.licious.in/img/elements/uncheck.png").removeClass("check-img").addClass("uncheck-img").fadeIn(800),$("#lc-wallet-div").attr("data-wuse","lc-wallet-n")):($(".wallet-select").attr("src","http://www.licious.in/img/elements/check.png").removeClass("uncheck-img").addClass("check-img").fadeIn(800),$("#lc-wallet-div").attr("data-wuse","lc-wallet-y")),$(".checkout-payment-btn").val("Pay Now Rs. "+e.amount),$(".citrusAmount").val(e.paisa),$("#lc-wallet-div").attr("data-lcpay",e.paisa),"0"==e.paisa?($("#payBtn").attr("type","button"),$("#payBtn").addClass("onlyhogbucks")):($("#payBtn").attr("type","submit"),$("#payBtn").removeClass("onlyhogbucks"))):Materialize.toast(e.msg,3e3),$(".lc-wallet-div").removeClass("wallet-div"),$(".checkout-payment-btn").removeAttr("disabled").removeClass("disabled-btn"),"zero"==e.type&&$(".checkout-payment-btn:not(.cod)").attr("disabled","disabled").addClass("disabled")}).fail(function(e,t,a){Materialize.toast("Request failed, Please refersh the page and try again",3e3)})))})}),$("#siginform").submit(function(e){e.preventDefault(),ga("send","event","Authentication","click","Sign In");var t=$(this).find(".full-width-button");s(t),m($(this).serialize(),"POST",$(this).attr("data-url")).done(function(e){n(t),"error"==e.result?"otp"==e.action?($('<span class="otp-number"> OTP has sent to '+e.mobile+"</span>").insertAfter(".otp-label"),$("#signin").closeModal(),$("#otpmodal").openModal()):Materialize.toast(e.msg,3e3):(Materialize.toast(e.msg,3e3),setTimeout(function(){location.reload(!0)},500))})}),$("#signupform").submit(function(e){e.preventDefault(),ga("send","event","Authentication","click","Sign up");var t=$(this).find(".full-width-button");s(t),m($(this).serialize(),"POST",$(this).attr("data-url")).done(function(e){"ok"==e.result?(n(t),1==e.verified?Materialize.toast("Email/Mobile already exists",4e3):($("#signupform")[0].reset(),$('<span class="otp-number"> OTP has sent to '+e.mobile+"</span>").insertAfter(".otp-label"),$("#signin").closeModal(),$("#otpmodal").openModal())):(n(t),t.html("Try Again"))})}),$("#optform").submit(function(e){e.preventDefault(),ga("send","event","Authentication","click","OTP");var t=$(this).find(".full-width-button"),a=$(this).find('input[type="number"]'),o=$(this).find(".otp-label");s(t),m($(this).serialize(),"POST",$(this).attr("data-url")).done(function(e){"ok"==e.result?(n(t),Materialize.toast("OTP Verified",2e3),setTimeout(function(){location.reload(!0)},1500)):(n(t),a.removeClass("valid").addClass("invalid"),o.text("INVALID OTP!!"),t.html("Try Again"),setTimeout(function(){o.text("ENTER YOUR OTP")},3e3))})}),$("#sc-otp").submit(function(e){e.preventDefault();var t=$(this).find(".full-width-button"),a=$(this).find('input[type="number"]'),o=$(this).find('input[type="number"]').val();return s(t),a.hasClass("sc-otp-varify")||10==o.length?void m($(this).serialize(),"POST",$(this).attr("data-url")).done(function(e){"error"==e.result?(n(t),Materialize.toast(e.msg,3e3)):location.reload(!0)}):(n(t),Materialize.toast("Mobile number must be 10 digit length",3e3),!1)});var e,t,i,f=!1;$(document).delegate(".addCartBtn","click",function(e){var i,l=$(this),d=l.closest(".add-cart-btn").find(".cart-btns .qty-count"),t=l.attr("data-qty"),c=l.closest(".add-cart-btn").attr("data-section"),p=l.closest(".add-cart-btn").attr("data-pr"),u=l.html();parseInt(d.text())>=parseInt(t)?(ga("send","event","Cart","Action","Max Units Reached"),Materialize.toast("Only "+t+" units left!!",3e3)):d.text()>=parseInt(t)?Materialize.toast("Max limit is 10 qty per order",3e3):f||(f=!0,l.html("Processing..."),l.hasClass("increase")&&l.parent().find(".wait_txt").addClass("show"),m("","POST",l.attr("data-uri")).done(function(e){var t,a,o,s=JSON.parse(e),n=JSON.parse(s.response),r=s.pr_count;"success"==n.status?(clevertap.event.push("Added to Cart",{"Product ID":n.product.product_id,"Product name":n.product.product_name,Price:n.product.base_price,Quantity:n.quantity}),Materialize.toast("Added Item to the Cart",3e3),l.parent().find(".wait_txt").removeClass("show"),l.html(u),""!=n.message?($(".add_message").show().html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info.png" alt="Info">'+n.message+"<span>&times;</span>").addClass("fadeInUp"),$(".add_message").removeClass("fadeInUp"),i=setTimeout(function(){$(".add_message").html(n.message).removeClass("fadeOutDown").hide()},5e3),fn.add_message.close()):($(".add_message").html(n.message).removeClass("fadeOutDown").hide(),clearTimeout(i)),"cart"==c?(l.closest(".card-content").find(".js-product-total").text(n.total),1==n.quantity&&l.closest(".add-cart-btn").find(".redueBtn").show()):"mini-cart"==c?($(".mini-sub-total").html("&#8377 "+n.grand_total),1==n.quantity&&(l.closest(".add-cart-btn").find(".redueBtn").show(),$('.add-cart-btn[data-section="product-details"][data-pr="'+p+'"]').find("button.addCartBtn").addClass("display-none"),$('.add-cart-btn[data-section="product-details"][data-pr="'+p+'"]').closest(".add-cart-btn").find(".cart-btns").addClass("display-inline")),$('.add-cart-btn[data-section="product-details"][data-pr="'+p+'"]').find(".qty-count").text(n.quantity)):(l.hasClass("increase")||l.addClass("display-none"),l.closest(".add-cart-btn").find(".cart-btns").addClass("display-inline"),$(".mini-sub-total").html("&#8377 "+n.grandTotal),1==n.quantity&&($('.add-cart-btn[data-section="mini-cart"]').hasClass(p)||"NA"!=(t=n.product)&&(a='<div class="row mini-cart-product-row row-margin-bottom-minus-2 animated flipInX"><div class="col s3 pr-img"><img src="'+t.prImage+'" class=""></div><div class="col s9"><h3>'+t.prName+' <i class="material-icons deleteProductCart" data-uri="'+t.deleteURI+'">cancel</i></h3><h5 class="lec-red-text add-cart-btn '+t.prId+'" data-section="mini-cart" data-pr="'+t.prId+'">&#8377; '+t.prBasePrice+" / "+t.prWeight+'<div class="right mini-cart-btns cart-btns"><img src="'+t.reduceCartBtn+'" class="redueBtn" data-uri="'+t.reduceURI+'"><span class="lec-product-qty qty-count">'+t.prQty+'</span><img src="'+t.addCartBtn+'" data-qty="'+t.prStock+'" class="addCartBtn increase" data-uri="'+t.addURI+'"></div></h5></div></div>',$(".mini-cart").hasClass("mini-empty")?(o=(a='<div class="col s12 mini-cart-product-scroll"><div class="row mini-cart-product-row row-margin-bottom-minus-2 animated flipInX"><div class="col s3 pr-img"><img src="'+t.prImage+'" class=""></div><div class="col s9"><h3>'+t.prName+' <i class="material-icons deleteProductCart" data-uri="'+t.deleteURI+'">cancel</i></h3><h5 class="lec-red-text add-cart-btn '+t.prId+'" data-section="mini-cart" data-pr="'+t.prId+'">&#8377; '+t.prBasePrice+" / "+t.prWeight+'<div class="right mini-cart-btns cart-btns"><img src="'+t.reduceCartBtn+'" class="redueBtn" data-uri="'+t.reduceURI+'"><span class="lec-product-qty qty-count">'+t.prQty+'</span><img src="'+t.addCartBtn+'" data-qty="'+t.prStock+'" class="addCartBtn increase" data-uri="'+t.addURI+'"></div></h5></div></div></div>')+'<div class="col s12 mini-cart-sub-cart"><div class="row"><div class="col s6">Sub Total</div><div class="col s6 mini-sub-total">&#8377; '+t.cart_total+'</div></div></div><div class="col s12 center mini-checkout"><a href="'+t.checkoutURI+'" type="button" class="btn lec-red-bg">'+t.checkoutMSG+"</a></div>",$(".min-cart-header").after(o),$(".min-cart-header h6").before('<span class="mini-cart-clear lec-red-text right" data-url="'+t.clearCartURI+'">Clear Cart</span>'),$(".mini-cart").removeClass("mini-empty").addClass("mini-ex"),$(".mini-cart-empty-msg").remove()):$(".mini-cart-product-row:last-child").after(a),clevertap.event.push("Added to Cart",{"Product ID":t.product_id,"Product name":t.product_name,Price:t.base_price,Quantity:t.quantity})),$('.add-cart-btn[data-section="mini-cart"][data-pr="'+p+'"]').find(".redueBtn").show()),$('.add-cart-btn[data-section="mini-cart"][data-pr="'+p+'"]').find(".qty-count").text(n.quantity)),0<r?($(".cart").addClass("loaded"),$(".cart").find("i").html(n.item_count)):$(".cart").removeClass("loaded"),d.text(n.quantity)):Materialize.toast(e.msg,25e3),f=!1}).fail(function(e,t,a){Materialize.toast("The diagnosis results are in. <br/>Slow Internet Connection detected!<br/> Wait till it heals or check with your network operator.",3e3),f=!1}))}),$(document).delegate(".redueBtn","click",function(e){e.preventDefault();var n,r=$(this),i=r.closest(".add-cart-btn").attr("data-section"),l=r.closest(".add-cart-btn").attr("data-pr");f||(f=!0,r.parent().find(".wait_txt").addClass("show"),m("","POST",r.attr("data-uri")).done(function(e){var t,a=JSON.parse(e),o=JSON.parse(a.response),s=a.pr_count;"success"==o.status&&(r.parent().find(".wait_txt").removeClass("show"),""!=o.message?($(".add_message").show().html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info.png" alt="Info">'+o.message+"<span>&times;</span>").addClass("fadeInUp"),$(".add_message").removeClass("fadeInUp"),n=setTimeout(function(){$(".add_message").html(o.message).removeClass("fadeOutDown").hide()},5e3),fn.add_message.close()):($(".add_message").html(o.message).removeClass("fadeOutDown").hide(),clearTimeout(n)),"cart"==i?(r.closest(".card-content").find(".js-product-total").text(o.total),"0"==o.quantity&&r.hide()):"mini-cart"==i?($(".mini-sub-total").html("&#8377 "+o.grandTotal),"0"==o.quantity&&(r.hide(),$('.add-cart-btn[data-section="product-details"][data-pr="'+l+'"]').find(".cart-btns").removeClass("display-inline").addClass("display-none"),$('.add-cart-btn[data-section="product-details"][data-pr="'+l+'"]').find(".addCartBtn").removeClass("display-none"),(t=$('.add-cart-btn[data-section="mini-cart"][data-pr="'+l+'"]').closest(".mini-cart-product-row")).addClass("animated flipOutY"),setTimeout(function(){t.remove(),0<$(".mini-cart-product-row").length||($(".mini-cart-sub-cart").remove(),$(".mini-checkout").remove(),$(".mini-cart").removeClass("mini-ex").addClass("mini-empty"),$(".mini-cart-clear").remove(),$(".min-cart-header").after('<div class="col s12 mini-cart-empty-msg"><span class="lec-red-text">Don\'t Be shy! Go ahead. Add a few items to your cart.</span></div>'))},800)),$('.add-cart-btn[data-section="product-details"][data-pr="'+l+'"]').find(".qty-count").text(o.quantity)):("0"==o.quantity&&(r.closest(".add-cart-btn").find(".cart-btns").removeClass("display-inline").addClass("display-none"),r.closest(".add-cart-btn").find(".addCartBtn").removeClass("display-none"),$('.add-cart-btn[data-section="mini-cart"][data-pr="'+l+'"]').find(".redueBtn").hide(),(t=$('.add-cart-btn[data-section="mini-cart"][data-pr="'+l+'"]').closest(".mini-cart-product-row")).addClass("animated flipOutY"),setTimeout(function(){t.remove(),0<$(".mini-cart-product-row").length||($(".mini-cart-sub-cart").remove(),$(".mini-checkout").remove(),$(".mini-cart").removeClass("mini-ex").addClass("mini-empty"),$(".mini-cart-clear").remove(),$(".min-cart-header").after('<div class="col s12 mini-cart-empty-msg"><span class="lec-red-text">Don\'t Be shy! Go ahead. Add a few items to your cart.</span></div>'))},800)),$(".mini-sub-total").html("&#8377 "+o.grand_total),$('.add-cart-btn[data-section="mini-cart"][data-pr="'+l+'"]').find(".qty-count").text(o.quantity)),r.closest(".add-cart-btn").find(".cart-btns .qty-count").text(o.quantity),0<s?($(".cart").addClass("loaded"),$(".cart").find("i").html(o.item_count)):$(".cart").removeClass("loaded"),"NA"!=e.productDetails&&clevertap.event.push("Product Removed from Cart",{"Product ID":o.product_id,"Product Name":o.product.product_name,"Product Price":o.product.base_price})),f=!1}).fail(function(e,t,a){Materialize.toast("The diagnosis results are in. <br/>Slow Internet Connection detected!<br/> Wait till it heals or check with your network operator.",3e3),f=!1}))}),$(document).delegate(".deleteProductCart","click",function(e){e.preventDefault();var t=$(this),a=t.closest(".mini-cart-product-row").find(".add-cart-btn").attr("data-section"),o=t.closest(".mini-cart-product-row"),s=t.closest(".mini-cart-product-row").find(".add-cart-btn").attr("data-pr");f||(f=!0,m("","POST",t.attr("data-uri")).done(function(e){"success"==e.result&&("mini-cart"==a&&($(".mini-sub-total").html("&#8377 "+e.cartTotal),o.addClass("animated flipOutY"),$('.add-cart-btn[data-section="product-details"][data-pr="'+s+'"]').find(".cart-btns").removeClass("display-inline").addClass("display-none"),$('.add-cart-btn[data-section="product-details"][data-pr="'+s+'"]').find(".addCartBtn").removeClass("display-none"),$('.add-cart-btn[data-section="product-details"][data-pr="'+s+'"]').find(".lec-product-qty.qty-count").html("0"),setTimeout(function(){o.remove(),0<$(".mini-cart-product-row").length||($(".mini-cart-sub-cart").remove(),$(".mini-checkout").remove(),$(".mini-cart").removeClass("mini-ex").addClass("mini-empty"),$(".mini-cart-clear").remove(),$(".min-cart-header").after('<div class="col s12 mini-cart-empty-msg"><span class="lec-red-text">Don\'t Be shy! Go ahead. Add a few items to your cart.</span></div>'))},800),0<e.productCount?$(".cart").addClass("loaded"):$(".cart").removeClass("loaded"),$(".cart").find("i").html(e.productCount)),"NA"!=e.productDetails&&clevertap.event.push("Product Removed from Cart",{"Product ID":e.productDetails.pr_id,"Product Name":e.productDetails.pr_name,"Product Price":e.productDetails.pr_base_price})),f=!1}).fail(function(e,t,a){Materialize.toast("The diagnosis results are in. <br/>Slow Internet Connection detected!<br/> Wait till it heals or check with your network operator.",3e3),f=!1}))}),$("#placesForm, #placesFormPop").bind("keypress",function(e){if(13==e.keyCode)return!1}),$("#placesFormLanding,#slugFormLanding").submit(function(e){$(".location-error,.landing-error").addClass("hide"),$(".landing-location span").removeClass("hide"),$(this).find('input[type="submit"]').val(""),$(this).find("img").removeClass("hide"),e.preventDefault();var t=$(this),a=this;m(t.serialize(),"POST",t.attr("data-url")).done(function(e){"error"==e.result?($(a).find("img").addClass("hide"),$(a).find('input[type="submit"]').val("GO"),$(".loc-error").addClass("show"),setTimeout(function(){$(".loc-error").removeClass("show")},2500),clevertap.event.push("Location Search",{Location:e.location,Status:"Failed"})):(clevertap.event.push("Location Search",{Location:e.location,Status:"Found"}),t.hasClass("explore")?window.location.href=t.attr("after"):location.reload(!0))}).fail(function(e,t,a){$(".li-main-container").removeClass("body-bg-loader2"),Materialize.toast("The diagnosis results are in. <br/>Slow Internet Connection detected!<br/> Wait till it heals or check with your network operator.",3e3),btn.attr("type","submit"),btn.removeClass("search-location-main"),btn.html(btn.attr("data-name"))})}),$("#placesForm, #placesFormPop").submit(function(e){$(".li-main-container").addClass("body-bg-loader2"),e.preventDefault();var t,a,o,s,n=$(this);o=$(this).hasClass("placesFormPop")?(s=$(this).find(".full-width-button"),t="pop",a=n.find("#latpop").val(),n.find("#lngpop").val()):(s=$(this).find(".lec-select-btn"),t="main",a=n.find("#lat").val(),n.find("#lng").val()),""==a||""==o?($(".li-main-container").removeClass("body-bg-loader2"),Materialize.toast("Please select the location from autosuggest list.",3e3)):(s.attr("type","button"),s.addClass("search-location-main"),s.html("<span>.</span><span>.</span><span>.</span>"),m(n.serialize(),"POST",n.attr("data-url")).done(function(e){"error"==e.result?($(".li-main-container").removeClass("body-bg-loader2"),Materialize.toast(e.msg,3e3),s.attr("type","submit"),s.removeClass("search-location-main"),s.html(s.attr("data-name")),clevertap.event.push("Location Search",{Location:e.location,Status:"Failed"})):(clevertap.event.push("Location Search",{Location:e.location,Status:"Found"}),"main"==t?window.location.href=e.url:n.hasClass("explore")?window.location.href=n.attr("after"):location.reload(!0))}).fail(function(e,t,a){$(".li-main-container").removeClass("body-bg-loader2"),Materialize.toast("The diagnosis results are in. <br/>Slow Internet Connection detected!<br/> Wait till it heals or check with your network operator.",3e3),s.attr("type","submit"),s.removeClass("search-location-main"),s.html(s.attr("data-name"))}))}),$(".signup-toggle").click(function(){$(".lec-signup-div-js").removeClass("display-none").addClass("display-block animated fadeIn"),$(".lec-signin-div-js").removeClass("display-block").addClass("display-none animated fadeIn"),$(".lec-easy-div-js").removeClass("display-block").addClass("display-none animated fadeIn")}),$(".error_msg").find("i").on("click",function(){$(".error_msg").removeClass("animated fadeOutUp"),$(".error_msg").addClass("animated fadeOutUp"),setTimeout(function(){$(".error_msg").hide()},1500)}),$(".easy-toggle").click(function(e){return $(".lec-easy-div-js").hasClass("empty")?(Materialize.toast("Don't Be shy! Go ahead. Add a few items to your cart.",3e3),e.preventDefault(),!1):($(".lec-easy-div-js").removeClass("display-none").addClass("display-block animated fadeIn"),$(".lec-signup-div-js").removeClass("display-block").addClass("display-none animated fadeIn"),void $(".lec-signin-div-js").removeClass("display-block").addClass("display-none animated fadeIn"))}),$(".signin-toggle").click(function(){$(".lec-signup-div-js").removeClass("display-block").addClass("display-none animated fadeIn"),$(".lec-signin-div-js").removeClass("display-none").addClass("display-block animated fadeIn"),$(".lec-easy-div-js").removeClass("display-block").addClass("display-none animated fadeIn")}),$("#couponSubmit, .couponSubmit").submit(function(e){e.preventDefault();var t,a=$(this).find(".cpn-apply-btn"),o=$(this).find('input[type="text"]');a.hasClass("remove-cpn")?(ga("send","event","Coupon","click","Remove Coupon Code",o),a.removeClass("remove-cpn"),a.html("Apply"),o.removeClass("coupon-disabled"),o.prop("disabled",!1),$(".promo-error").html(""),o.val(""),m($(this).serialize(),"POST",$(this).attr("data-remove-url")).done(function(e){o.removeClass("coupon-disabled"),a.removeClass("remove-cpn"),0==parseFloat(e.cart.subtotal)?($(".checkout-delivery").html("&#8377; 0"),$(".checkout-vatValue").html("&#8377; 0")):($(".checkout-delivery").html("&#8377; "+e.cart.shipping),$(".checkout-vatValue").html("&#8377; "+e.cart.vat)),$(".checkout-discount").html("&#8377; "+e.cart.discount),$(".checkout-gtotal").html("&#8377; "+e.cart.subtotal),$(".citrusSignature").val(e.cart.hash),$(".citrusMerchantTxnId").val(e.cart.txnId),$(".citrusAmount").val(100*e.cart.subtotal),$("#lc-wallet-div").attr("data-lcpay",e.cart.paisa),$(".customCpn").val(e.coupon),$(".checkout-payment-btn.cod").html("Place Order &#8377; "+e.cart.subtotal),parseFloat(e.cart.subtotal)<parseFloat($("#lc-wallet-div").attr("data-wbal"))&&$(".lc-wallet-deduct-info").html("&#8377; "+e.cart.subtotal+" will be deducted from the payable amount"),$(".checkout-payment-btn").val("Pay Now Rs. "+e.cart.subtotal),0==parseFloat(e.cart.subtotal)&&$(".checkout-payment-btn:not(.cod)").attr("disabled","disabled").addClass("disabled"),h()}).fail(function(e,t,a){Materialize.toast("The diagnosis results are in. <br/>Slow Internet Connection detected!<br/> Wait till it heals or check with your network operator.",3e3)})):(ga("send","event","Coupon","click","Apply Coupon Code",o),t=$(this).find(".cpn-apply-btn"),$(".promo-error"),t.attr("type","button"),t.addClass("loading-text-pop animated flipInY"),t.html(""),$(".promo-error").html(""),m($(this).serialize(),"POST",$(this).attr("data-url")).done(function(e){"error"==e.result?($(".promo-error").html(e.status),Materialize.toast(e.message,3e3),clevertap.event.push("Coupon Not Applied",{Reason:e.message,"Coupon Code":e.coupon}),setTimeout(function(){$(".promo-error").html("")},2500),t.html(t.attr("data-name"))):(h(),o.addClass("coupon-disabled"),a.addClass("remove-cpn"),0==parseFloat(e.cart.subtotal)?($(".checkout-delivery").html("&#8377; 0"),$(".checkout-vatValue").html("&#8377; 0")):($(".checkout-delivery").html("&#8377; "+e.cart.shipping),$(".checkout-vatValue").html("&#8377; "+e.cart.vat)),$(".checkout-discount").html("&#8377; "+e.cart.discount),$(".coupontotal").html("&#8377; "+e.cart.subtotal),$(".citrusSignature").val(e.cart.hash),$(".citrusMerchantTxnId").val(e.cart.txnId),$(".citrusAmount").val(100*e.cart.subtotal),$("#lc-wallet-div").attr("data-lcpay",e.cart.paisa),$(".customCpn").val(e.coupon),$(".checkout-payment-btn.cod").html("Place Order &#8377; "+e.cart.subtotal),parseFloat(e.cart.subtotal)<parseFloat($("#lc-wallet-div").attr("data-wbal"))&&$(".lc-wallet-deduct-info").html("&#8377; "+e.cart.subtotal+" will be deducted from the payable amount"),$(".checkout-payment-btn").val("Pay Now Rs. "+e.cart.subtotal),0==parseFloat(e.cart.subtotal)&&$(".checkout-payment-btn:not(.cod)").attr("disabled","disabled").addClass("disabled"),clevertap.event.push("Coupon Applied",{"Total Amount":e.cart.carttotal,"Coupon Code":e.coupon,Discount:e.cart.discount,"Payable Amount":e.cart.subtotal}),$(".promo-error").html(e.message),a.html("Remove"),o.prop("disabled",!0)),a.attr("type","submit"),a.removeClass("loading-text-pop animated flipInY").addClass("animated flipInY").removeClass("animated flipInY")}).fail(function(e,t,a){Materialize.toast("The diagnosis results are in. <br/>Slow Internet Connection detected!<br/> Wait till it heals or check with your network operator.",3e3)}))}),$("#lecCrMonth").keyup(function(e){e.preventDefault();var t=$(this).val(),a=$("#citrusExpiry").val().split("/");$("#citrusExpiry").val(t+"/"+a[1])}),$("#lecCrYear").keyup(function(e){e.preventDefault();var t=$(this).val(),a=$("#citrusExpiry").val().split("/");$("#citrusExpiry").val(a[0]+"/"+t)}),$(".tab-verticle").click(function(e){if($(".set-finalPay").data("val"),$(".checkout-payment-btn").removeAttr("disabled").removeClass("disabled-btn"),$(this).hasClass("CODTAB")){if(1==fn.codEligible)return;var t=$(this).find("a").attr("href");$(".tab-verticle").removeClass("active"),$(".profile-section").removeClass("current"),$(".payment-section").removeClass("current"),$(this).addClass("active"),$(t).addClass("current");var a=t.substring(1);$(".payment-section."+a).addClass("current"),localStorage.setItem("COD_EL","true")}else{t=$(this).find("a").attr("href");$(".tab-verticle").removeClass("active"),$(".profile-section").removeClass("current"),$(".payment-section").removeClass("current"),$(this).addClass("active"),$(t).addClass("current");a=t.substring(1);$(".payment-section."+a).addClass("current"),localStorage.setItem("COD_EL","false")}}),$(".checkout-payments-tab").click(function(e){if(""==$("input[name='line1']").val()||""==$("input[name='line2']").val()||""==$("input[name='pincode']").val()){var t=$(".checkout-payments-tab").find(".collapsible-header");if(!t.hasClass("active"))return Materialize.toast("Please fill in delivery address details",3e3),!1;$(".lec-gst-btn-prodeed-pay-tab").hasClass("exotic")&&m({slotEx:$('input:radio[name="deliveryTimeExotic"]:checked').val(),dateEx:$('input:radio[name="deliveryTypeExotic"]:checked').val()},"POST",$(".delivery-slot-row-exotic").attr("data-url")).done(function(e){}),m({line1:$('input[name="line1"]').val(),line2:$('input[name="line2"]').val(),pincode:$('input[name="pincode"]').val(),lat:$('input[name="lat"]').val(),lng:$('input[name="lng"]').val()},"POST",$(".guest-pay").attr("data-url")).done(function(e){}),t.trigger("click")}}),$(".delivery-div").click(function(){var e=$(this);e.hasClass("disabled")||(e.find('input[name="deliveryType"]').prop("checked",!0),$(".delivery-div").removeClass("active"),e.addClass("active"),$(".customDeliveryType").val(e.find('input[name="deliveryType"]').val()),$(".delivery-day-ul").removeClass("show animated fadeIn"),"later"==e.find('input[name="deliveryType"]').val()?($(".deliver-slots").show(),$(".deliver-slots").addClass("show animated fadeIn")):($(".deliver-slots").removeClass("show animated fadeIn"),$(".deliver-slots").hide()))}),$(".delivery-div-exo").click(function(){var e=$(this);e.hasClass("disabled")||(e.find('input[name="deliveryTypeExotic"]').prop("checked",!0),$(".delivery-div-exo").removeClass("active"),e.addClass("active"))}),$(".delivery-time-ul.tommrow li:first-child").find('input[name="deliveryTime"]').attr("checked",!0),$(".delivery-time-ul.today li:not(.disabled):first").find('input[name="deliveryTime"]').attr("checked",!0),$('input[name="deliveryTime"]:checked').closest("li").addClass("active"),$(".delivery-time-ul li").click(function(){ga("send","event","Delivery","click","Delivery type");var e,t=$(this);t.hasClass("disabled")||(t.find('input[name="deliveryTime"]').prop("checked",!0),$(".delivery-time-ul li").removeClass("active"),t.addClass("active"),e=$(".customDeliverySlot").val().split("//"),$(".customDeliverySlot").val(e[0]+"//"+t.find('input[name="deliveryTime"]').val()))}),$(".delivery-time-ul-exo li").click(function(){var e=$(this);ga("send","event","Delivery","click","Delivery type"),e.hasClass("disabled")||(e.find('input[name="deliveryTimeExotic"]').prop("checked",!0),$(".delivery-time-ul-exo li").removeClass("active"),e.addClass("active"))}),$('input[type="radio"][name="deliveryDay"]').click(function(e){ga("send","event","Delivery","click","Delivery Day");var t,a=$(this);a.closest("li").hasClass("disabled")?e.preventDefault():(a.prop("checked",!0),$(".delivery-time-ul li").removeClass("active"),a.closest("li").addClass("active"),t=$(".customDeliverySlot").val().split("//"),$(".customDeliverySlot").val(a.val()+"//"+t[1]),$(".delivery-time-ul").removeClass("show animated fadeIn"),"Today"==a.text()?$(".delivery-time-ul.today").addClass("show animated fadeIn"):$(".delivery-time-ul.tommrow").addClass("show animated fadeIn"))}),$('input[type="radio"][name="deliveryType"]').click(function(e){ga("send","event","Delivery","click","Delivery type");var t=$(this);t.closest("div").hasClass("disabled")?e.preventDefault():(t.prop("checked",!0),$(".delivery-div").removeClass("active"),t.closest("div").addClass("active"),$(".customDeliveryType").val(),$(".customDeliveryType").val(t.val()))}),$(".customDeliveryType").val($('.delivery-div input[name="deliveryType"]').val()),$(".customDeliverySlot").val($("#deliveryslot").val()),$("#custoemrAddress").submit(function(e){e.preventDefault(),ga("send","event","Address","click","Select Address");var a=$(this).find(".full-width-button");a.attr("type","button"),a.addClass("loading-text-pop animated flipInY"),a.html(""),m($(this).serialize(),"POST",$(this).attr("data-url")).done(function(e){var t;"error"==e.result?Materialize.toast(e.msg,3e3):(t='<div class="addresses" data-url="/check/city?addressId='+e.addressPk+'"><img class="checkout-address-uncheck" src = "/img/elements/uncheck.png"><img class="checkout-address-check hide" src = "/img/elements/check.png"><input type="radio" name="address" checked="checked" class="radio-box hide" value="'+e.addressPk+'""/><div class="address-details"><div class="address-name"> '+e.userName+'</div><div class="address-line1">'+e.address.line1+'<span class="address-truncate">.....</span></div><div class="address-line2">'+e.address.line2+'</div><div class="address-MobNo"><span>Mobile Number:</span> '+e.address.mobile+'</div><div class="edit-options"><span class="edit-address"><img class="address-edit" src="/img/Edit.png" data-url="/user/edit-address/'+e.addressPk+'" data-id="'+e.addressPk+'"></span><span><img class="address-delete" src="/img/delete.png" data-url="/user/delete-address?addressid='+e.addressPk+'"></span></div></div></div>',$(".addresses-container").append(t),$(".paytmaddress").val(e.addressPk),$(".customAddressId").val(e.addressPk),$("#custAddress").closeModal(),$(".customer-no-address").remove(),fn.address.editAddr(),$("#custoemrAddress").trigger("reset")),a.removeClass("loading-text-pop animated flipInY"),a.html(a.attr("data-name"))})}),$(".pincode").on("paste keyup change",function(e){e.preventDefault();var t=$(this),a=$(this).val();6==a.length?isNaN(a)?(t.val(""),t.attr("placeholder","Only Numbers allowed")):o($(this)):$(".cust-new-addr-btn").addClass("btn-default").removeClass("lec-red-bg white-text").attr("type","button")}),$(".lec-testimonial-user li").click(function(e){var t=$(this),a=t.attr("data-id");$(".lec-testimonial-div").removeClass("active animated fadeIn"),$(".lec-testimonial-user li").removeClass("active"),t.addClass("active"),$(".lec-testimonial-div."+a).addClass("active animated fadeIn")}),$("#subscribeNews").submit(function(e){e.preventDefault(),$(".news-msg-container").html("");var t=$(this).find("button");t.attr("type","button"),t.addClass("loading-text-pop"),t.html(""),setTimeout(function(){$(".news-msg-container").html("Successfully subscribed!!"),setTimeout(function(){$(".news-msg-container").html("")},2e3),t.attr("type","submit"),t.removeClass("loading-text-pop"),t.html(t.attr("data-name"))},1e3)}),$(".lec-profile-view-order-details").click(function(e){e.preventDefault(),ga("send","event","Profile","click","View Order Details");var t=$(this);t.closest(".timeline-panel").find(".time-line-order-details").toggleClass("display-none display-block animated fadeIn"),"VIEW DETAILS"==t.text()?t.text("HIDE DETAILS"):t.text("VIEW DETAILS")}),$(".scrollToTop").click(function(){return $("html, body").animate({scrollTop:0},800),!1}),$(document).delegate(".mini-cart-clear","click",function(e){e.preventDefault();var t=$(this);f||(f=!0,m("","POST",$(this).attr("data-url")).done(function(e){"success"==e.result&&($(".mini-cart-product-row").addClass("animated flipOutX"),$(".mini-cart-sub-cart").addClass("animated flipOutX"),$(".mini-checkout").addClass("animated flipOutX"),t.addClass("animated slideUp"),$(".mini-cart").removeClass("mini-ex").addClass("mini-empty"),setTimeout(function(){$(".mini-cart-product-scroll").remove(),$(".mini-cart-sub-cart").remove(),$(".mini-checkout").remove(),t.remove();$(".min-cart-header").after('<div class="col s12 mini-cart-empty-msg"><span class="lec-red-text">Don\'t Be shy! Go ahead. Add a few items to your cart.</span></div>')},800),$(".mini-cart-qty-num").html("0"),$('.add-cart-btn[data-section="product-details"]').find(".cart-btns").removeClass("display-inline").addClass("display-none"),$('.add-cart-btn[data-section="product-details"]').find(".addCartBtn").removeClass("display-none"),$(".lec-product-qty.qty-count").html("0")),f=!1}).fail(function(e,t,a){Materialize.toast("The diagnosis results are in. <br/>Slow Internet Connection detected!<br/> Wait till it heals or check with your network operator.",3e3),f=!1}))}),$(".citrusNumber").keyup(function(e){e.preventDefault();var t=$(this);0<t.val().length&&isNaN(t.val())?(t.val(""),$(".citrusNumberLabel").text("Only numbers allowed")):$(".citrusNumberLabel").text($(".citrusNumberLabel").attr("data-value"))}),$(".citrusCardHolder").keyup(function(e){e.preventDefault();var t=$(this);isNaN(t.val())?$(".citrusCardHolderLabel").text($(".citrusCardHolderLabel").attr("data-value")):(t.val(""),$(".citrusCardHolderLabel").text("Only alphabets allowed"))}),$(".lecCrMonth").keyup(function(e){e.preventDefault();var t=$(this);isNaN(t.val())?(t.val(""),$(".lecCrMonthLabel").text("Only numbers allowed")):$(".lecCrMonthLabel").text($(".lecCrMonthLabel").attr("data-value"))}),$(".lecCrMonth").keyup(function(e){e.preventDefault();var t=$(this);isNaN(t.val())?(t.val(""),$(".lecCrMonthLabel").text("Only numbers allowed")):$(".lecCrMonthLabel").text($(".lecCrMonthLabel").attr("data-value"))}),$(".lecCrYear").keyup(function(e){e.preventDefault();var t=$(this);isNaN(t.val())?(t.val(""),$(".lecCrYearLabel").text("Only numbers allowed")):$(".lecCrYearLabel").text($(".lecCrYearLabel").attr("data-value"))}),$(".lec-explore-range a").click(function(e){if($(this).hasClass("non-located"))return $(this).find("span").hasClass("explore")&&($("#placesFormPop").addClass("explore"),$("#placesFormPop").attr("after",$(this).attr("href"))),$("#places").openModal(),!1}),$(".lec-btn-prodeed-pay-tab").hasClass("exotic")&&(t=(e=$("#exoticdeliveryslot").val().split("~"))[0],i=e[1],$("#exoticdate").val(t),$("#exoticslot").val(i)),$(".lec-gst-btn-prodeed-pay-tab").hasClass("exotic")&&(t=(e=$("#exoticdeliveryslot").val().split("~"))[0],i=e[1],$("#exoticdate").val(t),$("#exoticslot").val(i)),$(".capture").click(function(e){e.preventDefault();var t=$(this),a=t.hasClass("c")?"notify":"form";m("","POST",t.attr("data-uri")).done(function(e){}),$(this).removeAttr("data-uri"),$(this).removeClass("capture lec-red-bg _c _g").addClass("sold-out-btn "+a).html("<span>Sold Out</span>"),e.stopPropagation()}),$("#notifyMe").submit(function(e){e.preventDefault();var t=$(this),a=$(this).find(".full-width-button");a.attr("type","button"),a.addClass("search-location-main"),a.html("<span>.</span><span>.</span><span>.</span>"),m(t.serialize(),"POST",t.attr("data-url")).done(function(e){Materialize.toast(e.msg,3e3),a.attr("type","submit"),a.removeClass("search-location-main"),a.html(a.attr("data-name")),$("#notify").closeModal()})}),$("#tour-form").submit(function(e){e.preventDefault();var t=$(this),a=$(this).find(".lec-red-bg");a.attr("type","button"),a.addClass("search-location-main"),a.html("<span>.</span><span>.</span><span>.</span>"),m(t.serialize(),"POST",t.attr("data-url")).done(function(e){"success"==e.status?(Materialize.toast(e.message,3e3),setTimeout(function(){window.location="/"},1e3)):(a.attr("type","submit"),Materialize.toast(e.message,3e3)),a.removeClass("search-location-main"),a.html(a.attr("data-name"))})}),$(".checkout-payment-btn.cod").click(function(e){ga("send","event","Payment","click","COD");var t=$(this);t.addClass("search-location-main"),t.html("<span>.</span><span>.</span><span>.</span>"),localStorage.setItem("default_pin","")}),$(".useEmailCheck").focusout(function(e){e.preventDefault();var t=$(this);m({email:$(this).val()},"POST",$(this).attr("data-uri")).done(function(e){"error"==e.result?(t.val(""),t.attr("placeholder",e.msg),Materialize.toast(e.msg,3e3),$(".user-update-profile-btn").addClass("btn-default").removeClass("lec-red-bg white-text").attr("type","button")):$(".user-update-profile-btn").removeClass("btn-default").addClass("lec-red-bg white-text").attr("type","submit")})}),$(".editUserProfile").on("click",function(e){e.preventDefault(),ga("send","event","Profile","click","Edit Profile"),m("","POST",$(this).attr("data-url")).done(function(e){var t;"error"==e.result?Materialize.toast("The diagnosis results are in. <br/>Slow Internet Connection detected!<br/> Wait till it heals or check with your network operator.",3e3):((t=$("#userProfileEdit")).find('input[name="name"]').val(e.data.name),t.find('input[name="email"]').val(e.data.email),t.find('select[name="gender"]').val(e.data.gender),$(".profile-modal").openModal())})}),$("#userSettingForm").submit(function(e){e.preventDefault(),ga("send","event","Profile","click","Change Password"),btn=$(this).find(".full-width-button"),btn.attr("type","button"),btn.addClass("search-location-main"),btn.html("<span>.</span><span>.</span><span>.</span>"),m($(this).serialize(),"POST",$(this).attr("data-url")).done(function(e){"error"==e.result?Materialize.toast(e.msg,3e3):(Materialize.toast(e.msg,3e3),setTimeout(function(){location.reload(!0)},1500)),btn.attr("type","submit"),btn.removeClass("search-location-main"),btn.html(btn.attr("data-name"))})}),$(".request-exotic").on("click",function(e){e.preventDefault(),$('#exotic input[type="text"]').val(""),$('#exotic input[type="email"]').val(""),$('#exotic input[type="number"]').val(""),$('#exotic input[type="hidden"]').remove(),$("#exotic-request").openModal(),$("#exotic-request").find(".exoPrice").attr("data-price",$(this).attr("data-value")),$("#exotic-request").find(".exoPrice").val($(this).attr("data-value")),$("#exotic-request").find(".exoQty").val("1"),$("#exotic-request").find(".full-width-button").before('<input type="hidden" name="pr" value="'+$(this).attr("data-pr")+'" /> ')}),$(document).delegate("#exotic","submit",function(e){e.preventDefault();var t=$(this),a=$(this).find(".full-width-button");a.attr("type","button"),a.addClass("search-location-main"),a.html("<span>.</span><span>.</span><span>.</span>"),m(t.serialize(),"POST",t.attr("data-url")).done(function(e){Materialize.toast(e.msg,3e3),a.attr("type","submit"),a.removeClass("search-location-main"),a.html(a.attr("data-name")),$("#exotic-request").closeModal()})}),$(".exoQty").on("keyup change",function(e){e.preventDefault();var t=$(this).val();$(".exoPrice").val(t*$(".exoPrice").attr("data-price"))}),$(".exoticPincode").on("paste keyup change",function(e){e.preventDefault();var t=$(this),a=$(this).val();6==a.length&&(isNaN(a)?(t.val(""),$(".exoticPincodelabel").text("Only Numbers allowed")):($(".exoticPincodelabel").text("Pincode"),f||(f=!0,m({pin:a},"POST",$(this).attr("data-url")).done(function(e){"error"==e.result&&(t.val(""),$(".exoticPincodelabel").text(e.pin),Materialize.toast("Your location is a mystery to our database. <br/>We'll solve this riddle soon. <br/>Stay hooked to our adventure!",5e3)),f=!1}))))}),$(".exoticPincode").on("focusout",function(e){e.preventDefault();var t=$(this);$(this).val().length<6&&(t.val(""),$(".exoticPincodelabel").text("Pincode is required"))}),$(".loc-close-button").click(function(){$(".location-modal").closeModal()}),$(".location-header").click(function(){$(".loc-close-button ").removeClass("hide"),$(".location-modal").openModal({dismissible:!0,opacity:.85,inDuration:300,outDuration:200,startingTop:"30%",ready:function(){},complete:function(){}})}),$(".blog-next").click(function(e){e.preventDefault(),ga("send","event","Home","click","Blog Post"),$next=$(".blog-post.active").next(".blog-post"),$(".blog-post").removeClass("active"),0<$next.length?$next.addClass("active"):$(".blog-post").first().addClass("active")}),$(".blog-prev").click(function(e){e.preventDefault(),$prev=$(".blog-post.active").prev(".blog-post"),$(".blog-post").removeClass("active"),0<$prev.length?$prev.addClass("active"):$(".blog-post").last().addClass("active")}),setInterval(function(){$(".blog-next").trigger("click")},1e4),$("#walletContainer").on("click","li",function(e){$(this).addClass("active").siblings().removeClass("active")}),$(".CODTAB").on("click",function(e){if(!$(this).hasClass("cod-disabled")){if($(".tab-verticle.CODTAB").removeClass("cod-disabled"),$(".tab-verticle.CODTAB").removeClass("wallet-text"),$(".set-finalPay").data("val"),1==fn.codEligible)return void Materialize.toast(fn.codEligibleMsg,3e3);$(".tab-verticle.CODTAB").removeClass("cod-disabled"),$(".wallet-switcher").css({opacity:"0.5",transition:"all 0.3s ease"});var t,a=$(".customAddressId").val(),o=$(".customDeliveryType").val(),s=$(".customDeliverySlot").val(),n=$(".customCpn").val();$(".wallet-select").hasClass("check-img")?(t="unset",$(".checkout-payment-btn").attr("disabled","disabled").addClass("disabled-btn"),$(".lc-wallet-div").addClass("wallet-div"),m({type:t,addressId:a,deliveryType:o,deliverySlot:s,cpn:n},"POST",$(".wallet-sw-ur").attr("data-url")).done(function(e){"error"!=e.result?($(".wallet-select").hasClass("check-img")?($(".wallet-select").attr("src","http://www.licious.in/img/elements/uncheck.png").removeClass("check-img").addClass("uncheck-img").fadeIn(800),$("#lc-wallet-div").attr("data-wuse","lc-wallet-n")):($(".wallet-select").attr("src","http://www.licious.in/img/elements/check.png").removeClass("uncheck-img").addClass("check-img").fadeIn(800),$("#lc-wallet-div").attr("data-wuse","lc-wallet-y")),$(".checkout-payment-btn").val("Pay Now Rs. "+e.amount),$(".citrusAmount").val(e.paisa),$("#lc-wallet-div").attr("data-lcpay",e.paisa),"0"==e.paisa?($("#payBtn").attr("type","button"),$("#payBtn").addClass("onlyhogbucks")):($("#payBtn").attr("type","submit"),$("#payBtn").removeClass("onlyhogbucks"))):Materialize.toast(e.msg,3e3),$(".lc-wallet-div").removeClass("wallet-div"),$(".checkout-payment-btn").removeAttr("disabled").removeClass("disabled-btn"),"zero"==e.type&&$(".checkout-payment-btn:not(.cod)").attr("disabled","disabled").addClass("disabled")}).fail(function(e,t,a){Materialize.toast("Request failed, Please refersh the page and try again",3e3)})):t="set"}}),$(".payopt.online").on("click",function(e){ga("send","event","Payment","click","Online"),$(".wallet-switcher").css({opacity:"1",transition:"all 0.3s ease"})}),$(".wallet-switcher").on("click",function(e){var t,a,o,s,n;ga("send","event","Licious Wallet","click","Select Licious Wallet"),$(".tab-verticle.CODTAB").hasClass("active")?(Materialize.toast("LICIOUS WALLET NOT APPLICABLE FOR COD/CARD ON DELIVERY",3e3),ga("send","event","Payment","click","Wallet Not Applicable For COD")):($(".wallet-switcher").css({opacity:"0.5",transition:"all 0.3s ease"}),a=$(".customAddressId").val(),o=$(".customDeliveryType").val(),s=$(".customDeliverySlot").val(),n=$(".customCpn").val(),$(".wallet-select").hasClass("check-img")?(t="unset",$(".tab-verticle.CODTAB").removeClass("cod-disabled"),$(".tab-verticle.CODTAB").removeClass("wallet-text")):(t="set",$(".tab-verticle.CODTAB").addClass("cod-disabled"),$(".tab-verticle.CODTAB").addClass("wallet-text")),$(".checkout-payment-btn").attr("disabled","disabled").addClass("disabled-btn"),$(".lc-wallet-div").addClass("wallet-div"),m({type:t,addressId:a,deliveryType:o,deliverySlot:s,cpn:n},"POST",$(".wallet-sw-ur").attr("data-url")).done(function(e){"error"!=e.result?($(".wallet-select").hasClass("check-img")?($(".wallet-select").attr("src","http://www.licious.in/img/elements/uncheck.png").removeClass("check-img").addClass("uncheck-img").fadeIn(800),$("#lc-wallet-div").attr("data-wuse","lc-wallet-n")):($(".wallet-select").attr("src","http://www.licious.in/img/elements/check.png").removeClass("uncheck-img").addClass("check-img").fadeIn(800),$("#lc-wallet-div").attr("data-wuse","lc-wallet-y")),$(".checkout-payment-btn").val("Pay Now Rs. "+e.amount),$(".citrusAmount").val(e.paisa),$("#lc-wallet-div").attr("data-lcpay",e.paisa),"0"==e.paisa?($("#payBtn").attr("type","button"),$("#payBtn").addClass("onlyhogbucks")):($("#payBtn").attr("type","submit"),$("#payBtn").removeClass("onlyhogbucks"))):Materialize.toast(e.msg,3e3),$(".lc-wallet-div").removeClass("wallet-div"),$(".checkout-payment-btn").removeAttr("disabled").removeClass("disabled-btn"),"zero"==e.type&&$(".checkout-payment-btn:not(.cod)").attr("disabled","disabled").addClass("disabled"),$(".wallet-switcher").css({opacity:"1",transition:"all 0.3s ease"})}).fail(function(e,t,a){Materialize.toast("Request failed, Please refersh the page and try again",3e3)}))}),$(".hogworks").click(function(e){e.stopPropagation()}),$(".checkout-customer-addr-row").click(function(e){e.preventDefault();var t=$(".checkout-payments-tab").find(".collapsible-header");t.hasClass("active")&&t.trigger("click")}),$(".li-navigation").on("click","li",function(e){e.preventDefault(),$(this).toggleClass("active").siblings().removeClass("active")}),$(".slider").slider({full_width:!1,indicators:!1}),$("#location_pop,#slug_location_pop").keyup(function(){$(".landing-error,.location-error").addClass("hide"),$(".landing-location span").removeClass("hide")}),$(document.body).on("click",".addresses",function(e){e.stopPropagation(),ga("send","event","Address","click","Select Address");var t=this;m($(this).serialize(),"GET",$(this).attr("data-url")).done(function(e){"error"==e.result?($(".reviewcart").attr("data-pin",e.pin),$(".change-address-alert").openModal({dismissible:!0,opacity:.85,inDuration:300,outDuration:200,startingTop:"30%",ready:function(){},complete:function(){}})):($(".checkout-address-check").addClass("hide"),$(".checkout-address-uncheck").removeClass("hide"),$(".addresses").removeClass("address-active"),$(".addresses").removeClass("address-active"),$(t).find('[name="address"]').prop("checked",!0),$(t).find(".checkout-address-uncheck").addClass("hide"),$(t).find(".checkout-address-check").removeClass("hide"),$(t).addClass("address-active"),$(".customAddressId").val($(t).find('[name="address"]').val()))})}),$(".express-non-exotic,.schedule-non-exotic").click(function(){$(".express-non-exotic-check,.schedule-non-exotic-check").addClass("hide"),$(".schedule-non-exotic-uncheck,.express-non-exotic-uncheck").removeClass("hide"),$(this).find("img").eq(1).removeClass("hide"),$(this).find("img").eq(0).addClass("hide"),$(this).hasClass("express-non-exotic")?$(".nonexotic-delivery-slots").addClass("hide"):$(".nonexotic-delivery-slots").removeClass("hide"),$(this).find('input[type="radio"]').prop("checked",!0)}),$("#placesFormLanding,#slugFormLanding").bind("keypress",function(e){if(13==e.keyCode)return!1}),$(document).delegate("#deliveryslot","change",function(e){ga("send","event","Delivery","click","Delivery Slot Change"),$(".customDeliverySlot").val($(this).val())}),$(document).delegate("#exoticdeliveryslot","change",function(e){ga("send","event","Delivery","click","Exotic Delivery Slot Change");var t=$(this).val().toString().split("~"),a=t[0],o=t[1];$("#exoticdate").val(a),$("#exoticslot").val(o)});var l={Hyderabad:"Telengana",Bengaluru:"Karnataka",Gurugram:"Delhi"};$('#custoemrAddress [name="city"],#address-edit-city').change(function(e){e.preventDefault(),e.stopPropagation(),$(this).is("#address-edit-city")?$(".address-edit-state").val(l[$(this).val()]):$('#custoemrAddress [name="state"]').val(l[$(this).val()])}),$('#custoemrProfileAddress [name="city"],#address-edit-city').change(function(e){e.preventDefault(),e.stopPropagation(),$('#custoemrProfileAddress input[name="state"]').val(l[$(this).val()]),$('#customerAddressEdit input[name="state"]').val(l[$(this).val()])}),$(".check-step-1").click(r),$(".add-change-close").click(function(e){$(".change-address-alert").closeModal()}),$(".signup").click(function(){ga("send","event","Authentication","click","Signup")}),$(".easycheckout").click(function(){ga("send","event","Authentication","click","Guest Checkout")}),$(".login").click(function(){ga("send","event","Authentication","click","Login")}),$(".logout").click(function(){ga("send","event","Authentication","click","Logout")}),$(".reviewcart").click(function(e){e.preventDefault(),$(".reviewcart").html("Redirecting..."),m("","GET","/review-cart/"+$(".reviewcart").attr("data-pin")).done(function(e){"success"==e.status&&fn_sublocation.gaSublocation("SL-Address Alert - Review Cart","Click",""),location.reload()})}),fn={address:{editAddr:function(){$(".addresses-container").find(".address-edit").on("click",function(e){e.stopPropagation();var a=this;m("","POST","/user/edit-address/"+$(this).data("id")).done(function(e){var t;"success"==e.result?((t=$("#customerAddressEdit")).find('input[name="line1"]').val(e.data.line1),t.find('input[name="line2"]').val(e.data.line2),t.find('input[name="lat"]').val(e.data.lat),t.find('input[name="lng"]').val(e.data.lng),t.find('select[name="city"]').val(e.data.city),t.find(".select-dropdown").val(e.data.city),t.find('input[name="state"]').val(e.data.state),t.find('input[name="pincode"]').val(e.data.pincode),t.find('input[name="mobile"]').val(e.data.contact),t.attr("data-id",$(a).data("id")),o(t.find(".pincode")),$(".customerAddrEdit-modal").openModal()):Materialize.toast("Network Problem, Please try again",3e3)})})},saveEditAddr:function(){$("#customerAddressEdit").submit(function(e){e.preventDefault(),ga("send","event","Address","click","Edit Address");var s=$(this).find(".full-width-button");s.addClass("animated flipInY search-location-main"),s.html("<span>.</span><span>.</span><span>.</span>"),m($(this).serialize(),"POST","/user/edit-address-post/"+$(this).attr("data-id")).done(function(e){var t,a,o;"error"==e.result?Materialize.toast("Network Error, Please try again",3e3):((a=t=$('input[type="radio"][value="'+e.id+'"]').closest(".addresses")).find(".address-line1").text(e.data.line1),a.find(".address-line2").text(e.data.line2),t.find(".address-MobNo").html("<span>MOBILE NUMBER : </span> "+e.data.contact),$('input[type="radio"][value="'+e.id+'"]').prop("checked",!0),$(".customAddressId").val(e.id),o=$('button[data-id="'+e.id+'"]').parent().prev(),$(o).html('<b style="color:black">'+e.data.line1+"</b><br><label>"+e.data.line1+"</label><br/><label>"+e.data.city+" - "+e.data.pincode+", "+e.data.state+"</label>")),s.removeClass("search-location-main animated flipInY"),s.html("UPDATE"),$(".customerAddrEdit-modal").closeModal()})})},deleteAddr:function(){$(".addresses-container").delegate(".address-delete","click",function(e){e.stopPropagation();var t=this;m("","POST",$(this).attr("data-url")).done(function(e){"success"==e.result?($(t).closest(".addresses").remove(),$(t).closest(".addr-container").remove(),Materialize.toast("Address deleted",3e3)):Materialize.toast("Network Problem, Please try again",3e3)})})},run:function(){fn.address.editAddr(),fn.address.saveEditAddr(),fn.address.deleteAddr()}},pincode:{flag:!1,validate:function(t){return m({pin:$(t).val()},"POST",$(t).attr("data-url")).done(function(e){"error"==e.result?($(t).val(""),$(".pincode-error").html(e.msg),$(".cust-new-addr-btn").addClass("btn-default").attr("type","button"),fn.pincode.flag=!0):($(".pincode-error").html(""),$(".cust-new-addr-btn").addClass("address-validated"),$(".cust-new-addr-btn").addClass("address-validated"),$(".cust-new-addr-btn").removeClass("btn-default").attr("type","submit"),fn.pincode.flag=!1)}),fn.pincode.flag}},checkout:{validateCheckout:function(){$(".lec-btn-prodeed-pay-tab").click(function(e){if(e.preventDefault(),""==$(".customAddressId").val())Materialize.toast("Please select delivery address",3e3);else{if("later"==$(".customDeliveryType").val()&&""==$(".customDeliverySlot").val())return Materialize.toast("Please select delivery Slot",3e3),!1;var t;ga("send","event","Order Summary","click","Proceed To Payment"),$(".lec-btn-prodeed-pay-tab").hasClass("exotic")?(t=$(".lec-btn-prodeed-pay-tab").html(),""==$("#exoticdate").val()?Materialize.toast("Please select Exotic delivery Slot",3e3):($(".lec-btn-prodeed-pay-tab").html("Processing..."),m({slotEx:$("#exoticslot").val(),dateEx:$("#exoticdate").val()},"POST",$(".delivery-slot-row-exotic").attr("data-url")).done(function(e){$('.check-step[data-type="payment"]').removeClass("inactive-checkout"),$(".checkout-tab").removeClass("active animated fadeIn"),$(".checkout-tab.payment").addClass("active animated fadeIn"),a($(".check-step-2 .checkout-number")),$("html, body").animate({scrollTop:0},600),$(".check-step-3").click(r),$(".lec-btn-prodeed-pay-tab").html(t)}))):($('.check-step[data-type="payment"]').removeClass("inactive-checkout"),$(".checkout-tab").removeClass("active animated fadeIn"),$(".checkout-tab.payment").addClass("active animated fadeIn"),a($(".check-step-2 .checkout-number")),$("html, body").animate({scrollTop:0},600),$(".check-step-3").click(r))}return!1})},continue:function(){$(".lec-btn-prodeed-payment").on("click",function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).html("Processing Your Request.."),m($(this).serialize(),"GET","/cart/lockstock").done(function(e){"error"==e.result?(Materialize.toast("Some items went out of stock..",3e3),location.reload(),$(".lec-btn-prodeed-payment").html("Checkout")):(h(),$(".checkout-li").removeClass("active"),a($(".check-step-1 .checkout-number")),$('.check-step[data-type="address"]').removeClass("inactive-checkout"),$(".checkout-tab").removeClass("active animated fadeIn"),$(".checkout-tab.address").addClass("active animated fadeIn"),$(".check-step-1").removeClass("lock"),$("html, body").animate({scrollTop:0},600),$(".lec-btn-prodeed-payment").html("Checkout"),ga("send","event","Checkout","click","Proceed To Checkout"),$(".check-step-2").click(r))})})},guest_continue:function(){$(".checkout-customer-addr-row").click(function(){if(1==$(".add_msg_div").data("msg")){var e=$(".checkout-customer-addr-row").find(".collapsible-header");if(!e.hasClass("active"))return Materialize.toast("To order only eggs, add another pack",3e3),!1;e.trigger("click")}})},g_check:0,initGuestCheckout:function(){$(".lec-btn-prodeed-address").click(function(e){e.preventDefault(),$(".order-summary").find(".collapsible-header").trigger("click"),$(".checkout-customer-addr-row").find(".collapsible-header").trigger("click"),fn.checkout.g_check=1})},guest_info:{name:"",email:"",phone:""},guest_pincode:function(){$(".guest_pincode").on("change",function(e){fn.pincode.validate($(this))})},get_guest_info:function(){var e=$(".customer_key_value").data("custkey");u({},"GET",$(".get-guest-info").data("url")+"/"+e).done(function(e){fn.checkout.guest_info.name=e.data.name,fn.checkout.guest_info.email=e.data.email,fn.checkout.guest_info.phone=e.data.phone}).fail(function(e){})},set_guest_info:function(){var e=$(".customer_key_value").data("custkey"),t=$(".set-guest-info").data("url"),a=$(".guest_name").val(),o=$(".guest_email").val(),s=$(".guest_phone").val(),n=$(".guest_login_error"),r=$(".guest_url_redirect").data("url");""==a||""==o||""==s?n.html("All Fields are mandatory, Please provide all the details"):!s.match(/^\d{10}$/)||s.length<10?n.html("Please provide valid phone number"):s.charAt(0)<6?n.html("phone number should start with 6/7/8/9"):o.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?0==/^[A-z ]+$/.test(a)?n.html("Name can not contain numbers and special characters"):(n.html(""),u({customer_key:e,name:a,email:o,phone:s},"GET",t).done(function(e){"success"==JSON.parse(e).status?window.location.href=r:Materialize.toast("Something went wrong, Please retry",3e3)})):n.html("Please provide valid email")},validateGuestCheckout:function(){$(".lec-gst-btn-prodeed-pay-tab").click(function(e){e.preventDefault();var t=$(".guest-form"),a=t.find(".addr-line1").val(),o=t.find(".addr-line2").val(),s=t.find(".city").val(),n=t.find(".state").val(),r=t.find(".guest_pincode").val(),i=$(".lec-gst-btn-prodeed-pay-tab"),l=$("#exoticdate").val(),d=$(".set-exotic-slot").data("url"),c=$(".set-guest-addr").data("url"),p=$(".customer_key_value").data("custkey");return""==a||""==o||""==s||""==n||""==r?Materialize.toast("Please fill in delivery address details",3e3):i.hasClass("exotic")?""==l?Materialize.toast("Please select Exotic delivery Slot",3e3):u({slotEx:$("#exoticslot").val(),dateEx:$("#exoticdate").val()},"POST",d).done(function(e){u({customer_key:p,name:fn.checkout.guest_info.name,email:fn.checkout.guest_info.email,phone:fn.checkout.guest_info.phone,line1:a,line2:o,pincode:r,city:s,state:n,lat:$('input[name="lat"]').val(),lng:$('input[name="lng"]').val()},"POST",c).done(function(e){$(".checkout-customer-addr-row").find(".collapsible-header").trigger("click");var t=$(".checkout-payments-tab").find(".collapsible-header");t.hasClass("active")||t.trigger("click")})}):u({customer_key:p,name:fn.checkout.guest_info.name,email:fn.checkout.guest_info.email,phone:fn.checkout.guest_info.phone,line1:a,line2:o,pincode:r,city:s,state:n,lat:$('input[name="lat"]').val(),lng:$('input[name="lng"]').val()},"POST",c).done(function(e){$(".checkout-customer-addr-row").find(".collapsible-header").trigger("click");var t=$(".checkout-payments-tab").find(".collapsible-header");t.hasClass("active")||t.trigger("click")}),!1})},run:function(){fn.checkout.validateCheckout(),fn.checkout.initGuestCheckout(),fn.checkout.validateGuestCheckout(),fn.checkout.guest_pincode(),fn.checkout.continue(),fn.checkout.guest_continue()}},user:{lictabs:function(){$(".lw-tabs li").click(function(){var e=$(this).attr("data-div");$(".lw-tabs li").removeClass("active"),$(this).addClass("active"),"info"==e?($(".tab-div").hide(),$(".info").show()):($(".tab-div").hide(),$(".trnc-history").show())})},licTrHis:function(){$(".lw-tabs .tr-hist").click(function(){$(".trans-list").html("<li>Processing....</li>"),$.ajax({data:{customer_key:$(".customer_key").val()},type:"GET",url:$(".trns-hist-api").attr("data-url"),headers:{token:$(".cust_token").val()}}).done(function(e){$(".trans-list").html(""),$.map(e.data,function(e){class_name="Debited"==e.type?"debit":"credit";var t=e.date.split(" ");f_date=new Date(t[0]),newDate=f_date.toDateString(),newDate=newDate.split(" "),newDate=newDate[2]+" "+newDate[1]+" "+newDate[3];var a='<li><div class = "date"><h4>'+newDate+"</h4><p>"+e.reason+'</p></div><div class = "'+class_name+'"><p>'+e.type+"</p><h4>Cash: <span> "+e.licious_cash+" </span> Cash+: <span>"+e.licious_cashp+"</span></h4></div></li>";$(".trans-list").append(a)})})})},run:function(){fn.user.lictabs(),fn.user.licTrHis()}},add_message:{close:function(){$(".add_message span").click(function(){$(".add_message").removeClass("fadeInUp"),$(".add_message").addClass("fadeOutDown")})}},checkout_oos:{page:window.location.href,order_page:"order-summary",delivery_page:"delivery-info",summary_page:"delivery-summary",payment_page:"payment",city_state_map:{Hyderabad:"Telangana",Bengaluru:"Karnataka",Bangalore:"Karnataka"},city_id_map:{Hyderabad:2,Bengaluru:1,Bangalore:1},localAddr:{},offeredProducts:function(){fn.checkout_oos.ajaxForm({},"GET","/checkout_oos/offered-products").done(function(e){var t,a;function p(e,t,a,o){return"percentage"==a?Math.round(e-e*t/100):"flat"==a?Math.round(e-t):"nooffer"==a&&0<o?Math.round(e-e*o/100):e}"success"==(e=JSON.parse(e)).status?(t=" "+e.title+" ",$(".crossel-wrap .heading").html(t),$(".crossel-products").html(""),a=" "+e.delivery_free_message+" ",$(".freedelivery-wrapper .freedelivery-text").html(a),$.each(e.data,function(e,t){var a,o="flat"==t.crosssell.type?"show":"hide",s="flat"!=t.crosssell.type?"show":"hide",n="delivery"==t.crosssell.type||"nooffer"==t.crosssell.type?"hide":"show",r="nooffer"==t.crosssell.type?"hide":"show",i="nooffer"==t.crosssell.type&&0<t.base_discount?"show":"hide",l="nooffer"==t.crosssell.type&&0<t.base_discount?"hide":"show",d=""==t.pieces?t.net:t.pieces+" Pieces";"percentage"==t.crosssell.type?a=t.crosssell.value+" %Off":"delivery"==t.crosssell.type?a="Free Delivery":"flat"==t.crosssell.type?a=t.crosssell.value+" Off":"nooffer"==t.crosssell.type&&0<t.base_discount&&(a=t.base_discount+" %Off");var c='<li class = "csid-'+t.crosssell.parent_product_id+" productid-"+t.crosssell.product_id+'"><div class = "product-img"><img src=" '+t.pr_image+' " alt="Image name"><span class = "discount-label '+i+'">'+a+'</span><span class = "discount-label '+r+" "+s+'">'+a+'</span><span class = "discount-label rupee '+o+'">'+a+'</span></div><div class="product-name">'+t.merchandise_name+'</div><div class = "product-pricing disc '+l+'" ><div class = "pricing discount"><span class = "rupee '+n+'">'+t.base_price+'</span><span class = "text-red discount rupee ">'+p(t.base_price,t.crosssell.value,t.crosssell.type)+'</span></div><div class = "weight">'+d+'</div></div><div class = "product-pricing disc '+i+'" ><div class = "pricing discount"><span class = "rupee ">'+t.base_price+'</span><span class = "text-red discount rupee ">'+p(t.base_price,t.crosssell.value,t.crosssell.type,t.base_discount)+'</span></div><div class = "weight">'+d+'</div></div><div class = "product-cta"><button class = "btn" data-prid = '+t.crosssell.product_id+" data-crosssellid = "+t.crosssell.id+" data-offertype = "+t.crosssell.type+' data-prname = "'+t.merchandise_name+'" data-baseprice = '+p(t.base_price,t.crosssell.value,t.crosssell.type,t.base_discount)+">Add</button></div></li>";$(".crossel-products").append(c),$(".crossel-wrap").show()}),fn.checkout_oos.addCartItem()):$(".order-summary .crossel-wrap").hide()}).always(function(e){JSON.parse(e).status})},cartCount:function(){fn.checkout_oos.ajaxForm({},"GET","/checkout_oos/cart-count").done(function(e){"success"==(e=JSON.parse(e)).status&&(0<e.data&&$(".cart i").html()&&e.data!=$(".cart i").html()?($(".cart i").html(e.data),$(".cart").addClass("loaded"),(window.location.href.includes("/favourite-items")||window.location.href.includes("/past-orders"))&&fn_home.quickCheckout()):0===e.data&&($(".cart i").html("0"),$(".cart").removeClass("loaded"),$(".quick-checkout.fade-in").length&&(window.location.href.includes("/favourite-items")||window.location.href.includes("/past-orders"))&&($(".slots-layout").removeClass("fade-in"),$(".slot-detials").removeClass("fade-in"),$("#slotAction").html("View"),$(".background-div").removeClass("dull-background"),$(".quick-checkout").removeClass("fade-in"),$(".quick-checkout .payment").removeClass("hide-class"),window.location.href.includes("/past-orders")&&location.reload())))})},setTotalbar:function(){$(window).on("scroll load resize",function(){document.querySelector(".total-wrapper").offsetTop+65>window.innerHeight+$(window).scrollTop()?$(".total-wrapper").find(".fix-div").addClass("fixed"):$(".total-wrapper").find(".fix-div").removeClass("fixed")})},changeAddress:function(){$(".delivery-addr").find(".change-addr").click(function(){$(".page-holder").find(".addr-container").show(),$(".page-holder").find(".change-addr").hide(),$(".page-holder").find(".close-change-addr").show(),fn.checkout_oos.closeChangeAddress()})},closeChangeAddress:function(){$(".delivery-addr").find(".close-change-addr").click(function(){$(".page-holder").find(".close-change-addr").hide(),$(".page-holder").find(".change-addr").show(),$(".page-holder").find(".addr-container").hide()})},selectAddress:function(){$(".addr-holder .addr").on("click",function(e){e.stopImmediatePropagation();var o=$(this).find(".this-addr").html(),s=$(this).data("addrid"),n=$(this).data("pin"),r=$(this).data("lat"),i=$(this).data("lng"),l=($(".selected-addr").html(),$(this).data("city")),d=$(this);fn.checkout_oos.verifyService(r,i).done(function(e){var t,a=JSON.parse(e);"LOCATION_CHANGED"==a.status?(t=a.message,fn.checkout_oos.showAlert(t,"change","addr"),fn.checkout_oos.updateCartLocation(r,i,l),fn.checkout_oos.changeAddressAlert(),$(".pages.delivery-details").removeClass("loader-div complete"),d.css("opacity","1"),d.prop("disabled",!1),localStorage.setItem("default_addr_id",s)):"SERVICABLE"==a.status&&null!=a.data?fn.checkout_oos.ajaxForm({location:a.data.address,lat:a.data.lat,lng:a.data.lng,clearcart:"false"},"POST","/get-location").done(function(e){"success"==e.result?($(".location-name").html(a.data.address),$(".location-name").attr("title",a.data.address),fn.checkout_oos.hideAlert(),fn.checkout_oos.reLockOrder(),$(".delivery-details").find(".delivery-option ").show(),$(".checkout-shipment-summary").prop("disabled",!1),$(".checkout-shipment-summary").removeClass("disabled"),$(".addr-container").find(".oos-alert").hide(),$(".addr-holder").find(".addr").removeClass("selected"),d.addClass("selected"),localStorage.setItem("hub_id",a.data.hub_id),$(".delivery-addr").find(".selected-addr").html(o.replace("<br>"," ")),localStorage.setItem("default_addr",o.replace("<br>"," ")),localStorage.setItem("default_addr_id",s),localStorage.setItem("default_addr_lat",r),localStorage.setItem("default_addr_lng",i),localStorage.setItem("city_name",l)):(fn.checkout_oos.showAlert(e.msg,"dismiss","addr"),fn.checkout_oos.closeLocationAlert())}):"ERROR"==a.status||"error"==a.status?(fn.checkout_oos.showAlert(a.message,"dismiss","addr"),fn.checkout_oos.closeLocationAlert()):($(".set-pincode").data("val",n),$(".addr-holder").find(".addr").removeClass("selected"),d.addClass("selected"),$(".delivery-summary").find("."+s).addClass("selected"),$(".customAddressId").val(s),$(".delivery-addr").find(".selected-addr").html(o.replace("<br>"," ")),localStorage.setItem("default_addr",o.replace("<br>"," ")),localStorage.setItem("default_addr_id",s),localStorage.setItem("default_addr_lat",r),localStorage.setItem("default_addr_lng",i))})})},closeLocationAlert:function(){$(".alert-cta .change-address").on("click",function(){$(".alert-screen").hide(),fn_sublocation.gaSublocation("SL-Address Alert - Change Address","Click","")})},changeAddressAlert:function(){$(".alert-cta .change-address").on("click",function(e){e.stopImmediatePropagation(),$(".alert-screen").hide(),$(".delivery-addr").find(".change-addr").hide(),$(".delivery-addr").find(".close-change-addr").show(),$(".delivery-addr").find(".addr-container").show(),fn_sublocation.gaSublocation("SL-Address Alert - Change Address","Click","")})},updateCartLocation:function(t,a,o){$(".alert-cta .review-cart").on("click",function(e){e.stopImmediatePropagation(),fn_sublocation.gaSublocation("SL-Address Alert - Review Cart","Click",""),fn.checkout_oos.updateCartLocationApi(t,a).done(function(e){var t=JSON.parse(e);"LOCATION_CHANGED"==t.status||"SERVICABLE"==t.status?fn.checkout_oos.ajaxForm({location:t.data.address,lat:t.data.lat,lng:t.data.lng,clearcart:"false"},"POST","/get-location").done(function(e){"success"==e.result&&($(".location-name").html(t.data.address),fn.checkout_oos.navigate(fn.checkout_oos.order_page),fn.checkout_oos.hideAlert(),localStorage.setItem("hub_id",t.data.hub_id),localStorage.setItem("city_name",o))}):(fn.checkout_oos.hideAlert(),fn.checkout_oos.navigate(fn.checkout_oos.order_page))})})},gotoCart:function(){$(".goto-cart").on("click",function(){fn.checkout_oos.navigate(fn.checkout_oos.order_page),$(".alert-screen").hide(),fn_sublocation.gaSublocation("SL-Address Alert - Review Cart","Click","")})},dismissAlert:function(){$(".dismiss").on("click",function(){$(".alert-screen").hide()})},updateCartLocationApi:function(e,t){return fn.checkout_oos.ajaxForm({lat:e,lng:t},"POST","/checkout_oos/update-cart-location")},verifyAddr:function(e){var t="/checkout_oos/change-addr/"+e;return fn.checkout_oos.ajaxForm({},"POST",t)},verifyService:function(e,t){return fn.checkout_oos.ajaxForm({lat:e,lng:t},"POST","/checkout_oos/change-address")},getCities:function(a){fn.checkout_oos.ajaxForm("","GET","/checkout_oos/get-addr-cities").done(function(e){var t=JSON.parse(e);if("success"==t.status){switch($(".add-addr-pop").find(".addr-city").val(t.data.city_name),$(".add-addr-pop").find(".addr-state").val(t.data.state),localStorage.setItem("city_id",t.data.city_id),a){case"edit":fn.checkout_oos.showAddrPopup("edit"),fn.checkout_oos.hideAddrPopup();break;case"add-guest":fn.checkout_oos.showAddrPopup("create-new");break;case"add":fn.checkout_oos.showAddrPopup("add-new-addr");break;case"add-one":fn.checkout_oos.validateAddrForm("save"),fn.checkout_oos.showAddrPopup("add-new")}1===t.data.sub_location?($(".ui.dropdown").show(),$(".addr-line2").hide(),fn.checkout_oos.getLocality(t.data.city_id)):($(".ui.dropdown").hide(),$(".addr-line2").show())}})},getLocality:function(e){fn.checkout_oos.ajaxForm({city_id:e},"POST","/checkout_oos/get-addr-locality").done(function(e){var t=JSON.parse(e);"success"==t.status&&($(".ui.dropdown").show(),$('input[type="text"].addr-line2').hide(),$(".dropdown").find(".menu").html(""),$.map(t.data,function(e){var t='<div class="item" data-value="'+e.sublocation+'"></i>'+e.sublocation+"</div>";$(".dropdown").find(".menu").append(t)}))})},fetchAddrs:function(l){$(".delivery-addr").find(".address-container").removeClass("reset"),$(".delivery-addr").find(".add-addr-screen").hide();var d=$(".user_type").data("val");fn.checkout_oos.ajaxForm("","GET","/checkout_oos/get-addr").done(function(e){var t,a,s,n,r,o,i=JSON.parse(e);"success"==i.status?($(".addr-container .user-name").val(),$(".addr-container").find(".addr-holder").html(""),t='Your <span class="text-red">Delivery Address</span> is<div class = "selected-addr"></div><div class = "change-addr text-red">Change My Address</div><div class = "close-change-addr text-red">Collapse</div>',a='Your <span class="text-red">Delivery Address</span> is<div class = "selected-addr"></div>',$(".delivery-details .delivery-addr .oos-header.addr-header").html(t),$(".delivery-summary .delivery-addr .oos-header.addr-header").html(a),$(".delivery-addr").find(".change-addr").show(),$(".delivery-addr").find(".close-change-addr").hide(),s=localStorage.getItem("default_addr_id"),n=localStorage.getItem("hub_id"),r=!1,$.map(i.address,function(e,t){var a="";"save"==l||null==s||""==s?0==t&&n==e.hub_id?(a="selected",$(".customAddressId").val(e.address_id),$(".set-pincode").data("val",e.pincode),$(".selected-addr").html(e.line1+" "+e.line2+" "+e.city+" "+e.state+","+e.pincode),localStorage.setItem("default_addr",e.line1+" "+e.line2+" "+e.city+" "+e.state+","+e.pincode),localStorage.setItem("default_addr_id",e.address_id),localStorage.setItem("default_pin",e.pincode),localStorage.setItem("default_addr_lat",e.lat),localStorage.setItem("default_addr_lng",e.lng),r=!0):a="":s==e.address_id&&n==e.hub_id?(a="selected",$(".customAddressId").val(e.address_id),$(".set-pincode").data("val",e.pincode),$(".selected-addr").html(e.line1+" "+e.line2+" "+e.city+" "+e.state+","+e.pincode),localStorage.setItem("default_addr",e.line1+" "+e.line2+" "+e.city+" "+e.state+","+e.pincode),localStorage.setItem("default_addr_id",e.address_id),localStorage.setItem("default_pin",e.pincode),localStorage.setItem("default_addr_lat",e.lat),localStorage.setItem("default_addr_lng",e.lng),r=!0):a="";var o='<div class = "addr '+e.address_id+" "+a+'" data-addrid="'+e.address_id+'" data-pin="'+e.pincode+'" data-lat="'+e.lat+'" data-lng="'+e.lng+'" data-city="'+e.city+'"><div class="select-addr"><span></span></div><div class="addr-details"><h5>'+e.line1+'</h5><p class = "this-addr">'+e.line2+'</p><p class = "this-landmark">'+(null!=e.landmark?e.landmark:"")+'</p><p class = "this-city">'+e.city+"</p><p><span>Mobile Number:</span>"+e.contact+'</p></div><div class = "addr-actions"><img src="https://d2407na1z3fc0t.cloudfront.net/Banner/edit.png"alt="Edit Addr" class = "edit-addr" data-clickname="checkout" data-addrid = '+e.address_id+'><img src="https://d2407na1z3fc0t.cloudfront.net/Banner/delete-icon2.png"alt="Delete Addr" class = "delete-addr" data-addrid = '+e.address_id+"></div></div>";$(".addr-container").find(".addr-holder").append(o)}),r?(fn.checkout_oos.reLockOrder(),$(".delivery-details").find(".delivery-option ").show(),$(".checkout-shipment-summary").prop("disabled",!1),$(".checkout-shipment-summary").removeClass("disabled"),$(".addr-container").find(".oos-alert").hide()):($(".page-holder").find(".addr-container").show(),$(".delivery-addr").find(".change-addr").hide(),$(".delivery-addr").find(".close-change-addr").show(),$(".delivery-details").find(".delivery-option ").hide(),$(".checkout-shipment-summary").prop("disabled",!0),$(".checkout-shipment-summary").addClass("disabled"),$(".addr-container").find(".oos-alert").show())):"error"==i.status&&"guest"==d?null==(o=localStorage.getItem("default_addr"))||""==o?($(".delivery-addr").find(".change-addr").hide(),$(".page-holder").find(".address-container").addClass("reset"),$(".page-holder").find(".address-container").removeClass("create-new"),$(".page-holder").find(".address-container").removeClass("add-new"),$(".page-holder").find(".address-container").removeClass("edit"),$(".page-holder").find(".address-container").addClass("create-new"),$(".page-holder").find(".add-addr-screen").show(),$(".delivery-addr .oos-header").html('Add <span class="text-red">new address</span>'),fn.checkout_oos.validateAddrForm("save"),fn.checkout_oos.changeCity(),fn.checkout_oos.validateNumbers()):($(".delivery-addr").find(".address-container").removeClass("reset"),$(".delivery-addr").find(".add-addr-screen").hide()):"error"==i.status&&"auth"==d&&($(".page-holder").find(".address-container").addClass("reset"),$(".delivery-addr").find(".change-addr").hide(),$(".delivery-addr").find(".close-change-addr").show(),$(".page-holder").find(".address-container").removeClass("create-new"),$(".page-holder").find(".address-container").removeClass("add-new"),$(".page-holder").find(".address-container").removeClass("edit"),$(".page-holder").find(".address-container").addClass("add-new-addr"),$(".page-holder").find(".add-addr-screen").show(),$(".delivery-addr .oos-header").html('Add <span class="text-red">new address</span>'),fn.checkout_oos.validateAddrForm("save"),fn.checkout_oos.changeCity(),fn.checkout_oos.validateNumbers()),fn.checkout_oos.editAddr(),fn.checkout_oos.deleteAddr(),fn.checkout_oos.changeAddress(),fn.checkout_oos.closeChangeAddress(),fn.checkout_oos.selectAddress(),fn.checkout_oos.validateAddrForm("save")})},getAddr:function(n){fn.checkout_oos.ajaxForm("","POST","/checkout_oos/get-addrs/"+n).done(function(e){var t,a,o,s=JSON.parse(e);"success"==s.status?((t=$(".address-container")).attr("data-addrid",n),t.find(".newlocation").val(s.data.line1),t.find(".flataddress").val(s.data.line2),t.find(".newlocation").attr("data-latlng",JSON.stringify({lat:s.data.lat,lng:s.data.lng})),t.find(".addresscity").val(s.data.city),t.find(".mobileno").val(s.data.contact),t.find(".addlandmark").val(s.data.landmark),fn.checkout_oos.showAddrPopup("edit"),fn.checkout_oos.hideAddrPopup(),a={lat:s.data.lat,lng:s.data.lng},o=new google.maps.LatLng(a.lat,a.lng),map.panTo(o),marker.setPosition(o),map.panBy(263,0)):Materialize.toast("Network Problem, Please try again",3e3)})},deleteAddr:function(a){$(".delete-addr").on("click",function(e){e.stopImmediatePropagation();var t=$(this).data("addrid");fn.checkout_oos.ajaxForm("","POST","/checkout_oos/delete-addr/"+t).done(function(e){"success"==JSON.parse(e).status?($(".addr-holder").find("."+t).remove(),$(".selected-addr").html(""),Materialize.toast("Address was deleted",3e3),"profile"==a&&fn.checkout_oos.renderProfileAddr(),fn.checkout_oos.fetchAddrs()):Materialize.toast("Network Problem, Please try again",3e3)})})},validatePincode:function(e,t){m({},"POST","/checkout_oos/pincode-validate/"+e+"/"+t).done(function(e){"error"==JSON.parse(e).status?($(".add-addr-pop").find(".pincode").addClass("invalid"),$(".add-addr-pop").find(".pincode input").val("").focus()):$(".add-addr-pop").find(".pincode").removeClass("invalid")})},validateAddrForm:function(){$(".address-container").find('input[name="addr-line2"]').each(function(e,t){$(t).on("change",function(){var a=$(this).val();$(".address-container").find(".addr-line2").each(function(e,t){$(t).attr("value",a)})})}),$(".addr-cta .btn.send").on("click",function(e){e.stopImmediatePropagation();var t=$(this).data("type"),a=$(".address-container"),o=a.find(".pincode").val(),s=a.find(".mobileno").val(),n=a.find(".newlocation").val(),r=a.find(".flataddress").val(),i=a.find(".addlandmark").val(),l=a.find(".addresscity").val(),d=a.find(".state").val(),c=a.attr("data-addrid"),p=a.find(".emailnew").val(),u=a.find(".fullnamenew").val(),m=JSON.parse(a.find(".newlocation").attr("data-latlng")),h=!1,f={addr_1:{val:r},addr_2:{val:n},city:{val:l},state:{val:d},pincode:{val:o},mobile:{val:s},lat:{val:m.lat},lng:{val:m.lng},landmark:{val:i},email:{val:p},fullname:{val:u}};if($.each(f,function(e,t){if(""==t.val){switch(e){case"addr_2":""==t.val?(a.find(".required, .pincode, .mobile").removeClass("error"),a.find(".newlocation").parent().addClass("error")):a.find(".newlocation").parent().removeClass("error");break;case"addr_1":""==t.val?(a.find(".required, .pincode, .mobile").removeClass("error"),a.find(".flataddress").parent().addClass("error")):a.find(".flataddress").parent().removeClass("error");break;case"city":""==t.val?(a.find(".required, .pincode, .mobile").removeClass("error"),a.find(".addresscity").parent().addClass("error")):a.find(".addresscity").parent().removeClass("error");break;case"mobile":""==t.val?(a.find(".required, .pincode, .mobile").removeClass("error"),a.find(".mobileno").parent().addClass("error")):a.find(".mobileno").parent().removeClass("error");break;case"email":""==t.val?(a.find(".required, .pincode, .mobile").removeClass("error"),a.find(".emailnew").parent().addClass("error")):a.find(".emailnew").parent().removeClass("error");break;case"fullname":""==t.val?(a.find(".required, .pincode, .mobile").removeClass("error"),a.find(".fullnamenew").parent().addClass("error")):a.find(".fullnamenew").parent().removeClass("error")}if("landmark"!=e)return h=!1}else switch(e){case"mobile":if(!/^[6789]\d{9}$/.test(t.val))return a.find(".required").removeClass("error"),a.find(".mobileno").parent().addClass("error"),h=!1;a.find(".required").removeClass("error"),h=!0;break;case"email":if(!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.val))return a.find(".required").removeClass("error"),a.find(".emailnew").parent().addClass("error"),h=!1;a.find(".required").removeClass("error"),h=!0}}),h)switch(a.find(".required, .pincode, .mobile").removeClass("error"),$(this).prop("disabled",!0),$(this).addClass("disabled"),t){case"save":fn.checkout_oos.saveAddr(f);break;case"update":fn.checkout_oos.updateAddr(f,c);break;case"guest_addr":fn.checkout_oos.setGuestAddr(f);break;case"new_addr":fn.checkout_oos.saveAddr(f);break;case"new_addr_profile":fn.checkout_oos.saveAddrProfile(f);break;case"update_addr_profile":fn.checkout_oos.updateAddrProfile(f,c)}})},validateNumbers:function(){$(".addr-pincode, .addr-mobile").on("keypress paste",function(e){var t=(e=e||window.event).which?e.which:e.keyCode;return!(31<t&&(t<48||57<t))}),$(".addr-pincode, .addr-mobile").on("change",function(e){var t,a=$(".add-addr-pop").find(".addr-pincode"),o=$(".add-addr-pop").find(".addr-mobile"),s=/^\d+$/;!s.test(a.val())||a.val().length<6?(a.parent().addClass("error"),a.val("")):(t=localStorage.getItem("city_id"),fn.checkout_oos.validatePincode(a.val(),t),a.parent().removeClass("error")),!s.test(o.val())||o.val().length<10||o.val().charAt(0)<6?(o.parent().addClass("error"),o.val("")):o.parent().removeClass("error")})},changeCity:function(){$(".add-addr-pop").find(".select-dropdown li").on("click",function(){var e=$(this).text();$(".addr-state").val(fn.checkout_oos.city_state_map[e])})},showAddrPopup:function(e){var t=$(".address-container");t.addClass("reset"),t.addClass(e),$(".add-addr-screen").show()},addAddr:function(){$(".add-new-addr-btn").on("click",function(){fn.checkout_oos.checkProfile(),fn.checkout_oos.hideAddrPopup(),fn.checkout_oos.showAddrPopup("add-new")})},editAddr:function(){$(".edit-addr").on("click",function(e){var t;e.stopImmediatePropagation(),fn.checkout_oos.checkProfile(),$(e.target).hasClass("edit-addr")&&($(".address-container").find(".newlocation").prop("disabled",!0),$(".address-container").find(".mapBlocker").show(),t=$(this).data("addrid"),fn.checkout_oos.getAddr(t),fn.checkout_oos.validateAddrForm("update"),"profile"==$(this).data("clickname")&&fn_sublocation.gaSublocation("Profile - EditAddress","Click",""),"checkout"==$(this).data("clickname")&&fn_sublocation.gaSublocation("Cart - EditAddress","Click",""))})},checkProfile:function(){var e=JSON.parse(localStorage.getItem("profile_complete")),t=$(".address-form").find(".email"),a=$(".address-form").find(".fullname");"true"===e.status||1==e.status?(t.hide().find(".emailnew").val(e.email),a.hide().find(".fullnamenew").val(e.name)):(t.show(),a.show())},getPin:function(e){var a="";return $.map(e,function(e,t){"postal_code"===e.types[0]&&(a=e.long_name)}),a},saveAddr:function(a){var e={line1:a.addr_1.val,line2:a.addr_2.val,landmark:a.landmark.val,city:a.city.val,state:a.state.val,pincode:Number(a.pincode.val),contact:a.mobile.val,lat:a.lat.val,lng:a.lng.val};"false"==JSON.parse(localStorage.getItem("profile_complete")).status&&Object.assign(e,{email:a.email.val,name:a.fullname.val}),fn.checkout_oos.ajaxForm(e,"POST","/checkout_oos/save-addr").done(function(e){var t=JSON.parse(e);"success"==t.status?(fn.checkout_oos.resetForm(),fn.checkout_oos.fetchAddrs("save"),$(".address-container").removeClass("reset"),$(".address-container").attr("class","address-container"),$(".add-addr-screen").hide(),$(".addr-header").find(".selected-addr").html(a.addr_1.val),localStorage.setItem("profile_complete",JSON.stringify({status:!0,email:a.email.val,name:a.fullname.val}))):"error"==t.status&&(fn.checkout_oos.showAlert(t.message,"dismiss","addr"),fn.checkout_oos.closeLocationAlert())}).always(function(){$(".addr-cta .btn.send").prop("disabled",!1),$(".addr-cta .btn.send").removeClass("disabled")})},saveAddrProfile:function(a){var e={line1:a.addr_1.val,line2:a.addr_2.val,landmark:a.landmark.val,city:a.city.val,state:a.state.val,pincode:Number(a.pincode.val),contact:a.mobile.val,lat:a.lat.val,lng:a.lng.val};"false"==JSON.parse(localStorage.getItem("profile_complete")).status&&Object.assign(e,{email:a.email.val,name:a.fullname.val}),fn.checkout_oos.ajaxForm(e,"POST","/checkout_oos/save-addr").done(function(e){var t=JSON.parse(e);"success"==t.status?(fn.checkout_oos.resetForm(),fn.checkout_oos.renderProfileAddr(),$(".address-container").removeClass("reset"),$(".address-container").attr("class","address-container"),$(".add-addr-screen").hide(),localStorage.setItem("profile_complete",JSON.stringify({status:!0,email:a.email.val,name:a.fullname.val}))):"error"==t.status&&(fn.checkout_oos.showAlert(t.message,"dismiss","addr"),fn.checkout_oos.closeLocationAlert())}).always(function(){$(".addr-cta .btn.send").prop("disabled",!1),$(".addr-cta .btn.send").removeClass("disabled")})},renderProfileAddr:function(){fn.checkout_oos.ajaxForm("","GET","/checkout_oos/get-addr").done(function(e){var t=JSON.parse(e);"success"==t.status?($(".addr-container .user-name").val(),$(".addr-holder").html(""),$.map(t.address,function(e,t){var a='<div class="row addr-container '+e.address_id+'" ><div class="col s2">\x3c!-- <input name="group1" type="radio" disabled="disabled" id="{{$address[\'address_id\']}}" /> --\x3e<label for=""><img src="/img/elements/house.jpg"/></label></div><div class="col s7 profile-addr h-ssp-reg"><b style="color:black" class = "h-ssp-semi-bold">'+e.line1+"</b><br><label>"+e.line2+", "+e.landmark+"</label><br/><label>"+e.city+" - "+e.pincode+", "+e.state+'</label></div><div class="col s3 right-align action-btns"><img src = "/build/img/edit-icon.png" class="edit-addr" data-clickname="profile" data-addrid="'+e.address_id+'" data-pin="'+e.pincode+'" data-lat="'+e.lat+'" data-lng="'+e.lng+'"/><img src = "/build/img/delete-icon.png"  class="delete-addr" data-addrid="'+e.address_id+'" data-pin="'+e.pincode+'" data-lat="'+e.lat+'" data-lng="'+e.lng+'"/></div></div>';$(".addr-holder").append(a)})):"error"==t.status&&$(".addr-holder").html('<p class="text-red">No Saved Address</p>'),fn.checkout_oos.editAddr(),fn.checkout_oos.deleteAddr()})},updateAddr:function(e,t){$(".addr-cta .btn.send").prop("disabled",!0),fn.checkout_oos.ajaxForm({line1:e.addr_1.val,line2:e.addr_2.val,landmark:e.landmark.val,city:e.city.val,state:e.state.val,pincode:e.pincode.val,contact:e.mobile.val,address_id:t,lat:e.lat.val,lng:e.lng.val},"POST","/checkout_oos/update-addr").done(function(e){"success"==JSON.parse(e).status&&(fn.checkout_oos.resetForm(),fn.checkout_oos.fetchAddrs(),$(".address-container").removeClass("reset"),$(".address-container").attr("class","address-container"),$(".add-addr-screen").hide())}).always(function(){$(".addr-cta .btn.send").prop("disabled",!1),$(".addr-cta .btn.send").removeClass("disabled")})},updateAddrProfile:function(e,t){$(".addr-cta .btn.send").prop("disabled",!0),fn.checkout_oos.ajaxForm({line1:e.addr_1.val,line2:e.addr_2.val,landmark:e.landmark.val,city:e.city.val,state:e.state.val,pincode:e.pincode.val,contact:e.mobile.val,address_id:t,lat:e.lat.val,lng:e.lng.val},"POST","/checkout_oos/update-addr").done(function(e){"success"==JSON.parse(e).status&&(fn.checkout_oos.resetForm(),fn.checkout_oos.renderProfileAddr(),$(".address-container").removeClass("reset"),$(".add-addr-screen").hide())}).always(function(){$(".addr-cta .btn.send").prop("disabled",!1),$(".addr-cta .btn.send").removeClass("disabled")})},setGuestAddr:function(e){$(".addr-cta .btn.send").prop("disabled",!0);var t=$(".set-guest-addr").data("url"),a={customer_key:$(".customer_key_value").data("custkey"),name:$(".guest-name").val(),email:$(".guest-email").val(),phone:$(".guest-mobile").val(),line1:e.addr_1.val,line2:e.addr_2.val,pincode:e.pincode.val,city:e.city.val,state:e.state.val,lat:e.lat.val,lng:e.lng.val,landmark:e.landmark.val};fn.checkout_oos.ajaxFormNC(a,"POST",t).done(function(e){"success"==e.status&&(fn.checkout_oos.resetForm(),$(".address-container").removeClass("reset"),$(".address-container").attr("class","address-container"),$(".add-addr-screen").hide(),$(".delivery-summary .delivery-addr .oos-header").html('Your <span class="text-red">Delivery Address</span> is<div class = "selected-addr"></div>'),$(".delivery-summary .selected-addr").html(a.line1+" "+a.line2+" "+a.city+" "+a.state+","+a.pincode),localStorage.setItem("default_addr",a.line1+" "+a.line2+" "+a.city+" "+a.state+","+a.pincode),localStorage.setItem("default_addr_id",""),localStorage.setItem("default_addr_lat",a.lat),localStorage.setItem("default_addr_lng",a.lng),localStorage.setItem("default_pin",a.pincode),$(".set-pincode").data("val",a.pincode),fn.checkout_oos.localAddr=a,fn.checkout_oos.reLockOrder(),$(".delivery-details").find(".delivery-option ").show(),$(".checkout-shipment-summary").prop("disabled",!1),$(".checkout-shipment-summary").removeClass("disabled"),$(".addr-container").find(".oos-alert").hide())}).always(function(){$(".addr-cta .btn.send").prop("disabled",!1),$(".addr-cta .btn.send").removeClass("disabled")})},hideAddrPopup:function(e){var t=$(".address-container");switch(e){case"save":$(".panel .cancel").on("click",function(){fn.checkout_oos.resetForm(),t.attr("class","address-container"),$(".add-addr-screen").hide()});break;default:$(".add-addr-screen, .panel .cancel").on("click",function(){fn.checkout_oos.resetForm(),t.attr("class","address-container"),$(".add-addr-screen").hide()})}},resetForm:function(){$(":input",".address-form").not(":button, :submit, :reset, :hidden, .select-dropdown").val("").removeAttr("checked").removeAttr("selected"),$(".select-dropdown").val("Select City"),$(".address-container").find(".required, .pincode, .mobile").removeClass("error"),$(".address-container").find(".newlocation").prop("disabled",!1),$(".address-container").find(".mapBlocker").hide()},showAlert:function(e,t,a){var o=$(".alert-screen"),s='<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/alert.png" alt = "Alert!""/>';switch(o.find(".alert-message").html(e),t){case"review":o.find(".btn").hide(),o.find(".review-cart").show();break;case"reload":o.find(".btn").hide(),o.find(".reload-cart").show();break;case"change":o.find(".btn").hide(),o.find(".change-address").show(),o.find(".review-cart").show();break;case"goto":o.find(".btn").hide(),o.find(".goto-cart").show();break;case"dismiss":o.find(".btn").hide(),o.find(".change-address").show();break;case"product":o.find(".btn").hide(),o.find(".view-cart").show();break;case"slots":o.find(".btn").hide(),o.find(".view-cart").show()}switch(a){case"items":o.find(".this-header").html(s+" Alert ["+e+"]");break;case"addr":o.find(".this-header").html(s+"Alert [Change in Delivery Address]");break;case"product":o.find(".this-header").html(s+"Alert [Change in Product Availability]")}o.show()},hideAlert:function(){var e=$(".alert-screen");e.find(".alert-message").html(""),e.hide()},setPageInit:function(){var e=location.hash;if(""==(e=e.replace(/[#_=]/gi,"")))window.location.href=fn.checkout_oos.page+"#order-summary";else switch(e){case"order-summary":fn.checkout_oos.getOrderSummary(),fn.checkout_oos.offeredProducts(),$(".page-holder").find(".pages").hide(),localStorage.removeItem("default_addr"),$(".page-holder").find(".pages.order-summary").show(),$(".checkout-oos .nav").find("li").removeClass("done, active"),$(".checkout-oos .nav").find("li.order-summary").removeClass("done"),$(".checkout-oos .nav").find("li.order-summary").addClass("active"),$(".page-holder").find(".add-addr-screen").hide(),$(".page-holder").find(".address-container").removeClass("reset");break;case"delivery-info":ga("set","page",location.pathname+location.search+location.hash),ga("send","pageview"),fn.checkout_oos.fetchAddrs(),fn.checkout_oos.editOrder(),$(".page-holder").find(".pages").hide(),$(".page-holder").find(".pages.delivery-details").show(),$(".checkout-oos .nav").find("li").removeClass("done, active"),$(".checkout-oos .nav").find(".order-summary").addClass("done"),$(".checkout-oos .nav").find(".nav-delivery-info").addClass("active"),$(".addr-container").hide();var t=localStorage.getItem("default_addr"),a=localStorage.getItem("default_addr_id"),o=localStorage.getItem("default_pin");null==t&&""==t||($(".selected-addr").html(t),$(".customAddressId").val(a),$(".set-pincode").data("val",o));break;case"delivery-summary":ga("set","page",location.pathname+location.search+location.hash),ga("send","pageview"),fn.checkout_oos.getShipmentSummary();t=localStorage.getItem("default_addr"),a=localStorage.getItem("default_addr_id"),o=localStorage.getItem("default_pin");null==t&&""==t||($(".selected-addr").html(t),$(".customAddressId").val(a),$(".set-pincode").data("val",o)),fn.checkout_oos.editShipments(),$(".page-holder").find(".pages").hide(),$(".page-holder").find(".pages.delivery-summary").show(),$(".checkout-oos .nav").find("li").removeClass("done, active"),$(".checkout-oos .nav").find(".order-summary").addClass("done"),$(".checkout-oos .nav").find(".nav-delivery-info").addClass("active");break;case"payment":localStorage.setItem("pay_method","Credit/Debit Card"),fn.checkout_oos.getWalletInfo(),codEligible(),ga("set","page",location.pathname+location.search+location.hash),ga("send","pageview");t=localStorage.getItem("default_addr"),a=localStorage.getItem("default_addr_id"),o=localStorage.getItem("default_pin");null==t&&""==t||($(".selected-addr").html(t),$(".customAddressId").val(a),$(".set-pincode").data("val",o)),$(".page-holder").find(".pages").hide(),$(".page-holder").find(".pages.payment").show(),$(".checkout-oos .nav").find("li").removeClass("done, active"),$(".checkout-oos .nav").find(".order-summary").addClass("done"),$(".checkout-oos .nav").find(".nav-delivery-info").addClass("done"),$(".checkout-oos .nav").find(".pay-details").addClass("active")}},showSlots:function(){$(".slots-selector").bind("click",function(){var t=($(".get-slots-url").data("url"),$(this).data("shipid")),a=$(this).data("type"),o=$(this);$(this).parent().find(".slots-layout").show(),$(this).parent().find(".slots-screen").show(),fn.checkout_oos.ajaxForm({},"POST","/checkout_oos/get-slots/"+t).done(function(e){fn.checkout_oos.renderSlots(e,o,t),fn.checkout_oos.selectSlot(t,a)})}),fn.checkout_oos.hideSlots()},renderSlots:function(e,n,r){var t=JSON.parse(e);$(n).parent().find(".slots-holder").html(""),t.slots[0].express_elligible?($(n).parent().find(".this-header").removeClass("hide"),$(n).parent().find(".this-header").addClass("express"),$(n).parent().find(".this-header").attr("data-date",t.slots[0].date),$(n).parent().find(".this-header").attr("data-shipid",r),$(n).parent().find(".this-header").attr("data-time",t.slots[0].express_value),$(n).parent().find(".this-header").find(".text-red").html(t.slots[0].express_value)):($(n).parent().find(".this-header").addClass("hide"),$(n).parent().find(".this-header").removeClass("express")),$.map(t.slots,function(a,e){var t=new Date(a.timestamp).getDate(),o=["January","February","March","April","May","June","July","August","September","October","November","December"];todomo=t==(new Date).getDate()?"Today ("+t+" "+o[new Date(a.timestamp).getMonth()]+")":t==(new Date).getDate()+1?"Tomorrow ("+t+" "+o[new Date(a.timestamp).getMonth()]+")":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(a.timestamp).getDay()]+" ("+t+" "+o[new Date(a.timestamp).getMonth()]+")";var s='<div class = "slot-day-time slot-'+a.date+'"><div class = "slot-day">'+todomo+'</div><ul class = "slot-time"></ul></div>';$(n).parent().find(".slots-holder").append(s),$.map(a.slots,function(e){var t='<li class = "'+(1==e.status?"a":"n-a")+" "+(e.selected?"selected":"")+'" data-date="'+a.date+'" data-shipid="'+r+'" data-value="'+e.time+'">'+e.time+"</li>";$(n).parent().find(".slot-"+a.date+" .slot-time").append(t)})})},selectSlot:function(l){$(".slot-time").find("li").click(function(){var e=$(this).hasClass("n-a"),n=$(this).data("date"),r=$(this).data("shipid"),i=$(this).data("value"),t="/checkout_oos/select-slot/"+r+"/"+n+"/"+i;e||fn.checkout_oos.ajaxForm({},"POST",t).done(function(e){var t=JSON.parse(e),a=JSON.parse(localStorage.getItem("DeliverySlots")),o=[],s=[];$.map(t.shipments,function(e){e.id==r&&(e.delivery_type,$.map(e.products,function(e){o.push(e.product_id),s.push(e.product_name)}))}),clevertap.event.push("Slot Selection",{Date:n,Time:i,"Shipment Id":r}),$(".shipment-container.details").html(""),-1==a.indexOf(l)&&(a.push(l),localStorage.setItem("DeliverySlots",JSON.stringify(a))),fn.checkout_oos.renderShipments(e),fn.checkout_oos.showSlots()})}),fn.checkout_oos.clickSlotExpress()},clickSlotExpress:function(){$(".slots-layout").find(".this-header.express").on("click",function(e){e.stopImmediatePropagation();var s=($(this).hasClass("n-a"),$(this).data("date")),n=$(this).data("shipid"),r=$(this).data("time"),t="/checkout_oos/select-slot/"+n+"/"+s+"/"+r;fn.checkout_oos.ajaxForm({},"POST",t).done(function(e){var t=JSON.parse(e),a=[],o=[];$.map(t.shipments,function(e){e.id==n&&(e.delivery_type,$.map(e.products,function(e){a.push(e.product_id),o.push(e.product_name)}))}),$.map(t.shipments,function(){clevertap.event.push("Slot Selection",{Date:s,Time:r,"Shipment Id":n})}),$(".shipment-container.details").html(""),fn.checkout_oos.renderShipments(e),fn.checkout_oos.showSlots()})})},hideSlots:function(){$(".slots-screen").on("click",function(){$(this).hide(),$(this).parent().find(".slots-layout").hide()})},getOrderSummary:function(t){var e=$(".order-summary-url").data("url");fn.checkout_oos.ajaxForm({},"get",e).done(function(e){(t=JSON.parse(e)).show_popup&&fn.checkout_oos.showAlert(t.web_popup_message,"product","product"),$(".alert-cta .view-cart").on("click",function(){$(".alert-screen").hide()}),""!=t.notification.text?($(".add_message.static-oos").show(),$(".fix-div").addClass("mar-30"),$(".checkout-order-summary").prop("disabled",!0),$(".checkout-order-summary").addClass("disabled")):($(".add_message.static-oos").hide(),$(".fix-div").removeClass("mar-30"),$(".checkout-order-summary").prop("disabled",!1),$(".checkout-order-summary").removeClass("disabled")),$(".pages.order-summary").find(".item-holder").html(""),fn.checkout_oos.renderItems(e);var t=JSON.parse(e),a='<li>Delivery Charge <span class = "rupee">'+parseFloat(t.shipping).toFixed(2)+'</span></li><li>Total <span class = "rupee text-red">'+parseFloat(t.total).toFixed(2)+"</span></li>";$(".order-summary").find(".total-overview").html(a)}).always(function(){var e;"reload"==t&&($(".alert-screen").hide(),(e=$(".alert-screen").find(".reload-cart")).prop("disabled",!1),e.removeClass("disabled")),document.querySelector(".total-wrapper").offsetTop+65>window.innerHeight+$(window).scrollTop()?$(".total-wrapper").find(".fix-div").addClass("fixed"):$(".total-wrapper").find(".fix-div").removeClass("fixed"),fn.checkout_oos.setTotalbar()})},renderItems:function(e){var t=JSON.parse(e);fn.checkout_oos.setFinalPayment(t.grand_total),t.products.length?($(".pages.order-summary").find(".available-products").show(),$.map(t.products,function(e){var t=e.offer_discount&&0<e.discount?'<p class = "rupee discounted">'+parseFloat(e.base_price+e.discount/e.quantity).toFixed(2)+'</p><p class = "rupee original">'+parseFloat(e.base_price).toFixed(2)+"</p>":'<p class = "rupee original">'+parseFloat(e.base_price).toFixed(2)+"</p>",a='<div class="item prd-'+e.product_id+'"><div class="item-name"><img src="'+e.image+'" alt="'+e.product_name+'"><div class="item-desc"><p>'+e.product_name+"</p><p>"+e.weight+'</p></div></div><div class="item-qty"><button class = "minus-one" data-prid="'+e.product_id+'" data-stock="'+e.stock+'" data-text="'+e.product_name+'" data-amt="'+parseFloat(e.base_price).toFixed(2)+'">&#8211;</button><input type="text" class="item_qty" value = "'+e.quantity+'" disabled><button class = "plus-one" data-prid="'+e.product_id+'" data-stock="'+e.stock+'" data-text="'+e.product_name+'" data-amt="'+parseFloat(e.base_price).toFixed(2)+'">+</button></div><div class="item-price">'+t+'</div><div class="item-subtotal"><span class = "rupee">'+parseFloat(e.subtotal).toFixed(2)+'</span></div><div class="item-cta"><span class = "remove-item" data-prid="'+e.product_id+'" data-quatity="'+e.quantity+'">&times;</span></div></div>';$(".order-summary").find(".item-holder").append(a)}),fn.checkout_oos.addCartItem(),fn.checkout_oos.removeCartItem(),fn.checkout_oos.updateItemQty(),$(".remove-item").on("click",function(){var e=$(this).data("prid"),t=$(this).data("quatity");fn.checkout_oos.deleteCartItem(e,t).always(function(e){})})):($(".pages.order-summary").find(".available-products").hide(),$(".pages.order-summary").find(".total-wrapper").hide(),$(".pages.order-summary").find(".continue-shopping").show()),t.oss_products.length?($(".pages.order-summary").find(".item-holder.oos").html(""),$(".pages.order-summary").find(".oss-products").show(),$.map(t.oss_products,function(e){var t=e.offer_discount&&0<e.discount?'<p class = "rupee discounted">'+parseFloat(e.base_price+e.discount/e.quantity).toFixed(2)+'</p><p class = "rupee original">'+parseFloat(e.base_price).toFixed(2)+"</p>":'<p class = "rupee original">'+parseFloat(e.base_price).toFixed(2)+"</p>";item='<div class="item prd-'+e.product_id+'"><div class="item-name"><img src="'+e.image+'" alt="'+e.product_name+'"><div class="item-desc"><p>'+e.product_name+"</p><p>"+e.weight+'</p></div></div><div class="item-qty"><input type="text" class="item_qty" value = "'+e.quantity+'" disabled></div><div class="item-price">'+t+'</div><div class="item-subtotal"><span class = "rupee">'+parseFloat(e.subtotal).toFixed(2)+"</span></div></div>",$(".order-summary").find(".item-holder.oos").append(item)})):$(".pages.order-summary").find(".oss-products").hide(),t.oss_products.length||t.products.length||$(".pages.order-summary").html('<div class = "main-container"><div class="oos-header">Your <span class="text-red">Cart is Empty</span></div><div class="empty-cart"><img data-lazy="https://d2407na1z3fc0t.cloudfront.net/Banner/empty-cart-icon.png" alt="Empty cart">Your cart awaits your next meal <p><a href="/">Continue Shopping</a></p> </div></div>')},addCartItem:function(){$(".item").find(".plus-one").on("click",function(e){e.stopPropagation();var t=$(this),a=parseInt($(this).parent().find(".item_qty").val()),o=$(this).data("prid"),s=$(this).data("stock"),n=a+1;return n<=s?void(t.hasClass("ub")||(t.parent().find(".item_qty").val(n),t.addClass("ub"),fn.checkout_oos.updateCartItem(o,n,"add").always(function(){t.removeClass("ub")}))):void Materialize.toast("Only "+s+" units left",3e3)}),$(".crossel-products .product-cta").find(".btn").on("click",function(e){e.stopImmediatePropagation();var t=($(this),$(this).data("prid")),a=$(this).data("crosssellid"),o=$(this).data("offertype"),s=$(this).data("prname"),n=$(this).data("baseprice");$(this).prop("disabled",!0),$(this).addClass("disabled"),$(".crossel-wrap").addClass("loader-div"),fn.checkout_oos.crosssellAddCartItem(t,1,a,o,s,n)})},removeCartItem:function(){$(".item").find(".minus-one").on("click",function(e){e.stopPropagation();var t=$(this),a=parseInt($(this).parent().find(".item_qty").val()),o=$(this).data("prid"),s=a-1;if(!t.hasClass("ub"))return t.addClass("ub"),0==s?(fn.checkout_oos.deleteCartItem(o,a).always(function(){t.removeClass("ub")}),!1):(fn.checkout_oos.updateCartItem(o,s,"remove").always(function(){t.removeClass("ub")}),$(this).parent().find(".item_qty").val(s),void $(this).parent().find(".item-cta .remove-item").data("quantity",s))})},updateCartItem:function(e,o,s){var t="/checkout_oos/cart-item-update/"+e+"/"+o;return fn.checkout_oos.ajaxForm({},"POST",t).done(function(e){var t=JSON.parse(e);""!=t.message?($(".add_message.static-oos").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+t.message).show(),$(".checkout-order-summary").prop("disabled",!0),$(".checkout-order-summary").addClass("disabled"),$(".fix-div").addClass("mar-30")):($(".add_message.static-oos").hide(),$(".checkout-order-summary").prop("disabled",!1),$(".checkout-order-summary").removeClass("disabled"),$(".fix-div").removeClass("mar-30"));var a=$(".order-summary .item-holder").find(".prd-"+t.product_id);"success"==t.status?(a.find(".item-subtotal span").html(parseFloat(t.product.subtotal).toFixed(2)),a.find(".item-cta .remove-item").attr("data-quatity",o),fn.checkout_oos.setFinalPayment(t.grand_total),fn.checkout_oos.updateCartBtn(t.item_count),fn.checkout_oos.updateOrderTotal(t),"add"==s?(ga("send","event",{eventCategory:"Cart",eventAction:"CartPageAddedToCart",eventLabel:t.product.product_name,eventValue:t.product.base_price}),clevertap.event.push("Added to Cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,"Product Price":t.product.base_price,Quantity:t.quantity,incoming_source:"cart_page",Checkout_Flow:"old_checkout"}),clevertap.event.push("Product added to cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,Price:Number(t.product.base_price),Quantity:Number(t.product.quantity),"Category ID":t.product.category_id,Checkout_Flow:old_checkout})):(ga("send","event",{eventCategory:"Cart",eventAction:"CartProductRemovedFromCart",eventLabel:t.product.product_name,eventValue:t.product.base_price}),clevertap.event.push("Product Removed from Cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,"Product Price":t.product.base_price,Quantity:t.quantity}))):Materialize.toast(t.message,3e3)})},crosssellAddCartItem:function(a,e,t,o,s,n){var r="/checkout_oos/cart-item-update/"+a+"/"+e;return fn.checkout_oos.ajaxForm({crosssell_id:t,product_id:a,quantity:e},"POST",r).done(function(e){var t=JSON.parse(e);t.data,"success"==t.status?($(".crossel-wrap").addClass("complete"),"delivery"==o?($(".freedelivery-wrapper").addClass("show"),setTimeout(function(){$(".freedelivery-wrapper").removeClass("show")},5e3)):$(".freedelivery-wrapper").removeClass("show"),$(".crossel-wrap .crossel-products").find(".productid-"+a).fadeOut(300,function(){$(this).remove(),$(".crossel-wrap .crossel-products").children("li").length<1?$(".crossel-wrap").hide():$(".crossel-wrap").show()}),ga("send","event",{eventCategory:"Cart-Cross Sell Module",eventAction:"CartModuleProductAddedToCart",eventLabel:s+" - "+o,eventValue:n}),clevertap.event.push("Product added to cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,Price:Number(t.product.base_price),Quantity:Number(t.product.quantity),"Category ID":t.product.category_id,Checkout_Flow:old_checkout}),fn.checkout_oos.getOrderSummary(),fn.checkout_oos.setFinalPayment(t.grand_total),fn.checkout_oos.updateCartBtn(t.item_count),fn.checkout_oos.updateOrderTotal(t),setTimeout(function(){$(".crossel-wrap").removeClass("loader-div complete")},500)):($(".crossel-products .product-cta .btn").prop("disabled",!1),$(".crossel-products .product-cta .btn").addClass("enabled"),$(".crossel-wrap").removeClass("loader-div"),Materialize.toast(t.message,3e3))}).always(function(e){})},deleteCartItem:function(e){var t="/checkout_oos/cart-item-delete/"+e;return fn.checkout_oos.ajaxForm({},"POST",t).done(function(e){var t=JSON.parse(e);"success"==t.status&&(ga("send","event",{eventCategory:"Cart",eventAction:"CartPageRemovedFRomCart",eventLabel:t.product.product_name,eventValue:t.product.base_price}),clevertap.event.push("Product Removed from Cart",{"Product ID":t.product.product_id,"Product Name":t.product.product_name,"Product Price":t.product.base_price}),t.show_popup&&fn.checkout_oos.showAlert(t.web_popup_message,"product","product"),$(".alert-cta .view-cart").on("click",function(){$(".alert-screen").hide()}),$(".order-summary .item-holder").find(".prd-"+t.product_id).remove(),$(".crossel-wrap .crossel-products").find(".csid-"+t.product_id).remove(),$(".crossel-wrap .crossel-products").children("li").length<1&&$(".crossel-wrap").hide(),fn.checkout_oos.getOrderSummary(),fn.checkout_oos.updateOrderTotal(t),fn.checkout_oos.updateCartBtn(t.item_count),Materialize.toast("Item removed from cart",3e3),0==t.item_count&&($(".order-summary .main-container").html('<div class = "main-container"><div class="oos-header">Your <span class="text-red">Cart is Empty</span></div><div class="empty-cart"><img data-lazy="https://d2407na1z3fc0t.cloudfront.net/Banner/empty-cart-icon.png" alt="Empty cart">Your cart awaits your next meal <p><a href="/">Continue Shopping</a></p> </div></div>'),$(".crossel-wrap").hide(),$(".total-wrapper").hide()),""!=t.message?($(".add_message.static-oos").html('<img src="https://d2407na1z3fc0t.cloudfront.net/Banner/info_2x.png" alt="Info">'+t.message).show(),$(".checkout-order-summary").prop("disabled",!0),$(".checkout-order-summary").addClass("disabled")):($(".add_message.static-oos").hide(),$(".checkout-order-summary").prop("disabled",!1),$(".checkout-order-summary").removeClass("disabled")))})},deleteShipmentItem:function(e,o,s,n,r){fn.checkout_oos.ajaxForm({shipId:o,productId:e},"POST","/checkout_oos/shipment-item-delete").done(function(e){var t=JSON.parse(e),a=parseInt(r*n);"success"==t.status?($(".loader-div").addClass("complete"),ga("send",{hitType:"event",eventCategory:"Cart",eventAction:"DeleteButtonClick",eventLabel:s,eventValue:a}),fn.checkout_oos.cartCount(),fn.checkout_oos.getShipments()):1==o?$(".shipment-head-block1").removeClass("loader-div"):$(".shipment-head-block2").removeClass("loader-div")}).always(function(){setTimeout(function(){$(".loader-div").removeClass("loader-div complete"),$(".items-holder").find(".item."+e).remove()},600)}).fail(function(){1==o?$(".shipment-head-block1").removeClass("loader-div"):$(".shipment-head-block2").removeClass("loader-div")})},updateItemQty:function(){$(".item").find(".item_qty").on("change",function(){})},updateCartBtn:function(e){var t=$(".sub-header").find(".cart");t.find("i").html(e),0<e?(t.hasClass("loaded")||t.addClass("loaded"),(window.location.href.includes("/favourite-items")||window.location.href.includes("/past-orders"))&&fn_home.quickCheckout()):(t.removeClass("loaded"),$(".quick-checkout.fade-in").length&&(window.location.href.includes("/favourite-items")||window.location.href.includes("/past-orders"))&&($(".slots-layout").removeClass("fade-in"),$(".slot-detials").removeClass("fade-in"),$("#slotAction").html("View"),$(".background-div").removeClass("dull-background"),$(".quick-checkout").removeClass("fade-in"),$(".quick-checkout .payment").removeClass("hide-class")))},updateOrderTotal:function(e){var t='<li>Delivery Charge <span class = "rupee">'+parseFloat(e.shipping_charge).toFixed(2)+'</span></li><li>Total <span class = "rupee text-red">'+parseFloat(e.total).toFixed(2)+"</span></li>";$(".order-summary").find(".total-overview").html(t)},confirm_items:function(){$(".checkout-order-summary").on("click",function(){var e=$(".order-lock-url").data("url"),t=$(this);$(".total-wrapper.os").addClass("loader-div"),t.css("opacity","0.5").prop("disabled",!0),fn.checkout_oos.ajaxForm({},"POST",e).done(function(e){var t=JSON.parse(e);"success"==t.status?($(".total-wrapper.os").addClass("complete"),setTimeout(function(){fn.checkout_oos.navigate(fn.checkout_oos.delivery_page)},500),fbq("track","InitiateCheckout")):(fn.checkout_oos.showAlert(t.message,"reload","items"),fn.checkout_oos.reloadCart())}).always(function(){setTimeout(function(){$(".total-wrapper.os").removeClass("loader-div complete"),t.css("opacity","1").prop("disabled",!1)},600)})})},lockOrder:function(){var e=$(".order-lock-url").data("url");fn.checkout_oos.ajaxForm({},"POST",e).done(function(e){var t=JSON.parse(e);"success"==t.status?fn.checkout_oos.navigate(fn.checkout_oos.delivery_page):(fn.checkout_oos.showAlert(t.message,"reload","items"),fn.checkout_oos.reloadCart())})},editOrder:function(){$(".edit-order").on("click",function(){fn.checkout_oos.navigate(fn.checkout_oos.order_page)})},reLockOrder:function(){$(".order-lock-url").data("url"),fn.checkout_oos.getShipments()},reloadCart:function(){$(".reload-cart").click(function(){$(this).prop("disabled",!0),$(this).addClass("disabled"),fn_sublocation.gaSublocation("SL-Address Alert - Review Cart","Click",""),fn.checkout_oos.getOrderSummary("reload")})},getShipments:function(){var e=$(".get-shipments-url").data("url"),a=[],o=[];fn.checkout_oos.ajaxForm({},"GET",e).done(function(e){var t=JSON.parse(e);"success"==t.status?($.map(t.shipments,function(e,t){o.push({id:e.id,delivery_type:e.delivery_type})}),localStorage.setItem("DeliverySlots",JSON.stringify(a)),localStorage.setItem("DeliveryInfo",JSON.stringify(o)),fn.checkout_oos.renderShipments(e),fn.checkout_oos.showSlots()):fn.checkout_oos.navigate(fn.checkout_oos.order_page)})},renderShipments:function(e){var p=JSON.parse(e),u=0,m=!1,h=JSON.parse(localStorage.getItem("DeliverySlots")),f=JSON.parse(localStorage.getItem("DeliveryInfo")),_=[],g=[],v=[],y=0;checkoutStart={},$(".shipment-container.details").html(""),$(".shipment-container.details").find(".items-holder").html("");$(".shipment-container").append('<div class="head-shipment"><div class="oos-alert delivery">We ran out of some items! Want to split this order ?</div><div class="shipment-head-block1"></div></div><div class="head-shipment"><div class="oos-header delivery"> Tell us when you want these delivered ! </span> </div><div class="shipment-head-block2"></div></div>'),1<p.shipments.length?$(".oos-alert.delivery").show():$(".oos-alert.delivery").hide(),$.map(p.shipments,function(o,e){v.push(o.delivery_type),y+=o.shipment_total.total,u++;var t=0;$.map(o.products,function(e){t+=parseInt(e.quantity)});var a=new Date(o.delivery_timestamp).getDay(),s=new Date(o.delivery_timestamp).getDate(),n=new Date(o.delivery_timestamp).getMonth(),r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],l=s==(new Date).getDate()?'Items Delivered <span class = "text-red shipment-day">Today</span>':s==(new Date).getDate()+1?'Items Delivered <span class = "text-red shipment-day">Tomorrow</span>':'Items Delivered on <span class = "text-red shipment-day">'+r[a]+"</span>",d=(o.slots?o.slots[0].express_value:"EXPRESS"==o.delivery_type&&""!=o.express_message&&o.express_message,"EXPRESS"==o.delivery_type&&""!=o.express_message?'Delivered in <span class = "text-red">'+o.express_message+"</span>":s==(new Date).getDate()?0!=h.length&&-1<h.indexOf(o.id)?"Today ("+s+i[n]+") <span class = 'text-red'>"+o.delivery_time+"</span>":'<span class = "text-red">Select the delivery slot</span>':s==(new Date).getDate()+1?0!=h.length&&-1<h.indexOf(o.id)?"Tomorrow ("+s+i[n]+") <span class = 'text-red'>"+o.delivery_time+"</span>":'<span class = "text-red">Select the delivery slot</span>':0!=h.length&&-1<h.indexOf(o.id)?r[a]+" ("+s+i[n]+") <span class = 'text-red'>"+o.delivery_time+"</span>":'<span class = "text-red">Select the delivery slot</span>'),c='<div class="shipment"><div class="shipment-header"><div class="shipment-title"><span class = "text-red item-numbers">'+t+"</span> "+l+" ( "+s+" "+i[n]+' )</div><div class="shipment-no">Delivery <span class = "text-red">'+u+'</span> of <span class = "text-red">'+p.shipments.length+'</span></div></div><div class="slots-container"><div class="slots-dropdown"><div class="slots-selector unchecked slots-selector-'+o.id+'" data-shipid="'+o.id+'" data-type="'+o.delivery_type+'">'+d+'</div><div class = "slots-screen"></div><div class="slots-layout"><div class="this-header hide"><img src="https://d2407na1z3fc0t.cloudfront.net/Banner/scooter.png" alt=""><span class = "text-red"></span></div><div class="times-of-day"><ul><li><img src="https://d2407na1z3fc0t.cloudfront.net/Banner/morning.png" alt="Morning Slot"></li><li><img src="https://d2407na1z3fc0t.cloudfront.net/Banner/noon.png" alt="Morning Slot"></li><li><img src="https://d2407na1z3fc0t.cloudfront.net/Banner/evening.png" alt="Morning Slot"></li><li><img src="https://d2407na1z3fc0t.cloudfront.net/Banner/sundown.png" alt="Morning Slot"></li><li><img src="https://d2407na1z3fc0t.cloudfront.net/Banner/night.png" alt="Morning Slot"></li></ul></div><div class = "slots-holder"></div></div></div><div class="pricing-info"><ul><li>'+o.shipment_total.key+': <span class = "rupee">'+parseFloat(o.shipment_total.total).toFixed(2)+"</span></li><li>"+o.shipment_delivery_charge.key+': <span class = "rupee">'+parseFloat(o.shipment_delivery_charge.total).toFixed(2)+' <sup>*</sup></span></li></ul></div></div><div class="items-holder items-holder-'+o.id+'"></div>';"EXPRESS"==f[e].delivery_type?($(".shipment-container.details .shipment-head-block1").append(c),$(".shipment-container.details .shipment-head-block1").css("display","block"),$(".slots-selector-"+o.id).removeClass("unchecked"),$(".slots-selector-"+o.id).addClass("checked"),-1==h.indexOf(o.id)&&(h.push(o.id),localStorage.setItem("DeliverySlots",JSON.stringify(h)))):($(".shipment-container.details .shipment-head-block2").append(c),$(".shipment-container.details .shipment-head-block2").css("display","block"),m=!0,-1!=h.indexOf(o.id)&&($(".slots-selector-"+o.id).removeClass("unchecked"),$(".slots-selector-"+o.id).addClass("checked"))),$(".items-holder-"+o.id).html(""),$.map(o.products,function(e){g.push(e.product_id),_.push(e.product_name);var t=""!=e.pieces?e.pieces:e.weight,a=""!=e.shipment_info_message?e.quantity!=e.total_quantity?"bubble":"":e.quantity!=e.total_quantity?"text-red":"";return item='<div class="item '+e.product_id+'"><img src="'+e.image+'" alt="'+e.product_name+'"><div class="item-details"><p class="item-name">'+e.product_name+'</p><p class = "item-desc"><span>'+t+'</span><span class = "rupee bold">'+parseFloat(e.base_price).toFixed(2)+'</span><span class = "bold">Qty : <i class = "'+a+'">'+e.shipment_quantity+"<span>"+e.shipment_info_message+'</span></i><b class="delProd" data-prname="'+e.product_name+'" data-amount="'+parseFloat(e.base_price).toFixed(2)+'" data-prid="'+e.product_id+'" data-shipmentid="'+o.id+'" data-quantity="'+e.quantity+'">Delete</b></span></p></div></div>',$(".items-holder-"+o.id).append(item),!1})}),h.length!=f.length&&1==m?$(".oos-header.delivery").show():$(".oos-header.delivery").hide(),$(".delProd").on("click",function(e){e.stopImmediatePropagation(),product_delId=$(this).data("prid"),shipId=$(this).data("shipmentid"),amt=$(this).data("amount"),prname=$(this).data("prname"),quantity=Number($(this).data("quantity")),$(this).offset().top,$(".alert-screen-slots.remove-item").css("display","block"),$("body").addClass("noscroll")}),$(".btn.remove-item-no").on("click",function(e){$(".alert-screen-slots.remove-item").css("display","none"),$("body").removeClass("noscroll")}),$(".btn.remove-item-yes").on("click",function(e){e.stopImmediatePropagation(),$("body").removeClass("noscroll"),1==shipId?$(".shipment-head-block1").addClass("loader-div"):$(".shipment-head-block2").addClass("loader-div"),$(".alert-screen-slots.remove-item").css("display","none"),fn.checkout_oos.deleteShipmentItem(product_delId,shipId,prname,amt,quantity)}),document.querySelector(".main-cta-continue.mar-15").offsetTop+75>window.innerHeight+$(window).scrollTop()?$(".main-cta-continue.mar-15").find(".cta-continue").addClass("fixed"):$(".main-cta-continue.mar-15").find(".cta-continue").removeClass("fixed"),$(window).on("scroll load resize",function(){document.querySelector(".main-cta-continue.mar-15").offsetTop+75>window.innerHeight+$(window).scrollTop()?$(".main-cta-continue.mar-15").find(".cta-continue").addClass("fixed"):$(".main-cta-continue.mar-15").find(".cta-continue").removeClass("fixed")}),Object.assign(checkoutStart,{"Shipping Information":localStorage.getItem("default_addr"),"Product ID":g,"Product Name":_,"Delivery Type":v,"Cart Value":Number(y),"City Name":localStorage.getItem("city_name"),"Hub ID":Number($(".hubId_main").val())})},renderShipmentSummary:function(e){var t=JSON.parse(e);localStorage.setItem("cart_value",t.cart_summary.total.value),fn.checkout_oos.renderShipmentSummaryProduct(t);var a=t.cart_summary,o='<li>Subtotal <span class = "rupee">'+parseFloat(a.total.value).toFixed(2)+'</span></li><li>Delivery Charge <span class = "rupee">'+parseFloat(a.shipping.value).toFixed(2)+'</span></li><li class = "text-red">Discount <span class = "rupee">'+parseFloat(a.discount.value).toFixed(2)+'</span></li><li class = "amt-total">Amount to pay<span class = "rupee">'+parseFloat(a.subtotal.value).toFixed(2)+"</span></li>";$(".delivery-summary .total-overview").html(o),fn.checkout_oos.setFinalPayment(a.subtotal.value)},renderShipmentSummaryProduct:function(e){$(".shipment-container.summary").html(""),$.map(e.shipments,function(n){0;var e=new Date(n.delivery_timestamp).getDay(),t=new Date(n.delivery_timestamp).getDate(),a=new Date(n.delivery_timestamp).getMonth(),o="EXPRESS"==n.delivery_type&&""!=n.express_message?"in "+n.express_message:n.delivery_time;todomo=t==(new Date).getDate()?'Delivered <span class = "text-red shipment-day">Today</span>':t==(new Date).getDate()+1?'Delivered <span class = "text-red shipment-day">Tomorrow</span>':'Delivered on <span class = "text-red shipment-day">'+["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]+"</span>";var s='<div class="shipment"><div class="shipment-header"><div class="shipment-title">'+todomo+" ( "+t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" ) "+o+'</div></div><div class="items-holder items-holder-'+n.id+'"></div><div class="pricing-info"><ul><li>'+n.shipment_total.key+': <span class = "rupee">'+parseFloat(n.shipment_total.total).toFixed(2)+"</span></li><li>"+n.shipment_delivery_charge.key+': <span class = "rupee">'+parseFloat(n.shipment_delivery_charge.total).toFixed(2)+" <sup>*</sup></span></li></ul></div></div>";$(".shipment-container.summary").append(s),$.map(n.products,function(e){var t="",a="",o="",o=(""!=e.pieces?e.pieces:e.net_wt,null!=e.product_type&&"COMP"==e.product_type?(t="comp_product",a="text-red","Free"):(t="",a="rupee",parseFloat(e.base_price).toFixed(2))),s='<div class="item '+t+'"><img src="'+e.image+'" alt="'+e.product_name+'"><div class="item-details"><p class="item-name">'+e.product_name+'</p><p class = "item-desc"><span class = "bold '+a+'">'+o+'</span><span class = "bold">Qty : <i>'+e.quantity+"</i></span></p></div></div>";return null!=e.product_type&&"COMP"==e.product_type?$(".shipment-container.summary").find(".items-holder-"+n.id).prepend(s):$(".shipment-container.summary").find(".items-holder-"+n.id).append(s),!1})})},getShipmentSummary:function(){localStorage.setItem("cart_value",""),$(".coupon-apply .coupon-status").html(" ");var e=$(".get-shipmentsummary-url").data("url");fn.checkout_oos.ajaxForm({},"GET",e).done(function(e){localStorage.setItem("current_coupon",""),fn.checkout_oos.renderShipmentSummary(e),fn.checkout_oos.applyCoupon(),fn.checkout_oos.resetCoupon()})},confirm_shipments:function(){$(".checkout-shipment-summary").on("click",function(e){var t=this;e.stopImmediatePropagation();var a,o,s,n,r,i=JSON.parse(localStorage.getItem("DeliverySlots")),l=JSON.parse(localStorage.getItem("DeliveryInfo"));function d(){fn.checkout_oos.ajaxForm({},"POST","/checkout_oos/lock-shipment").done(function(e){var t=JSON.parse(e);"success"==t.status?($(".pages.delivery-details").addClass("complete"),setTimeout(function(){fn.checkout_oos.navigate(fn.checkout_oos.summary_page),$(".delivery-addr").find(".close-change-addr").hide(),$(".delivery-addr").find(".change-addr").show(),$(".delivery-addr").find(".addr-container").hide()},500)):"OOS_ERROR"==t.status&&(fn.checkout_oos.showAlert(t.message,"goto","items"),fn.checkout_oos.gotoCart())}).always(function(){setTimeout(function(){$(".pages.delivery-details").removeClass("loader-div complete"),a.css("opacity","1"),a.prop("disabled",!1)},600)})}function c(e){return n.apply(this,arguments)}1==(i.length==l.length)?(n=function(e){fn.checkout_oos.showAlert(e,"change","addr"),fn.checkout_oos.updateCartLocation(o,s),fn.checkout_oos.changeAddressAlert(),$(".pages.delivery-details").removeClass("loader-div complete"),a.css("opacity","1"),a.prop("disabled",!1)},c.toString=function(){return n.toString()},r=c,a=$(t),o=localStorage.getItem("default_addr_lat"),s=localStorage.getItem("default_addr_lng"),$(".pages.delivery-details").addClass("loader-div"),a.css("opacity","0.5").prop("disabled",!0),fn.checkout_oos.verifyService(o,s).done(function(e){var t=JSON.parse(e);200==t.code||"ERROR"==t.status||"LOCATION_CHANGED"==t.status?r(t.message):"SERVICABLE"==t.status&&null!=t.data?fn.checkout_oos.ajaxForm({location:t.data.address,lat:t.data.lat,lng:t.data.lng,clearcart:"false"},"POST","/get-location").done(function(e){"success"==e.result&&(fn.checkout_oos.getShipments(),$(".location-name").html(t.data.address),$(".location-name").attr("title",t.data.address),fn.checkout_oos.hideAlert(),d())}):d()})):($(".alert-screen-slots.select-slot").css("display","block"),$("body").addClass("noscroll"),$(".btn.slots-button").on("click",function(e){var a=JSON.parse(localStorage.getItem("DeliverySlots")),t=JSON.parse(localStorage.getItem("DeliveryInfo"));$(".alert-screen-slots.select-slot").css("display","none"),$("body").removeClass("noscroll");var o=!1,s=-1;$.map(t,function(e,t){-1==a.indexOf(e.id)&&($(".slots-selector-"+e.id).css("border","1px solid #de1e36"),0==o&&(o=!0,s=e.id))}),$(window).scrollTop($(".slots-selector-"+s).offset().top-100)}))})},editShipments:function(){$(".edit-shipments").on("click",function(){fn.checkout_oos.navigate(fn.checkout_oos.delivery_page)})},resetCoupon:function(){$(".coupon-wrapper").removeClass("validate"),$(".coupon-wrapper").removeClass("error"),$(".coupon-wrapper").removeClass("coupon-applied"),$(".coupon-wrapper").removeClass("coupon-removed"),$(".coupon-wrapper").find(".applyCoupon").show(),$(".coupon-wrapper").find(".coupon-code").val(""),$(".coupon-wrapper").find(".removeCoupon").hide()},setFinalPayment:function(e){$(".checkout-payment-btn.cod").html("Place Order &#8377; "+parseFloat(e).toFixed(2)),$(".checkout-payment-btn.cod").attr("data-finalamt",parseFloat(e).toFixed(2)),$(".checkout-payment-btn").val("Pay now Rs. "+parseFloat(e).toFixed(2)),$(".checkout-payment-btn").attr("data-finalamt",parseFloat(e).toFixed(2)),$("#citrusAmount").val(parseInt(100*e)),$(".set-finalPay").data("val",parseFloat(e).toFixed(2))},applyCoupon:function(){$(".coupon-wrapper").find(".applyCoupon").on("click",function(e){e.stopImmediatePropagation();var o=$(".coupon-wrapper").find(".coupon-code").val(),t="/checkout_oos/apply-coupon/"+o;""==o?$(".coupon-wrapper").addClass("validate"):fn.checkout_oos.ajaxForm({},"POST",t).done(function(e){var t,a=JSON.parse(e);a.message,$(".freedelivery-wrapper .freedelivery-text").html(a.message),$(".freedelivery-wrapper").addClass("show"),setTimeout(function(){$(".freedelivery-wrapper").removeClass("show")},5e3),"success"==a.status?(t='<li>Subtotal<span class = "rupee">'+parseFloat(a.cart.total).toFixed(2)+'</span></li><li>Delivery Charge <span class = "rupee">'+parseFloat(a.cart.shipping).toFixed(2)+'</span></li><li class = "text-red">Discount <span class = "rupee">'+parseFloat(a.cart.discount).toFixed(2)+'</span></li><li class = "amt-total" data-amount="'+parseFloat(a.cart.subtotal).toFixed(2)+'">Amount to pay<span class = "rupee">'+parseFloat(a.cart.subtotal).toFixed(2)+"</span></li>",$(".citrusAmount").val(parseInt(100*a.cart.subtotal)),$(".delivery-summary").find(".total-overview").html(t),localStorage.setItem("current_coupon",a.cart.coupon),localStorage.setItem("cart_value",a.cart.total-a.cart.discount),$(".coupon-wrapper").removeClass("validate"),$(".coupon-wrapper").find(".applyCoupon").hide(),$(".coupon-wrapper").find(".removeCoupon").show(),fn.checkout_oos.setFinalPayment(a.cart.subtotal),fn.checkout_oos.renderShipmentSummaryProduct(a.cart),fn.checkout_oos.removeCoupon(),clevertap.event.push("Coupon Applied",{"Coupon Code":o,"Total Amount":a.cart.total,Discount:a.cart.discount,"Payable Amount":a.cart.subtotal})):($(".coupon-apply").hasClass("coupon-status")||($(".coupon-wrapper").find(".applyCoupon").show(),$(".coupon-wrapper").find(".removeCoupon").hide()),$(".coupon-wrapper").removeClass("validate"),$(".coupon-wrapper").find(".coupon-code").val("").focus())})})},removeCoupon:function(){$(".coupon-wrapper").find(".removeCoupon").on("click",function(e){e.stopImmediatePropagation();var o=$(".coupon-wrapper").find(".coupon-code").val();$(".amt-total").data("amount"),fn.checkout_oos.ajaxForm({},"POST","/checkout_oos/remove-coupon").done(function(e){$(".checkout-payment-btn").removeAttr("disabled").removeClass("disabled-btn");var t,a=JSON.parse(e);a.message,$(".freedelivery-wrapper .freedelivery-text").html(a.message),$(".freedelivery-wrapper").addClass("show"),setTimeout(function(){$(".freedelivery-wrapper").removeClass("show")},5e3),"success"==a.status?(t='<li>Subtotal <span class = "rupee">'+parseFloat(a.data.cart.total).toFixed(2)+'</span></li><li>Delivery Charge <span class = "rupee">'+parseFloat(a.data.cart.shipping).toFixed(2)+'</span></li><li class = "text-red">Discount <span class = "rupee">'+parseFloat(a.data.cart.discount).toFixed(2)+'</span></li><li class = "amt-total" data-amount="'+parseFloat(a.data.cart.subtotal).toFixed(2)+'">Amount to pay<span class = "rupee">'+parseFloat(a.data.cart.subtotal).toFixed(2)+"</span></li>",$(".citrusAmount").val(parseInt(100*a.data.cart.subtotal)),$(".delivery-summary").find(".total-overview").html(t),$(".coupon-wrapper").removeClass("coupon-applied"),localStorage.setItem("current_coupon",""),localStorage.setItem("cart_value",a.data.cart.total),$(".coupon-wrapper").find(".applyCoupon").show(),$(".coupon-wrapper").find(".removeCoupon").hide(),$(".coupon-wrapper").find(".coupon-code").val("").focus(),fn.checkout_oos.setFinalPayment(a.data.cart.subtotal),fn.checkout_oos.renderShipmentSummaryProduct(a.data.cart),clevertap.event.push("Coupon Removed",{"Coupon Code":o,"Total Amount":a.data.cart.total,Discount:a.data.cart.discount,"Payable Amount":a.data.cart.subtotal})):($(".coupon-wrapper").hasClass("coupon-status")&&$(".coupon-wrapper").removeClass("validate"),$(".coupon-wrapper").find(".coupon-code").val("").focus())})})},confirm_order:function(){$(".proceed-payment").on("click",function(){var e=$(this);$(".pages.delivery-summary").addClass("loader-div"),$(".coupon-apply .coupon-status").html(" "),e.css("opacity","0.5").prop("disabled",!0),fn.checkout_oos.ajaxForm({},"POST","/checkout_oos/lock-shipment").done(function(e){var t=JSON.parse(e);"success"==t.status?($(".pages.delivery-summary").addClass("complete"),setTimeout(function(){fn.checkout_oos.navigate(fn.checkout_oos.payment_page),$(".delivery-addr").find(".close-change-addr").hide(),$(".delivery-addr").find(".change-addr").show(),$(".delivery-addr").find(".addr-container").hide()},500)):"OOS_ERROR"==t.status&&(fn.checkout_oos.showAlert(t.message,"goto","items"),fn.checkout_oos.gotoCart())}).always(function(){setTimeout(function(){$(".pages.delivery-summary").removeClass("loader-div complete"),e.css("opacity","1").prop("disabled",!1)},600)})})},getOrderHistory:function(){fn.checkout_oos.ajaxForm({},"GET","/checkout_oos/get-order-history").done(function(e){var t=JSON.parse(e);"success"==t.status&&($(".order-history-container").html(""),$(".order-count").html(t.orders.length),$.map(t.orders,function(e,t){var a=e.created_at.split(/[^0-9]/),o=new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5]),s=o.getDate(),n=o.getMonth(),r=o.getFullYear(),i=o.getHours(),l=i<12?"AM":"PM";hours=(i=(i=i%12)||12)<10?"0":"",minute=o.getMinutes(),min=minute<10?"0":"",selected=0==t?"active":"",order=' <div class="parent-order" data-orderid="'+e.order_id+'" data-itemcount="'+e.items+'"><div class="order-header"><div class="status-icon '+e.status.replace(" ","-").toLowerCase()+'"></div><div class="order-details"><div class="order-placed">Order Placed On: <span class = "text-red">'+s+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][n]+" "+r+" ("+hours+i+":"+min+minute+" "+l+")</span> (Items "+e.items+')</div><div class="order-status">STATUS : <span class="text-red">'+e.status+'</span></div></div><a href =" /order-status/'+e.order_id+'" class="track-btn">Track Order</a></div>',$(".order-history-container").append(order)})),fn.checkout_oos.getOrderShipments()})},getOrderShipments:function(){$(".parent-order").click(function(){var l=$(this),e="/checkout_oos/get-order-shipments/"+l.data("orderid"),d=l.data("itemcount");$(".parent-order").removeClass("active"),fn.checkout_oos.ajaxForm({},"GET",e).done(function(e){var t,a=JSON.parse(e);"success"==a.status&&(l.find(".shipments-history").html(""),$.map(a.orders,function(e,t){var a=0;$.map(e.items,function(e){a+=e.quantity});var o=new Date(e.order_processing_date).getDate(),s=new Date(e.order_processing_date).getMonth(),n=new Date(e.order_processing_date).getFullYear(),r=(new Date(e.order_processing_date).getHours(),new Date(e.order_processing_date).getMinutes(),1==e.express?e.express_message:e.sheduled_time),i='<div class="shipment"><div class="status-icon '+e.status.replace(" ","-").toLowerCase()+'"></div><div class="shipment-details"><div class="shipment-header"><div class="shipment-title">Delivery Date <span class="text-red">'+o+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][s]+" "+n+"("+r+')</span><span class = "text-small"> ( Items '+a+" of "+d+' )</span></div><div class="shipment-status">STATUS:  <span class="text-red">'+e.status+'</span></div><div class="order-number">Order Number:'+e.order_id+'</div></div><ul class="products '+e.order_id+'"></ul><div class="delivery-timeline '+e.status+'"><div class = "milestone op"><span>Order Placed</span></div><div class = "milestone oa"><span>Order Accepted</span></div><div class = "milestone dv"><span>Out for Delivery</span></div><div class = "milestone dd"><span>Delivered</span></div></div><div class="delivery-value"><ul><li>Delivery Value <span class = "rupee">'+parseFloat(e.subtotal_with_key.value).toFixed(2)+'</span></li><li>Delivery Charge <span class = "rupee">'+parseFloat(e.shipping_charges).toFixed(2)+"</span></li></ul></div></div></div>";l.find(".shipments-history").append(i),$.map(e.items,function(e){var t='<li><img src="'+e.pr_image+'"alt="'+e.pr_name+'"><div class="product-details"><div class="product-name">'+e.pr_name+'</div><div class="product-price"> <span class = "rupee">'+e.price+'</span> <span class = "">Qty '+e.quantity+"</span></div></div></li>";$(".products."+e.order_id).append(t)})}),t='<li>Subtotal <span class = "rupee">'+a.order_summary.total.value+'</span></li><li>Delivery Charge <span class = "rupee">'+a.order_summary.shipping.value+'</span></li><li class="text-red">Discount <span class = "rupee">'+a.order_summary.discount.value+'</span></li><li class="total-amt">Amount Paid <span class = "rupee">'+a.order_summary.grand_total.value+"</span></li>",l.find(".total-shipemnt-value ul").html(t),l.addClass("active"))}).always(function(){})})},getWalletInfo:function(){fn.checkout_oos.ajaxForm({},"POST","/checkout_oos/get-wallet-info").done(function(e){var t,a,o,s=JSON.parse(e);"success"==s.status&&(a='<div class="modal-head h-lato-bold">Know your Wallet</div><ul><li>Licious cash+<div class="right h-ssp-semi-bold">'+(t=s.data.wallet).licious_cashp+'</div></li><li>Licious cash<div class="right h-ssp-semi-bold">'+t.licious_cash+'</div></li><li class="li-border-top">Total Amount<div class="right h-ssp-semi-bold">'+t.payable_wallet_amount+"</div></li></ul>",o='<li>Your Licious Cash+ balance is<div class="right">'+t.promotional_balance+'</div></li><li>Your Licious Cash balance is <div class="right">'+t.transactional_balance+"</div></li>",$(".wallet-details").html(a),$(".licious-summary").html(o),$(".lc-wallet-amount.balance").html("&#8377;"+t.payable_wallet_amount))})},ajaxForm:function(e,t,a){return $.ajax({url:a,type:t,data:e,timeout:2e5,headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}})},ajaxFormNC:function(e,t,a){return $.ajax({url:a,type:t,data:e,timeout:2e4})},navigate:function(e){var t=(t=window.location.href).replace(location.hash,"");window.location.href=t+"#"+e,$(window).scrollTop(0,0)},codEligible:0,codEligibleMsg:"",run:function(){fn.checkout_oos.showSlots(),fn.checkout_oos.setPageInit(),fn.checkout_oos.confirm_items(),fn.checkout_oos.confirm_shipments(),fn.checkout_oos.confirm_order(),fn.checkout_oos.addAddr(),fn.checkout_oos.closeChangeAddress()}},userLogin:{validateUser:function(){$(".user-form .btn.submitForm").on("click",function(e){e.stopImmediatePropagation();var t=$(this),a=t.data("type"),o=$(".user-form."+t.data("form")),s=/^[6789]\d{9}$/,n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r=/^[a-zA-Z ]{2,30}$/,i=o.find(".name").val(),l=o.find(".email").val(),d=o.find(".mobileno").val(),c=o.find(".password").val(),p=!1,u={name:{val:i},email:{val:l},mobile:{val:d},password:{val:c}};if($.each(u,function(e,t){if(""==t.val){switch(p=!1,e){case"name":""==t.val?o.find(".name").parent().find("span").html("Required Field"):o.find(".name").parent().find("span").html("");break;case"email":""==t.val?o.find(".email").parent().find("span").html("Required Field"):o.find(".email").parent().find("span").html("");break;case"mobile":""==t.val?o.find(".mobileno").parent().find("span").html("Required Field"):o.find(".mobileno").parent().find("span").html("");break;case"password":""==t.val?o.find(".password").parent().find("span").html("Required Field"):o.find(".password").parent().find("span").html("")}return!1}switch(e){case"name":p=r.test(t.val)?(o.find(".name").parent().find("span").html(""),!0):(o.find(".name").parent().find("span").html("Name should not contain numbers and special characters"),!1);break;case"email":p=n.test(t.val)?(o.find(".email").parent().find("span").html(""),!0):(o.find(".email").parent().find("span").html("Please provide with valid email id"),!1);break;case"mobile":p=s.test(t.val)?(o.find(".mobileno").parent().find("span").html(""),!0):(o.find(".mobileno").parent().find("span").html("Mobile number should start with 6/7/8/9 and have 10 digits only"),!1)}}),p)switch(o.find("div span").html(""),$(this).prop("disabled",!0),$(this).addClass("disabled"),a){case"save-user":fn.userLogin.userSignup(u,o)}})},userSignup:function(e,a){$(".cat-list").addClass("loader-div spaced"),a.find(".btn").prop("disabled",!0),a.find(".btn").addClass("disabled"),fn_home.ajaxForm({name:e.name.val,email:e.email.val,phone:e.mobile.val,password:e.password.val},"POST","/customer/signup").done(function(e){var t=JSON.parse(e);"success"==t.status?fn.userLogin.sendOTP(t.data.phone,t.data.customer_key):($(".cat-list").addClass("complete"),Materialize.toast(t.message,3e3),setTimeout(function(){$(".cat-list").removeClass("complete spaced loader-div")},1e3),a.find(".btn").prop("disabled",!1),a.find(".btn").removeClass("disabled"))})},sendOTP:function(e,t){fn_home.ajaxForm({phone:e,customer_id:t},"POST","/customer/send-otp").done(function(e){var t=JSON.parse(e);"success"==t.status?($(".cat-list").addClass("complete"),localStorage.setItem("OTP",t.otp),window.location.href="/customer/verify-otp-page"):(Materialize.toast(t.message,3e3),setTimeout(function(){$(".cat-list").removeClass("complete spaced loader-div")},1e3))})},requestOTP:function(){var t=$(".request-otp-form"),a=/^[6789]\d{9}$/;t.find(".request-otp").on("click",function(){var e=t.find(".request-otp-number").val();null==e||""==e?t.find(".otp-error").html("Please provide your mobile number"):(t.find(".otp-error").html(""),a.test(e)?($(".cat-list").addClass("loader-div spaced"),fn_home.ajaxForm({phone:e},"POST","/customer/request-otp").done(function(e){var t=JSON.parse(e);"success"==t.status?($(".cat-list").addClass("complete"),localStorage.setItem("OTP",t.otp),window.location.href="/customer/verify-otp-page"):(Materialize.toast(t.message,3e3),setTimeout(function(){$(".cat-list").removeClass("complete spaced loader-div")},1e3))}),t.find(".otp-error").html("")):t.find(".otp-error").html("Mobile number should start with 6/7/8/9 and have 10 digits only"))})},verifyOTP:function(){var a=$(".verify-otp-form"),o=/^[0-9]$/;a.find(".btn.verify-otp").on("click",function(){var e=a.find(".cust_number").val(),t=a.find(".otp_number").val();null==t||""==t?a.find(".otp-error").html("Please input with OTP sent on your above mobile number"):o.test(t)?a.find(".otp-error").html("OTP can be a number between 0-9 only"):($(".cat-list").addClass("loader-div spaced"),fn_home.ajaxForm({phone:e,otp:t},"POST","/customer/verify-otp").done(function(e){if("success"==e.status)switch($(".cat-list").addClass("complete"),e.redirect){case"loadmoney":window.location.href="/user/profile";break;case"checkout":window.location.href="/user/checkout";break;case"profile":window.location.href="/user/profile";break;default:window.location.href="/"}else{var t=JSON.parse(e);$(".cat-list").addClass("complete"),Materialize.toast(t.message,3e3),setTimeout(function(){$(".cat-list").removeClass("complete spaced loader-div")},1e3)}}))})},userLogin:function(){$(".user-form .btn.login").on("click",function(e){var t=$(".user-login"),a=t.find(".user-id").val(),o=t.find(".user-password").val(),s=!1;""==a||""==o?Materialize.toast("Please provide with login details",3500):(/^\d+$/.test(a)?/^[6789]\d{9}$/.test(a)?s=!0:(s=!1,Materialize.toast("Mobile number should start with 6/7/8/9 and have 10 digits only",3500)):/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)?s=!0:(s=!1,Materialize.toast("Please provide with valid email id",3500)),s?($(".cat-list").addClass("loader-div spaced"),fn_home.ajaxForm({userId:a,password:o},"POST","/customer/login").done(function(e){var t=e;if("success"==t.status)switch($(".cat-list").addClass("complete"),e.redirect){case"loadmoney":window.location.href="/user/profile";break;case"checkout":window.location.href="/user/checkout";break;case"profile":window.location.href="/user/profile";break;default:window.location.href="/"}else"verify-otp"==t.status?window.location.href="/customer/verify-otp-page":($(".cat-list").addClass("complete"),Materialize.toast(e.message,3e3),setTimeout(function(){$(".cat-list").removeClass("complete spaced loader-div")},1e3))})):Materialize.toast("Please provide valid login creds",3500))})},resetPass:function(){$(".reset-pass").on("click",function(){var e=$(".reset-pass-container").find(".reset-num").val();""==e?Materialize.toast("Please enter your mobile number",3e3):/^[6789]\d{9}$/.test(e)?fn_home.ajaxForm({phone:e},"POST","/customer/reset-pass").done(function(e){var t=JSON.parse(e);"success"==t.status?(Materialize.toast(t.message,3e3),window.location.href="/signin/profile"):Materialize.toast(t.message,3e3)}):Materialize.toast("Please provide a valid mobile number",3e3)})},run:function(){this.validateUser(),this.userLogin(),this.resetPass()}},run:function(){fn.address.run(),fn.checkout.run(),fn.user.run(),fn.userLogin.run(),fn.add_message.close()}},fn.run()}),$(document).ready(function(){$("#reviewSubmitPopup").click(function(e){var t,a;e.preventDefault(),t=document.getElementById("rating-input-1-5").checked?5:document.getElementById("rating-input-1-4").checked?4:document.getElementById("rating-input-1-3").checked?3:document.getElementById("rating-input-1-2").checked?2:document.getElementById("rating-input-1-1").checked?1:0,a=document.getElementById("rating0-input-1-5").checked?5:document.getElementById("rating0-input-1-4").checked?4:document.getElementById("rating0-input-1-3").checked?3:document.getElementById("rating0-input-1-2").checked?2:document.getElementById("rating0-input-1-1").checked?1:0;var o=document.getElementById("review_text").value,s={delivery_rating:a,product_id:document.getElementById("product_id").value,product_rating:t,review_text:o,productName:$("h3").attr("data-productname"),username:$("#username").text()};console.log(s),$.ajax({url:"/send/reviews",type:"post",headers:{"X-CSRF-Token":$("input[name=_token]").attr("value")},data:s,success:function(e){"success"==e?($("#reviewSubmitPopup").prop("disabled",!0),Materialize.toast("Review Added. Thank you for your valuable feedback :)",2e3),setTimeout(function(){location.reload()},3e3)):($("#reviewSubmitPopup").prop("disabled",!1),Materialize.toast("It seems theres some problem adding your review. Please Try again later:)",2e3))}})}),$("#ingredientsbtn").click(function(){$("#methoddiv").addClass("hidden"),$("#ingredientsdiv").removeClass("hidden"),$("#ingredientsbtn").addClass("lec-redfont"),$("#methodbtn").removeClass("lec-redfont"),$("#methodbtn").addClass("black-text")}),$("#methodbtn").click(function(){$("#methoddiv").removeClass("hidden"),$("#ingredientsdiv").addClass("hidden"),$("#methodbtn").addClass("lec-redfont"),$("#ingredientsbtn").removeClass("lec-redfont"),$("#ingredientsbtn").addClass("black-text")})});var response_data={},DELIVERY_CLASS="delivery",PRODUCTS_CLASS="products";ratingEventData={prod_rate:[]},rr_fn={rating_response:{},getReviewRating:function(p,e){var t,a,o;$(".rating-wrap").show(),o="Home page"===p?(t="/home_page/get-reviewrating",a="","GET"):(t="/get-reviewratingbyid",a={shipment_id:e},"POST"),rr_fn.ajaxForm(a,o,t).done(function(e){try{var t,a,o,s,n,r,i,l,d=JSON.parse(e),c=!0;200===d.statusCode&&(c=!0,console.log("www"),c&&(t=d.data.basic_info,a='<div class="review-call-title">'+t.call_customer_care_text+'<img class="call-icon" src="/img/callback.svg" /></div>',o="Home page"===p?'<div class="review-cross"></div>':"",s='<div class="rr-wrap"><div class="review-top"><div class="review-img-wrap"><div class="review-prod-image"><a href="/review-ratings/'+d.data.shipment_id+'"><img src="'+t.item_images[0]+'"></a></div></div><div class="review-wrapper">'+o+'<a href="/review-ratings/'+d.data.shipment_id+'"><div class="review-head">'+t.rating_title+'<img src="/img/arrow.png" /></div><div class="review-title1">'+t.items_message+' </div><div class="review-title2"><span>Shipment ID: '+d.data.shipment_id+'</span> <span class="pipe"> | </span> <span>'+t.delivery_date+'</span></div></a></div></div><div class="review-bottom">'+a+"</div></div>",$(document).on("click",".review-call-title",function(e){a='<a href="tel:'+t.phone+'" class="rating-clicktocall"><div class="review-call-title2">Not received your order? Call:'+t.phone+'<img class="call-icon" src="/img/callback.svg" /></div></a>',$(".review-bottom").html(a)}),$(".review-rating-modal").html(s),n={},r=d.data.event_info,n.from_module=p,n.shipment_id=d.data.shipment_id,n.shipment_type=r.shipment_type,n.split=r.split.toString(),n.city=r.city,n.hub=t.hub,n.user_type=r.customer_type,n.item_count=t.item_list.length,n.item_list=t.item_list.map(function(e){return e.pr_name}).join(),n.category_list=r.category_list,n.amount=r.amount.toString(),n.discount=r.discount.toString(),i=new Date(r.delivered_date.split("T")[0]),n.delivered_date=i.toLocaleDateString().replace(/\//g,"-"),l=new Date(r.order_date.split("T")[0]),n.order_date=l.toLocaleDateString().replace(/\//g,"-"),$(".rating-clicktocall").click(function(e){var t=new Date;n.submit_date=t.getDate()+"-"+(t.getMonth()+1)+"-"+t.getFullYear(),n.Source="rate_order"}),$(".review-cross").click(function(e){$(".review-rating-wrapper").addClass("hide"),console.log("rate_close - "+JSON.stringify(n)),$(".review-rating-container").hide(),fn_home.ajaxForm({shipment_id:d.data.shipment_id},"POST","/ignore-reviewrating").done(function(e){})})),$(".review-rating-container").show())}catch(e){console.log(e)}})},filterAttributesByrateLevel:function(t,e,a){var o=e==PRODUCTS_CLASS?rr_fn.products_attributes.filter(function(e){return e.level==t&&e.pr_id==a}).map(function(e){return{option_id:e.option_id,value:e.value}}):rr_fn.delivery_attributes.filter(function(e){return e.level==t}).map(function(e){return{option_id:e.option_id,value:e.value}});return console.log(o),o},removeUnreviewedItems:function(e){return e.map(function(a){var o=[];a.class==PRODUCTS_CLASS?a.product_data.map(function(e,t){null!=e.response_rateRange&&(e.attributes||(o=rr_fn.filterAttributesByrateLevel(e.response_rateRange,a.class,e.product_id),a.product_data[t].attributes=o))}):null!=a.response_rateRange&&(a.attributes||(o=rr_fn.filterAttributesByrateLevel(a.response_rateRange,a.class,null),a.attributes=o))}),e.map(function(e){e.class==PRODUCTS_CLASS&&null!=e.product_data&&void 0!==e.product_data&&0<e.product_data.length&&(e.product_data=e.product_data.filter(function(e){return null!=e.response_rateRange}))}),e},delivery_attributes:[],products_attributes:[],validateproductClassObject:function(e,t){return!!(rr_fn&&rr_fn.rating_response&&rr_fn.rating_response.response_data&&rr_fn.rating_response.response_data[e]&&rr_fn.rating_response.response_data[e].product_data&&rr_fn.rating_response.response_data[e].product_data[t])},validateResponseData:function(e,t){return void 0!==e&&null!=e&&void 0!==t&&null!=t},validatedeliveryClassObject:function(e){return!!(rr_fn&&rr_fn.rating_response&&rr_fn.rating_response.response_data&&rr_fn.rating_response.response_data[e])},filterSelectedOptions:function(t,a,e,o){var s=[];e===PRODUCTS_CLASS?(s=rr_fn.products_attributes.filter(function(e){return e.level==t&&o==e.pr_id}).map(function(e){return e.option_id==a&&(e.value=!0),{option_id:e.option_id,value:e.value}}),rr_fn.validateproductClassObject(e,o)&&(rr_fn.rating_response.response_data[e].product_data[o].attributes=s)):(s=rr_fn.delivery_attributes.filter(function(e){return e.level==t}).map(function(e){return e.option_id==a&&(e.value=!0),{option_id:e.option_id,value:e.value}}),rr_fn.validatedeliveryClassObject(e)&&(rr_fn.rating_response.response_data[e].attributes=s))},setRating:function(e,t){var a,o,s=$(e).attr("index"),n=Number(s.split("-")[2]),r=s.split("-")[0];$(".quest-main-"+r+" .level-quest").hide(),$(".submit-button").addClass("active"),$(".submit-button").attr("disabled",!1),$(".rating-card").removeClass("disable-card"),r.toLowerCase()==PRODUCTS_CLASS?(a=$(e).attr("pr_id"),rr_fn.rating_response.response_data[r].product_data[a].response_rateRange=n,$("#litab-"+a).attr("rateval",n)):rr_fn.rating_response.response_data[r].response_rateRange=n,n<=3&&0==rr_fn.rating_response.showReceiveCall&&(rr_fn.rating_response.showReceiveCall=!0,$(".rate-check-cc").removeClass("hide")),$(".quest-main-"+r+" .levelQ-"+$(e).attr("index")).show(),void 0!==t&&(r.toLowerCase()==PRODUCTS_CLASS?(o=Number(s.split("-")[1])+1,ratingEventData.prod_rate[o]=$(e).attr("data-prname")+n,console.log(ratingEventData.prod_rate),ratingEventData.product_rating=ratingEventData.prod_rate.join(),rr_fn.eventsTracking("rate_screen_choose_product",t,{product_rating:ratingEventData.product_rating,product_position:o})):(ratingEventData.delivery_rating=n,rr_fn.eventsTracking("ratescreen_choosedelivery",t,{delivery_rating:n})))},ajaxForm:function(e,t,a){return $.ajax({url:a,type:t,data:e,timeout:2e4,headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content"),"Cache-Control":"private, no-cache, no-store, must-revalidate",Expires:"-1",Pragma:"no-cache"}})},getReviewRatingPopup:function(e){rr_fn.ajaxForm({shipment_id:e},"POST","/get-reviewratingbyid").done(function(e){try{var t,r,a,i,o=JSON.parse(e);200===o.statusCode?(t=o.data,rr_fn.rating_response.shipment_id=t.shipment_id,rr_fn.rating_response.customer_key=t.customer_key,rr_fn.rating_response.receive_call_from_chc=!1,rr_fn.rating_response.response_textQuestion="",r=[],rr_fn.rating_response.showReceiveCall=!1,a=t.basic_info,i='<div class="review-top"><div class="review-img-wrap"><div class="review-prod-image"><img src="'+a.item_images[0]+'"></div></div><div class="review-wrapper"><div class="review-head">'+a.items_message+'</div><div class="review-title2">Shipment ID: '+t.shipment_id+' <span class="pipe"> | </span>'+a.delivery_date+"</div></div></div>",$.map(t.feedbackItems,function(o,e){try{response_data={class:o.class,feedback_id:o.feedback_id};var t=o.class.toLowerCase()==PRODUCTS_CLASS?"disable-card":"";if(i+='<div class="rating-card '+t+'"><div class="rating-heading">'+o.classQuestion+"</div>",o.class.toLowerCase()==PRODUCTS_CLASS){var s=rateContent="",n=[];$.map(o.product_data,function(e,t){s+="<li "+(0==t?'class="active"':"")+' id="litab-'+e.product_id+'" index="'+t+'" rateval="0">'+e.pr_name+"</li>",rateContent+='<div id="'+e.product_id+'" class="prod-rate-box pr-rate-main-'+t+'" '+(0!=t?'style="display:none"':"")+'><div class="rate">';for(var a=e.rateRange;0<a;a--)rateContent+='<input type="radio" id="product_star-'+a+"-"+e.product_id+'" name="rate-products" value="'+a+'" /><label class="rate-star-label" for="product_star-'+a+"-"+e.product_id+'" index="'+o.class.toLowerCase()+"-"+t+"-"+a+'" pr_id="'+e.product_id+'" data-prname="'+e.pr_name+'"></label>';rateContent+="</div>",rateContent+=rr_fn.getRatingReviewQuestions(e.rateLevel,o.class.toLowerCase(),t,e.product_id,e.pr_name),rateContent+="</div>",n[e.product_id]={product_id:e.product_id},response_data.product_data=n}),i+='<div class="pr-rate"><div class="pr-tab"><ul>'+s+"</ul></div>"+rateContent+"</div>"}else{i+='<div class="rate">';for(var a=o.rateRange;0<a;a--)i+='<input type="radio" id="delivery_star'+a+'" name="rate-delivery" value="'+a+'" /><label for="delivery_star'+a+'" class="rate-star-label" index="'+o.class.toLowerCase()+"-0-"+a+'" ></label>';i+="</div> ",i+=rr_fn.getRatingReviewQuestions(o.rateLevel,o.class.toLowerCase(),0,null,null)}i+="</div>",r[o.class]=response_data,rr_fn.rating_response.response_data=r,console.log(rr_fn.rating_response),console.log({del:rr_fn.delivery_attributes}),console.log({pro:rr_fn.products_attributes})}catch(e){console.log(e)}}),i+='<div class="rating-card disable-card"><div class=""><span class="rating-heading"> '+a.textQuestion+' </span><textarea id="story" name="story" rows="2" cols="36" placeholder="Leave a comment" class="txtArea"></textarea></div></div><div class="bottom-margin"></div>',i+='<footer class="rate-bottom"><button type="submit" class="submit-button" disabled = true value="Submit"><div>Submit</div></button></footer>',$(".review-rating-main").html(i),$(".rate-star-label").on("click",function(){rr_fn.setRating(this,t)}),$(".pr-tab li").click(function(e){rr_fn.clickProductTab(this)}),$("#receiveCall").click(function(){rr_fn.rating_response.receive_call_from_chc=!0}),console.log("===="+JSON.stringify(r)),$(".submit-button").on("click",function(){rr_fn.submitReview(o.data)}),$("#story").change(function(e){e.stopImmediatePropagation(),rr_fn.rating_response.response_textQuestion=e.target.value.substr(0,50),console.log(rr_fn.rating_response.response_textQuestion)}),$(".checkmark").on("click",function(){rr_fn.setOptionCheckMark(this,o.data)})):$(".review-rating-main").html('<div class="rr-message">'+o.data+"</div>"),$(".close-button").on("click",function(){window.history.go(-1),rr_fn.eventsTracking("ratescreen_close",o.data)})}catch(e){console.log(e)}})},clickProductTab:function(e){var t=$(e).attr("index");$(".pr-tab li").removeClass("active"),$(".pr-tab li[index='"+t+"']").addClass("active"),$(".prod-rate-box").css("display","none"),$(".pr-rate-main-"+t).css("display","block");var a,o,s=$(e).attr("id");0!=$("#"+s).attr("rateval")&&void 0!==$("#"+s).attr("rateval")&&(a=s.split("-")[1],o=$("#"+a+' .rate label[for="product_star-'+$("#"+s).attr("rateval")+"-"+a+'"]'),$("#product_star-"+$("#"+s).attr("rateval")+"-"+a).click(),rr_fn.setRating(o))},setOptionCheckMark:function(e,t){var a=$(e).attr("index"),o=a.split("-")[0],s=a.split("-")[1],n=a.split("-")[2],r=null;o===PRODUCTS_CLASS&&(r=$(e).attr("pr_id")),"false"===$(e).attr("check-val")&&(o===PRODUCTS_CLASS?(Number(a.split("-")[1]),ratingEventData.delivery_attr+=$(e).attr("value"),rr_fn.eventsTracking("ratescreen_choose_product_att",t,{level:s,attrValue:$(e).attr("value")})):rr_fn.eventsTracking("rate_screen_choose_delivery_att",t,{level:s,attrValue:$(e).attr("value")}));var i="true"===$(e).attr("check-val")?"false":"true";$(e).attr("check-val",i),rr_fn.filterSelectedOptions(s,n,o,r),console.log(rr_fn.rating_response)},submitReview:function(a){var e=[],t=[];window.scrollTo(0,0),rr_fn.validateResponseData(rr_fn.rating_response.response_data[DELIVERY_CLASS],rr_fn.rating_response.response_data[PRODUCTS_CLASS])&&(Object.keys(rr_fn.rating_response.response_data[PRODUCTS_CLASS].product_data).map(function(e){t.push(rr_fn.rating_response.response_data[PRODUCTS_CLASS].product_data[e])}),rr_fn.rating_response.response_data[PRODUCTS_CLASS].product_data=t,e.push(rr_fn.rating_response.response_data[DELIVERY_CLASS]),e.push(rr_fn.rating_response.response_data[PRODUCTS_CLASS]),rr_fn.rating_response.response_data=e),finalResponseObject=rr_fn.removeUnreviewedItems(e),rr_fn.rating_response.response_data=finalResponseObject,console.log(rr_fn.rating_response),rr_fn.ajaxForm({payload:JSON.stringify(rr_fn.rating_response)},"POST","/submit-review").done(function(e){try{var t;200===(e=JSON.parse(e)).statusCode&&(rr_fn.eventsTracking("rate_submit",a),t='<img class="close-icon" src="/img/close-icon.png" /> <div class="rr-succ-box"><span>'+e.data.badge_message+'</span></div><div class="rr-succ-img"><img src="'+e.data.response_image+'"></div><div class="rr-succ-h1">'+e.data.response_title+"</div>",void 0!==e.data.response_info&&(t+='<div class="rr-succ-h2">'+e.data.response_info+"</div>"),e.data.app_store_flag&&(t+='<div class="rate-app-cont"><div class="rate-app-text" style="text-align: center;">'+e.data.button_text+'</div><a href="https://play.google.com/store/apps/details?id=com.licious&hl=en"> <button style="width:90%;height:42px;border-radius:3px;background-color: #e41d36;font-family: Lato;margin: 15px 20px;font-size: 18px;color: #ffffff;font-weight: bold;;">Rate us on Play Store</button> </a><a href="https://itunes.apple.com/in/app/fresh-meat-online-licious/id1052440342?mt=8"> <button style="width:90%;height:42px;border-radius:3px;background-color: #e41d36;font-family: Lato;margin: 5px 20px;font-size: 18px;color: #ffffff;font-weight: bold;;">Rate us on App Store</button> </a></div>'),$(".review-rating-container").css("padding","50px 0px"),$(".review-rating-succ-msg").html(t),$(".review-rating-succ-msg").removeClass("hide"),$(".review-rating-main").addClass("hide"))}catch(e){console.log(e),location.reload()}})},getRatingReviewQuestions:function(e,o,t,s,n){var r='<div class="rate-ques-main quest-main-'+o+'">';return $.map(e,function(a,e){r+='<div class="level-quest levelQ-'+o+"-"+t+"-"+a.level+'" style="display:none">',$.map(a.levelRateQuestion,function(e,t){r+='<div class="rateQues-h1">'+e.subClassQuestion+'</div><div class="multiQ-opt">',$.map(e.attributes,function(e,t){o===PRODUCTS_CLASS?(rr_fn.products_attributes.push({level:a.level,option_id:e._id,value:!1,pr_id:s}),r+='<label class="multiQ-container"><input type="checkbox" value="'+e.option+'"><span class="multi-option"> '+e.option+' </span><span class="checkmark" index="'+o+"-"+a.level+"-"+e._id+'" pr_id="'+s+'" value="'+e.option+'" check-val="false" data-prname="'+n+'"></span></label>'):(rr_fn.delivery_attributes.push({level:a.level,option_id:e._id,value:!1}),r+='<label class="multiQ-container"><input type="checkbox" value="'+e.option+'" name="'+o+"-"+a.level+'"><span class="multi-option"> '+e.option+' </span><span class="checkmark" index="'+o+"-"+a.level+"-"+e._id+'" value="'+e.option+'" check-val="false"></span></label>')}),r+="</div>"}),r+="</div>"}),r+="</div>"},eventsTracking:function(e,t,a){var o={Source:"rate_order"};o.shipment_id=t.shipment_id,o.shipment_type=t.event_info.shipment_type,o.split=t.event_info.split.toString(),o.city=t.event_info.city,o.hub=t.basic_info.hub,o.user_type=t.event_info.customer_type,o.item_count=t.basic_info.item_list.length.toString(),o.item_list=t.basic_info.item_list.map(function(e){return e.pr_name}).join(),o.category_list=t.event_info.category_list,o.amount=t.event_info.amount.toString(),o.discount=t.event_info.discount.toString(),o.delivered_date=t.basic_info.delivered_date.toString();var s=new Date(t.order_date.split("T")[0]);o.order_date=s.toLocaleDateString().replace(/\//g,"-");var n=new Date,r=n.getDate()+"-"+(n.getMonth()+1)+"-"+n.getFullYear();switch(e){case"ratescreen_close":break;case"ratescreen_choosedelivery":o.delivery_rating=a.delivery_rating.toString(),o.samedayrating=r==t.basic_info.delivered_date?"true":"false",o.rated_date=r.toString();break;case"rate_screen_choose_delivery_att":o.delivery_rating=a.level,o.delivery_attributes=a.attrValue,o.samedayrating=r==t.basic_info.delivered_date?"true":"false",o.rated_date=r;break;case"rate_screen_choose_product":o.delivery_rating=ratingEventData.delivery_rating,o.samedayrating=r==t.basic_info.delivered_date?"true":"false",o.rated_date=r,o.product_position=a.product_position,o.product_rating=a.product_rating;break;case"ratescreen_choose_product_att":o.delivery_rating=ratingEventData.delivery_rating,o.samedayrating=r==t.basic_info.delivered_date?"true":"false",o.rated_date=r.toString(),o.product_position=a.product_position.toString(),o.product_rating=ratingEventData.product_rating,o.product_attribute=a.attrValue;break;case"rate_submit":o.delivery_rating=ratingEventData.delivery_rating,o.product_list=t.basic_info.item_list.map(function(e){return e.pr_name}).join();for(var i=[],l=1,d=0;l<=t.basic_info.item_list.length;l++,d++)void 0===ratingEventData.prod_rate[l]?i[d]=t.basic_info.item_list[l-1].pr_name+" NA":i[d]=ratingEventData.prod_rate[l];ratingEventData.product_rating=i.join(),o.product_rating=ratingEventData.product_rating,o.samedayrating=r==t.basic_info.delivered_date?"true":"false",o.rated_date=r;var c=1,p=0;rr_fn.rating_response.response_data.map(function(e){e.class==PRODUCTS_CLASS?e.product_data.map(function(e){p+=e.response_rateRange}):p+=e.response_rateRange,c++}),o.overall_rating=(p/c).toString(),ratingEventData.overall_rating=o.overall_rating.toString();break;case"rate_download":o.delivery_rating=ratingEventData.delivery_rating,o.samedayrating=r==t.basic_info.delivered_date,o.rated_date=r,o.product_rating=ratingEventData.product_rating,o.overall_rating=ratingEventData.overall_rating,o.Platform=a.platform}console.log("eventName - "+e),console.log("events-"+JSON.stringify(o)),$(document).on("click",".close-icon",function(e){window.location.href="/"})}},fn_paypal={renderStaticTemplate:function(o,e,t){var s=arguments.length<=1||void 0===e?"link":e,n=arguments.length<=2||void 0===t?"profile":t;fn_main.showloader(),fn_home.ajaxForm({},"POST","/checkout/get-paypal-page").done(function(e){var t,a=JSON.parse(e);a.statusCode&&(t='\n            <div class="paypal-link-header">\n                <img id="paypal-img" src="'+a.data.logo+'" />\n                <div class="paypal-header-text">\n                    '+a.data.sub_title+'\n                </div>\n            </div>\n            <div class="paypal-link-body-container">\n              '+a.data.content+'\n            </div>\n            <div style="color:blue; text-align:center;">\n                '+a.data.offer+'\n            </div>\n            <div class="paypal-link-body-footer" style="padding-right: 139px !important;">\n                <div>\n                    <button style="width: 233%; background-color: #E41D36; color: #fff; display: inline-block; border-radius: 3px;vertical-align: middle; font-size: 20px; text-align: center; border: none;" id="paypal-link-now-button" data-scope="'+n+'" data-action="'+s+'">'+("unlink"==s?a.data.button_text_unlink:a.data.button_text_link)+"</button>\n                </div>\n            </div>",o.html(t),a.data.isBAPresent?$("#paypal-link-now-button").html("UN-LINK NOW").attr("data-action","unlink"):$("#paypal-link-now-button").html("LINK NOW").attr("data-action","link"))}).always(function(e){fn_main.hideloader()})},renderUnlinkComponents:function(){$("#paypal-link-now-button").html("UN-LINK NOW").attr("data-action","unlink"),$(".paypal-link-body-container").html(""),$(".paypal-link-body-header .paypal-header-text").html("To unlink please click on Unlink Button "),$('a[href="#paypal-link-view"]').click()},redirectToOrderStatusPage:function(e){window.location.href=window.location.origin+"/order-status/"+e},updatePaymentStatus:function(e){console.log("updatePaymentStatus paypal");var b=JSON.parse(localStorage.getItem("paypal_order")),k=JSON.parse(localStorage.getItem("isreinitiate"));fn_main.showloader();var t=localStorage.getItem("CreateOrderApiResponse"),a=(t=JSON.parse(t)).order_id,o=localStorage.getItem("fetchWalletApi"),s=(o=JSON.parse(o)).licious_wallet.total_payble_without_wallet;0<$(".lic-btn.enabled.checked").length&&(s=o.licious_wallet.total_payble_after_wallet);var n={type:"paypal",id:"1234",amount:s,status:e,secondry_action:"",order_id:a};fn_home.ajaxForm(n,"POST","/checkout/update-payment-paypal",6e4).done(function(e){var v,y=JSON.parse(e);if(fn_main.hideloader(),console.log("update-payment-paypalllll",y.status),200===y.status||424===y.status){if(console.log("update-payment-paypal",y.status),200===y.status&&function(){var a=b.order_id,e=b.address_id,t=b.orderDetails||{},o=t.cart_value,s=t.discount_amount,n=t.currency,r=t.product_ids,i=t.product_names,l=t.prices,d=t.delivery_type,c=t.delivery_slots,p=t.hub_id,u=parseFloat(localStorage.getItem("wallet_used")),m=localStorage.getItem("coupon_used"),h=(localStorage.getItem("method"),localStorage.getItem("pay_source")),f=fn_ll.getterSS("customer_type"),_={Source:"Purchase","Total Amount":Number(o),"Coupon Name":m,"Coupon Type":localStorage.getItem("coupon_type"),"City Name":localStorage.getItem("city_name"),"Hub ID":p,Discount:s,"Licious wallet Amount":u,"Charged ID":a,Currency:n,"Payment Method":h,"Product ID":r?r.toString():"","Product Name":i?i.toString():"","Category ID":JSON.parse(localStorage.getItem("allitem")).category_id,Price:l?l.toString():"",Quantity:localStorage.getItem("product_quantity"),ShipmentIDs:localStorage.getItem("shipmentCount"),ShipmentTypes:d,ShipmentTime:c,AddressID:e,"Transaction ID":y.razorpay_payment_id,Checkout_Flow:null!==sessionStorage.getItem("checkout_flow")&&""!==sessionStorage.getItem("checkout_flow")?sessionStorage.getItem("checkout_flow"):"old_checkout",user_type:f};fn_main.assignIncomingSource(_),fn_home.sendBranchChargedEvent(_,a),Number(o),localStorage.getItem("city_name"),ga("ecommerce:addTransaction",{id:a,revenue:Number(o)}),v=(v=localStorage.getItem("product_quantity")).split(","),$.map(i,function(e,t){ga("ecommerce:addItem",{id:a,name:e,sku:r[t],price:l[t],quantity:v[t]})});var g="false"===localStorage.getItem("pay-later-scenario");(!k||k&&g)&&(window.dataLayer&&window.dataLayer.push({event:"debug-charged","ga-category":"debug-charged","ga-action":"Logging debug charged","ga-label":b.orderDetails?JSON.stringify(b.orderDetails):"orderDetails not available"}),pushEEPurchases(parsePushEEPurchaseEvent({product_names:i,product_ids:r,prices:l,pr_qty:v,currency:n,order_id:a,transactionId:a,cart_value:o,delivery_type:d,delivery_slots:c,address_id:e,coupon_used:m,charged:_}))),fn_cart.gaAddRemoveEvent("Charged","Charged",JSON.stringify(_)),clevertap.event.push("Charged",_)}(),-1!==location.href.search("/order-status/"))return void window.location.reload();fn_paypal.redirectToOrderStatusPage(a)}})},createBillingAgreement:function(e,a){var t={token:e};fn_home.ajaxForm(t,"POST","/user/create-billing-agreement-paypal").done(function(e){var t;201===JSON.parse(e).statusCode?"payments"===a?(fn_paypal.updateGetConfigLSData(!0),$(".payment-cta").removeClass("disabled"),$("#paypal-link-now-button").hide(),$(".init-pay").click(),console.log("thisisis",$(".payment-cta")),fn_main.hideloader(),console.log("t",document.getElementsByClassName(".payment-cta")),fn_paypal.updateGetConfigLSData(!0)):"profile"===a&&(t={token:new URLSearchParams(window.location.href).get("ba_token")},fn_main.showloader(),console.log("#paypal-link-view-success#paypal-link-view-success",t),fn_paypal.updateGetConfigLSData(!0),$("#paypal-profile-tab").click()):(fn_main.hideloader(),$("#paypal-text").html("Billing Token Not accepted."),$(".paypal-popup-container").children("img").attr("src","https://d2407na1z3fc0t.cloudfront.net/Banner/payment-fail.png"),$(".custom-btn-1").css("display","none"),$(".custom-btn-2").html("Close"),$(".custom-btn-2").click(function(){$(".custom-paypal-popup").removeClass("show"),$(".custom-btn-1").css("display","inline-block")}),$(".custom-paypal-popup").addClass("show"))}).fail(function(e){console.log(e),fn_main.hideloader(),$("#paypal-text").html("Billing Token Not accepted."),$(".custom-btn-1").css("display","none"),$(".paypal-popup-container").children("img").attr("src","https://d2407na1z3fc0t.cloudfront.net/Banner/payment-fail.png"),$(".custom-btn-2").html("Close"),$(".custom-btn-2").click(function(){$(".custom-paypal-popup").removeClass("show"),$(".custom-btn-1").css("display","inline-block")}),$(".custom-paypal-popup").addClass("show")})},getBillingAgreementToken:function(e,t,n,a){var r=arguments.length<=3||void 0===a?500:a;console.log("getBillingAgreementToken",e,t,n);var o={return_url:e,cancel_url:t};fn_home.ajaxForm(o,"POST","/user/get-billing-agreement-token-paypal").done(function(e){var s=JSON.parse(e);if(200===s.statusCode){if(s.data&&s.data.links){var t=function(){var e=s.data.links[0].href,t=s.data.token_id,a=window.open(e,"_blank","Secure payment");if(!a||a.closed||void 0===a.closed)return Materialize.toast("PopUp Blocked. Please allow Popup in Settings and try again",4e3),fn_main.hideloader(),{v:void 0};var o=setInterval(function(){console.log("polling..."),null!==a&&a.closed&&(clearInterval(o),fn_paypal.createBillingAgreement(t,n))},r)}();if("object"==_typeof(t))return t.v}}else fn_main.hideloader(),Materialize.toast("Something went wrong. Please try again after sometime",4e3)}).fail(function(){fn_main.hideloader(),Materialize.toast("Something went wrong. Please try again after sometime",4e3)})},getBillingAgreementStatus:function(){return fn_paypal.getConfig().then(function(e){return console.log("getBillingAgreementStatus",e),e})},getConfig:function(){return new Promise(function(t,e){fn_home.ajaxForm({},"GET","/home_page/get-config").done(function(e){t(e)})})},updateGetConfigLSData:function(e){var t=JSON.parse(localStorage.getItem("configApiResponse"));null!=t&&t.hasOwnProperty("data")&&t.data.hasOwnProperty("paypal")&&t.data.paypal.hasOwnProperty("isBAPresent")||(t={data:{paypal:{isBAPresent:""}}}),t.data.paypal.isBAPresent=e,localStorage.setItem("configApiResponse",JSON.stringify(t))},updateUIviaPaypal:function(e){e<=2e3?($("#paypal_auto_pay").removeClass("disabled"),$("#paypal_auto_pay").addClass("enabled"),$("#paypal_auto_pay").css("opacity"," 1"),"true"==localStorage.getItem("is_ba_present")&&$("#paypal_one_time_pay").css("display","none")):($("#paypal_auto_pay").removeClass("enabled"),$("#paypal_auto_pay").addClass("disabled"),$("#paypal_auto_pay").css("opacity"," 0.4"),$("#paypal_autocheck_inp").parent().parent().parent().css("opacity","0.4"),$("#paypal_one_time_pay").css("display","block")),$("#paypal_auto_pay").removeClass("selected"),$("#paypal_one_time_pay").removeClass("selected")}},$(document).on("click","#paypal-link-now-button",function(e){var t,a,o,s=e.target.getAttribute("data-action"),n=e.target.getAttribute("data-scope");"link"===s?(t=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),o=a="",o="profile"===n?a=t+"/user/profile#paypal-link-view-success":(a=t+"/checkout/paypal-billing-agreement?state=success",t+"/checkout/paypal-billing-agreement?state=failure"),window.location.href.includes("profile")?(fn_main.showloader(),fn_paypal.getBillingAgreementToken(a,o,"profile")):($("#paypal-text").html('<h4 style="font-size: 20px"> The safe way to pay, just became faster.</h4><hr style="margin-top: 10px;"><h3 style="margin-top: 5px; color: #000000;font-size: 18px;">Set up automatic payments on Licious</h3><ul style="border-radius: 4px;color: #000000;margin-top: 9px;font-size: 12px;text-align: left;border: 1px solid grey;padding: 4px;"><li>1. Once your opt-in via OPT, you can skip OTP & CVV for future purchases on Licious (valid for purchases under Rs. 2000. Credit Cards Only)</li><li>2. Your money, details and purchases are protected by PayPal.</li><li>3. You can manage and cancel automatic payments anytime.</li></ul>'),$(".paypal-popup-container").children("img").attr("src","https://www.paypalobjects.com/webstatic/mktg/Logo/pp-logo-200px.png"),$(".custom-btn-1").html("continue"),$(".custom-btn-2").html("Close"),$(".custom-btn-2").click(function(){$(".custom-paypal-popup").removeClass("show"),$(".custom-btn-1").css("display","inline-block")}),$(".custom-btn-1").click(function(){fn_main.showloader(),fn_paypal.getBillingAgreementToken(a,o,"payments")}),$(".custom-paypal-popup").addClass("show"))):($("#paypal-text").html("Are you sure you want to cancel the Billing Agreement?"),$(".custom-btn-1").html("Continue"),$(".custom-btn-2").html("Cancel"),$(".custom-btn-2").click(function(){$(".custom-paypal-popup").removeClass("show")}),$(".custom-btn-1").click(function(){fn_main.showloader(),fn_home.ajaxForm({},"POST","/user/cancel-billing-agreement-paypal").done(function(e,t,a){console.log("responsestatus",a.status),201===JSON.parse(e).statusCode&&(console.log("renderStaticTemplate called"),fn_paypal.renderStaticTemplate($(".paypal-link-container")),fn_paypal.updateGetConfigLSData(!1))}).fail(function(e){$("#paypal-text").html("Something went wrong! Try again Later"),$(".custom-btn-1").css("display","none"),$(".custom-btn-2").html("Close"),$(".custom-btn-2").click(function(){$(".custom-paypal-popup").removeClass("show"),$(".custom-btn-1").css("display","inline-block")}),$(".custom-paypal-popup").addClass("show")}).always(function(){$(".custom-paypal-popup").removeClass("show"),fn_main.hideloader()})}),$(".custom-paypal-popup").addClass("show"))}),$(function(){var e;"undefined"!==location.hash&&("#paypal-link-view-success"===(e=location.hash.split("?")[0])?window.close():"#paypal-order-success"===e?($(".pay-method.paypal").css("display","none"),$("#paypal-order-success").css("display","block"),console.log("capturing order")):"#paypal-billing-agreement-success"===e?console.log("billing argreeement success"):"#paypal-link-view"===e&&$("#paypal-profile-tab").click());var t,a=localStorage.getItem("configApiResponse");!a||(t=JSON.parse(a)).data&&t.data.paypal&&void 0!==t.data.paypal.isBAPresent&&t.data.paypal.isBAPresent&&console.log("configApiResponseif")}),$(document).on("click",".payment-options-list > [data-payname=paypal]",function(){console.log("paypal clicked")}),$(document).on("click",".payment-options-list,.paypal-payment-options",function(){var e,t=$(".payment-options-list > ul > [data-payname=paypal]").hasClass("active"),a=$(".paypal-payment-options.enabled.selected").attr("data-paymentcode"),o=t&&"paypal_auto_pay"===a;console.log("check",t,a),console.log("check2",t&&"paypal_auto_pay"===a),o?!1===JSON.parse(localStorage.getItem("configApiResponse")).data.paypal.isBAPresent&&($(".payment-cta").hide(),console.log("configApiResponseconfigApiResponse true"),(e=$("<button>").attr("id","paypal-link-now-button")).attr("data-scope","payments"),e.attr("data-action","link"),e.html("Link Now & Pay"),$("#paypal-link-now-button").length||$(".payment-options-holder").append(e),$(".init-pay").css("display","none")):($(".payment-cta").show(),$(".init-pay").css("display","block"),console.log("configApiResponseconfigApiResponse false"),$("#paypal-link-now-button").remove())}),$(document).on("click","#paypal-profile-tab",function(){console.log("paypal clicked tab");var e=localStorage.getItem("configApiResponse");!0===(e=JSON.parse(e)).data.paypal.isBAPresent?fn_paypal.renderStaticTemplate($(".paypal-link-container"),"unlink","profile"):fn_paypal.renderStaticTemplate($(".paypal-link-container"),"link","profile")});var LoyaltyBanners=function(){function n(){_classCallCheck(this,n)}return _createClass(n,[{key:"ajaxForm",value:function(e,t,a){return $.ajax({url:a,type:t,data:e,timeout:2e4,headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")}})}},{key:"getHomePageAPIData",value:function(){return fn_home.ajaxForm({},"GET","/loyalty/get-user-loyalty-details")}},{key:"getLoyaltyBanner",value:function(a){var o=this;this.ajaxForm({},"GET","/loyalty/get-user-loyalty-details").done(function(e){var t=JSON.parse(e);200===t.statusCode&&t.data.is_eligible&&(t.data.is_subscribed&&null!=t.data.subscribed&&!t.data.subscribed.is_expired?document.querySelector(".header-logo").innerHTML='<a href="/"><img src="/img/loyalty_licious_logo.svg" alt="licious"></a>':document.querySelector(".header-logo").innerHTML='<a href="/"><img src="https://d2407na1z3fc0t.cloudfront.net/Banner/web_licious_logo.png" alt="licious"></a>',fn_ll.populateLoyaltyBannerData(t.data),o.handleBannerRenderCases(t.data,a))}).fail(function(){console.log("res")}).always(function(){})}},{key:"handleBannerRenderCases",value:function(e,t){e.is_subscribed?e.subscribed.is_expired?null!==e.cart_loyalty?this.renderLoyaltyInCartBanner(e.cart_loyalty,t,"bottom"):this.renderMembershipExpiredBanner(e.subscribed,t):this.renderMemberBanner(e.subscribed,t):null!==e.cart_loyalty?this.renderLoyaltyInCartBanner(e.cart_loyalty,t,"top"):this.renderNonMemberBanner(e,t)}},{key:"renderMemberBanner",value:function(e,t){var a,o;"up"===t?(document.querySelector("."+t+"-ll-badge-placeholder").innerHTML='\n        <div class="loyalty-badge">\n          <img src="/img/loyalty_licious_logo.svg" class="loyalty-badge-logo">\n        </div>',document.querySelector(".col.s2.lec-rightborder-grey").insertAdjacentHTML("afterbegin",'<img src="/img/confetti.svg" class="confetti">'),$(".left.customer-pic1.circle.responsive-img").css({"margin-top":"-128px","border-color":"#ffdc93"}),$(".center.lec-profile-textalign.h-lato-bold").css({"padding-top":"0px","margin-top":"0"}),a='\n        <div>\n          <button class="'+t+'-ll-m-banner">MY MEATOPIA PLAN</button>\n        </div>\n      ',$(".row.grey.lighten-5.user-profile-header").append(a),this.bindBannerClick("m",t)):"mc"!==t&&(document.querySelector("."+t+"-ll-bottom-banner-placeholder").innerHTML='\n      \x3c!-- Loyalty Member Banner --\x3e\n      <div class="'+t+'-ll-m-banner">\n        <img src="/img/loyalty_licious_logo.svg" class="'+t+'-ll-banner-licious-m-logo">\n        <div class="'+t+'-ll-m-banner-separator"></div>\n        <div class="'+t+'-ll-m-info">\n          <div class="'+t+'-ll-m-expiry-info">'+(e.days_left<=1?e.expiry_message:e.plan_info_msg)+'</div>\n          <div class="'+t+'-ll-m-savings-info">\n            <span class="'+t+'-ll-m-orders"><span class="'+t+'-ll-m-noo">'+e.order_count+'</span> orders placed</span>\n            <span class="'+t+'-ll-m-info-separator"></span>\n            <span class="'+t+'-ll-m-savings"><span class="'+t+'-ll-m-s-amt">'+e.total_saving+"</span> total savings</span>\n          </div>\n        </div>\n      </div>"),"hp"===t&&$(".profile-drop")&&!$(".profile-drop").find('[data-eventlabel="Loyalty"]').length&&(o='\n        <li class="pd-ll-banner m">\n          <a href="/loyalty/licious-meatopia" data-eventlabel="Loyalty">\n            <div class="pd-ll-b-container">\n              <img class="loyalty-logo" data-lazy="/img/loyalty_licious_logo.svg">\n              <div class="expiry-info">'+(e.days_left<=1?e.expiry_message:e.plan_info_msg)+"</div>\n            </div>\n          </a>\n        </li>",$(".ll-m-badge").show(),document.querySelector(".profile-drop").insertAdjacentHTML("afterbegin",o),fn_home.getAllDOMImages())}},{key:"renderMembershipExpiredBanner",value:function(e,t){document.querySelector("."+t+"-ll-"+("up"===t||"mc"===t?"top":"bottom")+"-banner-placeholder").innerHTML="\n    \x3c!-- Loyalty Membership Expired Banner --\x3e\n    "+("mc"===t||"os"===t?'\n        <div class="'+t+'-ll-me-banner-title">\n          '+e.renew_message+"\n        </div>\n      ":"")+'\n    <div class="'+t+'-ll-me-banner">\n      <img data-lazy="/img/loyalty_licious_logo.svg" class="'+t+'-ll-banner-licious-me-logo"><div class="'+t+'-ll-me-banner-separator"></div>\n          <div class="'+t+'-ll-me-info">\n            <div class="'+t+'-ll-me-expiry-info">'+e.expiry_message+'</div>\n            <div class="'+t+'-ll-me-savings-info">\n              <span class="'+t+'-ll-me-orders"><span class="'+t+'-ll-me-noo">'+e.order_count+'</span> orders placed </span>\n              <span class="'+t+'-ll-me-info-separator"></span>\n              <span class="'+t+'-ll-me-savings"><span class="'+t+'-ll-me-s-amt">'+e.total_saving+'</span> total savings</span>\n            </div>\n          </div>\n          <div class="'+t+'-ll-me-banner-rtext">\n            <span>RENEW</span>\n            <img src="/img/chevron.svg" class="'+t+'-ll-rchevron">\n          </div>\n        </div>\n        '+("mc"===t?"<hr>":""),fn_home.getAllDOMImages(),"mc"===t?(this.bindBannerClick("me",t),$(".li-crossell-wrapper").css("box-shadow","none"),$("."+t+"-ll-top-banner-placeholder").show()):this.openRenewPopup("me",t)}},{key:"renderNonMemberBanner",value:function(e,t){var a=e.non_subscribed;document.querySelector("."+t+"-ll-top-banner-placeholder").innerHTML="\n    "+("hp"===t?'\n      <div class="'+t+'-ll-nm-banner">\n        <div class="'+t+'-ll-nm-banner-top">\n          <img data-lazy="/img/loyalty_licious_logo.svg" class="'+t+'-ll-banner-licious-nm-logo">\n          <button>JOIN NOW</button>\n          </div>\n          <hr>\n          <div class="'+t+'-ll-nm-banner-bottom">\n            '+e.bannerMessage+"\n          </div> \n        </div>\n      </div>":("mc"===t||"os"===t?'\n        <div class="'+t+'-ll-nm-banner-title">\n          '+a.message+"\n        </div>\n      ":"")+'\n        <div class="'+t+'-ll-nm-banner">\n        '+("mc"!==t&&"os"!==t?'\n          <div class="'+t+'-ll-nm-banner-top">':"")+'\n            <img src="/img/loyalty_licious_logo.svg" class="'+t+'-ll-banner-licious-nm-logo">\n            <div class="'+t+'-ll-nm-banner-rtext">\n              <span>JOIN NOW</span>\n              <img src="/img/chevron.svg" class="'+t+'-ll-rchevron">\n            </div>\n        '+("mc"!==t&&"os"!==t?'\n          </div>\n          <hr>\n          <div class="'+t+'-ll-nm-banner-bottom">\n            '+this.renderBenefitList(a.benefits,t)+"\n          </div> \n        </div>":"")+"\n      </div>\n      "+("mc"===t?"<hr>":"")),"mc"===t&&($(".li-crossell-wrapper").css("box-shadow","none"),window.location.href.includes("/loyalty/")||$("."+t+"-ll-top-banner-placeholder").show()),"hp"!==t||e.cart_loyalty||!$(".profile-drop")||$(".profile-drop").find('[data-eventlabel="Loyalty"]').length||document.querySelector(".profile-drop").insertAdjacentHTML("afterbegin",'\n        <li class="pd-ll-banner nm">\n          <a href="/loyalty/licious-meatopia" data-eventlabel="Loyalty">\n            <div class="pd-ll-b-container">\n              <img class="loyalty-logo" data-lazy="/img/loyalty_licious_logo.svg">\n              <div class="join-now">JOIN NOW</div>\n            </div>\n          </a>\n        </li>'),this.bindBannerClick("nm",t)}},{key:"renderLoyaltyInCartBanner",value:function(e,t,a){"os"!==t&&"mc"!==t&&(document.querySelector("."+t+"-ll-"+("up"===t?"top":a)+"-banner-placeholder").innerHTML='\n      \x3c!-- Loyalty In Cart Banner --\x3e\n      <div class="'+t+'-ll-ic-banner">\n        <img data-lazy="/img/loyalty_licious_logo.svg" class="'+t+'-ll-banner-licious-ic-logo">\n        <div class="'+t+'-ll-ic-banner-separator"></div>\n        <div class="'+t+'-ll-ic-info">\n          <div class="'+t+'-ll-ic-pic">'+e.loyalty_title+'</div>\n          <div class="'+t+'-ll-ic-pm">'+e.loyalty_subtitle+"</div>\n        </div>\n      </div>",this.bindBannerClick("ic",t))}},{key:"renderBenefitList",value:function(a,e){var o=arguments.length<=1||void 0===e?"popup":e,s="";return a.map(function(e,t){t<2?s+='<span class="'+o+'-ll-nm-banner-benefits">'+e.name+"</span>\n                  "+(t!==a.length-1?'<span class="'+o+'-ll-dot"></span>':""):2==t&&(s+=t!==a.length-1?'<span class="'+o+'-ll-nm-banner-benefits">\n        '+e.name+" & MORE</span>":'<span class="'+o+'-ll-nm-banner-benefits">'+e.name)}),s}},{key:"renderPopupBenefits",value:function(e,t){"mc"===(arguments.length<=1||void 0===t?"":t)?document.querySelector("#loyalty-plans .popup-benefits").innerHTML=""+this.renderBenefitList(e.non_subscribed.benefits):document.querySelector(".popup-benefits").innerHTML=""+this.renderBenefitList(e.non_subscribed.benefits)}},{key:"bindBannerClick",value:function(e,t){var a,o,s="";"mc"===t?s="cart":"hp"===t?s="homepage":"os"===t?s="order-status":"cat"===t&&(s=localStorage.getItem("activeCatName")),"ic"===e?$("."+t+"-ll-"+e+"-banner").on("click",function(){fn_cart.miniCart()}):"mc"===t?(a=new HandleLoyaltyPlans,o=new n,$("."+t+"-ll-"+e+"-banner").on("click",function(){$("#cart-ll").show(),a.getLoyaltyPlans.call(a,!0),document.getElementById("loyalty-plans").className="show",$(".buy_plan").attr("id","normal-add-to-cart"),$(".buy_plan button").on("click",function(e){var t;document.getElementById("loyalty-plans").className="hide",a.addLoyalty.call(a),"normal-add-to-cart"===$(".buy_plan").attr("id")&&(t=a.getPlanDetailText.call(a,a.getCheckedPlan.call(a)),fn_ll.sendAnalyticsData("selectplan_loyaltycart",_extends({},fn_ll.loyalty_banners_obj,fn_ll.loyalty_cart_obj,{source:"loyalty",list:"cart",selected_plan:t})),localStorage.setItem("loyalty_cartflow",t)),$("#cart-ll").hide()}),document.body.addEventListener("change",function(e){a.handlePlanChange.call(a,e,!0,"cart_page")}),$(".close-loyalty-icon").on("click",function(e){document.getElementById("loyalty-plans").className="hide",$("#cart-ll").hide()}),$("#cart-ll").on("click",function(){document.getElementById("loyalty-plans").className="hide",$("#cart-ll").hide()}),$(".cart-screen").on("click",function(){document.getElementById("loyalty-plans").className="hide",$("#cart-ll").hide()}),o.getHomePageAPIData().done(function(e){var t=JSON.parse(e);t.data.is_subscribed||o.renderPopupBenefits(t.data,"mc")}),"mc"===t?fn_ll.sendAnalyticsData("cartbanner",_extends({},fn_ll.loyalty_banners_obj,fn_ll.loyalty_cart_obj,{source:"click",list:""+s})):fn_ll.sendAnalyticsData("Banner",_extends({},fn_ll.loyalty_banners_obj,{source:"click",list:""+s}))})):document.querySelector("."+t+"-ll-"+e+"-banner").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),fn_ll.sendAnalyticsData("Banner",_extends({},fn_ll.loyalty_banners_obj,{source:"click",list:""+s})),window.location.href="/loyalty/licious-meatopia",setTimeout(function(){window.location.href="/loyalty/licious-meatopia"},1e3)})}},{key:"openRenewPopup",value:function(e,a){var o="";"mc"===a?o="cart":"hp"===a?o="homepage":"os"===a?o="order-status":"cat"===a&&(o=localStorage.getItem("cat_slug")),document.querySelector("."+a+"-ll-"+e+"-banner").addEventListener("click",function(){fn_ll.sendAnalyticsData("renewplan_loyalty",_extends({},fn_ll.loyalty_banners_obj,{source:"loyalty",list:""+o,expired_plan:fn_ll.loyalty_expired_plan})),$(".loc-screen").addClass("show");var t=new HandleLoyaltyPlans;"show"===document.getElementById("popupp").className?(document.getElementById("popupp").className="hide",$(".loc-screen").removeClass("show"),$(".loc-screen").addClass("hide")):"hide"===document.getElementById("popupp").className&&(document.getElementById("popupp").className="show",$(".loc-screen").removeClass("hide"),$(".loc-screen").addClass("show")),t.getLoyaltyPlans.call(t,!0,"renew"),document.body.addEventListener("change",function(e){t.handlePlanChange.call(t,e,!0,"renew-popup")}),$(".buy_plan button").on("click",function(e){t.addLoyalty.call(t,"true").then(function(e){document.getElementById("loyalty-renew-popup-plans").className="hide",fn_ll.sendAnalyticsData("confirmrenew_loyalty",_extends({},fn_ll.loyalty_banners_obj,{source:"loyalty",list:""+o,expired_plan:fn_ll.loyalty_expired_plan,new_plan:t.getPlanDetailText(t.getCheckedPlan())})),document.getElementById("loyalty-renew-popup-plans").className="hide",$(".loc-screen").removeClass("show"),$(".loc-screen").addClass("hide"),(new n).getLoyaltyBanner(a)})}),$(".loc-screen").on("click",function(e){document.getElementById("popupp").className="hide",$(".loc-screen").removeClass("show"),$(".loc-screen").addClass("hide")}),document.body.addEventListener("change",function(e){t.handlePlanChange.call(t,e,!0)}),$(".close-loyalty").on("click",function(e){document.getElementById("popupp").className="hide",$(".loc-screen").removeClass("show"),$(".loc-screen").addClass("hide")})})}}]),n}(),HandleLoyaltyPlans=function(){function e(){_classCallCheck(this,e),this.currentPlan="",this.planName="",this.APIData={}}return _createClass(e,[{key:"getLoyaltyPlans",value:function(a,e){var o=this,s=arguments.length<=1||void 0===e?"":e;fn_home.ajaxForm({},"GET","/loyalty/get-loyalty-plans").done(function(e){var t=JSON.parse(e);o.APIData=t.data,fn_ll.populateLoyaltyLandingData(t.data),$(".meatopian-text").html(t.data.benefit_header),o.planName=t.data.sub_programs.filter(function(e){return!0===e.is_recommended})[0].buy_plan_text,a?(o.currentPlan=o.getRecommendedPlan(!0),o.renderPlanDetails(t.data,!0,s),o.planName=t.data.sub_programs.filter(function(e){return e.id===o.currentPlan})[0].buy_plan_text,$(".buy_plan button").html(""+o.planName),$(".buy_loyalty button").html(""+o.planName)):(o.currentPlan=o.getRecommendedPlan(!1),o.renderPlanDetails(t.data,!1,s)),localStorage.setItem("loyalty_recommended",o.getRecommendedPlan(!1)),localStorage.setItem("loyalty_total_plans",t.data.sub_programs.length)}).fail(function(){}).always(function(){fn_main.hideloader()})}},{key:"getCheckedPlan",value:function(){for(var e="",t=document.querySelectorAll(".loyalty_plan"),a=0;a<t.length;a++)!0===t[a].checked&&(e=parseInt(t[a].value));return e}},{key:"getRecommendedPlan",value:function(e){var n=this;if(!1===e){var t="",a=this.APIData.sub_programs.filter(function(e){return!0===e.is_recommended});return Array.isArray(a)&&a.length?t=this.APIData.sub_programs.filter(function(e){return!0===e.is_recommended})[0].id:Array.isArray(this.APIData.sub_programs)&&0<this.APIData.sub_programs.length&&(t=this.APIData.sub_programs[0].id),t}var o=function(){for(var a=document.querySelectorAll(".loyalty_plan"),e="",t=0;t<a.length;t++)!function(t){!0===a[t].checked&&(e=n.APIData.sub_programs.filter(function(e){return e.id===parseInt(a[t].value)})[0].id)}(t);if(""!==e)return{v:e};var o="",s=n.APIData.sub_programs.filter(function(e){return!0===e.is_recommended});return Array.isArray(s)&&s.length?o=n.APIData.sub_programs.filter(function(e){return!0===e.is_recommended})[0].id:Array.isArray(n.APIData.sub_programs)&&0<n.APIData.sub_programs.length&&(o=n.APIData.sub_programs[0].id),{v:o}}();if("object"==_typeof(o))return o.v}},{key:"renderPlanDetails",value:function(e,t,a){!(arguments.length<=1||void 0===t)&&t?"renew"===(arguments.length<=2||void 0===a?"":a)?document.querySelector("#loyalty-renew-popup-plans .plan-section").innerHTML="\n                "+this.renderAllPlans(e.sub_programs,!0)+"\n                ":document.querySelector("#loyalty-plans .plan-section").innerHTML="\n                "+this.renderAllPlans(e.sub_programs,!0)+"\n                ":document.querySelector(".ll-container .plan-section").innerHTML="\n            "+this.renderAllPlans(e.sub_programs,!1)+"\n            "}},{key:"renderBenefitList",value:function(e){document.querySelector(".ll-container .benefitsContainer").innerHTML="\n            "+this.renderBenefit(e)+"\n        "}},{key:"renderBenefit",value:function(e){var o="";return e.length%2==0&&e.length%3!=0?e.map(function(e,t){var a=e.name.split(" ").splice(0,2).join(" ");o+='\n                <div class="benefitViewShow">\n                    <div class="benefitImage"><img src='+e.imageUrl+'></div>\n                    <div class="benefitText">\n                    '+a+"\n                    </div>\n                </div>\n            "}):e.map(function(e,t){var a=e.name.split(" ").splice(0,2).join(" ");o+='\n                    <div class="benefitView">\n                        <div class="benefitImage"><img src='+e.imageUrl+'></div>\n                        <div class="benefitText">\n                        '+a+"\n                        </div>\n                    </div>\n                "}),o}},{key:"renderAllPlans",value:function(e,a){var o=this,s="";return e.map(function(e,t){s+='<label class="contain">\n                                <div class="single-plan" '+(a?o.currentPlan===e.id?'style="border: solid 1px #e41d36;"':'style="border: none"':(e.is_recommended,'style="border:none"'))+'>\n                                    <div class="left">\n                                        <label class="contain">\n                                            <span class="plan_text"">'+e.name+'</span>\n                                            <input type="radio" value='+e.id+' id="plan_'+(t+1)+'" name="'+e.buy_plan_text+'" class="loyalty_plan" '+(a?e.id===o.currentPlan?"checked":"":(e.is_recommended,""))+'>\n                                            <span class="checkmark"></span>\n                                        </label>\n                                        '+(e.is_recommended?'<div class="recommended"> <div> LIMITED PERIOD</div></div>':"")+'\n                                    </div>\n                                    <div class="right">\n                                        <div class="act_price"> '+(e.price-e.discounted_price==0?"":"&#8377 "+e.price)+' </div>\n                                        <div class="discount_price"> '+e.discounted_price+"</div>\n                                    </div>\n                                </div> \n                            </label>\n    "}),s}},{key:"filterBenefit",value:function(t){return this.APIData.sub_programs.filter(function(e){return e.id===t})[0].benefits}},{key:"handlePlanChange",value:function(e,t,a){var o=!(arguments.length<=1||void 0===t)&&t,s=arguments.length<=2||void 0===a?"":a,n=document.querySelectorAll(".loyalty_plan");if(e.target.classList.contains("loyalty_plan")){for(var r=0;r<n.length;r++)e.target.id===n[r].id?(n[r].checked=!0,n[r].parentNode.parentNode.parentNode.style.border="solid 1px #e41d36",this.currentPlan=e.target.value):(n[r].checked=!1,n[r].parentNode.parentNode.parentNode.style.border="none");this.planName=e.target.name,$(".ll-footer").show(),$(".ll-footer div").html(""+this.planName),$(".buy_loyalty button").html(""+this.planName),this.currentPlan=parseInt(e.target.value),"loyalty_landing"===s&&fn_ll.sendAnalyticsData("selectplan_loyaltyhome",{source:"loyalty",selected_plan:""+this.getPlanDetailText(this.currentPlan),list:"loyalty_landing"})}o&&($(".buy_plan button").html(""+this.planName),$(".ll-footer div").html(""+this.planName))}},{key:"addLoyalty",value:function(e){var a=this,o=arguments.length<=0||void 0===e?"":e;return new Promise(function(t,e){fn_home.ajaxForm({program_id:1,subprogram_id:a.currentPlan},"POST","/loyalty/add-loyalty").done(function(e){t(e),"true"!==o&&fn_cart.miniCart(),(window.location.href.includes("/favourite-items")||window.location.href.includes("/past-orders"))&&fn_home.quickCheckout()}).fail(function(){e("failed")}).always(function(){})})}},{key:"getLoyaltySubsrcibedPage",value:function(e){document.querySelector(".details-view").innerHTML='\n            <div class="days-left">'+(0!==e.days_left?e.plan_info_msg:e.expiry_message)+'</div>\n            <div class="validity">'+this.getDate(e.start_date)+" to "+this.getDate(e.end_date)+"</div>\n            ",document.querySelector(".savings").innerHTML=" <span> "+e.total_saving+"</span> <br /> total savings",document.querySelector(".order-and-savings  .orders-count").innerHTML=" <span> "+e.order_count+"</span> <br /> orders placed"}},{key:"renderSubBenefitList",value:function(a){var o=document.querySelector(".benefits-section .benefits-list");a.map(function(e,t){o.innerHTML+='\n            <div class="single-benefit">\n                <img src="'+e.image_url+'" />\n                <div class="right-view">\n                    <div class="title">'+e.name+'</div>\n                    <div class="description">'+e.description+"</div>\n                </div>\n            </div>\n            "+(t!==a.length-1?"<hr/>":"")})}},{key:"getDate",value:function(e){var t=new Date(e);if(isNaN(t.getTime()))return e;var a=new Array;a[0]="Jan",a[1]="Feb",a[2]="Mar",a[3]="Apr",a[4]="May",a[5]="Jun",a[6]="Jul",a[7]="Aug",a[8]="Sept",a[9]="Oct",a[10]="Nov",a[11]="Dec";var o=t.getDate();return o<10&&(o="0"+o),o+"-"+a[t.getMonth()]+"-"+t.getFullYear()}},{key:"getExpiryDate",value:function(e){document.querySelector(".validity-text").innerHTML="Your plan is valid till "+this.getDate(e)}},{key:"buyLoyalty",value:function(e){"loyalty-landing"===$(".ll-footer").attr("id")&&fn_ll.sendAnalyticsData("get_loyalty",{source:"loyalty",selected_plan:this.getPlanDetailText(this.getCheckedPlan())}),localStorage.setItem("loyalty_directflow",this.getPlanDetailText(this.currentPlan)),"true"===e?(localStorage.setItem("from_loyalty",!0),window.addEventListener("unload",function(){localStorage.setItem("from_loyalty",!1)}),localStorage.setItem("loyalty_selected_plan_id",this.currentPlan),$(".user-onboarding-wrapper").addClass("show"),$(".search-screen").show().css("background","rgba(0,0,0,0.5)")):(localStorage.setItem("loyaltyPaymentState","purchase_loyalty"),window.location.href="/loyalty/payment/"+this.currentPlan)}},{key:"getPlanDetailText",value:function(t){var e="";Array.isArray(this.APIData.sub_programs)&&0<this.APIData.sub_programs.length&&(e=(a=this.APIData.sub_programs[0]).name+", "+(a.price-a.discounted_price<=0?"0":" "+a.price)+",  "+a.discounted_price);var a,o=this.APIData.sub_programs.filter(function(e){return e.id.toString()===t.toString()});return o.length&&(e=o[0].id.toString(),e=(a=o[0]).name+", "+(a.price-a.discounted_price<=0?"0":" "+a.price)+",  "+a.discounted_price),fn_ll.loyalty_selected_plan=e.toString(),e.toString()}}]),e}();ll_fn={getFAQaftSubscription:function(){fn_home.ajaxForm({},"GET","/loyalty/get-FAQ").done(function(e){e=JSON.parse(e),data=e.data.program_details.faqs,faqsSorted=[].concat(_toConsumableArray(data));var t=document.querySelector(".FAQ_placeHolder");faqsSorted.sort(function(e,t){return e.sequence_number<t.sequence_number}),"false"===$(".show-more-faqs").attr("up")?(t.innerHTML="",faqsSorted.slice(0,3).map(function(e){e.answer=e.answer.replace(/\n/g,"<br/>"),t.innerHTML+='\n                <div class="single-faq">\n                    <div class="faq-ques">'+e.question+'</div>\n                    <div class="faq-ans">'+e.answer+"</div>\n                </div>\n                "}),document.querySelector(".show-more-faqs").innerHTML='Read all FAQs<span><img src="/img/arrow.png"></span>'):(t.innerHTML="",faqsSorted.slice(0,faqsSorted.length).map(function(e){e.answer=e.answer.replace(/\n/g,"<br/>"),t.innerHTML+='\n                <div class="single-faq">\n                    <div class="faq-ques">'+e.question+'</div>\n                    <div class="faq-ans">'+e.answer+"</div>\n                </div>\n                "}),document.querySelector(".show-more-faqs").innerHTML='show less<span><img style="-webkit-transform: rotate(-90deg);transform: rotate(-90deg);" src="/img/arrow.png"></span>')}).always(function(){fn_main.hideloader()})}};var HandleBenefitBannersFAQ=function(){function e(){_classCallCheck(this,e),this.APIData={}}return _createClass(e,[{key:"getAPIBannerFAQ",value:function(){var a=this;fn_home.ajaxForm({},"GET","/loyalty/get-loyalty-banner-FAQ").done(function(e){var t=JSON.parse(e);a.APIData=t.data,a.renderBenefitCaraousel(),a.renderFAQ(t.data.program_details.faqs)}).fail(function(){}).always(function(){fn_main.hideloader()})}},{key:"getFAQs",value:function(){return fn_home.ajaxForm({},"GET","/loyalty/get-FAQ")}},{key:"renderFAQ",value:function(e){var t=document.querySelector(".FAQ_placeHolder"),a=[].concat(_toConsumableArray(e));"false"===$(".show-more-faqs").attr("up")?(t.innerHTML="",a.slice(0,3).map(function(e){e.answer=e.answer.replace(/\n/g,"<br/>"),t.innerHTML+='\n            <div class="single-faq">\n                <div class="faq-ques">'+e.question+'</div>\n                <div class="faq-ans">'+e.answer+"</div>\n          </div>\n            "}),document.querySelector(".show-more-faqs").innerHTML='Read all FAQs<span><img src="/img/arrow.png"></span>'):(t.innerHTML="",a.slice(0,a.length).map(function(e){e.answer=e.answer.replace(/\n/g,"<br/>"),t.innerHTML+='\n            <div class="single-faq">\n                <div class="faq-ques">'+e.question+'</div>\n                <div class="faq-ans">'+e.answer+"</div>\n            </div>\n            "}),document.querySelector(".show-more-faqs").innerHTML='show less<span><img class="rota" src="/img/arrow.png"></span>')}},{key:"renderBenefitCaraousel",value:function(){var a=document.querySelector(".slider-banners");$(".cycle-slideshow").html(""),this.APIData.program_details.banner_urls.map(function(e,t){return a.innerHTML+='\n        <img data-text="" style="width:100%;" src='+e+' style = "opacity: 0" alt="">'}),$(".slider-banners").cycle({slides:">img",fx:"scrollHorz",timeout:3e3,swipe:!0,"pause-on-hover":"true"})}}]),e}();fn_ll={getterLS:function(e){return null!==localStorage.getItem(e)&&void 0!==localStorage.getItem(e)?localStorage.getItem(e):""},getterSS:function(e){return null!==sessionStorage.getItem(e)&&void 0!==sessionStorage.getItem(e)?sessionStorage.getItem(e):""},loyalty_plan_name:"Licious Meatopia",loyalty_expired_plan:"",loyalty_selected_plan:"",loyalty_list:"",loyalty_cart_value:"",loyalty_delivery_charges:"",loyalty_saved_amount:"",loyalty_total_items:"",loyalty_copy_obj:{},notify_me_ana_obj:{city:"",hub_id:"",category_name:"",product_name:"",product_id:"",price:"",discount:"",user_type:"",total_orders:"",email_id:"",product_url:"",product_image_url:"",incoming_source:""},populateNotifyMeData:function(e){fn_ll.notify_me_ana_obj.city=fn_ll.getCityFromLS(),fn_ll.notify_me_ana_obj.hub_id=fn_ll.getHubFromLS(),fn_ll.notify_me_ana_obj.user_type=fn_ll.getUserTypeFromLS(),fn_ll.notify_me_ana_obj.total_orders=fn_ll.getTotalOrdersFromLS(),fn_ll.notify_me_ana_obj.email_id=fn_ll.getEmailFromLS(),fn_ll.notify_me_ana_obj.category_name=e.category_name,fn_ll.notify_me_ana_obj.product_name=e.product_name,fn_ll.notify_me_ana_obj.product_id=e.product_id,fn_ll.notify_me_ana_obj.price=e.price,fn_ll.notify_me_ana_obj.discount=e.discount,fn_ll.notify_me_ana_obj.product_url=e.product_url,fn_ll.notify_me_ana_obj.product_image_url=e.product_image_url,fn_ll.notify_me_ana_obj.incoming_source=e.incoming_source},checkElementInViewPort:function(e,t){var a=!(arguments.length<=1||void 0===t)&&t,o=e.getBoundingClientRect(),s=a?90:0;return""!==e.innerHTML.trim()&&0<=o.top-s&&0<=o.left&&o.right<=(window.innerWidth||document.documentElement.clientWidth)&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)},loyalty_banners_obj:{city:localStorage.getItem("city_name"),hub_id:localStorage.getItem("hub_id"),banner_url:"",position:"",banner_type:"",list:"",user_type:null!==localStorage.getItem("user_type")?localStorage.getItem("user_type"):"",logged_in:"",total_orders:null!==localStorage.getItem("total_orders")?localStorage.getItem("total_orders"):"",member_status:"",pr_totalsavedvalue:"",pr_totalorders:""},loyalty_landing_obj:{name:"",city:"",hub_id:"",total_plans:"",list:"",member_status:"",recommended_plan:"",user_type:"",logged_in:"",total_orders:""},loyalty_cart_obj:{cart_value:"",delivery_charge:"",total_items:"",saved_amount:""},qc_obj:{city:null!==localStorage.getItem("city_name")?localStorage.getItem("city_name"):"",hub_id:null!==localStorage.getItem("hub_id")?localStorage.getItem("hub_id"):"",user_type:null!==localStorage.getItem("user_type")?localStorage.getItem("user_type"):"",total_orders:null!==localStorage.getItem("total_orders")?localStorage.getItem("total_orders"):""},populateCartData:function(e){var t=e.products.length+e.exotic.length;fn_ll.loyalty_cart_obj.cart_value=e.cart_subtotal.toString(),fn_ll.loyalty_cart_obj.delivery_charge=e.shipping.toString(),fn_ll.loyalty_cart_obj.total_items=t.toString(),fn_ll.loyalty_cart_obj.saved_amount=e.loyalty_delivery_discount?e.loyalty_delivery_discount.toString():"0"},populateLoyaltyBannerData:function(e){fn_ll.loyalty_landing_obj.name=fn_ll.loyalty_plan_name,fn_ll.loyalty_banners_obj.banner_type=fn_ll.getLoyaltyBannerMemberType(e).bannerType,fn_ll.loyalty_banners_obj.logged_in=fn_ll.getLoginStatus(),fn_ll.loyalty_banners_obj.member_status=fn_ll.getLoyaltyBannerMemberType(e).memberType,fn_ll.loyalty_banners_obj.pr_totalsavedvalue=fn_ll.getSavingAndOrderCount(e).saved_value,fn_ll.loyalty_banners_obj.pr_totalorders=fn_ll.getSavingAndOrderCount(e).total_orders,fn_ll.loyalty_landing_obj.member_status=fn_ll.getLoyaltyBannerMemberType(e).memberType,fn_ll.loyalty_expired_plan=fn_ll.getExpiredPlanName(e)},getExpiredPlanName:function(e){return(null!==e.subscribed?e.subscribed.plan_name+", "+e.subscribed.strike_price+", "+e.subscribed.actual_price:"").toString()},populateLoyaltyLandingData:function(e){fn_ll.loyalty_landing_obj.name=fn_ll.loyalty_plan_name,fn_ll.loyalty_landing_obj.city=fn_ll.getCityFromLS(),fn_ll.loyalty_landing_obj.hub_id=fn_ll.getHubFromLS(),fn_ll.loyalty_landing_obj.total_plans=e.sub_programs.length.toString(),fn_ll.loyalty_landing_obj.user_type=fn_ll.getUserTypeFromLS(),fn_ll.loyalty_landing_obj.logged_in=fn_ll.getLoginStatus(),fn_ll.loyalty_landing_obj.recommended_plan=fn_ll.getRecommendedPlan(e),fn_ll.loyalty_landing_obj.total_orders=fn_ll.getTotalOrdersFromLS()},getRecommendedPlan:function(e){var t="";Array.isArray(e.sub_programs)&&0<e.sub_programs.length&&(t=(a=e.sub_programs[0]).name+", "+(a.price-a.discounted_price<=0?"0":" "+a.price)+",  "+a.discounted_price);var a,o=e.sub_programs.filter(function(e){return!0===e.is_recommended});return o.length&&(t=o[0].id.toString(),t=(a=o[0]).name+", "+(a.price-a.discounted_price<=0?"0":" "+a.price)+",  "+a.discounted_price),t.toString()},getSavedAndOrders:function(e){var t=0,a=0;return null!=e&&(t=e.order_count,a=e.total_saving),{order_count:t,total_saving:a}},getCityFromLS:function(){return null!==localStorage.getItem("city_name")&&void 0!==localStorage.getItem("city_name")?localStorage.getItem("city_name"):""},getEmailFromLS:function(){return null!==localStorage.getItem("user_email")&&void 0!==localStorage.getItem("user_email")?localStorage.getItem("user_email"):""},getHubFromLS:function(){return null!==localStorage.getItem("hub_id")&&void 0!==localStorage.getItem("hub_id")?localStorage.getItem("hub_id"):""},getUserTypeFromLS:function(){return null!==localStorage.getItem("user_type")&&void 0!==localStorage.getItem("user_type")?localStorage.getItem("user_type"):"visitor"},getTotalOrdersFromLS:function(){return null!==localStorage.getItem("total_orders")&&void 0!==localStorage.getItem("total_orders")?localStorage.getItem("total_orders"):""},getLoginStatus:function(){return null!=$(".customer_key_value.master").val()?"true":"false"},getMemberStatus:function(){return null!==$("#member_status").val()&&void 0!==$("#member_status").val()&&""!==$("#member_status").val()?$("#member_status").val():"non_member"},getPaytmBalance:function(){return null!==localStorage.getItem("paytm_amt")&&void 0!==localStorage.getItem("paytm_amt")?localStorage.getItem("paytm_amt"):""},getMemberDataForUserProfile:function(){var e=fn_ll.getMemberStatus().split(","),t="",a="",o="";return void 0!==e&&0<e.length&&("3"===e.length.toString()?(t=e[0],a=e[1],o=e[2]):t=e[0]),{member_status:t,start_date:a,end_date:o}},getSavingAndOrderCount:function(e){var t="0",a="0";return null!=e&&null!==e.subscribed&&void 0!==e.subscribed&&(t=e.subscribed.order_count.toString(),a=e.subscribed.total_saving.toString()),{saved_value:t,total_orders:a}},getLoyaltyBannerMemberType:function(e){var t="",a="",a=null!==e.non_subscribed&&void 0!==e.non_subscribed&&0<Object.keys(e.non_subscribed).length?(t="loyalty_nonmember","non-member"):fn_ll.validateLoyaltyExpiry(e)?(t="loyalty_renew","expired"):(t="loyalty_active","active");return{bannerType:t,memberType:a}},validateLoyaltyExpiry:function(e){var t=!1,a="";return null!=e&&null!==e.subscribed&&void 0!==e.subscribed&&null!==e.subscribed.is_expired&&void 0!==e.subscribed.is_expired&&(t=e.subscribed.is_expired,a=e.subscribed.plan_name+", "+e.subscribed.strike_price+", "+e.subscribed.actual_price),localStorage.setItem("loyalty_expired_plan",a),t},sendAnalyticsData:function(e,t,a){var o=!(arguments.length<=2||void 0===a)&&a,s={};switch(null!==t.source&&void 0!==t.source||(t.source="website"),e){case"notify_productOOS":s=Object.assign({},t);break;case"selectplan_loyaltycart":case"changeplan_loyaltycart":s=_extends({},fn_ll.loyalty_landing_obj,t);break;case"modifyplan_loyaltycart":delete fn_ll.loyalty_landing_obj.selected_plan,s=_extends({},fn_ll.loyalty_landing_obj,t);break;case"view_loyaltyhome":case"selectplan_loyaltyhome":case"readfaq_loyaltyhome":case"readtnc_loyaltyhome":case"get_loyalty":s=_extends({},fn_ll.loyalty_landing_obj,t);break;case"purchase_loyalty":case"retrypurchase_loyalty":case"member_activated":s=_extends({},t);break;case"modifyplan_loyalty":delete fn_ll.loyalty_landing_obj.selected_plan,s=_extends({},fn_ll.loyalty_landing_obj,t);break;case"changeplan_loyalty":s=Object.assign(fn_ll.loyalty_landing_obj,t);break;case"removeplan_loyaltyslot":case"removeplan_loyaltycart":s=_extends({},t);break;case"Banner":s=_extends({},t);case"cartbanner":s=_extends({},fn_ll.loyalty_banners_obj,t);case"member_activatedcart":s=Object.assign({},t);case"renewplan_loyalty":fn_ll.loyalty_copy_obj=fn_ll.loyalty_banners_obj,delete fn_ll.loyalty_copy_obj.banner_url,delete fn_ll.loyalty_copy_obj.position,s=_extends({},fn_ll.loyalty_copy_obj,t);break;case"confirmrenew_loyalty":s=_extends({},fn_ll.loyalty_landing_obj,t);break;case"BRANCH_ERR":case"BRANCH_CHARGED_EVENT":s=Object.assign({},t);break;case"fav_items_visited":case"past_order_visited":s=_extends({},fn_ll.qc_obj,t);break;default:s=Object.assign({},t)}o||clevertap.event.push(e,s),ga("send",{hitType:"event",eventCategory:t.source,eventAction:e,eventLabel:JSON.stringify(s)})}};var page_no=0,last_page=5,last_scroll_pos=0,param="homepage_widget",PastOrderFunctions=function(){function e(){_classCallCheck(this,e),this.past_order_data={}}return _createClass(e,[{key:"getReorderDetails",value:function(){return new Promise(function(o,e){fn_home.ajaxForm({},"GET","/reorder/get-reorder-details").done(function(e){var a,t=JSON.parse(e);200===t.statusCode&&(o(t),a="",Array.isArray(t.data)&&t.data.length&&(t.data.map(function(e){var t="favourite_items"===e.type?"favourite-items":"past-orders";a+="<a href = '/"+t+"?src="+param+'\'>\n                                  <div class="fav-items" id='+t+'>\n                                    <img class="icon" src="'+e.icon+'">\n                                    <div class="text-container">\n                                      <span class="header-text"> '+e.header_text+'</span>\n                                      <span class="placeholder-text">'+e.place_holder_text+'</span>\n                                    </div>\n                                    <img class="right-arrow" src="/img/down-arrow.png">\n                                  </div> \n                                </a>'}),document.querySelector(".reorder-placeholder").innerHTML='<div class="reorder-details">'+a+"</div>"))}).fail(function(){e("failed")})})}},{key:"getPastOrders",value:function(e){var l=this,o=arguments.length<=0||void 0===e?0:e;return new Promise(function(a,e){0==o&&fn_main.showloader(),fn_home.ajaxForm({page:o},"GET","/reorder/get-past-orders").done(function(e){try{var t=JSON.parse(e);200===t.statusCode&&(i=r="",last_page=t.data.page_count,document.querySelector(".header-text-container").innerHTML='<div class="header-title-desc">\n                                                                          <div class="header-text">'+t.data.info_title+'</div>\n                                                                          <div class="total-orders" id="total-orders-hide">('+t.data.info_badge+')</div>\n                                                                        </div>\n                                                                        <div class="header-desc">\n                                                                          <div class="description">'+t.data.info_message+'</div>\n                                                                          <div class="total-orders">('+t.data.info_badge+")</div>\n                                                                        </div>",Array.isArray(t.data.orders)&&0<t.data.orders.length&&t.data.orders.map(function(e){var t="rejected"!==(t=e.status.replace(/\s+/g,"-").toLowerCase())&&"delivered"!==t?"in-progress":t;r='<div class="order-details">\n                                        <div class="order-placed-details">\n                                          <div class="order-placed-date">Order placed: '+fn_main.formatDateandTime(e.created_at).day.toUpperCase()+'</div>\n                                          <div class="order-placed-time hide}">Time: '+fn_main.formatDateandTime(e.created_at).time.toLowerCase()+'</div>\n                                        </div>\n                                        <div class="order-shipment-details">\n                                          <div class="order-id hide}">Shipment ID: '+e.shipment_id+'</div>\n                                          <div class="order-process hide">\n                                              <img class="tick" src="/img/past-order-'+t+'.png">\n                                              <span class="order-process-text '+t+'">'+e.status+"</span>\n                                          </div>\n                                        </div>\n                                      </div>";var a="notify_me"===e.button_type.toLowerCase(),o=fn_home.validateCookieForProduct(e.shipment_id);l.productPayload(e,a);var s=!e.availability&&"repeat_order"==e.button_type,n='<div class="product-details">'+((n=l.renderProductsList(e.products,e.shipment_id,a,s))+('<div class="bottom-div">\n                              '+(a||s?"":'<img class="scooter-img" src="/img/express_delivery.svg">')+'\n                              <div class="availability-text '+(a||s?o?"notified":"oos":"")+'">'+(o&&(a||s)?fn_home.getNotifiedMsg():e.slot_message)+"</div>\n                              "+(a?o?'<div class="notify-me-btn notified"':'<div class="notify-me-btn"':s?'<div class="reorder-btn disabled"':'<div class="reorder-btn"')+' data-ship-id="'+e.shipment_id+'">'+(a?o?'<img src="/img/tick_symbol.svg" class="alarm">':'<img src="/img/alarm.svg" class="alarm">':"")+e.button_text+"</div>\n                            </div>"))+"</div>";i+='<div class="order-tile" data-ship-id="'+e.shipment_id+'">'+(r+n)+"</div>"}),0<o?($(".order-section").append(i),$(".header-text-container").addClass("squeezed"),$(".header-text-container").find(".header-desc").hide(),$(".header-text-container").find("#total-orders-hide").show()):document.querySelector(".order-section").innerHTML=i,$(".order-section").find(".cart-btn-add").unbind("click"),$(".order-section").find(".cart-btn-delete").unbind("click"),$(".reorder-btn").unbind("click"),$(".notify-me-btn").unbind("click"),$(".cta .confirm").unbind("click"),$(".cta .cancel").unbind("click"),$(".order-section").find(".cart-btn-add").on("click",function(e){e.stopImmediatePropagation();var t=e.target;l.modifyProductQuantity.call(l,t,"add")}),$(".order-section").find(".cart-btn-delete").on("click",function(e){e.stopImmediatePropagation();var t=e.target;l.modifyProductQuantity.call(l,t,"delete")}),$(".reorder-btn").on("click",function(e){e.stopImmediatePropagation();var t=e.target;l.repeatOrder.call(l,t)}),$(".notify-me-btn").on("click",function(e){e.stopImmediatePropagation();var t=e.target;l.notifyOrder.call(l,t)}),$(".cta .confirm").on("click",function(e){e.stopImmediatePropagation();var t=e.target;""!==t.getAttribute("data-ship-id")&&void 0!==t.getAttribute("data-ship-id")&&null!==t.getAttribute("data-ship-id")&&(fn_main.showloader(),e.stopPropagation(),$(".li-alert-screen").removeClass("show"),fn_main.clearCart().then(function(){$(".profile-cart").find(".new-cart-count").removeClass("loaded"),l.repeatOrder.call(l,t)}))}),$(".cta .cancel").on("click",function(e){e.stopImmediatePropagation();var t=e.target.getAttribute("data-action");$(".li-alert-screen").removeClass("show"),"repeat-order"===t&&fn_cart.miniCart()})),a(t)}catch(e){console.log(e),fn_main.hideloader(),Materialize.toast("Something went wrong. please try refreshing the page",4e3)}var r,i}).fail(function(){e("failed")}).always(function(){fn_main.hideloader()})})}},{key:"getDiscountedPrice",value:function(e){return e.product_pricing.base_price-Math.round(e.product_pricing.base_price*e.product_pricing.base_discount/100)}},{key:"getAvailableQty",value:function(e){var t=e.product_inventory,a=t.available_qt,o=t.pre_ordered_quantity,s=t.stock_units;return a||(s<o?s:o)}},{key:"renderProductsList",value:function(e,n,r,i){var l=this,d="";if(Array.isArray(e)&&0<e.length)return e.map(function(e){var t=l.getDiscountedPrice(e),a=e.product_inventory.stock_units<=0&&!r,o=e.product_inventory.pre_ordered_quantity>e.product_inventory.stock_units&&0<e.product_inventory.stock_units,s=!(a||r||i);d+='\n                      <div class="single-product'+(a&&!i?" unavailable":o?" reduce-qty":"")+'">\n                        <div class="unavailability-text'+(a&&!i?" show":o?" reduce-qty":"")+'">'+e.product_inventory.unavailable_msg+'</div>\n                        <img class="product-image" src="'+e.product_merchantdising.pr_image+'" data-prod-url="/'+e.product_master.cat_slug+"/"+e.product_master.slug+'">\n                        <div class="product-desc">\n                          <div class="product-name" data-cat-name="'+e.product_master.cat_slug+'">'+e.product_master.pr_name+'</div>\n                          <div class="product-price">\n                            <div class="product-wt">'+("Unit"!==e.product_master.uom?e.product_master.pr_weight:e.product_master.pr_weight+" Pieces")+'</div>\n                            <div class="separator"></div>\n                            <div class="product-disc-price" data-base-price="'+e.product_pricing.base_price+'" data-discount="'+(e.product_pricing.base_price-t)+'" >'+t+'</div>\n                            <div class="product-actual-price">'+(0<e.product_pricing.base_price-t?""+e.product_pricing.base_price:"")+'</div>\n                          </div>\n                        </div>\n                        <div class="product-qty" data-product-id="'+e.product_master.product_id+'" data-count="'+l.getAvailableQty(e)+'" data-stock-units="'+e.product_inventory.stock_units+'" data-preordered-qt="'+e.product_inventory.pre_ordered_quantity+'" data-shipment-id="'+n+'">\n                          '+(s?'<div class="cart-btn-delete'+(1===e.product_inventory.pre_ordered_quantity?" disabled":"")+'">-</div>\n                          <span class="product-count"> '+l.getAvailableQty(e)+' </span>\n                          <div class="cart-btn-add '+(e.product_inventory.pre_ordered_quantity>=e.product_inventory.stock_units?" disabled":"")+'">+</div>':'<div class="qty-text">Qty: '+e.product_inventory.pre_ordered_quantity+"</div>")+"\n                        </div>\n                      </div>\n                    "}),d}},{key:"productPayload",value:function(t,a){var o=this;this.past_order_data[t.shipment_id]=[],t.products.map(function(e){a?o.past_order_data[t.shipment_id].push({customer_key:$(".customer_key_value").attr("data-custkey"),phone_no:parseInt($(".user_mobile").val()),hub_id:parseInt($(".hubId_main").val()),product_id:e.product_master.product_id}):0!==e.product_inventory.stock_units&&o.past_order_data[t.shipment_id].push({product_id:e.product_master.product_id,quantity:o.getAvailableQty(e)})})}},{key:"modifyProductPayload",value:function(e,t,a){for(var o=this.past_order_data,s=0;s<o[e].length;s++)if(o[e][s].product_id===t){"add"===a?o[e][s].quantity+=1:--o[e][s].quantity,this.past_order_data=o;break}}},{key:"modifyProductQuantity",value:function(e,t){var a=e.parentElement.getAttribute("data-shipment-id"),o=e.parentElement.getAttribute("data-product-id"),s=parseInt(e.parentElement.getAttribute("data-stock-units")),n=parseInt(e.parentElement.getAttribute("data-count"));"add"===t?n<s?(n+=1,e.parentElement.querySelector(".product-count").innerHTML=n,e.parentElement.setAttribute("data-count",n),this.modifyProductPayload(a,o,t),e.parentElement.firstElementChild.classList.remove("disabled"),n===s&&e.classList.add("disabled")):Materialize.toast("Only "+s+" unit"+(1<s?"s ":" ")+"left",3e3):1<n&&(--n,e.parentElement.querySelector(".product-count").innerHTML=n,e.parentElement.setAttribute("data-count",n),this.modifyProductPayload(a,o,t),e.parentElement.lastElementChild.classList.remove("disabled"),1===n&&e.classList.add("disabled"))}},{key:"repeatOrder",value:function(e){var s=this,n=e.getAttribute("data-ship-id"),t=this.past_order_data[n];return fn_main.showloader(),new Promise(function(o,e){fn_home.ajaxForm({products:t,flow_key:0},"POST","/reorder/update-cart-reorder").done(function(e){var t,a=JSON.parse(e);"success"===a.status.toLowerCase()?(a.hasOwnProperty("button_content")?(t=a.info_msg+"text-separator"+a.title_msg+"text-separator"+n,fn_checkout.alertBox(t,"","repeat-order")):(fn_home.quickCheckout(),s.addtoCartEvent(a)),o(a)):400===a.responseCode&&"error"===a.status&&(fn_checkout.alertBox(a.message,"","oos"),$(".quick-checkout").removeClass("fade-in"))}).fail(function(){e("failed")}).always(function(){fn_main.hideloader()})})}},{key:"notifyOrder",value:function(e){var t=e.getAttribute("data-ship-id"),a={customers:this.past_order_data[t]};fn_home.setNotification("",a,e,!1)}},{key:"handlePagination",value:function(){var e=this,t=$(document).scrollTop();last_scroll_pos<t&&$(window).scrollTop()>=$(".order-section").offset().top+$(".order-section").outerHeight()-window.innerHeight&&(++page_no<last_page&&($(".order-section").append('<div class="search-loader-div"><img src="/img/qc-loader.gif" class="search-loader"></div>'),$(window).unbind("scroll"),this.getPastOrders(page_no).then(function(){$(".order-section").find(".search-loader-div").remove(),$("html, body").animate({scrollTop:"+=150"},400),$(window).on("scroll",function(){fn_main.throttle(e.handlePagination(),3e3)})})))}},{key:"addtoCartEvent",value:function(s){s.total,fn_ll.getCityFromLS(),fn_ll.getHubFromLS();s.product.map(function(e,t){var a=t!=s.product.length-1?",":"";e.product_name,e.quantity;var o={"Product ID":e.product_id,"Product Name":e.product_name,Price:Number(e.base_price),Quantity:Number(e.quantity),incoming_source:"past_order","Category ID":e.category_id,Checkout_Flow:"quick_checkout"};clevertap.event.push("Added to Cart",o),fn_home.sendBranchEvent("add_to_cart",e)})}}]),e}(),FavouriteItems=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getFavouriteItems",value:function(e){var a=this,o=arguments.length<=0||void 0===e?"onPageLoad":e;fn_main.showloader();var t="onPageLoad"!==o?{filter:o}:{};fn_home.ajaxForm(t,"GET","/get-fav-items").done(function(e){try{var t=JSON.parse(e);fn_main.hideloader(),200===t.statusCode&&0<t.data.products.length&&($(".filters-div").html(""),t.data.filters.map(function(e){var t=e.type===o||"onPageLoad"===o&&e.is_default?'<div class="filter selected" data-type="'+e.type+'">'+e.title+"</div>":e.is_enabled?'<div class="filter" data-type="'+e.type+'">'+e.title+"</div>":'<div>\n                          <div class="filter disabled" data-type="'+e.type+'">'+e.title+'</div>\n                          <span class="disabled-msg">'+e.disabled_msg+"</span>\n                      </div>";$(".filters-div").append(t)}),$(".filter").click(function(e){a.getFavouriteItems(e.target.dataset.type)}),$(".fav-item-count").html("("+(1===t.data.products.length?"1 item":t.data.products.length+" items")+")"),$(".deals.product-list  .item-slider").html(""),9<t.data.products.length?$(".fav-view-btn").html("View all").attr("data-action","all").show():$(".fav-view-btn").hide(),$.each(t.data.products,function(e,t){var a=(t.product_pricing.base_discount,0<t.product_pricing.base_discount?"show":"hide"),o="favorite_items",s=t.product_master.cat_slug,n=fn_home.renderActionButtonandClusterMessage(t,o,"favourites-notify-me",e),r=n.actionButton,i=n.productMessageDiv,l=t.product_merchantdising.recommended?'<div class="recommended-label">RECOMMENDED</div>':"",d='<a  href="/'+t.product_master.cat_slug+"/"+t.product_master.slug+'"  data-text="'+t.product_merchantdising.merchandise_name+'" data-index="'+e+'">'+'<div class="favourites-page-card card '+(8<e?"hide-prod":"")+'" data-prod="'+t.product_master.product_id+'" data-cat="'+t.product_master.cat_slug+'"><div class="item-img"><img src="'+t.product_merchantdising.pr_image+'" alt="" class="product-image">'+l+'<div class="item-details">'+fn_home.getItemName(t.product_merchantdising.merchandise_name)+fn_home.getProductWeightDetails(t,s)+'<div class="item-action"><div class="rate">'+fn_home.getMrpText(a,t)+'</div><div class="action"><div class="action-slider">'+r+"<p>"+fn_home.getPlusandMinusButtons(t,o,e)+"</p></p></div></div></div></div></div>"+i+"</a>";$(".deals.product-list  .item-slider").append(d)}),fn_home.bindNotifyMeButton(".favourites-notify-me")),$(".favourites-page-card").on("click",function(e){var t=$(this).data("cat");null!=t&&null!=t&&""!=t&&"undefined"!=t&&"null"!=t||(e.preventDefault(),e.stopImmediatePropogation())}),fn_home.getCart(),fn_home.addcart("favourites",t.data.title),fn_home.removecart("favourites")}catch(e){console.log(e),fn_main.hideloader(),Materialize.toast("Something went wrong. please try refreshing the page",4e3)}}).fail(function(){fn_main.hideloader(),Materialize.toast("Something went wrong. please try refreshing the page",4e3)})}}]),e}();SearchObject={timerId:"",outOfStock:!1,pageNo:1,noOfResults:0,productIndex:0,debounce:function(e,t){clearTimeout(SearchObject.timerId),SearchObject.timerId=setTimeout(e,t)},makeSearchAPICall:function(){var e=encodeURIComponent($(".search-input").val()),s=$(".search-input").val();$(".initial-search-loader").show(),fn_home.ajaxForm({},"GET","/search/fetch-search-results?queryString="+e+"&pageNo=1&perPage=22").done(function(e){var t,a=JSON.parse(e),o={city:localStorage.getItem("city_name"),hub:localStorage.getItem("hub_id"),user_type:localStorage.getItem("user_type"),customer_key:$(".customer_key").val(),page_name:"search_page",search_string:"",no_of_results:"0"};""!==$(".search-input").val()&&2<$(".search-input").val().length&&$(".search-input").val()===s&&($(".initial-search-loader").hide(),o.search_string=$(".search-input").val(),a.status&&a.searchEntities&&a.searchEntities.length?(o.no_of_results=a.numOfRecords,SearchObject.noOfResults=a.numOfRecords,t=SearchObject.populateSectionTitle(a.searchEntities.length,"Search Results")+'\n                          <div class="search-result-body">\n                            '+SearchObject.populateSearchResults(a.searchEntities)+"\n                          </div>",$(".search-results").html(t),fn_home&&fn_home.getAllDOMImages(),$(".explore-category-section").hide(),$(".search-results").show(),$(".body-content").css("overflow-y","hidden"),$(".search-result-body").css("overflow-y","scroll"),SearchObject.outOfStock&&fn_home.bindNotifyMeButton(".search-notify-me"),SearchObject.loadMoreOnScrollEnd(),SearchObject.bindProductOnClick(),fn_home.getCart(),fn_home.addcart("search_result","Search Page"),fn_home.removecart("search_result")):(SearchObject.renderNoProductFoundIllustration(),$(".search-results").show(),$(".explore-category-section").show(),$(".search-result-body").css("overflow-y","hidden"),$(".body-content").css("overflow-y","scroll")),clevertap.event.push("search_triggered",o))}).fail(function(){SearchObject.timerId||$(".initial-search-loader").hide()}).always(function(){SearchObject.timerId||$(".initial-search-loader").hide()})},loadMoreOnScrollEnd:function(){var a=!0;$(".search-result-body").on("scroll",function(){var e;$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&a&&(SearchObject.pageNo+=1,a=!1,$(".search-loader-div").length||$(".search-result-body").append('<div class="search-loader-div"><img src="/img/qc-loader.gif" class="search-loader"></div>'),e=encodeURIComponent($(".search-input").val()),fn_home.ajaxForm({},"GET","/search/fetch-search-results?queryString="+e+"&pageNo="+SearchObject.pageNo+"&perPage=22").done(function(e){var t=JSON.parse(e);t.status&&t.searchEntities&&t.searchEntities.length?($(".search-loader-div").remove(),SearchObject.outOfStock=!1,$(".search-result-body").append(SearchObject.populateSearchResults(t.searchEntities)),fn_home&&fn_home.getAllDOMImages(),SearchObject.bindProductOnClick(),fn_home.getCart(),$(".addCartBtn-home").unbind("click"),$(".add-one").unbind("click"),$(".remove-one").unbind("click"),SearchObject.outOfStock&&fn_home.bindNotifyMeButton(".search-notify-me"),fn_home.addcart("search_result","Search Page"),fn_home.removecart("search_result")):($(".search-loader-div").html('<div class="search-end"></div>'),$(".search-result-body").unbind("scroll")),a=!0}).fail(function(){}).always(function(){}))})},bindProductOnClick:function(){$(".product-click-container").unbind("click"),$(".product-click-container").on("click",function(e){var t={search_string:$(".search-input").val(),no_of_results:String(SearchObject.noOfResults),item_postion:String($(this).data("position")),product_name:$(this).data("text"),product_id:$(this).parent().data("prod"),city:localStorage.getItem("city_name"),hub:localStorage.getItem("hub_id"),user_type:localStorage.getItem("user_type"),customer_key:$(".customer_key").val(),page_name:"Search Page"};clevertap.event.push("search_result_clicked",t),window.location.href=$(this).data("url"),$(".search-input").val(""),console.log("clicked")})},renderNoProductFoundIllustration:function(){var e=SearchObject.populateSectionTitle(0,"Search Results")+'\n                      <div class="search-result-body">\n                        <div class="no-prod-found-container">\n                          <img class="no-prod-found-illustration" data-lazy="/img/no_prod_found_illustration.svg">\n                          <div class="no-prod-found-message">Oops, we couldnt find any search results</div>\n                          <div class="no-prod-found-suggestion">\n                            Try refining your search or explore from the below suggestions\n                          </div>\n                        </div>\n                      </div>';$(".search-results").html(e),fn_home&&fn_home.getAllDOMImages()},populateExploreCategorySection:function(){fn_home.ajaxForm({},"POST","/home_page/get-explore-home").done(function(e){var t;"success"==(e=JSON.parse(e)).status?(t=" "+SearchObject.populateSectionTitle(e.data.length,e.title)+'\n                          <div class="s-exp-categories">\n                            '+SearchObject.populateCategoryList(e.data)+"\n                          </div>",$(".explore-category-section").html(t)):$(".explore-category-section").hide(),fn_home&&fn_home.getAllDOMImages()}).always(function(){})},populateSectionTitle:function(e,t){return'<div class="section-header">\n                            <span class="section-title">'+t+'</span>\n                            <span class="count">'+(20<e?"20+":e)+"</span>\n                          </div>"},populateCategoryList:function(e){var a="";return noOfCatPerRow=10<e.length?e.length%8==0||e.length%8==7?8:e.length%7==0||e.length%7==6?7:6:e.length%5==0?5:e.length%4==0?4:3,$.each(e,function(e,t){a+=(e%noOfCatPerRow==0?'<ul class="categories">':"")+'\n                    <li>\n                      <a href="/'+t.slug+'" class="enabled">\n                        <img class="cat-icon" data-lazy="'+t.web_icon+'" icon-active="'+t.web_icon_active+'">\n                        '+t.cat_name+"\n                      </a>\n                    </li>\n                  "+((e+1)%noOfCatPerRow==0?"</ul>":"")+"\n                  "}),a},populateSearchResults:function(e){var d="";return $.each(e,function(e,t){try{var a='<div class="product-click-container"  data-url="/'+t.categoryDetails.slug+"/"+t.item_slug+'"  \n                              data-text="'+t.merchandise_name+'" data-position="'+(SearchObject.productIndex+1)+'">',o=0<t.productPricing.base_discount,s="",n="",r=t.productMerchantdising.is_combo,i="",n=0<t.productInventory.stock_units?2===t.productInventory.slot_available?(i="hide",s='<button class="add-to-cart addCartBtn-home disabled" data-cat = "'+t.categoryDetails.slug+'" \n                                    data-amt="'+SearchObject.discountedPrice(t.productPricing.base_price,t.productPricing.base_discount)+'"\n                                    data-text="'+t.merchandise_name+'" data-index="'+SearchObject.productIndex+'"\n                                    data-prid="'+t.item_id+'" data-qty="'+t.productInventory.stock_units+'">\n                              Add To Cart\n                            </button>','<div class="product-message oos">\n                                  '+t.productInventory.slot_custom_message+"\n                                </div>"):(s='<button class="add-to-cart addCartBtn-home" data-cat = "'+t.categoryDetails.slug+'" \n                                    data-amt="'+SearchObject.discountedPrice(t.productPricing.base_price,t.productPricing.base_discount)+'"\n                                    data-text="'+t.merchandise_name+'" data-index="'+SearchObject.productIndex+'"\n                                    data-prid="'+t.item_id+'" data-qty="'+t.productInventory.stock_units+'">\n                              Add To Cart\n                            </button>','<div class="product-message no-message"></div>'):(i="hide",fn_home.validateCookieForProduct(t.item_id)?(s='<button type="button" data-pr-id="'+t.item_id+'"\n                                    class="search-notify-me notify-me notified">\n                              <img data-lazy="/img/tick_symbol.svg" class="alarm"/>\n                              <span class="notify-me-text">NOTIFY ME</span>\n                            </button>','<div class="product-message notified">\n                                  '+(localStorage.getItem("notified-msg")?localStorage.getItem("notified-msg"):"Once available, you will be notified")+"\n                                </div>"):(SearchObject.outOfStock=!0,s='<button type="button" data-price="'+t.productPricing.base_price+'"\n                                    data-discount="'+SearchObject.discountedPrice(t.productPricing.base_price,t.productPricing.base_discount)+'"\n                                    data-cat="'+t.categoryDetails.slug+'" data-pr-id="'+t.item_id+'"\n                                    class="search-notify-me notify-me">\n                              <img data-lazy="/img/alarm.svg" class="alarm"/>\n                              <span class="notify-me-text">NOTIFY ME</span>\n                            </button>','<div class="product-message oos">\n                                  '+(t.productInventory.next_available_by?t.productInventory.next_available_by:"Out of Stock")+"\n                                </div>")),l=t.productInventory.product_delivery_type&&"express"===t.productInventory.product_delivery_type.toLowerCase()||t.productInventory.live_inventory_at_source?"/img/express_delivery.svg":"/img/scheduled_delivery.svg";productCard=' <div class="search-item" data-prod="'+t.item_id+'">\n                            '+a+'\n                              <div class="product-card">\n                                <img class="product-img" data-lazy="'+t.item_image+'" alt="">\n                                <div class="product-info">\n                                  <div class="product-name-description">\n                                    '+t.merchandise_name+" \n                                    "+(t.productMerchantdising.no_of_piceces&&"N/A"!==t.productMerchantdising.no_of_piceces&&"Unit"!==t.uom?" | "+t.productMerchantdising.no_of_piceces+" pieces":"")+'\n                                  </div>\n                                  <div class="weight-price-action">\n                                    <div class="weight-price">\n                                      <span class="weight">'+(r?'<span style="font-weight: bold">COMBO</span>':t.pr_weight+("Unit"===t.uom?" pieces":""))+'</span>\n                                      <div class="weight-price-separator"></div>\n                                      <div class="price">\n                                        '+SearchObject.getMRPText(o,t.productPricing)+'\n                                      </div>\n                                    </div>\n                                    <div class="del-icon-action">\n                                      <img class="del-icon '+i+'" data-lazy='+l+'>\n                                      <div class="action">\n                                        <div class="action-slider">\n                                          '+s+'\n                                          <p>\n                                            <span class = "cart-btns remove-one"data-cat = "'+t.categoryDetails.slug+'" \n                                                  data-prid="'+t.item_id+'" data-qty="'+t.productInventory.stock_units+'" \n                                                  data-amt="'+SearchObject.discountedPrice(t.productPricing.base_price,t.productPricing.base_discount)+'" \n                                                  data-index="'+SearchObject.productIndex+'" data-text="'+t.merchandise_name+'">\n                                            </span>\n                                            <span class = "item-qty">0</span>\n                                            <span class = "cart-btns add-one '+(2===t.productInventory.slot_available?"disabled":"")+'"\n                                                  data-cat = "'+t.categoryDetails.slug+'" \n                                                  data-prid="'+t.item_id+'" data-qty="'+t.productInventory.stock_units+'" \n                                                  data-amt="'+SearchObject.discountedPrice(t.productPricing.base_price,t.productPricing.base_discount)+'" \n                                                  data-index="'+SearchObject.productIndex+'" data-text="'+t.merchandise_name+'">\n                                            </span>\n                                          </p>\n                                        </div>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                            '+n+"\n                          </div>\n                      ",d+=productCard,SearchObject.productIndex++}catch(e){console.log(e)}}),d},getMRPText:function(e,t){return e?'<span class="selling-price">&#8377;'+SearchObject.discountedPrice(t.base_price,t.base_discount)+'</span>\n               <span class="marked-price">&#8377;'+t.base_price+"</span>":'<span class="selling-price">&#8377;'+t.base_price+"</span>"},discountedPrice:function(e,t){return Math.round(e-e*t/100)}};